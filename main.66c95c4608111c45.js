"use strict";(self.webpackChunkMyCV_01=self.webpackChunkMyCV_01||[]).push([[179],{2011:(Gn,Rt,Q)=>{Q.d(Rt,{Dh:()=>Je,GT:()=>gt,cc:()=>$t,hO:()=>sn,on:()=>Ie,pX:()=>ct,xv:()=>Et});var m=Q(4650),de=Q(9260),se=Q(2198);Gn=Q.hmd(Gn);const st=["ngOnDestroy"],ct=(Dt,At,Nt,kt={})=>new Proxy(Dt,{get:(Ot,Pt)=>Nt.runOutsideAngular(()=>{var Qt;if(Dt[Pt])return!(null===(Qt=kt?.spy)||void 0===Qt)&&Qt.get&&kt.spy.get(Pt,Dt[Pt]),Dt[Pt];if(st.indexOf(Pt)>-1)return()=>{};const Le=At.toPromise().then(et=>{const yt=et&&et[Pt];return"function"==typeof yt?yt.bind(et):yt&&yt.then?yt.then(Pe=>Nt.run(()=>Pe)):Nt.run(()=>yt)});return new Proxy(()=>{},{get:(et,yt)=>Le[yt],apply:(et,yt,Pe)=>Le.then(Se=>{var nt;const We=Se&&Se(...Pe);return!(null===(nt=kt?.spy)||void 0===nt)&&nt.apply&&kt.spy.apply(Pt,Pe,We),We})})})}),gt=(Dt,At)=>{At.forEach(Nt=>{Object.getOwnPropertyNames(Nt.prototype||Nt).forEach(kt=>{Object.defineProperty(Dt.prototype,kt,Object.getOwnPropertyDescriptor(Nt.prototype||Nt,kt))})})};class ht{constructor(At){return At}}const Je=new m.OlP("angularfire2.app.options"),Et=new m.OlP("angularfire2.app.name");function Ie(Dt,At,Nt){const Ot="object"==typeof Nt&&Nt||{};Ot.name=Ot.name||"string"==typeof Nt&&Nt||"[DEFAULT]";const Qt=de.Z.apps.filter(Le=>Le&&Le.name===Ot.name)[0]||At.runOutsideAngular(()=>de.Z.initializeApp(Dt,Ot));try{JSON.stringify(Dt)!==JSON.stringify(Qt.options)&&we("error",`${Qt.name} Firebase App already initialized with different options${Gn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ht(Qt)}const we=(Dt,...At)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Dt](...At)},Fe={provide:ht,useFactory:Ie,deps:[Je,m.R0b,[new m.FiY,Et]]};let sn=(()=>{class Dt{constructor(Nt){de.Z.registerVersion("angularfire",se.q4.full,"core"),de.Z.registerVersion("angularfire",se.q4.full,"app-compat"),de.Z.registerVersion("angular",m.q4F.full,Nt.toString())}static initializeApp(Nt,kt){return{ngModule:Dt,providers:[{provide:Je,useValue:Nt},{provide:Et,useValue:kt}]}}}return Dt.\u0275fac=function(Nt){return new(Nt||Dt)(m.LFG(m.Lbi))},Dt.\u0275mod=m.oAB({type:Dt}),Dt.\u0275inj=m.cJS({providers:[Fe]}),Dt})();function $t(Dt,At,Nt,kt,Ot){const[,Pt,Qt]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Dt)||[];if(Pt)return function er(Dt,At){try{return Dt.toString()===At.toString()}catch{return Dt===At}}(Ot,Qt)||(ze("error",`${At} was already initialized on the ${Nt} Firebase App with different settings.${Yt?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Ot,was:Qt})),Pt;{const Le=kt();return globalThis.\u0275AngularfireInstanceCache.push([Dt,Le,Ot]),Le}}const Yt=!!Gn.hot,ze=(Dt,...At)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Dt](...At)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2198:(Gn,Rt,Q)=>{Q.d(Rt,{q4:()=>Ee,iC:()=>rc,fc:()=>Fc,HU:()=>Is,vb:()=>vr,JM:()=>Tn,n1:()=>mo,_J:()=>Mi,u3:()=>$l});var m=Q(4650),de=Q(259),se=Q(4880),st=Q(751),ct=Q(5861),gt=Q(9681),ht=Q(1877),Je=Q(2090),Et=Q(4859);Q(2833);const we="analytics",Fe="firebase_id",er="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yt="https://www.googletagmanager.com/gtag/js",ze=new ht.Yd("@firebase/analytics");function Dt(Ae){return Promise.all(Ae.map(lt=>lt.catch(ft=>ft)))}function At(Ae,lt){const ft=document.createElement("script");ft.src=`${Yt}?l=${Ae}&id=${lt}`,ft.async=!0,document.head.appendChild(ft)}function kt(Ae,lt,ft,Ft,en,hn){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,ct.Z)(function*(Ae,lt,ft,Ft,en,hn){const mn=Ft[en];try{if(mn)yield lt[mn];else{const br=(yield Dt(ft)).find(ci=>ci.measurementId===en);br&&(yield lt[br.appId])}}catch(xr){ze.error(xr)}Ae("config",en,hn)})).apply(this,arguments)}function Pt(Ae,lt,ft,Ft,en){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,ct.Z)(function*(Ae,lt,ft,Ft,en){try{let hn=[];if(en&&en.send_to){let mn=en.send_to;Array.isArray(mn)||(mn=[mn]);const xr=yield Dt(ft);for(const br of mn){const ci=xr.find(qo=>qo.measurementId===br),So=ci&&lt[ci.appId];if(!So){hn=[];break}hn.push(So)}}0===hn.length&&(hn=Object.values(lt)),yield Promise.all(hn),Ae("event",Ft,en||{})}catch(hn){ze.error(hn)}})).apply(this,arguments)}function yt(Ae){const lt=window.document.getElementsByTagName("script");for(const ft of Object.values(lt))if(ft.src&&ft.src.includes(Yt)&&ft.src.includes(Ae))return ft;return null}const Se=new Je.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vt=new class qt{constructor(lt={},ft=1e3){this.throttleMetadata=lt,this.intervalMillis=ft}getThrottleMetadata(lt){return this.throttleMetadata[lt]}setThrottleMetadata(lt,ft){this.throttleMetadata[lt]=ft}deleteThrottleMetadata(lt){delete this.throttleMetadata[lt]}};function Vn(Ae){return new Headers({Accept:"application/json","x-goog-api-key":Ae})}function Nr(Ae){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,ct.Z)(function*(Ae){var lt;const{appId:ft,apiKey:Ft}=Ae,en={method:"GET",headers:Vn(Ft)},hn=er.replace("{app-id}",ft),mn=yield fetch(hn,en);if(200!==mn.status&&304!==mn.status){let xr="";try{const br=yield mn.json();null!==(lt=br.error)&&void 0!==lt&&lt.message&&(xr=br.error.message)}catch{}throw Se.create("config-fetch-failed",{httpStatus:mn.status,responseMessage:xr})}return mn.json()})).apply(this,arguments)}function Kn(Ae){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,ct.Z)(function*(Ae,lt=Vt,ft){const{appId:Ft,apiKey:en,measurementId:hn}=Ae.options;if(!Ft)throw Se.create("no-app-id");if(!en){if(hn)return{measurementId:hn,appId:Ft};throw Se.create("no-api-key")}const mn=lt.getThrottleMetadata(Ft)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xr=new Cn;return setTimeout((0,ct.Z)(function*(){xr.abort()}),void 0!==ft?ft:6e4),Xn({appId:Ft,apiKey:en,measurementId:hn},mn,xr,lt)})).apply(this,arguments)}function Xn(Ae,lt,ft){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,ct.Z)(function*(Ae,{throttleEndTimeMillis:lt,backoffCount:ft},Ft,en=Vt){var hn;const{appId:mn,measurementId:xr}=Ae;try{yield Di(Ft,lt)}catch(br){if(xr)return ze.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xr} provided in the "measurementId" field in the local Firebase config. [${br?.message}]`),{appId:mn,measurementId:xr};throw br}try{const br=yield Nr(Ae);return en.deleteThrottleMetadata(mn),br}catch(br){const ci=br;if(!ir(ci)){if(en.deleteThrottleMetadata(mn),xr)return ze.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xr} provided in the "measurementId" field in the local Firebase config. [${ci?.message}]`),{appId:mn,measurementId:xr};throw br}const So=503===Number(null===(hn=ci?.customData)||void 0===hn?void 0:hn.httpStatus)?(0,Je.$s)(ft,en.intervalMillis,30):(0,Je.$s)(ft,en.intervalMillis),qo={throttleEndTimeMillis:Date.now()+So,backoffCount:ft+1};return en.setThrottleMetadata(mn,qo),ze.debug(`Calling attemptFetch again in ${So} millis`),Xn(Ae,qo,Ft,en)}})).apply(this,arguments)}function Di(Ae,lt){return new Promise((ft,Ft)=>{const en=Math.max(lt-Date.now(),0),hn=setTimeout(ft,en);Ae.addEventListener(()=>{clearTimeout(hn),Ft(Se.create("fetch-throttle",{throttleEndTimeMillis:lt}))})})}function ir(Ae){if(!(Ae instanceof Je.ZR&&Ae.customData))return!1;const lt=Number(Ae.customData.httpStatus);return 429===lt||500===lt||503===lt||504===lt}class Cn{constructor(){this.listeners=[]}addEventListener(lt){this.listeners.push(lt)}abort(){this.listeners.forEach(lt=>lt())}}let es,Mt;function gs(){return(gs=(0,ct.Z)(function*(Ae,lt,ft,Ft,en){if(en&&en.global)Ae("event",ft,Ft);else{const hn=yield lt;Ae("event",ft,Object.assign(Object.assign({},Ft),{send_to:hn}))}})).apply(this,arguments)}function bt(Ae){Mt=Ae}function Ln(Ae){es=Ae}function lr(){return mr.apply(this,arguments)}function mr(){return(mr=(0,ct.Z)(function*(){if(!(0,Je.hl)())return ze.warn(Se.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Je.eu)()}catch(Ae){return ze.warn(Se.create("indexeddb-unavailable",{errorInfo:Ae?.toString()}).message),!1}return!0})).apply(this,arguments)}function ni(){return(ni=(0,ct.Z)(function*(Ae,lt,ft,Ft,en,hn,mn){var xr;const br=Kn(Ae);br.then(Fi=>{ft[Fi.measurementId]=Fi.appId,Ae.options.measurementId&&Fi.measurementId!==Ae.options.measurementId&&ze.warn(`The measurement ID in the local Firebase config (${Ae.options.measurementId}) does not match the measurement ID fetched from the server (${Fi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Fi=>ze.error(Fi)),lt.push(br);const ci=lr().then(Fi=>{if(Fi)return Ft.getId()}),[So,qo]=yield Promise.all([br,ci]);yt(hn)||At(hn,So.measurementId),Mt&&(en("consent","default",Mt),bt(void 0)),en("js",new Date);const Ua=null!==(xr=mn?.config)&&void 0!==xr?xr:{};return Ua.origin="firebase",Ua.update=!0,null!=qo&&(Ua[Fe]=qo),en("config",So.measurementId,Ua),es&&(en("set",es),Ln(void 0)),So.measurementId})).apply(this,arguments)}class fn{constructor(lt){this.app=lt}_delete(){return delete rn[this.app.options.appId],Promise.resolve()}}let rn={},Fn=[];const Fr={};let Zi,Br,Hr="dataLayer",ai=!1;function yr(Ae,lt,ft){!function ws(){const Ae=[];if((0,Je.ru)()&&Ae.push("This is a browser extension environment."),(0,Je.zI)()||Ae.push("Cookies are not available."),Ae.length>0){const lt=Ae.map((Ft,en)=>`(${en+1}) ${Ft}`).join(" "),ft=Se.create("invalid-analytics-context",{errorInfo:lt});ze.warn(ft.message)}}();const Ft=Ae.options.appId;if(!Ft)throw Se.create("no-app-id");if(!Ae.options.apiKey){if(!Ae.options.measurementId)throw Se.create("no-api-key");ze.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${Ae.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=rn[Ft])throw Se.create("already-exists",{id:Ft});if(!ai){!function Nt(Ae){let lt=[];Array.isArray(window[Ae])?lt=window[Ae]:window[Ae]=lt}(Hr);const{wrappedGtag:hn,gtagCore:mn}=function et(Ae,lt,ft,Ft,en){let hn=function(...mn){window[Ft].push(arguments)};return window[en]&&"function"==typeof window[en]&&(hn=window[en]),window[en]=function Le(Ae,lt,ft,Ft){function hn(){return(hn=(0,ct.Z)(function*(mn,xr,br){try{"event"===mn?yield Pt(Ae,lt,ft,xr,br):"config"===mn?yield kt(Ae,lt,ft,Ft,xr,br):"consent"===mn?Ae("consent","update",br):Ae("set",xr)}catch(ci){ze.error(ci)}})).apply(this,arguments)}return function en(mn,xr,br){return hn.apply(this,arguments)}}(hn,Ae,lt,ft),{gtagCore:hn,wrappedGtag:window[en]}}(rn,Fn,Fr,Hr,"gtag");Br=hn,Zi=mn,ai=!0}return rn[Ft]=function Gr(Ae,lt,ft,Ft,en,hn,mn){return ni.apply(this,arguments)}(Ae,Fn,Fr,lt,Zi,Hr,ft),new fn(Ae)}function Xt(){return wt.apply(this,arguments)}function wt(){return(wt=(0,ct.Z)(function*(){if((0,Je.ru)()||!(0,Je.zI)()||!(0,Je.hl)())return!1;try{return yield(0,Je.eu)()}catch{return!1}})).apply(this,arguments)}const ue="@firebase/analytics",G="0.9.0";!function le(){(0,gt._registerComponent)(new Et.wA(we,(lt,{options:ft})=>yr(lt.getProvider("app").getImmediate(),lt.getProvider("installations-internal").getImmediate(),ft),"PUBLIC")),(0,gt._registerComponent)(new Et.wA("analytics-internal",function Ae(lt){try{const ft=lt.getProvider(we).getImmediate();return{logEvent:(Ft,en,hn)=>function ge(Ae,lt,ft,Ft){Ae=(0,Je.m9)(Ae),function ts(Ae,lt,ft,Ft,en){return gs.apply(this,arguments)}(Br,rn[Ae.app.options.appId],lt,ft,Ft).catch(en=>ze.error(en))}(ft,Ft,en,hn)}}catch(ft){throw Se.create("interop-component-reg-failed",{reason:ft})}},"PRIVATE")),(0,gt.registerVersion)(ue,G),(0,gt.registerVersion)(ue,G,"esm2017")}();var Ke=Q(4408),xn=Q(7565);const hr=new class an extends xn.v{}(class Lt extends Ke.o{constructor(lt,ft){super(lt,ft),this.scheduler=lt,this.work=ft}schedule(lt,ft=0){return ft>0?super.schedule(lt,ft):(this.delay=ft,this.state=lt,this.scheduler.flush(this),this)}execute(lt,ft){return ft>0||this.closed?super.execute(lt,ft):this._execute(lt,ft)}requestAsyncId(lt,ft,Ft=0){return null!=Ft&&Ft>0||null==Ft&&this.delay>0?super.requestAsyncId(lt,ft,Ft):(lt.flush(this),0)}});var Ei=Q(4986),Hi=Q(8306),fr=Q(576),cs=Q(4482),Re=Q(5403),it=Q(4671),Sn=Q(5363),Zn=Q(9468);const Ee=new m.GfV("7.5.0"),rt="__angularfire_symbol__analyticsIsSupportedValue",Wt="__angularfire_symbol__analyticsIsSupported",Bn="__angularfire_symbol__remoteConfigIsSupportedValue",ri="__angularfire_symbol__remoteConfigIsSupported",Un="__angularfire_symbol__messagingIsSupportedValue",Dn="__angularfire_symbol__messagingIsSupported";globalThis[Wt]||(globalThis[Wt]=Xt().then(Ae=>globalThis[rt]=Ae).catch(()=>globalThis[rt]=!1)),globalThis[Dn]||(globalThis[Dn]=(0,st.Gb)().then(Ae=>globalThis[Un]=Ae).catch(()=>globalThis[Un]=!1)),globalThis[ri]||(globalThis[ri]=(0,se.Gb)().then(Ae=>globalThis[Bn]=Ae).catch(()=>globalThis[Bn]=!1));const ii=Ae=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Ae} in the constructor, first ensure that ${Ae} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Ae})\`.`,mo={async:()=>globalThis[Dn],sync:()=>{const Ae=globalThis[Un];if(void 0===Ae)throw new Error(ii("Messaging"));return Ae}},Mi={async:()=>globalThis[ri],sync:()=>{const Ae=globalThis[Bn];if(void 0===Ae)throw new Error(ii("RemoteConfig"));return Ae}};function Tn(Ae,lt,ft){if(lt){if(1===lt.length)return lt[0];const hn=lt.filter(mn=>mn.app===ft);if(1===hn.length)return hn[0]}return ft.container.getProvider(Ae).getImmediate({optional:!0})}const vr=(Ae,lt)=>{const ft=lt?[lt]:(0,de.C6)(),Ft=[];return ft.forEach(en=>{en.container.getProvider(Ae).instances.forEach(mn=>{Ft.includes(mn)||Ft.push(mn)})}),Ft};function yi(){}class yo{constructor(lt,ft=hr){this.zone=lt,this.delegate=ft}now(){return this.delegate.now()}schedule(lt,ft,Ft){const en=this.zone;return this.delegate.schedule(function(mn){en.runGuarded(()=>{lt.apply(this,[mn])})},ft,Ft)}}class Wo{constructor(lt){this.zone=lt,this.task=null}call(lt,ft){const Ft=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yi,{},yi,yi)),ft.pipe(function gn(Ae,lt,ft){const Ft=(0,fr.m)(Ae)||lt||ft?{next:Ae,error:lt,complete:ft}:Ae;return Ft?(0,cs.e)((en,hn)=>{var mn;null===(mn=Ft.subscribe)||void 0===mn||mn.call(Ft);let xr=!0;en.subscribe((0,Re.x)(hn,br=>{var ci;null===(ci=Ft.next)||void 0===ci||ci.call(Ft,br),hn.next(br)},()=>{var br;xr=!1,null===(br=Ft.complete)||void 0===br||br.call(Ft),hn.complete()},br=>{var ci;xr=!1,null===(ci=Ft.error)||void 0===ci||ci.call(Ft,br),hn.error(br)},()=>{var br,ci;xr&&(null===(br=Ft.unsubscribe)||void 0===br||br.call(Ft)),null===(ci=Ft.finalize)||void 0===ci||ci.call(Ft)}))}):it.y}({next:Ft,complete:Ft,error:Ft})).subscribe(lt).add(Ft)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Is=(()=>{class Ae{constructor(ft){this.ngZone=ft,this.outsideAngular=ft.runOutsideAngular(()=>new yo(Zone.current)),this.insideAngular=ft.run(()=>new yo(Zone.current,Ei.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Ae.\u0275fac=function(ft){return new(ft||Ae)(m.LFG(m.R0b))},Ae.\u0275prov=m.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})();function $o(){const Ae=globalThis.\u0275AngularFireScheduler;if(!Ae)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ae}function Li(Ae){return $o().ngZone.runOutsideAngular(()=>Ae())}function Aa(Ae){return $o().ngZone.run(()=>Ae())}function Fc(Ae){return Ae.pipe((0,Sn.Q)($o().outsideAngular))}function rc(Ae){return $o(),function Wl(Ae){return function(ft){return(ft=ft.lift(new Wo(Ae.ngZone))).pipe((0,Zn.R)(Ae.outsideAngular),(0,Sn.Q)(Ae.insideAngular))}}($o())(Ae)}const Bu=(Ae,lt)=>function(){const Ft=arguments;return lt&&setTimeout(()=>{"scheduled"===lt.state&&lt.invoke()},10),Aa(()=>Ae.apply(void 0,Ft))},$l=(Ae,lt)=>function(){let ft;const Ft=arguments;for(let hn=0;hn<arguments.length;hn++)"function"==typeof Ft[hn]&&(lt&&(ft||(ft=Aa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yi,{},yi,yi)))),Ft[hn]=Bu(Ft[hn],ft));const en=Li(()=>Ae.apply(this,Ft));if(!lt){if(en instanceof Hi.y){const hn=$o();return en.pipe((0,Zn.R)(hn.outsideAngular),(0,Sn.Q)(hn.insideAngular))}return Aa(()=>en)}return en instanceof Hi.y?en.pipe(rc):en instanceof Promise?Aa(()=>new Promise((hn,mn)=>en.then(xr=>Aa(()=>hn(xr)),xr=>Aa(()=>mn(xr))))):"function"==typeof en&&ft?function(){return setTimeout(()=>{ft&&"scheduled"===ft.state&&ft.invoke()},10),en.apply(this,arguments)}:Aa(()=>en)}},552:(Gn,Rt,Q)=>{Q.d(Rt,{$:()=>s1,A:()=>we,B:()=>$t,G:()=>rt,H:()=>Dn,J:()=>xr,L:()=>be,M:()=>Sy,N:()=>ax,P:()=>AM,Q:()=>cx,R:()=>cm,T:()=>lx,U:()=>Hd,V:()=>Cy,W:()=>Ty,X:()=>bf,Y:()=>If,Z:()=>qd,_:()=>Gl,a:()=>Zd,a0:()=>Oy,a1:()=>ua,a2:()=>$g,a3:()=>jc,a4:()=>Gg,a5:()=>Ly,a6:()=>px,a7:()=>gx,a8:()=>o1,a9:()=>mx,aA:()=>ge,aB:()=>Xl,aC:()=>da,aD:()=>Il,aE:()=>Zn,aI:()=>ac,aL:()=>ql,aa:()=>_x,ab:()=>Ks,ac:()=>Gd,af:()=>xM,ag:()=>a1,ah:()=>jy,ak:()=>ju,al:()=>Vy,an:()=>xx,ao:()=>Tf,ap:()=>yt,aq:()=>Hn,ar:()=>xn,as:()=>Nt,at:()=>_m,au:()=>M1,av:()=>Ei,aw:()=>kt,ax:()=>Le,ay:()=>ah,az:()=>Se,b:()=>yl,c:()=>Yy,d:()=>Do,e:()=>Mx,f:()=>Nx,g:()=>Px,h:()=>kx,i:()=>_1,j:()=>fm,k:()=>a0,l:()=>lm,m:()=>Hx,n:()=>ha,o:()=>Je,r:()=>nh,s:()=>qu,u:()=>SM});var m=Q(5861),de=Q(2090),se=Q(9681),st=Q(1877),ct=Q(655),gt=Q(4859);const Je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},we={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const $t=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},er=function sn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Yt=new de.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dt=new st.Yd("@firebase/auth");function At(C,...b){Dt.logLevel<=st.in.ERROR&&Dt.error(`Auth (${se.SDK_VERSION}): ${C}`,...b)}function Nt(C,...b){throw Qt(C,...b)}function kt(C,...b){return Qt(C,...b)}function Ot(C,b,I){const N=Object.assign(Object.assign({},er()),{[b]:I});return new de.LL("auth","Firebase",N).create(b,{appName:C.name})}function Pt(C,b,I){if(!(b instanceof I))throw I.name!==b.constructor.name&&Nt(C,"argument-error"),Ot(C,"argument-error",`Type of ${b.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qt(C,...b){if("string"!=typeof C){const I=b[0],N=[...b.slice(1)];return N[0]&&(N[0].appName=C.name),C._errorFactory.create(I,...N)}return Yt.create(C,...b)}function Le(C,b,...I){if(!C)throw Qt(b,...I)}function et(C){const b="INTERNAL ASSERTION FAILED: "+C;throw At(b),new Error(b)}function yt(C,b){C||et(b)}const Pe=new Map;function Se(C){yt(C instanceof Function,"Expected a class definition");let b=Pe.get(C);return b?(yt(b instanceof C,"Instance stored in cache mismatched with class"),b):(b=new C,Pe.set(C,b),b)}function qt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Vt(){return"http:"===Vn()||"https:"===Vn()}function Vn(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Kn{constructor(b,I){this.shortDelay=b,this.longDelay=I,yt(I>b,"Short delay should be less than long delay!"),this.isMobile=(0,de.uI)()||(0,de.b$)()}get(){return function Nr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Vt()||(0,de.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pn(C,b){yt(C.emulator,"Emulator should always be set here");const{url:I}=C.emulator;return b?`${I}${b.startsWith("/")?b.slice(1):b}`:I}class Xn{static initialize(b,I,N){this.fetchImpl=b,I&&(this.headersImpl=I),N&&(this.responseImpl=N)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Lr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Di=new Kn(3e4,6e4);function ir(C,b){return C.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:C.tenantId}):b}function Cn(C,b,I,N){return es.apply(this,arguments)}function es(){return(es=(0,m.Z)(function*(C,b,I,N,z={}){return ts(C,z,(0,m.Z)(function*(){let re={},He={};N&&("GET"===b?He=N:re={body:JSON.stringify(N)});const Ht=(0,de.xO)(Object.assign({key:C.config.apiKey},He)).slice(1),Mn=yield C._getAdditionalHeaders();return Mn["Content-Type"]="application/json",C.languageCode&&(Mn["X-Firebase-Locale"]=C.languageCode),Xn.fetch()(qs(C,C.config.apiHost,I,Ht),Object.assign({method:b,headers:Mn,referrerPolicy:"no-referrer"},re))}))})).apply(this,arguments)}function ts(C,b,I){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(C,b,I){C._canInitEmulator=!1;const N=Object.assign(Object.assign({},Lr),b);try{const z=new Ki(C),re=yield Promise.race([I(),z.promise]);z.clearNetworkTimeout();const He=yield re.json();if("needConfirmation"in He)throw Ri(C,"account-exists-with-different-credential",He);if(re.ok&&!("errorMessage"in He))return He;{const Ht=re.ok?He.errorMessage:He.error.message,[Mn,rr]=Ht.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Mn)throw Ri(C,"credential-already-in-use",He);if("EMAIL_EXISTS"===Mn)throw Ri(C,"email-already-in-use",He);if("USER_DISABLED"===Mn)throw Ri(C,"user-disabled",He);const jr=N[Mn]||Mn.toLowerCase().replace(/[_\s]+/g,"-");if(rr)throw Ot(C,jr,rr);Nt(C,jr)}}catch(z){if(z instanceof de.ZR)throw z;Nt(C,"network-request-failed")}})).apply(this,arguments)}function _i(C,b,I,N){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,m.Z)(function*(C,b,I,N,z={}){const re=yield Cn(C,b,I,N,z);return"mfaPendingCredential"in re&&Nt(C,"multi-factor-auth-required",{_serverResponse:re}),re})).apply(this,arguments)}function qs(C,b,I,N){const z=`${b}${I}?${N}`;return C.config.emulator?Pn(C.config,z):`${C.config.apiScheme}://${z}`}class Ki{constructor(b){this.auth=b,this.timer=null,this.promise=new Promise((I,N)=>{this.timer=setTimeout(()=>N(kt(this.auth,"network-request-failed")),Di.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(C,b,I){const N={appName:C.name};I.email&&(N.email=I.email),I.phoneNumber&&(N.phoneNumber=I.phoneNumber);const z=kt(C,b,N);return z.customData._tokenResponse=I,z}function un(){return(un=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}function Ge(C,b){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function bt(C,b){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}function lr(C){if(C)try{const b=new Date(Number(C));if(!isNaN(b.getTime()))return b.toUTCString()}catch{}}function ni(){return(ni=(0,m.Z)(function*(C,b=!1){const I=(0,de.m9)(C),N=yield I.getIdToken(b),z=rn(N);Le(z&&z.exp&&z.auth_time&&z.iat,I.auth,"internal-error");const re="object"==typeof z.firebase?z.firebase:void 0,He=re?.sign_in_provider;return{claims:z,token:N,authTime:lr(fn(z.auth_time)),issuedAtTime:lr(fn(z.iat)),expirationTime:lr(fn(z.exp)),signInProvider:He||null,signInSecondFactor:re?.sign_in_second_factor||null}})).apply(this,arguments)}function fn(C){return 1e3*Number(C)}function rn(C){const[b,I,N]=C.split(".");if(void 0===b||void 0===I||void 0===N)return At("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,de.tV)(I);return z?JSON.parse(z):(At("Failed to decode base64 JWT payload"),null)}catch(z){return At("Caught error parsing JWT payload as JSON",z?.toString()),null}}function Fr(C,b){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,m.Z)(function*(C,b,I=!1){if(I)return b;try{return yield b}catch(N){throw N instanceof de.ZR&&oi(N)&&C.auth.currentUser===C&&(yield C.auth.signOut()),N}})).apply(this,arguments)}function oi({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class Zi{constructor(b){this.user=b,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var I;if(b){const N=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),N}{this.errorBackoff=3e4;const z=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(b=!1){var I=this;if(!this.isRunning)return;const N=this.getInterval(b);this.timerId=setTimeout((0,m.Z)(function*(){yield I.iteration()}),N)}iteration(){var b=this;return(0,m.Z)(function*(){try{yield b.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===I?.code&&b.schedule(!0))}b.schedule()})()}}class Br{constructor(b,I){this.createdAt=b,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(b){this.createdAt=b.createdAt,this.lastLoginAt=b.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ai(C){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(C){var b;const I=C.auth,N=yield C.getIdToken(),z=yield Fr(C,bt(I,{idToken:N}));Le(z?.users.length,I,"internal-error");const re=z.users[0];C._notifyReloadListener(re);const He=null!==(b=re.providerUserInfo)&&void 0!==b&&b.length?Oi(re.providerUserInfo):[],Ht=Ms(C.providerData,He),jr=!!C.isAnonymous&&!(C.email&&re.passwordHash||Ht?.length),ls={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:Ht,metadata:new Br(re.createdAt,re.lastLoginAt),isAnonymous:jr};Object.assign(C,ls)})).apply(this,arguments)}function yr(){return(yr=(0,m.Z)(function*(C){const b=(0,de.m9)(C);yield ai(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}function Ms(C,b){return[...C.filter(N=>!b.some(z=>z.providerId===N.providerId)),...b]}function Oi(C){return C.map(b=>{var{providerId:I}=b,N=(0,ct._T)(b,["providerId"]);return{providerId:I,uid:N.rawId||"",displayName:N.displayName||null,email:N.email||null,phoneNumber:N.phoneNumber||null,photoURL:N.photoUrl||null}})}function wt(){return(wt=(0,m.Z)(function*(C,b){const I=yield ts(C,{},(0,m.Z)(function*(){const N=(0,de.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:z,apiKey:re}=C.config,He=qs(C,z,"/v1/token",`key=${re}`),Ht=yield C._getAdditionalHeaders();return Ht["Content-Type"]="application/x-www-form-urlencoded",Xn.fetch()(He,{method:"POST",headers:Ht,body:N})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(b){Le(b.idToken,"internal-error"),Le(typeof b.idToken<"u","internal-error"),Le(typeof b.refreshToken<"u","internal-error");const I="expiresIn"in b&&typeof b.expiresIn<"u"?Number(b.expiresIn):function Fn(C){const b=rn(C);return Le(b,"internal-error"),Le(typeof b.exp<"u","internal-error"),Le(typeof b.iat<"u","internal-error"),Number(b.exp)-Number(b.iat)}(b.idToken);this.updateTokensAndExpiration(b.idToken,b.refreshToken,I)}getToken(b,I=!1){var N=this;return(0,m.Z)(function*(){return Le(!N.accessToken||N.refreshToken,b,"user-token-expired"),I||!N.accessToken||N.isExpired?N.refreshToken?(yield N.refresh(b,N.refreshToken),N.accessToken):null:N.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(b,I){var N=this;return(0,m.Z)(function*(){const{accessToken:z,refreshToken:re,expiresIn:He}=yield function Xt(C,b){return wt.apply(this,arguments)}(b,I);N.updateTokensAndExpiration(z,re,Number(He))})()}updateTokensAndExpiration(b,I,N){this.refreshToken=I||null,this.accessToken=b||null,this.expirationTime=Date.now()+1e3*N}static fromJSON(b,I){const{refreshToken:N,accessToken:z,expirationTime:re}=I,He=new pn;return N&&(Le("string"==typeof N,"internal-error",{appName:b}),He.refreshToken=N),z&&(Le("string"==typeof z,"internal-error",{appName:b}),He.accessToken=z),re&&(Le("number"==typeof re,"internal-error",{appName:b}),He.expirationTime=re),He}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(b){this.accessToken=b.accessToken,this.refreshToken=b.refreshToken,this.expirationTime=b.expirationTime}_clone(){return Object.assign(new pn,this.toJSON())}_performRefresh(){return et("not implemented")}}function Qn(C,b){Le("string"==typeof C||typeof C>"u","internal-error",{appName:b})}class or{constructor(b){var{uid:I,auth:N,stsTokenManager:z}=b,re=(0,ct._T)(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=N,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=re.displayName||null,this.email=re.email||null,this.emailVerified=re.emailVerified||!1,this.phoneNumber=re.phoneNumber||null,this.photoURL=re.photoURL||null,this.isAnonymous=re.isAnonymous||!1,this.tenantId=re.tenantId||null,this.providerData=re.providerData?[...re.providerData]:[],this.metadata=new Br(re.createdAt||void 0,re.lastLoginAt||void 0)}getIdToken(b){var I=this;return(0,m.Z)(function*(){const N=yield Fr(I,I.stsTokenManager.getToken(I.auth,b));return Le(N,I.auth,"internal-error"),I.accessToken!==N&&(I.accessToken=N,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),N})()}getIdTokenResult(b){return function Gr(C){return ni.apply(this,arguments)}(this,b)}reload(){return function ws(C){return yr.apply(this,arguments)}(this)}_assign(b){this!==b&&(Le(this.uid===b.uid,this.auth,"internal-error"),this.displayName=b.displayName,this.photoURL=b.photoURL,this.email=b.email,this.emailVerified=b.emailVerified,this.phoneNumber=b.phoneNumber,this.isAnonymous=b.isAnonymous,this.tenantId=b.tenantId,this.providerData=b.providerData.map(I=>Object.assign({},I)),this.metadata._copy(b.metadata),this.stsTokenManager._assign(b.stsTokenManager))}_clone(b){return new or(Object.assign(Object.assign({},this),{auth:b,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(b){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=b,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(b){this.reloadListener?this.reloadListener(b):this.reloadUserInfo=b}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(b,I=!1){var N=this;return(0,m.Z)(function*(){let z=!1;b.idToken&&b.idToken!==N.stsTokenManager.accessToken&&(N.stsTokenManager.updateFromServerResponse(b),z=!0),I&&(yield ai(N)),yield N.auth._persistUserIfCurrent(N),z&&N.auth._notifyListenersIfCurrent(N)})()}delete(){var b=this;return(0,m.Z)(function*(){const I=yield b.getIdToken();return yield Fr(b,function zi(C,b){return un.apply(this,arguments)}(b.auth,{idToken:I})),b.stsTokenManager.clearRefreshToken(),b.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(b=>Object.assign({},b)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(b,I){var N,z,re,He,Ht,Mn,rr,jr;const ls=null!==(N=I.displayName)&&void 0!==N?N:void 0,hc=null!==(z=I.email)&&void 0!==z?z:void 0,eu=null!==(re=I.phoneNumber)&&void 0!==re?re:void 0,vm=null!==(He=I.photoURL)&&void 0!==He?He:void 0,bm=null!==(Ht=I.tenantId)&&void 0!==Ht?Ht:void 0,Gf=null!==(Mn=I._redirectEventId)&&void 0!==Mn?Mn:void 0,U1=null!==(rr=I.createdAt)&&void 0!==rr?rr:void 0,d0=null!==(jr=I.lastLoginAt)&&void 0!==jr?jr:void 0,{uid:h0,emailVerified:ch,isAnonymous:j1,providerData:f0,stsTokenManager:wm}=I;Le(h0&&wm,b,"internal-error");const p0=pn.fromJSON(this.name,wm);Le("string"==typeof h0,b,"internal-error"),Qn(ls,b.name),Qn(hc,b.name),Le("boolean"==typeof ch,b,"internal-error"),Le("boolean"==typeof j1,b,"internal-error"),Qn(eu,b.name),Qn(vm,b.name),Qn(bm,b.name),Qn(Gf,b.name),Qn(U1,b.name),Qn(d0,b.name);const Im=new or({uid:h0,auth:b,email:hc,emailVerified:ch,displayName:ls,isAnonymous:j1,photoURL:vm,phoneNumber:eu,tenantId:bm,stsTokenManager:p0,createdAt:U1,lastLoginAt:d0});return f0&&Array.isArray(f0)&&(Im.providerData=f0.map(UM=>Object.assign({},UM))),Gf&&(Im._redirectEventId=Gf),Im}static _fromIdTokenResponse(b,I,N=!1){return(0,m.Z)(function*(){const z=new pn;z.updateFromServerResponse(I);const re=new or({uid:I.localId,auth:b,stsTokenManager:z,isAnonymous:N});return yield ai(re),re})()}}const be=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(I,N){var z=this;return(0,m.Z)(function*(){z.storage[I]=N})()}_get(I){var N=this;return(0,m.Z)(function*(){const z=N.storage[I];return void 0===z?null:z})()}_remove(I){var N=this;return(0,m.Z)(function*(){delete N.storage[I]})()}_addListener(I,N){}_removeListener(I,N){}}return C.type="NONE",C})();function ge(C,b,I){return`firebase:${C}:${b}:${I}`}class Te{constructor(b,I,N){this.persistence=b,this.auth=I,this.userKey=N;const{config:z,name:re}=this.auth;this.fullUserKey=ge(this.userKey,z.apiKey,re),this.fullPersistenceKey=ge("persistence",z.apiKey,re),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(b){return this.persistence._set(this.fullUserKey,b.toJSON())}getCurrentUser(){var b=this;return(0,m.Z)(function*(){const I=yield b.persistence._get(b.fullUserKey);return I?or._fromJSON(b.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(b){var I=this;return(0,m.Z)(function*(){if(I.persistence===b)return;const N=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=b,N?I.setCurrentUser(N):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(b,I,N="authUser"){return(0,m.Z)(function*(){if(!I.length)return new Te(Se(be),b,N);const z=(yield Promise.all(I.map(function(){var rr=(0,m.Z)(function*(jr){if(yield jr._isAvailable())return jr});return function(jr){return rr.apply(this,arguments)}}()))).filter(rr=>rr);let re=z[0]||Se(be);const He=ge(N,b.config.apiKey,b.name);let Ht=null;for(const rr of I)try{const jr=yield rr._get(He);if(jr){const ls=or._fromJSON(b,jr);rr!==re&&(Ht=ls),re=rr;break}}catch{}const Mn=z.filter(rr=>rr._shouldAllowMigration);return re._shouldAllowMigration&&Mn.length?(re=Mn[0],Ht&&(yield re._set(He,Ht.toJSON())),yield Promise.all(I.map(function(){var rr=(0,m.Z)(function*(jr){if(jr!==re)try{yield jr._remove(He)}catch{}});return function(jr){return rr.apply(this,arguments)}}())),new Te(re,b,N)):new Te(re,b,N)})()}}function ue(C){const b=C.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";if(Lt(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(G(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(an(b))return"Blackberry";if(hr(b))return"Webos";if(le(b))return"Safari";if((b.includes("chrome/")||Ke(b))&&!b.includes("edge/"))return"Chrome";if(xn(b))return"Android";{const N=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===N?.length)return N[1]}return"Other"}function G(C=(0,de.z$)()){return/firefox\//i.test(C)}function le(C=(0,de.z$)()){const b=C.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function Ke(C=(0,de.z$)()){return/crios\//i.test(C)}function Lt(C=(0,de.z$)()){return/iemobile/i.test(C)}function xn(C=(0,de.z$)()){return/android/i.test(C)}function an(C=(0,de.z$)()){return/blackberry/i.test(C)}function hr(C=(0,de.z$)()){return/webos/i.test(C)}function Hn(C=(0,de.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function Ei(C=(0,de.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function cs(C=(0,de.z$)()){return Hn(C)||xn(C)||hr(C)||an(C)||/windows phone/i.test(C)||Lt(C)}function it(C,b=[]){let I;switch(C){case"Browser":I=ue((0,de.z$)());break;case"Worker":I=`${ue((0,de.z$)())}-${C}`;break;default:I=C}const N=b.length?b.join(","):"FirebaseCore-web";return`${I}/JsCore/${se.SDK_VERSION}/${N}`}class gn{constructor(b){this.auth=b,this.queue=[]}pushCallback(b,I){const N=re=>new Promise((He,Ht)=>{try{He(b(re))}catch(Mn){Ht(Mn)}});N.onAbort=I,this.queue.push(N);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(b){var I=this;return(0,m.Z)(function*(){if(I.auth.currentUser===b)return;const N=[];try{for(const z of I.queue)yield z(b),z.onAbort&&N.push(z.onAbort)}catch(z){N.reverse();for(const re of N)try{re()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:z?.message})}})()}}class Sn{constructor(b,I,N){this.app=b,this.heartbeatServiceProvider=I,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ee(this),this.idTokenSubscription=new Ee(this),this.beforeStateQueue=new gn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=b.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(b,I){var N=this;return I&&(this._popupRedirectResolver=Se(I)),this._initializationPromise=this.queue((0,m.Z)(function*(){var z,re;if(!N._deleted&&(N.persistenceManager=yield Te.create(N,b),!N._deleted)){if(null!==(z=N._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield N._popupRedirectResolver._initialize(N)}catch{}yield N.initializeCurrentUser(I),N.lastNotifiedUid=(null===(re=N.currentUser)||void 0===re?void 0:re.uid)||null,!N._deleted&&(N._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var b=this;return(0,m.Z)(function*(){if(b._deleted)return;const I=yield b.assertedPersistence.getCurrentUser();if(b.currentUser||I){if(b.currentUser&&I&&b.currentUser.uid===I.uid)return b._currentUser._assign(I),void(yield b.currentUser.getIdToken());yield b._updateCurrentUser(I,!0)}})()}initializeCurrentUser(b){var I=this;return(0,m.Z)(function*(){var N;const z=yield I.assertedPersistence.getCurrentUser();let re=z,He=!1;if(b&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const Ht=null===(N=I.redirectUser)||void 0===N?void 0:N._redirectEventId,Mn=re?._redirectEventId,rr=yield I.tryRedirectSignIn(b);(!Ht||Ht===Mn)&&rr?.user&&(re=rr.user,He=!0)}if(!re)return I.directlySetCurrentUser(null);if(!re._redirectEventId){if(He)try{yield I.beforeStateQueue.runMiddleware(re)}catch(Ht){re=z,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(Ht))}return re?I.reloadAndSetCurrentUserOrClear(re):I.directlySetCurrentUser(null)}return Le(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===re._redirectEventId?I.directlySetCurrentUser(re):I.reloadAndSetCurrentUserOrClear(re)})()}tryRedirectSignIn(b){var I=this;return(0,m.Z)(function*(){let N=null;try{N=yield I._popupRedirectResolver._completeRedirectFn(I,b,!0)}catch{yield I._setRedirectUser(null)}return N})()}reloadAndSetCurrentUserOrClear(b){var I=this;return(0,m.Z)(function*(){try{yield ai(b)}catch(N){if("auth/network-request-failed"!==N?.code)return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(b)})()}useDeviceLanguage(){this.languageCode=function Tr(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var b=this;return(0,m.Z)(function*(){b._deleted=!0})()}updateCurrentUser(b){var I=this;return(0,m.Z)(function*(){const N=b?(0,de.m9)(b):null;return N&&Le(N.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(N&&N._clone(I))})()}_updateCurrentUser(b,I=!1){var N=this;return(0,m.Z)(function*(){if(!N._deleted)return b&&Le(N.tenantId===b.tenantId,N,"tenant-id-mismatch"),I||(yield N.beforeStateQueue.runMiddleware(b)),N.queue((0,m.Z)(function*(){yield N.directlySetCurrentUser(b),N.notifyAuthListeners()}))})()}signOut(){var b=this;return(0,m.Z)(function*(){return yield b.beforeStateQueue.runMiddleware(null),(b.redirectPersistenceManager||b._popupRedirectResolver)&&(yield b._setRedirectUser(null)),b._updateCurrentUser(null,!0)})()}setPersistence(b){var I=this;return this.queue((0,m.Z)(function*(){yield I.assertedPersistence.setPersistence(Se(b))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(b){this._errorFactory=new de.LL("auth","Firebase",b())}onAuthStateChanged(b,I,N){return this.registerStateListener(this.authStateSubscription,b,I,N)}beforeAuthStateChanged(b,I){return this.beforeStateQueue.pushCallback(b,I)}onIdTokenChanged(b,I,N){return this.registerStateListener(this.idTokenSubscription,b,I,N)}toJSON(){var b;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(b=this._currentUser)||void 0===b?void 0:b.toJSON()}}_setRedirectUser(b,I){var N=this;return(0,m.Z)(function*(){const z=yield N.getOrInitRedirectPersistenceManager(I);return null===b?z.removeCurrentUser():z.setCurrentUser(b)})()}getOrInitRedirectPersistenceManager(b){var I=this;return(0,m.Z)(function*(){if(!I.redirectPersistenceManager){const N=b&&Se(b)||I._popupRedirectResolver;Le(N,I,"argument-error"),I.redirectPersistenceManager=yield Te.create(I,[Se(N._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(b){var I=this;return(0,m.Z)(function*(){var N,z;return I._isInitialized&&(yield I.queue((0,m.Z)(function*(){}))),(null===(N=I._currentUser)||void 0===N?void 0:N._redirectEventId)===b?I._currentUser:(null===(z=I.redirectUser)||void 0===z?void 0:z._redirectEventId)===b?I.redirectUser:null})()}_persistUserIfCurrent(b){var I=this;return(0,m.Z)(function*(){if(b===I.currentUser)return I.queue((0,m.Z)(function*(){return I.directlySetCurrentUser(b)}))})()}_notifyListenersIfCurrent(b){b===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const N=null!==(I=null===(b=this.currentUser)||void 0===b?void 0:b.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==N&&(this.lastNotifiedUid=N,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,I,N,z){if(this._deleted)return()=>{};const re="function"==typeof I?I:I.next.bind(I),He=this._isInitialized?Promise.resolve():this._initializationPromise;return Le(He,this,"internal-error"),He.then(()=>re(this.currentUser)),"function"==typeof I?b.addObserver(I,N,z):b.addObserver(I)}directlySetCurrentUser(b){var I=this;return(0,m.Z)(function*(){I.currentUser&&I.currentUser!==b&&I._currentUser._stopProactiveRefresh(),b&&I.isProactiveRefreshEnabled&&b._startProactiveRefresh(),I.currentUser=b,b?yield I.assertedPersistence.setCurrentUser(b):yield I.assertedPersistence.removeCurrentUser()})()}queue(b){return this.operations=this.operations.then(b,b),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(b){!b||this.frameworks.includes(b)||(this.frameworks.push(b),this.frameworks.sort(),this.clientVersion=it(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var b=this;return(0,m.Z)(function*(){var I;const N={"X-Client-Version":b.clientVersion};b.app.options.appId&&(N["X-Firebase-gmpid"]=b.app.options.appId);const z=yield null===(I=b.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();return z&&(N["X-Firebase-Client"]=z),N})()}}function Zn(C){return(0,de.m9)(C)}class Ee{constructor(b){this.auth=b,this.observer=null,this.addObserver=(0,de.ne)(I=>this.observer=I)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rt(C,b,I){const N=Zn(C);Le(N._canInitEmulator,N,"emulator-config-failed"),Le(/^https?:\/\//.test(b),N,"invalid-emulator-scheme");const z=!!I?.disableWarnings,re=Wt(b),{host:He,port:Ht}=function Bn(C){const b=Wt(C),I=/(\/\/)?([^?#/]+)/.exec(C.substr(b.length));if(!I)return{host:"",port:null};const N=I[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(N);if(z){const re=z[1];return{host:re,port:ri(N.substr(re.length+1))}}{const[re,He]=N.split(":");return{host:re,port:ri(He)}}}(b);N.config.emulator={url:`${re}//${He}${null===Ht?"":`:${Ht}`}/`},N.settings.appVerificationDisabledForTesting=!0,N.emulatorConfig=Object.freeze({host:He,port:Ht,protocol:re.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function Un(){function C(){const b=document.createElement("p"),I=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function Wt(C){const b=C.indexOf(":");return b<0?"":C.substr(0,b+1)}function ri(C){if(!C)return null;const b=Number(C);return isNaN(b)?null:b}class Dn{constructor(b,I){this.providerId=b,this.signInMethod=I}toJSON(){return et("not implemented")}_getIdTokenResponse(b){return et("not implemented")}_linkToIdToken(b,I){return et("not implemented")}_getReauthenticationResolver(b){return et("not implemented")}}function ii(C,b){return mo.apply(this,arguments)}function mo(){return(mo=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:resetPassword",ir(C,b))})).apply(this,arguments)}function Mi(C,b){return _o.apply(this,arguments)}function _o(){return(_o=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function Tn(C,b){return vr.apply(this,arguments)}function vr(){return(vr=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:update",ir(C,b))})).apply(this,arguments)}function yo(){return(yo=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signInWithPassword",ir(C,b))})).apply(this,arguments)}function Wo(C,b){return Is.apply(this,arguments)}function Is(){return(Is=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:sendOobCode",ir(C,b))})).apply(this,arguments)}function $o(C,b){return Li.apply(this,arguments)}function Li(){return(Li=(0,m.Z)(function*(C,b){return Wo(C,b)})).apply(this,arguments)}function Aa(C,b){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,m.Z)(function*(C,b){return Wo(C,b)})).apply(this,arguments)}function Dr(C,b){return rc.apply(this,arguments)}function rc(){return(rc=(0,m.Z)(function*(C,b){return Wo(C,b)})).apply(this,arguments)}function Wl(C,b){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,m.Z)(function*(C,b){return Wo(C,b)})).apply(this,arguments)}function Ae(){return(Ae=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signInWithEmailLink",ir(C,b))})).apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signInWithEmailLink",ir(C,b))})).apply(this,arguments)}class Ft extends Dn{constructor(b,I,N,z=null){super("password",N),this._email=b,this._password=I,this._tenantId=z}static _fromEmailAndPassword(b,I){return new Ft(b,I,"password")}static _fromEmailAndCode(b,I,N=null){return new Ft(b,I,"emailLink",N)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(b){const I="string"==typeof b?JSON.parse(b):b;if(I?.email&&I?.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(b){var I=this;return(0,m.Z)(function*(){switch(I.signInMethod){case"password":return function yi(C,b){return yo.apply(this,arguments)}(b,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function $l(C,b){return Ae.apply(this,arguments)}(b,{email:I._email,oobCode:I._password});default:Nt(b,"internal-error")}})()}_linkToIdToken(b,I){var N=this;return(0,m.Z)(function*(){switch(N.signInMethod){case"password":return Mi(b,{idToken:I,returnSecureToken:!0,email:N._email,password:N._password});case"emailLink":return function lt(C,b){return ft.apply(this,arguments)}(b,{idToken:I,email:N._email,oobCode:N._password});default:Nt(b,"internal-error")}})()}_getReauthenticationResolver(b){return this._getIdTokenResponse(b)}}function en(C,b){return hn.apply(this,arguments)}function hn(){return(hn=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signInWithIdp",ir(C,b))})).apply(this,arguments)}class xr extends Dn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(b){const I=new xr(b.providerId,b.signInMethod);return b.idToken||b.accessToken?(b.idToken&&(I.idToken=b.idToken),b.accessToken&&(I.accessToken=b.accessToken),b.nonce&&!b.pendingToken&&(I.nonce=b.nonce),b.pendingToken&&(I.pendingToken=b.pendingToken)):b.oauthToken&&b.oauthTokenSecret?(I.accessToken=b.oauthToken,I.secret=b.oauthTokenSecret):Nt("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(b){const I="string"==typeof b?JSON.parse(b):b,{providerId:N,signInMethod:z}=I,re=(0,ct._T)(I,["providerId","signInMethod"]);if(!N||!z)return null;const He=new xr(N,z);return He.idToken=re.idToken||void 0,He.accessToken=re.accessToken||void 0,He.secret=re.secret,He.nonce=re.nonce,He.pendingToken=re.pendingToken||null,He}_getIdTokenResponse(b){return en(b,this.buildRequest())}_linkToIdToken(b,I){const N=this.buildRequest();return N.idToken=I,en(b,N)}_getReauthenticationResolver(b){const I=this.buildRequest();return I.autoCreate=!1,en(b,I)}buildRequest(){const b={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)b.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),b.postBody=(0,de.xO)(I)}return b}}function br(C,b){return ci.apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:sendVerificationCode",ir(C,b))})).apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signInWithPhoneNumber",ir(C,b))})).apply(this,arguments)}function Fi(){return(Fi=(0,m.Z)(function*(C,b){const I=yield _i(C,"POST","/v1/accounts:signInWithPhoneNumber",ir(C,b));if(I.temporaryProof)throw Ri(C,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const Bg={USER_NOT_FOUND:"user-not-found"};function la(){return(la=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signInWithPhoneNumber",ir(C,Object.assign(Object.assign({},b),{operation:"REAUTH"})),Bg)})).apply(this,arguments)}class Bc extends Dn{constructor(b){super("phone","phone"),this.params=b}static _fromVerification(b,I){return new Bc({verificationId:b,verificationCode:I})}static _fromTokenResponse(b,I){return new Bc({phoneNumber:b,temporaryProof:I})}_getIdTokenResponse(b){return function So(C,b){return qo.apply(this,arguments)}(b,this._makeVerificationRequest())}_linkToIdToken(b,I){return function Ua(C,b){return Fi.apply(this,arguments)}(b,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(b){return function ca(C,b){return la.apply(this,arguments)}(b,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:b,phoneNumber:I,verificationId:N,verificationCode:z}=this.params;return b&&I?{temporaryProof:b,phoneNumber:I}:{sessionInfo:N,code:z}}toJSON(){const b={providerId:this.providerId};return this.params.phoneNumber&&(b.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(b.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(b.verificationCode=this.params.verificationCode),this.params.verificationId&&(b.verificationId=this.params.verificationId),b}static fromJSON(b){"string"==typeof b&&(b=JSON.parse(b));const{verificationId:I,verificationCode:N,phoneNumber:z,temporaryProof:re}=b;return N||I||z||re?new Bc({verificationId:I,verificationCode:N,phoneNumber:z,temporaryProof:re}):null}}class Ao{constructor(b){var I,N,z,re,He,Ht;const Mn=(0,de.zd)((0,de.pd)(b)),rr=null!==(I=Mn.apiKey)&&void 0!==I?I:null,jr=null!==(N=Mn.oobCode)&&void 0!==N?N:null,ls=function yf(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=Mn.mode)&&void 0!==z?z:null);Le(rr&&jr&&ls,"argument-error"),this.apiKey=rr,this.operation=ls,this.code=jr,this.continueUrl=null!==(re=Mn.continueUrl)&&void 0!==re?re:null,this.languageCode=null!==(He=Mn.languageCode)&&void 0!==He?He:null,this.tenantId=null!==(Ht=Mn.tenantId)&&void 0!==Ht?Ht:null}static parseLink(b){const I=function vf(C){const b=(0,de.zd)((0,de.pd)(C)).link,I=b?(0,de.zd)((0,de.pd)(b)).deep_link_id:null,N=(0,de.zd)((0,de.pd)(C)).deep_link_id;return(N?(0,de.zd)((0,de.pd)(N)).link:null)||N||I||b||C}(b);try{return new Ao(I)}catch{return null}}}let Sy=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(I,N){return Ft._fromEmailAndPassword(I,N)}static credentialWithLink(I,N){const z=Ao.parseLink(N);return Le(z,"argument-error"),Ft._fromEmailAndCode(I,z.code,z.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Uc{constructor(b){this.providerId=b,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(b){this.defaultLanguageCode=b}setCustomParameters(b){return this.customParameters=b,this}getCustomParameters(){return this.customParameters}}class Uu extends Uc{constructor(){super(...arguments),this.scopes=[]}addScope(b){return this.scopes.includes(b)||this.scopes.push(b),this}getScopes(){return[...this.scopes]}}class Hd extends Uu{static credentialFromJSON(b){const I="string"==typeof b?JSON.parse(b):b;return Le("providerId"in I&&"signInMethod"in I,"argument-error"),xr._fromParams(I)}credential(b){return this._credential(Object.assign(Object.assign({},b),{nonce:b.rawNonce}))}_credential(b){return Le(b.idToken||b.accessToken,"argument-error"),xr._fromParams(Object.assign(Object.assign({},b),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(b){return Hd.oauthCredentialFromTaggedObject(b)}static credentialFromError(b){return Hd.oauthCredentialFromTaggedObject(b.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:I,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:re,nonce:He,providerId:Ht}=b;if(!N&&!z&&!I&&!re||!Ht)return null;try{return new Hd(Ht)._credential({idToken:I,accessToken:N,nonce:He,pendingToken:re})}catch{return null}}}let ax=(()=>{class C extends Uu{constructor(){super("facebook.com")}static credential(I){return xr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return C.credentialFromTaggedObject(I)}static credentialFromError(I){return C.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return C.credential(I.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),cx=(()=>{class C extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(I,N){return xr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:N})}static credentialFromResult(I){return C.credentialFromTaggedObject(I)}static credentialFromError(I){return C.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:N,oauthAccessToken:z}=I;if(!N&&!z)return null;try{return C.credential(N,z)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),lx=(()=>{class C extends Uu{constructor(){super("github.com")}static credential(I){return xr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return C.credentialFromTaggedObject(I)}static credentialFromError(I){return C.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return C.credential(I.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class ql extends Dn{constructor(b,I){super(b,b),this.pendingToken=I}_getIdTokenResponse(b){return en(b,this.buildRequest())}_linkToIdToken(b,I){const N=this.buildRequest();return N.idToken=I,en(b,N)}_getReauthenticationResolver(b){const I=this.buildRequest();return I.autoCreate=!1,en(b,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(b){const I="string"==typeof b?JSON.parse(b):b,{providerId:N,signInMethod:z,pendingToken:re}=I;return N&&z&&re&&N===z?new ql(N,re):null}static _create(b,I){return new ql(b,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cy extends Uc{constructor(b){Le(b.startsWith("saml."),"argument-error"),super(b)}static credentialFromResult(b){return Cy.samlCredentialFromTaggedObject(b)}static credentialFromError(b){return Cy.samlCredentialFromTaggedObject(b.customData||{})}static credentialFromJSON(b){const I=ql.fromJSON(b);return Le(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{pendingToken:I,providerId:N}=b;if(!I||!N)return null;try{return ql._create(N,I)}catch{return null}}}let Ty=(()=>{class C extends Uu{constructor(){super("twitter.com")}static credential(I,N){return xr._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:N})}static credentialFromResult(I){return C.credentialFromTaggedObject(I)}static credentialFromError(I){return C.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:N,oauthTokenSecret:z}=I;if(!N||!z)return null;try{return C.credential(N,z)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Dy(C,b){return My.apply(this,arguments)}function My(){return(My=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signUp",ir(C,b))})).apply(this,arguments)}class ja{constructor(b){this.user=b.user,this.providerId=b.providerId,this._tokenResponse=b._tokenResponse,this.operationType=b.operationType}static _fromIdTokenResponse(b,I,N,z=!1){return(0,m.Z)(function*(){const re=yield or._fromIdTokenResponse(b,N,z),He=n1(N);return new ja({user:re,providerId:He,_tokenResponse:N,operationType:I})})()}static _forOperation(b,I,N){return(0,m.Z)(function*(){yield b._updateTokensIfNecessary(N,!0);const z=n1(N);return new ja({user:b,providerId:z,_tokenResponse:N,operationType:I})})()}}function n1(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function bf(C){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,m.Z)(function*(C){var b;const I=Zn(C);if(yield I._initializationPromise,null!==(b=I.currentUser)&&void 0!==b&&b.isAnonymous)return new ja({user:I.currentUser,providerId:null,operationType:"signIn"});const N=yield Dy(I,{returnSecureToken:!0}),z=yield ja._fromIdTokenResponse(I,"signIn",N,!0);return yield I._updateCurrentUser(z.user),z})).apply(this,arguments)}class Ny extends de.ZR{constructor(b,I,N,z){var re;super(I.code,I.message),this.operationType=N,this.user=z,Object.setPrototypeOf(this,Ny.prototype),this.customData={appName:b.name,tenantId:null!==(re=b.tenantId)&&void 0!==re?re:void 0,_serverResponse:I.customData._serverResponse,operationType:N}}static _fromErrorAndOperation(b,I,N,z){return new Ny(b,I,N,z)}}function dx(C,b,I,N){return("reauthenticate"===b?I._getReauthenticationResolver(C):I._getIdTokenResponse(C)).catch(re=>{throw"auth/multi-factor-auth-required"===re.code?Ny._fromErrorAndOperation(C,re,b,N):re})}function hx(C){return new Set(C.map(({providerId:b})=>b).filter(b=>!!b))}function ju(C,b){return ky.apply(this,arguments)}function ky(){return(ky=(0,m.Z)(function*(C,b){const I=(0,de.m9)(C);yield Ug(!0,I,b);const{providerUserInfo:N}=yield Ge(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[b]}),z=hx(N||[]);return I.providerData=I.providerData.filter(re=>z.has(re.providerId)),z.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I})).apply(this,arguments)}function Vu(C,b){return wf.apply(this,arguments)}function wf(){return(wf=(0,m.Z)(function*(C,b,I=!1){const N=yield Fr(C,b._linkToIdToken(C.auth,yield C.getIdToken()),I);return ja._forOperation(C,"link",N)})).apply(this,arguments)}function Ug(C,b,I){return jg.apply(this,arguments)}function jg(){return(jg=(0,m.Z)(function*(C,b,I){yield ai(b);const z=!1===C?"provider-already-linked":"no-such-provider";Le(hx(b.providerData).has(I)===C,b.auth,z)})).apply(this,arguments)}function Py(C,b){return zu.apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(C,b,I=!1){const{auth:N}=C,z="reauthenticate";try{const re=yield Fr(C,dx(N,z,b,C),I);Le(re.idToken,N,"internal-error");const He=rn(re.idToken);Le(He,N,"internal-error");const{sub:Ht}=He;return Le(C.uid===Ht,N,"user-mismatch"),ja._forOperation(C,z,re)}catch(re){throw"auth/user-not-found"===re?.code&&Nt(N,"user-mismatch"),re}})).apply(this,arguments)}function r1(C,b){return $d.apply(this,arguments)}function $d(){return($d=(0,m.Z)(function*(C,b,I=!1){const N="signIn",z=yield dx(C,N,b),re=yield ja._fromIdTokenResponse(C,N,z);return I||(yield C._updateCurrentUser(re.user)),re})).apply(this,arguments)}function If(C,b){return Go.apply(this,arguments)}function Go(){return(Go=(0,m.Z)(function*(C,b){return r1(Zn(C),b)})).apply(this,arguments)}function qd(C,b){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,m.Z)(function*(C,b){const I=(0,de.m9)(C);return yield Ug(!1,I,b.providerId),Vu(I,b)})).apply(this,arguments)}function Gl(C,b){return zg.apply(this,arguments)}function zg(){return(zg=(0,m.Z)(function*(C,b){return Py((0,de.m9)(C),b)})).apply(this,arguments)}function fx(C,b){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,m.Z)(function*(C,b){return _i(C,"POST","/v1/accounts:signInWithCustomToken",ir(C,b))})).apply(this,arguments)}function s1(C,b){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,m.Z)(function*(C,b){const I=Zn(C),N=yield fx(I,{token:b,returnSecureToken:!0}),z=yield ja._fromIdTokenResponse(I,"signIn",N);return yield I._updateCurrentUser(z.user),z})).apply(this,arguments)}class Kl{constructor(b,I){this.factorId=b,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(b,I){return"phoneInfo"in I?Co._fromServerResponse(b,I):Nt(b,"internal-error")}}class Co extends Kl{constructor(b){super("phone",b),this.phoneNumber=b.phoneInfo}static _fromServerResponse(b,I){return new Co(I)}}function Hg(C,b,I){var N;Le((null===(N=I.url)||void 0===N?void 0:N.length)>0,C,"invalid-continue-uri"),Le(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),b.continueUrl=I.url,b.dynamicLinkDomain=I.dynamicLinkDomain,b.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(Le(I.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),b.iOSBundleId=I.iOS.bundleId),I.android&&(Le(I.android.packageName.length>0,C,"missing-android-pkg-name"),b.androidInstallApp=I.android.installApp,b.androidMinimumVersionCode=I.android.minimumVersion,b.androidPackageName=I.android.packageName)}function Oy(C,b,I){return _l.apply(this,arguments)}function _l(){return(_l=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C),z={requestType:"PASSWORD_RESET",email:b};I&&Hg(N,z,I),yield Aa(N,z)})).apply(this,arguments)}function ua(C,b,I){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,m.Z)(function*(C,b,I){yield ii((0,de.m9)(C),{oobCode:b,newPassword:I})})).apply(this,arguments)}function $g(C,b){return qg.apply(this,arguments)}function qg(){return(qg=(0,m.Z)(function*(C,b){yield Tn((0,de.m9)(C),{oobCode:b})})).apply(this,arguments)}function jc(C,b){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,m.Z)(function*(C,b){const I=(0,de.m9)(C),N=yield ii(I,{oobCode:b}),z=N.requestType;switch(Le(z,I,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(N.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(N.mfaInfo,I,"internal-error");default:Le(N.email,I,"internal-error")}let re=null;return N.mfaInfo&&(re=Kl._fromServerResponse(Zn(I),N.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.newEmail:N.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.email:N.newEmail)||null,multiFactorInfo:re},operation:z}})).apply(this,arguments)}function Gg(C,b){return wr.apply(this,arguments)}function wr(){return(wr=(0,m.Z)(function*(C,b){const{data:I}=yield jc((0,de.m9)(C),b);return I.email})).apply(this,arguments)}function Ly(C,b,I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,m.Z)(function*(C,b,I){const N=Zn(C),z=yield Dy(N,{returnSecureToken:!0,email:b,password:I}),re=yield ja._fromIdTokenResponse(N,"signIn",z);return yield N._updateCurrentUser(re.user),re})).apply(this,arguments)}function px(C,b,I){return If((0,de.m9)(C),Sy.credential(b,I))}function gx(C,b,I){return Fy.apply(this,arguments)}function Fy(){return(Fy=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C),z={requestType:"EMAIL_SIGNIN",email:b};Le(I.handleCodeInApp,N,"argument-error"),I&&Hg(N,z,I),yield Dr(N,z)})).apply(this,arguments)}function o1(C,b){return"EMAIL_SIGNIN"===Ao.parseLink(b)?.operation}function mx(C,b,I){return By.apply(this,arguments)}function By(){return(By=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C),z=Sy.credentialWithLink(b,I||qt());return Le(z._tenantId===(N.tenantId||null),N,"tenant-id-mismatch"),If(N,z)})).apply(this,arguments)}function zt(C,b){return ti.apply(this,arguments)}function ti(){return(ti=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:createAuthUri",ir(C,b))})).apply(this,arguments)}function _x(C,b){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,m.Z)(function*(C,b){const N={identifier:b,continueUri:Vt()?qt():"http://localhost"},{signinMethods:z}=yield zt((0,de.m9)(C),N);return z||[]})).apply(this,arguments)}function Ks(C,b){return xf.apply(this,arguments)}function xf(){return(xf=(0,m.Z)(function*(C,b){const I=(0,de.m9)(C),z={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};b&&Hg(I.auth,z,b);const{email:re}=yield $o(I.auth,z);re!==C.email&&(yield C.reload())})).apply(this,arguments)}function Gd(C,b,I){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C),re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:b};I&&Hg(N.auth,re,I);const{email:He}=yield Wl(N.auth,re);He!==C.email&&(yield C.reload())})).apply(this,arguments)}function Zl(C,b){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,m.Z)(function*(C,b){return Cn(C,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function xM(C,b){return Af.apply(this,arguments)}function Af(){return(Af=(0,m.Z)(function*(C,{displayName:b,photoURL:I}){if(void 0===b&&void 0===I)return;const N=(0,de.m9)(C),re={idToken:yield N.getIdToken(),displayName:b,photoUrl:I,returnSecureToken:!0},He=yield Fr(N,Zl(N.auth,re));N.displayName=He.displayName||null,N.photoURL=He.photoUrl||null;const Ht=N.providerData.find(({providerId:Mn})=>"password"===Mn);Ht&&(Ht.displayName=N.displayName,Ht.photoURL=N.photoURL),yield N._updateTokensIfNecessary(He)})).apply(this,arguments)}function a1(C,b){return ao((0,de.m9)(C),b,null)}function jy(C,b){return ao((0,de.m9)(C),null,b)}function ao(C,b,I){return ic.apply(this,arguments)}function ic(){return(ic=(0,m.Z)(function*(C,b,I){const{auth:N}=C,re={idToken:yield C.getIdToken(),returnSecureToken:!0};b&&(re.email=b),I&&(re.password=I);const He=yield Fr(C,Mi(N,re));yield C._updateTokensIfNecessary(He,!0)})).apply(this,arguments)}class sc{constructor(b,I,N={}){this.isNewUser=b,this.providerId=I,this.profile=N}}class Vc extends sc{constructor(b,I,N,z){super(b,I,N),this.username=z}}class yx extends sc{constructor(b,I){super(b,"facebook.com",I)}}class l1 extends Vc{constructor(b,I){super(b,"github.com",I,"string"==typeof I?.login?I?.login:null)}}class vx extends sc{constructor(b,I){super(b,"google.com",I)}}class bx extends Vc{constructor(b,I,N){super(b,"twitter.com",I,N)}}function Vy(C){const{user:b,_tokenResponse:I}=C;return b.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function c1(C){var b,I;if(!C)return null;const{providerId:N}=C,z=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},re=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!N&&C?.idToken){const He=null===(I=null===(b=rn(C.idToken))||void 0===b?void 0:b.firebase)||void 0===I?void 0:I.sign_in_provider;if(He)return new sc(re,"anonymous"!==He&&"custom"!==He?He:null)}if(!N)return null;switch(N){case"facebook.com":return new yx(re,z);case"github.com":return new l1(re,z);case"google.com":return new vx(re,z);case"twitter.com":return new bx(re,z,C.screenName||null);case"custom":case"anonymous":return new sc(re,null);default:return new sc(re,N,z)}}(I)}class Yl{constructor(b,I,N){this.type=b,this.credential=I,this.auth=N}static _fromIdtoken(b,I){return new Yl("enroll",b,I)}static _fromMfaPendingCredential(b){return new Yl("signin",b)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(b){var I,N;if(b?.multiFactorSession){if(null!==(I=b.multiFactorSession)&&void 0!==I&&I.pendingCredential)return Yl._fromMfaPendingCredential(b.multiFactorSession.pendingCredential);if(null!==(N=b.multiFactorSession)&&void 0!==N&&N.idToken)return Yl._fromIdtoken(b.multiFactorSession.idToken)}return null}}class Cf{constructor(b,I,N){this.session=b,this.hints=I,this.signInResolver=N}static _fromError(b,I){const N=Zn(b),z=I.customData._serverResponse,re=(z.mfaInfo||[]).map(Ht=>Kl._fromServerResponse(N,Ht));Le(z.mfaPendingCredential,N,"internal-error");const He=Yl._fromMfaPendingCredential(z.mfaPendingCredential);return new Cf(He,re,function(){var Ht=(0,m.Z)(function*(Mn){const rr=yield Mn._process(N,He);delete z.mfaInfo,delete z.mfaPendingCredential;const jr=Object.assign(Object.assign({},z),{idToken:rr.idToken,refreshToken:rr.refreshToken});switch(I.operationType){case"signIn":const ls=yield ja._fromIdTokenResponse(N,I.operationType,jr);return yield N._updateCurrentUser(ls.user),ls;case"reauthenticate":return Le(I.user,N,"internal-error"),ja._forOperation(I.user,I.operationType,jr);default:Nt(N,"internal-error")}});return function(Mn){return Ht.apply(this,arguments)}}())}resolveSignIn(b){var I=this;return(0,m.Z)(function*(){return I.signInResolver(b)})()}}function xx(C,b){var I;const N=(0,de.m9)(C),z=b;return Le(b.customData.operationType,N,"argument-error"),Le(null===(I=z.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,N,"argument-error"),Cf._fromError(N,z)}function Sx(C,b){return Cn(C,"POST","/v2/accounts/mfaEnrollment:start",ir(C,b))}class xi{constructor(b){this.user=b,this.enrolledFactors=[],b._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(N=>Kl._fromServerResponse(b.auth,N)))})}static _fromUser(b){return new xi(b)}getSession(){var b=this;return(0,m.Z)(function*(){return Yl._fromIdtoken(yield b.user.getIdToken(),b.user.auth)})()}enroll(b,I){var N=this;return(0,m.Z)(function*(){const z=b,re=yield N.getSession(),He=yield Fr(N.user,z._process(N.user.auth,re,I));return yield N.user._updateTokensIfNecessary(He),N.user.reload()})()}unenroll(b){var I=this;return(0,m.Z)(function*(){const N="string"==typeof b?b:b.uid,z=yield I.user.getIdToken(),re=yield Fr(I.user,function zc(C,b){return Cn(C,"POST","/v2/accounts/mfaEnrollment:withdraw",ir(C,b))}(I.user.auth,{idToken:z,mfaEnrollmentId:N}));I.enrolledFactors=I.enrolledFactors.filter(({uid:He})=>He!==N),yield I.user._updateTokensIfNecessary(re);try{yield I.user.reload()}catch(He){if("auth/user-token-expired"!==He?.code)throw He}})()}}const Zg=new WeakMap;function Tf(C){const b=(0,de.m9)(C);return Zg.has(b)||Zg.set(b,xi._fromUser(b)),Zg.get(b)}const Df="__sak";class Yg{constructor(b,I){this.storageRetriever=b,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(Df,"1"),this.storage.removeItem(Df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(b,I){return this.storage.setItem(b,JSON.stringify(I)),Promise.resolve()}_get(b){const I=this.storage.getItem(b);return Promise.resolve(I?JSON.parse(I):null)}_remove(b){return this.storage.removeItem(b),Promise.resolve()}get storage(){return this.storageRetriever()}}const yl=(()=>{class C extends Yg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,N)=>this.onStorageEvent(I,N),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function f1(){const C=(0,de.z$)();return le(C)||Hn(C)}()&&function Re(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=cs(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const N of Object.keys(this.listeners)){const z=this.storage.getItem(N),re=this.localCache[N];z!==re&&I(N,re,z)}}onStorageEvent(I,N=!1){if(!I.key)return void this.forAllChangedKeys((Ht,Mn,rr)=>{this.notifyListeners(Ht,rr)});const z=I.key;if(N?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ht=this.storage.getItem(z);if(I.newValue!==Ht)null!==I.newValue?this.storage.setItem(z,I.newValue):this.storage.removeItem(z);else if(this.localCache[z]===I.newValue&&!N)return}const re=()=>{const Ht=this.storage.getItem(z);!N&&this.localCache[z]===Ht||this.notifyListeners(z,Ht)},He=this.storage.getItem(z);!function fr(){return(0,de.w1)()&&10===document.documentMode}()||He===I.newValue||I.newValue===I.oldValue?re():setTimeout(re,10)}notifyListeners(I,N){this.localCache[I]=N;const z=this.listeners[I];if(z)for(const re of Array.from(z))re(N&&JSON.parse(N))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,N,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:N,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,N){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(N)}_removeListener(I,N){this.listeners[I]&&(this.listeners[I].delete(N),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,N){var z=()=>super._set,re=this;return(0,m.Z)(function*(){yield z().call(re,I,N),re.localCache[I]=JSON.stringify(N)})()}_get(I){var N=()=>super._get,z=this;return(0,m.Z)(function*(){const re=yield N().call(z,I);return z.localCache[I]=JSON.stringify(re),re})()}_remove(I){var N=()=>super._remove,z=this;return(0,m.Z)(function*(){yield N().call(z,I),delete z.localCache[I]})()}}return C.type="LOCAL",C})(),Zd=(()=>{class C extends Yg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,N){}_removeListener(I,N){}}return C.type="SESSION",C})();let oc=(()=>{class C{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const N=this.receivers.find(re=>re.isListeningto(I));if(N)return N;const z=new C(I);return this.receivers.push(z),z}isListeningto(I){return this.eventTarget===I}handleEvent(I){var N=this;return(0,m.Z)(function*(){const z=I,{eventId:re,eventType:He,data:Ht}=z.data,Mn=N.handlersMap[He];if(!Mn?.size)return;z.ports[0].postMessage({status:"ack",eventId:re,eventType:He});const rr=Array.from(Mn).map(function(){var ls=(0,m.Z)(function*(hc){return hc(z.origin,Ht)});return function(hc){return ls.apply(this,arguments)}}()),jr=yield function Wy(C){return Promise.all(C.map(function(){var b=(0,m.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(N){return{fulfilled:!1,reason:N}}});return function(I){return b.apply(this,arguments)}}()))}(rr);z.ports[0].postMessage({status:"done",eventId:re,eventType:He,response:jr})})()}_subscribe(I,N){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(N)}_unsubscribe(I,N){this.handlersMap[I]&&N&&this.handlersMap[I].delete(N),(!N||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function ac(C="",b=10){let I="";for(let N=0;N<b;N++)I+=Math.floor(10*Math.random());return C+I}class Xg{constructor(b){this.target=b,this.handlers=new Set}removeMessageHandler(b){b.messageChannel&&(b.messageChannel.port1.removeEventListener("message",b.onMessage),b.messageChannel.port1.close()),this.handlers.delete(b)}_send(b,I,N=50){var z=this;return(0,m.Z)(function*(){const re=typeof MessageChannel<"u"?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let He,Ht;return new Promise((Mn,rr)=>{const jr=ac("",20);re.port1.start();const ls=setTimeout(()=>{rr(new Error("unsupported_event"))},N);Ht={messageChannel:re,onMessage(hc){const eu=hc;if(eu.data.eventId===jr)switch(eu.data.status){case"ack":clearTimeout(ls),He=setTimeout(()=>{rr(new Error("timeout"))},3e3);break;case"done":clearTimeout(He),Mn(eu.data.response);break;default:clearTimeout(ls),clearTimeout(He),rr(new Error("invalid_response"))}}},z.handlers.add(Ht),re.port1.addEventListener("message",Ht.onMessage),z.target.postMessage({eventType:b,eventId:jr,data:I},[re.port2])}).finally(()=>{Ht&&z.removeMessageHandler(Ht)})})()}}function Es(){return window}function Hu(){return typeof Es().WorkerGlobalScope<"u"&&"function"==typeof Es().importScripts}function Jg(){return(Jg=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ql="firebaseLocalStorageDb",kf="firebaseLocalStorage",vl="fbase_key";class bl{constructor(b){this.request=b}toPromise(){return new Promise((b,I)=>{this.request.addEventListener("success",()=>{b(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function Yd(C,b){return C.transaction([kf],b?"readwrite":"readonly").objectStore(kf)}function Pf(){const C=indexedDB.open(Ql,1);return new Promise((b,I)=>{C.addEventListener("error",()=>{I(C.error)}),C.addEventListener("upgradeneeded",()=>{const N=C.result;try{N.createObjectStore(kf,{keyPath:vl})}catch(z){I(z)}}),C.addEventListener("success",(0,m.Z)(function*(){const N=C.result;N.objectStoreNames.contains(kf)?b(N):(N.close(),yield function Qd(){const C=indexedDB.deleteDatabase(Ql);return new bl(C).toPromise()}(),b(yield Pf()))}))})}function Xd(C,b,I){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,m.Z)(function*(C,b,I){const N=Yd(C,!0).put({[vl]:b,value:I});return new bl(N).toPromise()})).apply(this,arguments)}function tm(){return(tm=(0,m.Z)(function*(C,b){const I=Yd(C,!1).get(b),N=yield new bl(I).toPromise();return void 0===N?null:N.value})).apply(this,arguments)}function nm(C,b){const I=Yd(C,!0).delete(b);return new bl(I).toPromise()}const _1=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,m.Z)(function*(){return I.db||(I.db=yield Pf()),I.db})()}_withRetries(I){var N=this;return(0,m.Z)(function*(){let z=0;for(;;)try{const re=yield N._openDb();return yield I(re)}catch(re){if(z++>3)throw re;N.db&&(N.db.close(),N.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,m.Z)(function*(){return Hu()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,m.Z)(function*(){I.receiver=oc._getInstance(function Cx(){return Hu()?self:null}()),I.receiver._subscribe("keyChanged",function(){var N=(0,m.Z)(function*(z,re){return{keyProcessed:(yield I._poll()).includes(re.key)}});return function(z,re){return N.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var N=(0,m.Z)(function*(z,re){return["keyChanged"]});return function(z,re){return N.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,m.Z)(function*(){var N,z;if(I.activeServiceWorker=yield function g1(){return Jg.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new Xg(I.activeServiceWorker);const re=yield I.sender._send("ping",{},800);!re||(null===(N=re[0])||void 0===N?void 0:N.fulfilled)&&(null===(z=re[0])||void 0===z?void 0:z.value.includes("keyChanged"))&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var N=this;return(0,m.Z)(function*(){if(N.sender&&N.activeServiceWorker&&function Ax(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===N.activeServiceWorker)try{yield N.sender._send("keyChanged",{key:I},N.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const I=yield Pf();return yield Xd(I,Df,"1"),yield nm(I,Df),!0}catch{}return!1})()}_withPendingWrite(I){var N=this;return(0,m.Z)(function*(){N.pendingWrites++;try{yield I()}finally{N.pendingWrites--}})()}_set(I,N){var z=this;return(0,m.Z)(function*(){return z._withPendingWrite((0,m.Z)(function*(){return yield z._withRetries(re=>Xd(re,I,N)),z.localCache[I]=N,z.notifyServiceWorker(I)}))})()}_get(I){var N=this;return(0,m.Z)(function*(){const z=yield N._withRetries(re=>function Rf(C,b){return tm.apply(this,arguments)}(re,I));return N.localCache[I]=z,z})()}_remove(I){var N=this;return(0,m.Z)(function*(){return N._withPendingWrite((0,m.Z)(function*(){return yield N._withRetries(z=>nm(z,I)),delete N.localCache[I],N.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,m.Z)(function*(){const N=yield I._withRetries(He=>{const Ht=Yd(He,!1).getAll();return new bl(Ht).toPromise()});if(!N)return[];if(0!==I.pendingWrites)return[];const z=[],re=new Set;for(const{fbase_key:He,value:Ht}of N)re.add(He),JSON.stringify(I.localCache[He])!==JSON.stringify(Ht)&&(I.notifyListeners(He,Ht),z.push(He));for(const He of Object.keys(I.localCache))I.localCache[He]&&!re.has(He)&&(I.notifyListeners(He,null),z.push(He));return z})()}notifyListeners(I,N){this.localCache[I]=N;const z=this.listeners[I];if(z)for(const re of Array.from(z))re(N)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,N){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(N)}_removeListener(I,N){this.listeners[I]&&(this.listeners[I].delete(N),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function rm(C,b){return Cn(C,"POST","/v2/accounts/mfaSignIn:start",ir(C,b))}function eh(){return(eh=(0,m.Z)(function*(C){return(yield Cn(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qy(C){return new Promise((b,I)=>{const N=document.createElement("script");N.setAttribute("src",C),N.onload=b,N.onerror=z=>{const re=kt("internal-error");re.customData=z,I(re)},N.type="text/javascript",N.charset="UTF-8",function im(){var C,b;return null!==(b=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==b?b:document}().appendChild(N)})}function Lf(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Wu=1e12;class Ky{constructor(b){this.auth=b,this.counter=Wu,this._widgets=new Map}render(b,I){const N=this.counter;return this._widgets.set(N,new Ff(b,this.auth.name,I||{})),this.counter++,N}reset(b){var I;const N=b||Wu;null===(I=this._widgets.get(N))||void 0===I||I.delete(),this._widgets.delete(N)}getResponse(b){var I;return(null===(I=this._widgets.get(b||Wu))||void 0===I?void 0:I.getResponse())||""}execute(b){var I=this;return(0,m.Z)(function*(){var N;return null===(N=I._widgets.get(b||Wu))||void 0===N||N.execute(),""})()}}class Ff{constructor(b,I,N){this.params=N,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof b?document.getElementById(b):b;Le(z,"argument-error",{appName:I}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function th(C){const b=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<C;N++)b.push(I.charAt(Math.floor(Math.random()*I.length)));return b.join("")}(50);const{callback:b,"expired-callback":I}=this.params;if(b)try{b(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const om=Lf("rcb"),v1=new Kn(3e4,6e4);class $u{constructor(){var b;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(b=Es().grecaptcha)||void 0===b||!b.render)}load(b,I=""){return Le(function w1(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(I),b,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(Es().grecaptcha):new Promise((N,z)=>{const re=Es().setTimeout(()=>{z(kt(b,"network-request-failed"))},v1.get());Es()[om]=()=>{Es().clearTimeout(re),delete Es()[om];const Ht=Es().grecaptcha;if(!Ht)return void z(kt(b,"internal-error"));const Mn=Ht.render;Ht.render=(rr,jr)=>{const ls=Mn(rr,jr);return this.counter++,ls},this.hostLanguage=I,N(Ht)},qy(`https://www.google.com/recaptcha/api.js??${(0,de.xO)({onload:om,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(re),z(kt(b,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(b){var I;return!(null===(I=Es().grecaptcha)||void 0===I||!I.render)&&(b===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class I1{load(b){return(0,m.Z)(function*(){return new Ky(b)})()}clearedOneInstance(){}}const am="recaptcha",Tx={theme:"light",type:"image"};class cm{constructor(b,I=Object.assign({},Tx),N){this.parameters=I,this.type=am,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zn(N),this.isInvisible="invisible"===this.parameters.size,Le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof b?document.getElementById(b):b;Le(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new I1:new $u,this.validateStartingState()}verify(){var b=this;return(0,m.Z)(function*(){b.assertNotDestroyed();const I=yield b.render(),N=b.getAssertedRecaptcha();return N.getResponse(I)||new Promise(re=>{const He=Ht=>{!Ht||(b.tokenChangeListeners.delete(He),re(Ht))};b.tokenChangeListeners.add(He),b.isInvisible&&N.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(b){return Promise.reject(b)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(b=>{throw this.renderPromise=null,b})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(b=>{this.container.removeChild(b)})}validateStartingState(){Le(!this.parameters.sitekey,this.auth,"argument-error"),Le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(b){return I=>{if(this.tokenChangeListeners.forEach(N=>N(I)),"function"==typeof b)b(I);else if("string"==typeof b){const N=Es()[b];"function"==typeof N&&N(I)}}}assertNotDestroyed(){Le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var b=this;return(0,m.Z)(function*(){if(yield b.init(),!b.widgetId){let I=b.container;if(!b.isInvisible){const N=document.createElement("div");I.appendChild(N),I=N}b.widgetId=b.getAssertedRecaptcha().render(I,b.parameters)}return b.widgetId})()}init(){var b=this;return(0,m.Z)(function*(){Le(Vt()&&!Hu(),b.auth,"internal-error"),yield function cc(){let C=null;return new Promise(b=>{"complete"!==document.readyState?(C=()=>b(),window.addEventListener("load",C)):b()}).catch(b=>{throw C&&window.removeEventListener("load",C),b})}(),b.recaptcha=yield b._recaptchaLoader.load(b.auth,b.auth.languageCode||void 0);const I=yield function y1(C){return eh.apply(this,arguments)}(b.auth);Le(I,b.auth,"internal-error"),b.parameters.sitekey=I})()}getAssertedRecaptcha(){return Le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wl{constructor(b,I){this.verificationId=b,this.onConfirmation=I}confirm(b){const I=Bc._fromVerification(this.verificationId,b);return this.onConfirmation(I)}}function qu(C,b,I){return lc.apply(this,arguments)}function lc(){return(lc=(0,m.Z)(function*(C,b,I){const N=Zn(C),z=yield Uf(N,b,(0,de.m9)(I));return new wl(z,re=>If(N,re))})).apply(this,arguments)}function lm(C,b,I){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C);yield Ug(!1,N,"phone");const z=yield Uf(N.auth,b,(0,de.m9)(I));return new wl(z,re=>qd(N,re))})).apply(this,arguments)}function nh(C,b,I){return E1.apply(this,arguments)}function E1(){return(E1=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C),z=yield Uf(N.auth,b,(0,de.m9)(I));return new wl(z,re=>Gl(N,re))})).apply(this,arguments)}function Uf(C,b,I){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(C,b,I){var N;const z=yield I.verify();try{let re;if(Le("string"==typeof z,C,"argument-error"),Le(I.type===am,C,"argument-error"),re="string"==typeof b?{phoneNumber:b}:b,"session"in re){const He=re.session;if("phoneNumber"in re)return Le("enroll"===He.type,C,"internal-error"),(yield Sx(C,{idToken:He.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{Le("signin"===He.type,C,"internal-error");const Ht=(null===(N=re.multiFactorHint)||void 0===N?void 0:N.uid)||re.multiFactorUid;return Le(Ht,C,"missing-multi-factor-info"),(yield rm(C,{mfaPendingCredential:He.credential,mfaEnrollmentId:Ht,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:He}=yield br(C,{phoneNumber:re.phoneNumber,recaptchaToken:z});return He}}finally{I._reset()}})).apply(this,arguments)}function SM(C,b){return x1.apply(this,arguments)}function x1(){return(x1=(0,m.Z)(function*(C,b){yield Vu((0,de.m9)(C),b)})).apply(this,arguments)}let AM=(()=>{class C{constructor(I){this.providerId=C.PROVIDER_ID,this.auth=Zn(I)}verifyPhoneNumber(I,N){return Uf(this.auth,I,(0,de.m9)(N))}static credential(I,N){return Bc._fromVerification(I,N)}static credentialFromResult(I){return C.credentialFromTaggedObject(I)}static credentialFromError(I){return C.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:N,temporaryProof:z}=I;return N&&z?Bc._fromTokenResponse(N,z):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function rh(C,b){return b?Se(b):(Le(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Zy extends Dn{constructor(b){super("custom","custom"),this.params=b}_getIdTokenResponse(b){return en(b,this._buildIdpRequest())}_linkToIdToken(b,I){return en(b,this._buildIdpRequest(I))}_getReauthenticationResolver(b){return en(b,this._buildIdpRequest())}_buildIdpRequest(b){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return b&&(I.idToken=b),I}}function CM(C){return r1(C.auth,new Zy(C),C.bypassAuthState)}function TM(C){const{auth:b,user:I}=C;return Le(I,b,"internal-error"),Py(I,new Zy(C),C.bypassAuthState)}function jf(C){return S1.apply(this,arguments)}function S1(){return(S1=(0,m.Z)(function*(C){const{auth:b,user:I}=C;return Le(I,b,"internal-error"),Vu(I,new Zy(C),C.bypassAuthState)})).apply(this,arguments)}class Dx{constructor(b,I,N,z,re=!1){this.auth=b,this.resolver=N,this.user=z,this.bypassAuthState=re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var b=this;return new Promise(function(){var I=(0,m.Z)(function*(N,z){b.pendingPromise={resolve:N,reject:z};try{b.eventManager=yield b.resolver._initialize(b.auth),yield b.onExecution(),b.eventManager.registerConsumer(b)}catch(re){b.reject(re)}});return function(N,z){return I.apply(this,arguments)}}())}onAuthEvent(b){var I=this;return(0,m.Z)(function*(){const{urlResponse:N,sessionId:z,postBody:re,tenantId:He,error:Ht,type:Mn}=b;if(Ht)return void I.reject(Ht);const rr={auth:I.auth,requestUri:N,sessionId:z,tenantId:He||void 0,postBody:re||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(Mn)(rr))}catch(jr){I.reject(jr)}})()}onError(b){this.reject(b)}getIdpTask(b){switch(b){case"signInViaPopup":case"signInViaRedirect":return CM;case"linkViaPopup":case"linkViaRedirect":return jf;case"reauthViaPopup":case"reauthViaRedirect":return TM;default:Nt(this.auth,"internal-error")}}resolve(b){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(b),this.unregisterAndCleanUp()}reject(b){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(b),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zs=new Kn(2e3,1e4);function Yy(C,b,I){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,m.Z)(function*(C,b,I){const N=Zn(C);Pt(C,b,Uc);const z=rh(N,I);return new um(N,"signInViaPopup",b,z).executeNotNull()})).apply(this,arguments)}function Mx(C,b,I){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C);Pt(N.auth,b,Uc);const z=rh(N.auth,I);return new um(N.auth,"reauthViaPopup",b,z,N).executeNotNull()})).apply(this,arguments)}function Do(C,b,I){return uc.apply(this,arguments)}function uc(){return(uc=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C);Pt(N.auth,b,Uc);const z=rh(N.auth,I);return new um(N.auth,"linkViaPopup",b,z,N).executeNotNull()})).apply(this,arguments)}let um=(()=>{class C extends Dx{constructor(I,N,z,re,He){super(I,N,re,He),this.provider=z,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var I=this;return(0,m.Z)(function*(){const N=yield I.execute();return Le(N,I.auth,"internal-error"),N})()}onExecution(){var I=this;return(0,m.Z)(function*(){yt(1===I.filter.length,"Popup operations only handle one event");const N=ac();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],N),I.authWindow.associatedEvent=N,I.resolver._originValidation(I.auth).catch(z=>{I.reject(z)}),I.resolver._isIframeWebStorageSupported(I.auth,z=>{z||I.reject(kt(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const I=()=>{var N,z;this.pollId=null!==(z=null===(N=this.authWindow)||void 0===N?void 0:N.window)&&void 0!==z&&z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(kt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,Zs.get())};I()}}return C.currentPopupAction=null,C})();const dc=new Map;class A1 extends Dx{constructor(b,I,N=!1){super(b,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,N),this.eventId=null}execute(){var b=()=>super.execute,I=this;return(0,m.Z)(function*(){let N=dc.get(I.auth._key());if(!N){try{const re=(yield function ih(C,b){return dm.apply(this,arguments)}(I.resolver,I.auth))?yield b().call(I):null;N=()=>Promise.resolve(re)}catch(z){N=()=>Promise.reject(z)}dc.set(I.auth._key(),N)}return I.bypassAuthState||dc.set(I.auth._key(),()=>Promise.resolve(null)),N()})()}onAuthEvent(b){var I=()=>super.onAuthEvent,N=this;return(0,m.Z)(function*(){if("signInViaRedirect"===b.type)return I().call(N,b);if("unknown"!==b.type){if(b.eventId){const z=yield N.auth._redirectUserForId(b.eventId);if(z)return N.user=z,I().call(N,b);N.resolve(null)}}else N.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function dm(){return(dm=(0,m.Z)(function*(C,b){const I=Wc(b),N=hm(C);if(!(yield N._isAvailable()))return!1;const z="true"===(yield N._get(I));return yield N._remove(I),z})).apply(this,arguments)}function Vf(C,b){return sh.apply(this,arguments)}function sh(){return(sh=(0,m.Z)(function*(C,b){return hm(C)._set(Wc(b),"true")})).apply(this,arguments)}function Il(){dc.clear()}function da(C,b){dc.set(C._key(),b)}function hm(C){return Se(C._redirectPersistence)}function Wc(C){return ge("pendingRedirect",C.config.apiKey,C.name)}function Nx(C,b,I){return function C1(C,b,I){return Xy.apply(this,arguments)}(C,b,I)}function Xy(){return(Xy=(0,m.Z)(function*(C,b,I){const N=Zn(C);Pt(C,b,Uc);const z=rh(N,I);return yield Vf(z,N),z._openRedirect(N,b,"signInViaRedirect")})).apply(this,arguments)}function kx(C,b,I){return function T1(C,b,I){return Jy.apply(this,arguments)}(C,b,I)}function Jy(){return(Jy=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C);Pt(N.auth,b,Uc);const z=rh(N.auth,I);yield Vf(z,N.auth);const re=yield Wf(N);return z._openRedirect(N.auth,b,"reauthViaRedirect",re)})).apply(this,arguments)}function Px(C,b,I){return function Rx(C,b,I){return zf.apply(this,arguments)}(C,b,I)}function zf(){return(zf=(0,m.Z)(function*(C,b,I){const N=(0,de.m9)(C);Pt(N.auth,b,Uc);const z=rh(N.auth,I);yield Ug(!1,N,b.providerId),yield Vf(z,N.auth);const re=yield Wf(N);return z._openRedirect(N.auth,b,"linkViaRedirect",re)})).apply(this,arguments)}function fm(C,b){return oh.apply(this,arguments)}function oh(){return(oh=(0,m.Z)(function*(C,b){return yield Zn(C)._initializationPromise,Xl(C,b,!1)})).apply(this,arguments)}function Xl(C,b){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,m.Z)(function*(C,b,I=!1){const N=Zn(C),z=rh(N,b),He=yield new A1(N,z,I).execute();return He&&!I&&(delete He.user._redirectEventId,yield N._persistUserIfCurrent(He.user),yield N._setRedirectUser(null,b)),He})).apply(this,arguments)}function Wf(C){return e0.apply(this,arguments)}function e0(){return(e0=(0,m.Z)(function*(C){const b=ac(`${C.uid}:::`);return C._redirectEventId=b,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),b})).apply(this,arguments)}class ah{constructor(b){this.auth=b,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(b){this.consumers.add(b),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,b)&&(this.sendToConsumer(this.queuedRedirectEvent,b),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(b){this.consumers.delete(b)}onEvent(b){if(this.hasEventBeenHandled(b))return!1;let I=!1;return this.consumers.forEach(N=>{this.isEventForConsumer(b,N)&&(I=!0,this.sendToConsumer(b,N),this.saveEventToCache(b))}),this.hasHandledPotentialRedirect||!function Ox(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t0(C);default:return!1}}(b)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=b,I=!0)),I}sendToConsumer(b,I){var N;if(b.error&&!t0(b)){const z=(null===(N=b.error.code)||void 0===N?void 0:N.split("auth/")[1])||"internal-error";I.onError(kt(this.auth,z))}else I.onAuthEvent(b)}isEventForConsumer(b,I){const N=null===I.eventId||!!b.eventId&&b.eventId===I.eventId;return I.filter.includes(b.type)&&N}hasEventBeenHandled(b){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($f(b))}saveEventToCache(b){this.cachedEventUids.add($f(b)),this.lastProcessedEventTime=Date.now()}}function $f(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(b=>b).join("-")}function t0({type:C,error:b}){return"unknown"===C&&"auth/no-auth-event"===b?.code}function M1(C){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,m.Z)(function*(C,b={}){return Cn(C,"GET","/v1/projects",b)})).apply(this,arguments)}const qf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lx=/^https?/;function pm(){return(pm=(0,m.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:b}=yield M1(C);for(const I of b)try{if(Fx(I))return}catch{}Nt(C,"unauthorized-domain")})).apply(this,arguments)}function Fx(C){const b=qt(),{protocol:I,hostname:N}=new URL(b);if(C.startsWith("chrome-extension://")){const He=new URL(C);return""===He.hostname&&""===N?"chrome-extension:"===I&&C.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===I&&He.hostname===N}if(!Lx.test(I))return!1;if(qf.test(C))return N===C;const z=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(N)}const MM=new Kn(3e4,6e4);function N1(){const C=Es().___jsl;if(C?.H)for(const b of Object.keys(C.H))if(C.H[b].r=C.H[b].r||[],C.H[b].L=C.H[b].L||[],C.H[b].r=[...C.H[b].L],C.CP)for(let I=0;I<C.CP.length;I++)C.CP[I]=null}let gm=null;function mm(C){return gm=gm||function Bx(C){return new Promise((b,I)=>{var N,z,re;function He(){N1(),gapi.load("gapi.iframes",{callback:()=>{b(gapi.iframes.getContext())},ontimeout:()=>{N1(),I(kt(C,"network-request-failed"))},timeout:MM.get()})}if(null!==(z=null===(N=Es().gapi)||void 0===N?void 0:N.iframes)&&void 0!==z&&z.Iframe)b(gapi.iframes.getContext());else{if(null===(re=Es().gapi)||void 0===re||!re.load){const Ht=Lf("iframefcb");return Es()[Ht]=()=>{gapi.load?He():I(kt(C,"network-request-failed"))},qy(`https://apis.google.com/js/api.js?onload=${Ht}`).catch(Mn=>I(Mn))}He()}}).catch(b=>{throw gm=null,b})}(C),gm}const k1=new Kn(5e3,15e3),NM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kM(C){const b=C.config;Le(b.authDomain,C,"auth-domain-config-required");const I=b.emulator?Pn(b,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,N={apiKey:b.apiKey,appName:C.name,v:se.SDK_VERSION},z=R1.get(C.config.apiHost);z&&(N.eid=z);const re=C._getFrameworks();return re.length&&(N.fw=re.join(",")),`${I}?${(0,de.xO)(N).slice(1)}`}function n0(){return n0=(0,m.Z)(function*(C){const b=yield mm(C),I=Es().gapi;return Le(I,C,"internal-error"),b.open({where:document.body,url:kM(C),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NM,dontclear:!0},N=>new Promise(function(){var z=(0,m.Z)(function*(re,He){yield N.restyle({setHideOnLeave:!1});const Ht=kt(C,"network-request-failed"),Mn=Es().setTimeout(()=>{He(Ht)},k1.get());function rr(){Es().clearTimeout(Mn),re(N)}N.ping(rr).then(rr,()=>{He(Ht)})});return function(re,He){return z.apply(this,arguments)}}()))}),n0.apply(this,arguments)}const r0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vx{constructor(b){this.window=b,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _m(C,b,I,N,z,re){Le(C.config.authDomain,C,"auth-domain-config-required"),Le(C.config.apiKey,C,"invalid-api-key");const He={apiKey:C.config.apiKey,appName:C.name,authType:I,redirectUrl:N,v:se.SDK_VERSION,eventId:z};if(b instanceof Uc){b.setDefaultLanguage(C.languageCode),He.providerId=b.providerId||"",(0,de.xb)(b.getCustomParameters())||(He.customParameters=JSON.stringify(b.getCustomParameters()));for(const[Mn,rr]of Object.entries(re||{}))He[Mn]=rr}if(b instanceof Uu){const Mn=b.getScopes().filter(rr=>""!==rr);Mn.length>0&&(He.scopes=Mn.join(","))}C.tenantId&&(He.tid=C.tenantId);const Ht=He;for(const Mn of Object.keys(Ht))void 0===Ht[Mn]&&delete Ht[Mn];return`${function o0({config:C}){return C.emulator?Pn(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,de.xO)(Ht).slice(1)}`}const ym="webStorageSupport",a0=class O1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zd,this._completeRedirectFn=Xl,this._overrideRedirectResult=da}_openPopup(b,I,N,z){var re=this;return(0,m.Z)(function*(){var He;yt(null===(He=re.eventManagers[b._key()])||void 0===He?void 0:He.manager,"_initialize() not called before _openPopup()");const Ht=_m(b,I,N,qt(),z);return function LM(C,b,I,N=500,z=600){const re=Math.max((window.screen.availHeight-z)/2,0).toString(),He=Math.max((window.screen.availWidth-N)/2,0).toString();let Ht="";const Mn=Object.assign(Object.assign({},r0),{width:N.toString(),height:z.toString(),top:re,left:He}),rr=(0,de.z$)().toLowerCase();I&&(Ht=Ke(rr)?"_blank":I),G(rr)&&(b=b||"http://localhost",Mn.scrollbars="yes");const jr=Object.entries(Mn).reduce((hc,[eu,vm])=>`${hc}${eu}=${vm},`,"");if(function Hi(C=(0,de.z$)()){var b;return Hn(C)&&!(null===(b=window.navigator)||void 0===b||!b.standalone)}(rr)&&"_self"!==Ht)return function FM(C,b){const I=document.createElement("a");I.href=C,I.target=b;const N=document.createEvent("MouseEvent");N.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(N)}(b||"",Ht),new Vx(null);const ls=window.open(b||"",Ht,jr);Le(ls,C,"popup-blocked");try{ls.focus()}catch{}return new Vx(ls)}(b,Ht,ac())})()}_openRedirect(b,I,N,z){var re=this;return(0,m.Z)(function*(){return yield re._originValidation(b),function Nf(C){Es().location.href=C}(_m(b,I,N,qt(),z)),new Promise(()=>{})})()}_initialize(b){const I=b._key();if(this.eventManagers[I]){const{manager:z,promise:re}=this.eventManagers[I];return z?Promise.resolve(z):(yt(re,"If manager is not set, promise should be"),re)}const N=this.initAndGetManager(b);return this.eventManagers[I]={promise:N},N.catch(()=>{delete this.eventManagers[I]}),N}initAndGetManager(b){var I=this;return(0,m.Z)(function*(){const N=yield function jx(C){return n0.apply(this,arguments)}(b),z=new ah(b);return N.register("authEvent",re=>(Le(re?.authEvent,b,"invalid-auth-event"),{status:z.onEvent(re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[b._key()]={manager:z},I.iframes[b._key()]=N,z})()}_isIframeWebStorageSupported(b,I){this.iframes[b._key()].send(ym,{type:ym},z=>{var re;const He=null===(re=z?.[0])||void 0===re?void 0:re[ym];void 0!==He&&I(!!He),Nt(b,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){const I=b._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function DM(C){return pm.apply(this,arguments)}(b)),this.originValidationPromises[I]}get _shouldInitProactively(){return cs()||le()||Hn()}};class $c{constructor(b){this.factorId=b}_process(b,I,N){switch(I.type){case"enroll":return this._finalizeEnroll(b,I.credential,N);case"signin":return this._finalizeSignIn(b,I.credential);default:return et("unexpected MultiFactorSessionType")}}}class c0 extends $c{constructor(b){super("phone"),this.credential=b}static _fromCredential(b){return new c0(b)}_finalizeEnroll(b,I,N){return function To(C,b){return Cn(C,"POST","/v2/accounts/mfaEnrollment:finalize",ir(C,b))}(b,{idToken:I,displayName:N,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(b,I){return function Of(C,b){return Cn(C,"POST","/v2/accounts/mfaSignIn:finalize",ir(C,b))}(b,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hx=(()=>{class C{constructor(){}static assertion(I){return c0._fromCredential(I)}}return C.FACTOR_ID="phone",C})();var L1="@firebase/auth";class u0{constructor(b){this.auth=b,this.internalListeners=new Map}getUid(){var b;return this.assertAuthConfigured(),(null===(b=this.auth.currentUser)||void 0===b?void 0:b.uid)||null}getToken(b){var I=this;return(0,m.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(b)}:null})()}addAuthTokenListener(b){if(this.assertAuthConfigured(),this.internalListeners.has(b))return;const I=this.auth.onIdTokenChanged(N=>{b(N?.stsTokenManager.accessToken||null)});this.internalListeners.set(b,I),this.updateProactiveRefresh()}removeAuthTokenListener(b){this.assertAuthConfigured();const I=this.internalListeners.get(b);!I||(this.internalListeners.delete(b),I(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const F1=(0,de.Pz)("authIdTokenMaxAge")||300;let B1=null;const Gx=C=>function(){var b=(0,m.Z)(function*(I){const N=I&&(yield I.getIdTokenResult()),z=N&&((new Date).getTime()-Date.parse(N.issuedAtTime))/1e3;if(z&&z>F1)return;const re=N?.token;B1!==re&&(B1=re,yield fetch(C,{method:re?"POST":"DELETE",headers:re?{Authorization:`Bearer ${re}`}:{}}))});return function(I){return b.apply(this,arguments)}}();function ha(C=(0,se.getApp)()){const b=(0,se._getProvider)(C,"auth");if(b.isInitialized())return b.getImmediate();const I=function nt(C,b){const I=(0,se._getProvider)(C,"auth");if(I.isInitialized()){const z=I.getImmediate(),re=I.getOptions();if((0,de.vZ)(re,b??{}))return z;Nt(z,"already-initialized")}return I.initialize({options:b})}(C,{popupRedirectResolver:a0,persistence:[_1,yl,Zd]}),N=(0,de.Pz)("authTokenSyncURL");if(N){const re=Gx(N);(function Hy(C,b,I){(0,de.m9)(C).beforeAuthStateChanged(b,I)})(I,re,()=>re(I.currentUser)),function zy(C,b,I,N){(0,de.m9)(C).onIdTokenChanged(b,I,N)}(I,He=>re(He))}const z=(0,de.q4)("auth");return z&&rt(I,`http://${z}`),I}!function $x(C){(0,se._registerComponent)(new gt.wA("auth",(b,{options:I})=>{const N=b.getProvider("app").getImmediate(),z=b.getProvider("heartbeat"),{apiKey:re,authDomain:He}=N.options;return((Ht,Mn)=>{Le(re&&!re.includes(":"),"invalid-api-key",{appName:Ht.name}),Le(!He?.includes(":"),"argument-error",{appName:Ht.name});const rr={apiKey:re,authDomain:He,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:it(C)},jr=new Sn(Ht,Mn,rr);return function We(C,b){const I=b?.persistence||[],N=(Array.isArray(I)?I:[I]).map(Se);b?.errorMap&&C._updateErrorMap(b.errorMap),C._initializeWithPersistence(N,b?.popupRedirectResolver)}(jr,I),jr})(N,z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((b,I,N)=>{b.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new gt.wA("auth-internal",b=>{const I=Zn(b.getProvider("auth").getImmediate());return new u0(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(L1,"0.21.0",function Wx(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,se.registerVersion)(L1,"0.21.0","esm2017")}("Browser")},2090:(Gn,Rt,Q)=>{Q.d(Rt,{$s:()=>pn,BH:()=>Tr,DV:()=>Ri,Dv:()=>Hr,G6:()=>Pt,GJ:()=>qs,L:()=>Je,LL:()=>Lr,P0:()=>Vt,Pz:()=>Nr,Sg:()=>Kn,UG:()=>er,UI:()=>un,US:()=>gt,Wj:()=>Br,Wl:()=>es,Yr:()=>Ot,ZB:()=>we,ZR:()=>Xn,aH:()=>Vn,b$:()=>Dt,cI:()=>Cn,dS:()=>Yn,eu:()=>Le,g5:()=>se,gK:()=>oi,gQ:()=>Gr,h$:()=>ht,hl:()=>Qt,hu:()=>de,jU:()=>Yt,lb:()=>ai,m9:()=>Ur,ne:()=>ni,p$:()=>Ie,pd:()=>mr,q4:()=>qt,r3:()=>Ki,ru:()=>ze,tV:()=>Et,uI:()=>$t,ug:()=>ws,vZ:()=>Ge,w1:()=>Nt,w9:()=>Pi,xO:()=>Ln,xb:()=>zi,z$:()=>sn,zI:()=>et,zd:()=>lr});const de=function(be,ge){if(!be)throw se(ge)},se=function(be){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+be)},st=function(be){const ge=[];let Te=0;for(let ue=0;ue<be.length;ue++){let G=be.charCodeAt(ue);G<128?ge[Te++]=G:G<2048?(ge[Te++]=G>>6|192,ge[Te++]=63&G|128):55296==(64512&G)&&ue+1<be.length&&56320==(64512&be.charCodeAt(ue+1))?(G=65536+((1023&G)<<10)+(1023&be.charCodeAt(++ue)),ge[Te++]=G>>18|240,ge[Te++]=G>>12&63|128,ge[Te++]=G>>6&63|128,ge[Te++]=63&G|128):(ge[Te++]=G>>12|224,ge[Te++]=G>>6&63|128,ge[Te++]=63&G|128)}return ge},gt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(be,ge){if(!Array.isArray(be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Te=ge?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let G=0;G<be.length;G+=3){const le=be[G],Ke=G+1<be.length,Lt=Ke?be[G+1]:0,xn=G+2<be.length,an=xn?be[G+2]:0;let Ei=(15&Lt)<<2|an>>6,Hi=63&an;xn||(Hi=64,Ke||(Ei=64)),ue.push(Te[le>>2],Te[(3&le)<<4|Lt>>4],Te[Ei],Te[Hi])}return ue.join("")},encodeString(be,ge){return this.HAS_NATIVE_SUPPORT&&!ge?btoa(be):this.encodeByteArray(st(be),ge)},decodeString(be,ge){return this.HAS_NATIVE_SUPPORT&&!ge?atob(be):function(be){const ge=[];let Te=0,ue=0;for(;Te<be.length;){const G=be[Te++];if(G<128)ge[ue++]=String.fromCharCode(G);else if(G>191&&G<224){const le=be[Te++];ge[ue++]=String.fromCharCode((31&G)<<6|63&le)}else if(G>239&&G<365){const xn=((7&G)<<18|(63&be[Te++])<<12|(63&be[Te++])<<6|63&be[Te++])-65536;ge[ue++]=String.fromCharCode(55296+(xn>>10)),ge[ue++]=String.fromCharCode(56320+(1023&xn))}else{const le=be[Te++],Ke=be[Te++];ge[ue++]=String.fromCharCode((15&G)<<12|(63&le)<<6|63&Ke)}}return ge.join("")}(this.decodeStringToByteArray(be,ge))},decodeStringToByteArray(be,ge){this.init_();const Te=ge?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let G=0;G<be.length;){const le=Te[be.charAt(G++)],Lt=G<be.length?Te[be.charAt(G)]:0;++G;const an=G<be.length?Te[be.charAt(G)]:64;++G;const Hn=G<be.length?Te[be.charAt(G)]:64;if(++G,null==le||null==Lt||null==an||null==Hn)throw Error();ue.push(le<<2|Lt>>4),64!==an&&(ue.push(Lt<<4&240|an>>2),64!==Hn&&ue.push(an<<6&192|Hn))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let be=0;be<this.ENCODED_VALS.length;be++)this.byteToCharMap_[be]=this.ENCODED_VALS.charAt(be),this.charToByteMap_[this.byteToCharMap_[be]]=be,this.byteToCharMapWebSafe_[be]=this.ENCODED_VALS_WEBSAFE.charAt(be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[be]]=be,be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(be)]=be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(be)]=be)}}},ht=function(be){const ge=st(be);return gt.encodeByteArray(ge,!0)},Je=function(be){return ht(be).replace(/\./g,"")},Et=function(be){try{return gt.decodeString(be,!0)}catch(ge){console.error("base64Decode failed: ",ge)}return null};function Ie(be){return we(void 0,be)}function we(be,ge){if(!(ge instanceof Object))return ge;switch(ge.constructor){case Date:return new Date(ge.getTime());case Object:void 0===be&&(be={});break;case Array:be=[];break;default:return ge}for(const Te in ge)!ge.hasOwnProperty(Te)||!Fe(Te)||(be[Te]=we(be[Te],ge[Te]));return be}function Fe(be){return"__proto__"!==be}function sn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $t(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function er(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Yt(){return"object"==typeof self&&self.self===self}function ze(){const be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof be&&void 0!==be.id}function Dt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Nt(){const be=sn();return be.indexOf("MSIE ")>=0||be.indexOf("Trident/")>=0}function Ot(){return!1}function Pt(){return!er()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qt(){try{return"object"==typeof indexedDB}catch{return!1}}function Le(){return new Promise((be,ge)=>{try{let Te=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(ue);G.onsuccess=()=>{G.result.close(),Te||self.indexedDB.deleteDatabase(ue),be(!0)},G.onupgradeneeded=()=>{Te=!1},G.onerror=()=>{var le;ge((null===(le=G.error)||void 0===le?void 0:le.message)||"")}}catch(Te){ge(Te)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const We=()=>{try{return function yt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const be=process.env.__FIREBASE_DEFAULTS__;return be?JSON.parse(be):void 0})()||(()=>{if(typeof document>"u")return;let be;try{be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ge=be&&Et(be[1]);return ge&&JSON.parse(ge)})()}catch(be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${be}`)}},qt=be=>{var ge,Te;return null===(Te=null===(ge=We())||void 0===ge?void 0:ge.emulatorHosts)||void 0===Te?void 0:Te[be]},Vt=be=>{const ge=qt(be);if(!ge)return;const Te=ge.lastIndexOf(":");if(Te<=0||Te+1===ge.length)throw new Error(`Invalid host ${ge} with no separate hostname and port!`);const ue=parseInt(ge.substring(Te+1),10);return"["===ge[0]?[ge.substring(1,Te-1),ue]:[ge.substring(0,Te),ue]},Vn=()=>{var be;return null===(be=We())||void 0===be?void 0:be.config},Nr=be=>{var ge;return null===(ge=We())||void 0===ge?void 0:ge[`_${be}`]};class Tr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ge,Te)=>{this.resolve=ge,this.reject=Te})}wrapCallback(ge){return(Te,ue)=>{Te?this.reject(Te):this.resolve(ue),"function"==typeof ge&&(this.promise.catch(()=>{}),1===ge.length?ge(Te):ge(Te,ue))}}}function Kn(be,ge){if(be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=ge||"demo-project",G=be.iat||0,le=be.sub||be.user_id;if(!le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ke=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:G,exp:G+3600,auth_time:G,sub:le,user_id:le,firebase:{sign_in_provider:"custom",identities:{}}},be);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(Ke)),""].join(".")}class Xn extends Error{constructor(ge,Te,ue){super(Te),this.code=ge,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lr.prototype.create)}}class Lr{constructor(ge,Te,ue){this.service=ge,this.serviceName=Te,this.errors=ue}create(ge,...Te){const ue=Te[0]||{},G=`${this.service}/${ge}`,le=this.errors[ge],Ke=le?function Di(be,ge){return be.replace(ir,(Te,ue)=>{const G=ge[ue];return null!=G?String(G):`<${ue}?>`})}(le,ue):"Error";return new Xn(G,`${this.serviceName}: ${Ke} (${G}).`,ue)}}const ir=/\{\$([^}]+)}/g;function Cn(be){return JSON.parse(be)}function es(be){return JSON.stringify(be)}const ts=function(be){let ge={},Te={},ue={},G="";try{const le=be.split(".");ge=Cn(Et(le[0])||""),Te=Cn(Et(le[1])||""),G=le[2],ue=Te.d||{},delete Te.d}catch{}return{header:ge,claims:Te,data:ue,signature:G}},Pi=function(be){const Te=ts(be).claims;return!!Te&&"object"==typeof Te&&Te.hasOwnProperty("iat")},qs=function(be){const ge=ts(be).claims;return"object"==typeof ge&&!0===ge.admin};function Ki(be,ge){return Object.prototype.hasOwnProperty.call(be,ge)}function Ri(be,ge){if(Object.prototype.hasOwnProperty.call(be,ge))return be[ge]}function zi(be){for(const ge in be)if(Object.prototype.hasOwnProperty.call(be,ge))return!1;return!0}function un(be,ge,Te){const ue={};for(const G in be)Object.prototype.hasOwnProperty.call(be,G)&&(ue[G]=ge.call(Te,be[G],G,be));return ue}function Ge(be,ge){if(be===ge)return!0;const Te=Object.keys(be),ue=Object.keys(ge);for(const G of Te){if(!ue.includes(G))return!1;const le=be[G],Ke=ge[G];if(Mt(le)&&Mt(Ke)){if(!Ge(le,Ke))return!1}else if(le!==Ke)return!1}for(const G of ue)if(!Te.includes(G))return!1;return!0}function Mt(be){return null!==be&&"object"==typeof be}function Ln(be){const ge=[];for(const[Te,ue]of Object.entries(be))Array.isArray(ue)?ue.forEach(G=>{ge.push(encodeURIComponent(Te)+"="+encodeURIComponent(G))}):ge.push(encodeURIComponent(Te)+"="+encodeURIComponent(ue));return ge.length?"&"+ge.join("&"):""}function lr(be){const ge={};return be.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[G,le]=ue.split("=");ge[decodeURIComponent(G)]=decodeURIComponent(le)}}),ge}function mr(be){const ge=be.indexOf("?");if(!ge)return"";const Te=be.indexOf("#",ge);return be.substring(ge,Te>0?Te:void 0)}class Gr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ge=1;ge<this.blockSize;++ge)this.pad_[ge]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ge,Te){Te||(Te=0);const ue=this.W_;if("string"==typeof ge)for(let Hn=0;Hn<16;Hn++)ue[Hn]=ge.charCodeAt(Te)<<24|ge.charCodeAt(Te+1)<<16|ge.charCodeAt(Te+2)<<8|ge.charCodeAt(Te+3),Te+=4;else for(let Hn=0;Hn<16;Hn++)ue[Hn]=ge[Te]<<24|ge[Te+1]<<16|ge[Te+2]<<8|ge[Te+3],Te+=4;for(let Hn=16;Hn<80;Hn++){const Ei=ue[Hn-3]^ue[Hn-8]^ue[Hn-14]^ue[Hn-16];ue[Hn]=4294967295&(Ei<<1|Ei>>>31)}let an,hr,G=this.chain_[0],le=this.chain_[1],Ke=this.chain_[2],Lt=this.chain_[3],xn=this.chain_[4];for(let Hn=0;Hn<80;Hn++){Hn<40?Hn<20?(an=Lt^le&(Ke^Lt),hr=1518500249):(an=le^Ke^Lt,hr=1859775393):Hn<60?(an=le&Ke|Lt&(le|Ke),hr=2400959708):(an=le^Ke^Lt,hr=3395469782);const Ei=(G<<5|G>>>27)+an+xn+hr+ue[Hn]&4294967295;xn=Lt,Lt=Ke,Ke=4294967295&(le<<30|le>>>2),le=G,G=Ei}this.chain_[0]=this.chain_[0]+G&4294967295,this.chain_[1]=this.chain_[1]+le&4294967295,this.chain_[2]=this.chain_[2]+Ke&4294967295,this.chain_[3]=this.chain_[3]+Lt&4294967295,this.chain_[4]=this.chain_[4]+xn&4294967295}update(ge,Te){if(null==ge)return;void 0===Te&&(Te=ge.length);const ue=Te-this.blockSize;let G=0;const le=this.buf_;let Ke=this.inbuf_;for(;G<Te;){if(0===Ke)for(;G<=ue;)this.compress_(ge,G),G+=this.blockSize;if("string"==typeof ge){for(;G<Te;)if(le[Ke]=ge.charCodeAt(G),++Ke,++G,Ke===this.blockSize){this.compress_(le),Ke=0;break}}else for(;G<Te;)if(le[Ke]=ge[G],++Ke,++G,Ke===this.blockSize){this.compress_(le),Ke=0;break}}this.inbuf_=Ke,this.total_+=Te}digest(){const ge=[];let Te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let G=this.blockSize-1;G>=56;G--)this.buf_[G]=255&Te,Te/=256;this.compress_(this.buf_);let ue=0;for(let G=0;G<5;G++)for(let le=24;le>=0;le-=8)ge[ue]=this.chain_[G]>>le&255,++ue;return ge}}function ni(be,ge){const Te=new fn(be,ge);return Te.subscribe.bind(Te)}class fn{constructor(ge,Te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Te,this.task.then(()=>{ge(this)}).catch(ue=>{this.error(ue)})}next(ge){this.forEachObserver(Te=>{Te.next(ge)})}error(ge){this.forEachObserver(Te=>{Te.error(ge)}),this.close(ge)}complete(){this.forEachObserver(ge=>{ge.complete()}),this.close()}subscribe(ge,Te,ue){let G;if(void 0===ge&&void 0===Te&&void 0===ue)throw new Error("Missing Observer.");G=function Fn(be,ge){if("object"!=typeof be||null===be)return!1;for(const Te of ge)if(Te in be&&"function"==typeof be[Te])return!0;return!1}(ge,["next","error","complete"])?ge:{next:ge,error:Te,complete:ue},void 0===G.next&&(G.next=Fr),void 0===G.error&&(G.error=Fr),void 0===G.complete&&(G.complete=Fr);const le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),le}unsubscribeOne(ge){void 0===this.observers||void 0===this.observers[ge]||(delete this.observers[ge],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ge){if(!this.finalized)for(let Te=0;Te<this.observers.length;Te++)this.sendOne(Te,ge)}sendOne(ge,Te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ge])try{Te(this.observers[ge])}catch(ue){typeof console<"u"&&console.error&&console.error(ue)}})}close(ge){this.finalized||(this.finalized=!0,void 0!==ge&&(this.finalError=ge),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fr(){}const Hr=function(be,ge,Te,ue){let G;if(ue<ge?G="at least "+ge:ue>Te&&(G=0===Te?"none":"no more than "+Te),G)throw new Error(be+" failed: Was called with "+ue+(1===ue?" argument.":" arguments.")+" Expects "+G+".")};function oi(be,ge){return`${be} failed: ${ge} argument `}function Br(be,ge,Te,ue){if((!ue||Te)&&"function"!=typeof Te)throw new Error(oi(be,ge)+"must be a valid function.")}function ai(be,ge,Te,ue){if((!ue||Te)&&("object"!=typeof Te||null===Te))throw new Error(oi(be,ge)+"must be a valid context object.")}const Yn=function(be){const ge=[];let Te=0;for(let ue=0;ue<be.length;ue++){let G=be.charCodeAt(ue);if(G>=55296&&G<=56319){const le=G-55296;ue++,de(ue<be.length,"Surrogate pair missing trail surrogate."),G=65536+(le<<10)+(be.charCodeAt(ue)-56320)}G<128?ge[Te++]=G:G<2048?(ge[Te++]=G>>6|192,ge[Te++]=63&G|128):G<65536?(ge[Te++]=G>>12|224,ge[Te++]=G>>6&63|128,ge[Te++]=63&G|128):(ge[Te++]=G>>18|240,ge[Te++]=G>>12&63|128,ge[Te++]=G>>6&63|128,ge[Te++]=63&G|128)}return ge},ws=function(be){let ge=0;for(let Te=0;Te<be.length;Te++){const ue=be.charCodeAt(Te);ue<128?ge++:ue<2048?ge+=2:ue>=55296&&ue<=56319?(ge+=4,Te++):ge+=3}return ge};function pn(be,ge=1e3,Te=2){const ue=ge*Math.pow(Te,be),G=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+G)}function Ur(be){return be&&be._delegate?be._delegate:be}},286:(Gn,Rt,Q)=>{var m=Q(4650);let de=null;function se(){return de}class gt{}const ht=new m.OlP("DocumentToken");let _o=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class yo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wo=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new yo(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const l=r.get(s);r.move(l,o),Is(l,i)}});for(let i=0,s=r.length;i<s;i++){const l=r.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Is(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Is(n,e){n.context.$implicit=e.item}let Li=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Aa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Aa{constructor(){this.$implicit=null,this.ngIf=null}}function Fc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}function hn(n,e){return new m.vHH(2100,!1)}class mn{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class xr{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const br=new xr,ci=new mn;let So=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,m.QGY)(t))return br;if((0,m.F4k)(t))return ci;throw hn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.sBO,16))},n.\u0275pipe=m.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const Ua=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Fi=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw hn();return t.replace(Ua,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"titlecase",type:n,pure:!0,standalone:!0}),n})(),Bg=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw hn();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),Ty=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const Dy="browser";function bf(n){return n===Dy}function Wd(n){return"server"===n}class To extends gt{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class zc extends To{static makeCurrent(){!function ct(n){de||(de=n)}(new zc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zg(){return xi=xi||document.querySelector("base"),xi?xi.getAttribute("href"):null}();return null==t?null:function Df(n){Tf=Tf||document.createElement("a"),Tf.setAttribute("href",n);const e=Tf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){xi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Mi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Tf,xi=null;const Yg=new m.OlP("TRANSITION_ID"),p1=[{provide:m.ip1,useFactory:function f1(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=se(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Yg,ht,m.zs3],multi:!0}];let Qg=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const yl=new m.OlP("EventManagerPlugins");let Kd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(yl),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Zd{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=se().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Wy=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),oc=(()=>{class n extends Wy{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ac),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ac))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ht))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ac(n){se().remove(n)}const Xg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Es=/%COMP%/g;function Ql(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ql(n,i,t):(i=i.replace(Es,n),t.push(i))}return t}function em(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new bl(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Xd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Jd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ql(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Kd),m.LFG(oc),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class bl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Xg[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Pf(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Pf(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Xg[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Xg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,em(r)):this.eventManager.addEventListener(e,t,em(r))}}function Pf(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xd extends bl{constructor(e,t,r,i){super(e),this.component=r;const s=Ql(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Ax(n){return"_ngcontent-%COMP%".replace(Es,n)}(i+"-"+r.id),this.hostAttr=function Cx(n){return"_nghost-%COMP%".replace(Es,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Jd extends bl{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ql(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Rf=(()=>{class n extends Zd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ht))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const tm=["alt","control","meta","shift"],nm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$y={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let m1=(()=>{class n extends Zd{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>se().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),o="code."),tm.forEach(h=>{const g=r.indexOf(h);g>-1&&(r.splice(g,1),o+=h+".")}),o+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=o,d}static matchEventFullKeyCode(t,r){let i=nm[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tm.forEach(o=>{o!==i&&(0,$y[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ht))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Gy=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:Dy},{provide:m.g9A,useValue:function eh(){zc.makeCurrent()},multi:!0},{provide:ht,useFactory:function qy(){return(0,m.RDi)(document),document},deps:[]}]),sm=new m.OlP(""),Wu=[{provide:m.rWj,useClass:class Mf{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let s=i.length,o=!1;const l=function(d){o=o||d,s--,0==s&&r(o)};i.forEach(function(d){d.whenStable(l)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?se().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Ky=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function im(){return new m.qLn},deps:[]},{provide:yl,useClass:Rf,multi:!0,deps:[ht,m.R0b,m.Lbi]},{provide:yl,useClass:m1,multi:!0,deps:[ht]},{provide:vl,useClass:vl,deps:[Kd,oc,m.AFp]},{provide:m.FYo,useExisting:vl},{provide:Wy,useExisting:oc},{provide:oc,useClass:oc,deps:[ht]},{provide:Kd,useClass:Kd,deps:[yl,m.R0b]},{provide:class jg{},useClass:Qg,deps:[]},[]];let Do,Ff=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Yg,useExisting:m.AFp},p1]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(sm,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Ky,...Wu],imports:[Ty,m.hGG]}),n})();typeof window<"u"&&window;try{Do=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Do=!1}let uc=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?bf(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Do)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.Lbi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xm(n,e=0){return function g0(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function z1(n){return Array.isArray(n)?n:[n]}var lh=Q(7579),Ku=Q(8306);const{isArray:rS}=Array,{getPrototypeOf:YM,prototype:QM,keys:XM}=Object;var Mo=Q(8996),uh=Q(4671),Si=Q(4004);const{isArray:JM}=Array;var Zf=Q(3269),Zo=Q(5403),oS=Q(9672);function m0(...n){const e=(0,Zf.yG)(n),t=(0,Zf.jO)(n),{args:r,keys:i}=function iS(n){if(1===n.length){const e=n[0];if(rS(e))return{args:e,keys:null};if(function sS(n){return n&&"object"==typeof n&&YM(n)===QM}(e)){const t=XM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Mo.D)([],e);const s=new Ku.y(function W1(n,e,t=uh.y){return r=>{$1(e,()=>{const{length:i}=n,s=new Array(i);let o=i,l=i;for(let d=0;d<i;d++)$1(e,()=>{const h=(0,Mo.D)(n[d],e);let g=!1;h.subscribe((0,Zo.x)(r,v=>{s[d]=v,g||(g=!0,l--),l||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function H1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):uh.y));return t?s.pipe(function v6(n){return(0,Si.U)(e=>function eN(n,e){return JM(e)?n(...e):n(e)}(n,e))}(t)):s}function $1(n,e,t){n?(0,oS.f)(t,n,e):e()}var aS=Q(8189);function Sm(...n){return function cS(){return(0,aS.J)(1)}()((0,Mo.D)(n,(0,Zf.yG)(n)))}var tN=Q(515),Ca=Q(4482);function _0(n){return n<=0?()=>tN.E:(0,Ca.e)((e,t)=>{let r=0;e.subscribe((0,Zo.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Am(n,e){return(0,Ca.e)((t,r)=>{let i=0;t.subscribe((0,Zo.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var fc=Q(4986);function Yf(n,e=fc.z){return(0,Ca.e)((t,r)=>{let i=null,s=null,o=null;const l=()=>{if(i){i.unsubscribe(),i=null;const h=s;s=null,r.next(h)}};function d(){const h=o+n,g=e.now();if(g<h)return i=this.schedule(void 0,h-g),void r.add(i);l()}t.subscribe((0,Zo.x)(r,h=>{s=h,o=e.now(),i||(i=e.schedule(d,n),r.add(i))},()=>{l(),r.complete()},void 0,()=>{s=i=null}))})}function Cm(...n){const e=(0,Zf.yG)(n);return(0,Ca.e)((t,r)=>{(e?Sm(n,t,e):Sm(n,t)).subscribe(r)})}var lS=Q(8421),uS=Q(5032);function b6(n){return(0,Ca.e)((e,t)=>{(0,lS.Xf)(n).subscribe((0,Zo.x)(t,()=>t.complete(),uS.Z)),!t.closed&&e.subscribe(t)})}const rN=new Set;let dh,iN=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):oN}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function sN(n){if(!rN.has(n))try{dh||(dh=document.createElement("style"),dh.setAttribute("type","text/css"),document.head.appendChild(dh)),dh.sheet&&(dh.sheet.insertRule(`@media ${n} {body{ }}`,0),rN.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(uc))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oN(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let aN=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new lh.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return y0(z1(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=m0(y0(z1(t)).map(o=>this._registerQuery(o).observable));return s=Sm(s.pipe(_0(1)),s.pipe(function nN(n){return Am((e,t)=>n<=t)}(1),Yf(0))),s.pipe((0,Si.U)(o=>{const l={matches:!1,breakpoints:{}};return o.forEach(({matches:d,query:h})=>{l.matches=l.matches||d,l.breakpoints[h]=d}),l}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Ku.y(o=>{const l=d=>this._zone.run(()=>o.next(d));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(Cm(r),(0,Si.U)(({matches:o})=>({query:t,matches:o})),b6(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(iN),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y0(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const mS="cdk-high-contrast-black-on-white",b0="cdk-high-contrast-white-on-black",Jf="cdk-high-contrast-active";let ep=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,m.f3M)(aN).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Jf,mS,b0),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(Jf,mS):2===r&&t.add(Jf,b0)}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(uc),m.LFG(ht))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const NN=new m.OlP("mat-sanity-checks",{providedIn:"root",factory:function Nm(){return!0}});let km=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function T1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ep),m.LFG(NN,8),m.LFG(ht))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[yS,yS]}),n})();function wS(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}const TS=new m.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),l8=wS(class{constructor(n){this._elementRef=n}},"primary");let ew=(()=>{class n extends l8{constructor(t,r,i,s,o){super(t),this._ngZone=r,this._changeDetectorRef=i,this._animationMode=s,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new m.vpe,this._mode="determinate",this._transitionendHandler=l=>{0===this.animationEnd.observers.length||!l.target||!l.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation="NoopAnimations"===s,o&&(o.color&&(this.color=this.defaultColor=o.color),this.mode=o.mode||this.mode)}get value(){return this._value}set value(t){this._value=tw(xm(t)),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=tw(xm(t)),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(m.sBO),m.Y36(m.QbO,8),m.Y36(TS,8))},n.\u0275cmp=m.Xpm({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:8,hostBindings:function(t,r){2&t&&(m.uIk("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),m.ekj("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[m.qOj],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m._UZ(1,"div",1)(2,"div",2),m.qZA(),m.TgZ(3,"div",3),m._UZ(4,"span",4),m.qZA(),m.TgZ(5,"div",5),m._UZ(6,"span",4),m.qZA()),2&t&&(m.xp6(1),m.Udp("flex-basis",r._getBufferBarFlexBasis()),m.xp6(2),m.Udp("transform",r._getPrimaryBarTransform()))},styles:["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half, 83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full, 200.611057%))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter, 37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half, 84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full, 160.277782%))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(-10px)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg, -83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg, -200.611057%))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg, -37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg, -84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg, -160.277782%))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;width:100%;height:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;width:100%;height:100%}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color, #6200ee)}.mdc-linear-progress__buffer-dots{background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\")}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6}.mdc-linear-progress{height:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height, 4px)}.mat-mdc-progress-bar{display:block}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}"],encapsulation:2,changeDetection:0}),n})();function tw(n,e=0,t=100){return Math.max(e,Math.min(t,n))}let hh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[km]}),n})(),g8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Ty,km]}),n})(),rp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[km,Ty,km]}),n})();var Rm=(()=>{return(n=Rm||(Rm={}))[n.COMPETENCES=0]="COMPETENCES",Rm;var n})();function Ui(n){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}var Wi=Uint8Array,zs=Uint16Array,za=Uint32Array,Qu=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),El=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fh=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Om=function(n,e){for(var t=new zs(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];var i=new za(t[30]);for(r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},sw=Om(Qu,2),Lm=sw[0],ip=sw[1];Lm[28]=258,ip[258]=28;for(var E0=Om(El,0),ow=E0[0],Fm=E0[1],Bm=new zs(32768),us=0;us<32768;++us){var tu=(43690&us)>>>1|(21845&us)<<1;Bm[us]=((65280&(tu=(61680&(tu=(52428&tu)>>>2|(13107&tu)<<2))>>>4|(3855&tu)<<4))>>>8|(255&tu)<<8)>>>1}var pc=function(n,e,t){for(var r=n.length,i=0,s=new zs(e);i<r;++i)++s[n[i]-1];var l,o=new zs(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;if(t){l=new zs(1<<e);var d=15-e;for(i=0;i<r;++i)if(n[i])for(var h=i<<4|n[i],g=e-n[i],v=o[n[i]-1]++<<g,E=v|(1<<g)-1;v<=E;++v)l[Bm[v]>>>d]=h}else for(l=new zs(r),i=0;i<r;++i)l[i]=Bm[o[n[i]-1]++]>>>15-n[i];return l},xl=new Wi(288);for(us=0;us<144;++us)xl[us]=8;for(us=144;us<256;++us)xl[us]=9;for(us=256;us<280;++us)xl[us]=7;for(us=280;us<288;++us)xl[us]=8;var ph=new Wi(32);for(us=0;us<32;++us)ph[us]=5;var LS=pc(xl,9,0),FS=pc(xl,9,1),Ta=pc(ph,5,0),aw=pc(ph,5,1),x0=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Gc=function(n,e,t){var r=e/8>>0;return(n[r]|n[r+1]<<8)>>>(7&e)&t},sp=function(n,e){var t=e/8>>0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>>(7&e)},op=function(n){return(n/8>>0)+(7&n&&1)},gh=function(n,e,t){(null==e||e<0)&&(e=0),(null==t||t>n.length)&&(t=n.length);var r=new(n instanceof zs?zs:n instanceof za?za:Wi)(t-e);return r.set(n.subarray(e,t)),r},Sl=function(n,e,t){var r=e/8>>0;n[r]|=t<<=7&e,n[r+1]|=t>>>8},mh=function(n,e,t){var r=e/8>>0;n[r]|=t<<=7&e,n[r+1]|=t>>>8,n[r+2]|=t>>>16},A0=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[new Wi(0),0];if(1==i){var o=new Wi(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(ie,_e){return ie.f-_e.f}),t.push({s:-1,f:25001});var l=t[0],d=t[1],h=0,g=1,v=2;for(t[0]={s:-1,f:l.f+d.f,l,r:d};g!=i-1;)l=t[t[h].f<t[v].f?h++:v++],d=t[h!=g&&t[h].f<t[v].f?h++:v++],t[g++]={s:-1,f:l.f+d.f,l,r:d};var E=s[0].s;for(r=1;r<i;++r)s[r].s>E&&(E=s[r].s);var w=new zs(E+1),D=C0(t[g-1],w,0);if(D>e){r=0;var P=0,L=D-e,F=1<<L;for(s.sort(function(_e,fe){return w[fe.s]-w[_e.s]||_e.f-fe.f});r<i;++r){var U=s[r].s;if(!(w[U]>e))break;P+=F-(1<<D-w[U]),w[U]=e}for(P>>>=L;P>0;){var K=s[r].s;w[K]<e?P-=1<<e-w[K]++-1:++r}for(;r>=0&&P;--r){var J=s[r].s;w[J]==e&&(--w[J],++P)}D=e}return[new Wi(w),D]},C0=function(n,e,t){return-1==n.s?Math.max(C0(n.l,e,t+1),C0(n.r,e,t+1)):e[n.s]=t},Um=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new zs(++e),r=0,i=n[0],s=1,o=function(d){t[r++]=d},l=1;l<=e;++l)if(n[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[l]}return[t.subarray(0,r),e]},ap=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},jm=function(n,e,t){var r=t.length,i=op(e+2);n[i]=255&r,n[i+1]=r>>>8,n[i+2]=255^n[i],n[i+3]=255^n[i+1];for(var s=0;s<r;++s)n[i+s+4]=t[s];return 8*(i+4+r)},cw=function(n,e,t,r,i,s,o,l,d,h,g){Sl(e,g++,t),++i[256];for(var v=A0(i,15),E=v[0],w=v[1],D=A0(s,15),P=D[0],L=D[1],F=Um(E),U=F[0],K=F[1],J=Um(P),ie=J[0],_e=J[1],fe=new zs(19),oe=0;oe<U.length;++oe)fe[31&U[oe]]++;for(oe=0;oe<ie.length;++oe)fe[31&ie[oe]]++;for(var Be=A0(fe,7),tt=Be[0],ne=Be[1],te=19;te>4&&!tt[fh[te-1]];--te);var Ze,ut,Ye,Tt,xe=h+5<<3,ve=ap(i,xl)+ap(s,ph)+o,Ve=ap(i,E)+ap(s,P)+o+14+3*te+ap(fe,tt)+(2*fe[16]+3*fe[17]+7*fe[18]);if(xe<=ve&&xe<=Ve)return jm(e,g,n.subarray(d,d+h));if(Sl(e,g,1+(Ve<ve)),g+=2,Ve<ve){Ze=pc(E,w,0),ut=E,Ye=pc(P,L,0),Tt=P;var It=pc(tt,ne,0);for(Sl(e,g,K-257),Sl(e,g+5,_e-1),Sl(e,g+10,te-4),g+=14,oe=0;oe<te;++oe)Sl(e,g+3*oe,tt[fh[oe]]);g+=3*te;for(var wn=[U,ie],$=0;$<2;++$){var he=wn[$];for(oe=0;oe<he.length;++oe)Sl(e,g,It[me=31&he[oe]]),g+=tt[me],me>15&&(Sl(e,g,he[oe]>>>5&127),g+=he[oe]>>>12)}}else Ze=LS,ut=xl,Ye=Ta,Tt=ph;for(oe=0;oe<l;++oe)if(r[oe]>255){var me;mh(e,g,Ze[257+(me=r[oe]>>>18&31)]),g+=ut[me+257],me>7&&(Sl(e,g,r[oe]>>>23&31),g+=Qu[me]);var Me=31&r[oe];mh(e,g,Ye[Me]),g+=Tt[Me],Me>3&&(mh(e,g,r[oe]>>>5&8191),g+=El[Me])}else mh(e,g,Ze[r[oe]]),g+=ut[r[oe]];return mh(e,g,Ze[256]),g+ut[256]},BS=new za([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),US=new Wi(0),Vm=function(n,e,t,r,i){return function(n,e,t,r,i,s){var o=n.length,l=new Wi(r+o+5*(1+Math.floor(o/7e3))+i),d=l.subarray(r,l.length-i),h=0;if(!e||o<8)for(var g=0;g<=o;g+=65535){var v=g+65535;v<o?h=jm(d,h,n.subarray(g,v)):(d[g]=s,h=jm(d,h,n.subarray(g,o)))}else{for(var E=BS[e-1],w=E>>>13,D=8191&E,P=(1<<t)-1,L=new zs(32768),F=new zs(P+1),U=Math.ceil(t/3),K=2*U,J=function(Sr){return(n[Sr]^n[Sr+1]<<U^n[Sr+2]<<K)&P},ie=new za(25e3),_e=new zs(288),fe=new zs(32),oe=0,Be=0,tt=(g=0,0),ne=0,te=0;g<o;++g){var xe=J(g),ve=32767&g,Ve=F[xe];if(L[ve]=Ve,F[xe]=ve,ne<=g){var Ze=o-g;if((oe>7e3||tt>24576)&&Ze>423){h=cw(n,d,0,ie,_e,fe,Be,tt,te,g-te,h),tt=oe=Be=0,te=g;for(var ut=0;ut<286;++ut)_e[ut]=0;for(ut=0;ut<30;++ut)fe[ut]=0}var Ye=2,Tt=0,It=D,wn=ve-Ve&32767;if(Ze>2&&xe==J(g-wn))for(var $=Math.min(w,Ze)-1,he=Math.min(32767,g),me=Math.min(258,Ze);wn<=he&&--It&&ve!=Ve;){if(n[g+Ye]==n[g+Ye-wn]){for(var Me=0;Me<me&&n[g+Me]==n[g+Me-wn];++Me);if(Me>Ye){if(Ye=Me,Tt=wn,Me>$)break;var je=Math.min(wn,Me-2),ot=0;for(ut=0;ut<je;++ut){var dt=g-wn+ut+32768&32767,dn=dt-L[dt]+32768&32767;dn>ot&&(ot=dn,Ve=dt)}}}wn+=(ve=Ve)-(Ve=L[ve])+32768&32767}if(Tt){ie[tt++]=268435456|ip[Ye]<<18|Fm[Tt];var cn=31&ip[Ye],Rn=31&Fm[Tt];Be+=Qu[cn]+El[Rn],++_e[257+cn],++fe[Rn],ne=g+Ye,++oe}else ie[tt++]=n[g],++_e[n[g]]}}h=cw(n,d,s,ie,_e,fe,Be,tt,te,g-te,h),s||(h=jm(d,h,US))}return gh(l,0,r+op(h)+i)}(n,e.level??6,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+e.mem,t,r,!i)};function Wm(n,e){void 0===e&&(e={});var t=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,o=0;o!=s;){for(var l=Math.min(o+5552,s);o<l;++o)i+=r+=t[o];r%=65521,i%=65521}n=r,e=i},d:function(){return(n>>>8<<16|(255&e)<<8|e>>>8)+2*((255&n)<<23)}}}();t.p(n);var r=Vm(n,e,2,4);return function(n,e){var t=e.level,r=0==t?0:t<6?1:9==t?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)}(r,e),function(n,e,t){for(;t;++e)n[e]=t,t>>>=8}(r,r.length-4,t.d()),r}function L0(n,e){return function(n,e,t){var r=n.length,i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Wi(3*r));var o=function(je){var ot=e.length;if(je>ot){var dt=new Wi(Math.max(2*ot,je));dt.set(e),e=dt}},l=t.f||0,d=t.p||0,h=t.b||0,g=t.l,v=t.d,E=t.m,w=t.n,D=8*r;do{if(!g){t.f=l=Gc(n,d,1);var P=Gc(n,d+1,3);if(d+=3,!P){var F=n[(L=op(d)+4)-4]|n[L-3]<<8,U=L+F;if(U>r){if(s)throw"unexpected EOF";break}i&&o(h+F),e.set(n.subarray(L,U),h),t.b=h+=F,t.p=d=8*U;continue}if(1==P)g=FS,v=aw,E=9,w=5;else{if(2!=P)throw"invalid block type";var K=Gc(n,d,31)+257,J=Gc(n,d+10,15)+4,ie=K+Gc(n,d+5,31)+1;d+=14;for(var _e=new Wi(ie),fe=new Wi(19),oe=0;oe<J;++oe)fe[fh[oe]]=Gc(n,d+3*oe,7);d+=3*J;var Be=x0(fe),tt=(1<<Be)-1;if(!s&&d+ie*(Be+7)>D)break;var ne=pc(fe,Be,1);for(oe=0;oe<ie;){var L,te=ne[Gc(n,d,tt)];if(d+=15&te,(L=te>>>4)<16)_e[oe++]=L;else{var xe=0,ve=0;for(16==L?(ve=3+Gc(n,d,3),d+=2,xe=_e[oe-1]):17==L?(ve=3+Gc(n,d,7),d+=3):18==L&&(ve=11+Gc(n,d,127),d+=7);ve--;)_e[oe++]=xe}}var Ve=_e.subarray(0,K),Ze=_e.subarray(K);E=x0(Ve),w=x0(Ze),g=pc(Ve,E,1),v=pc(Ze,w,1)}if(d>D)throw"unexpected EOF"}i&&o(h+131072);for(var ut=(1<<E)-1,Ye=(1<<w)-1,Tt=E+w+18;s||d+Tt<D;){var It=(xe=g[sp(n,d)&ut])>>>4;if((d+=15&xe)>D)throw"unexpected EOF";if(!xe)throw"invalid length/literal";if(It<256)e[h++]=It;else{if(256==It){g=null;break}var wn=It-254;It>264&&(wn=Gc(n,d,(1<<($=Qu[oe=It-257]))-1)+Lm[oe],d+=$);var he=v[sp(n,d)&Ye],me=he>>>4;if(!he)throw"invalid distance";if(d+=15&he,Ze=ow[me],me>3){var $=El[me];Ze+=sp(n,d)&(1<<$)-1,d+=$}if(d>D)throw"unexpected EOF";i&&o(h+131072);for(var Me=h+wn;h<Me;h+=4)e[h]=e[h-Ze],e[h+1]=e[h+1-Ze],e[h+2]=e[h+2-Ze],e[h+3]=e[h+3-Ze];h=Me}}t.l=g,t.p=d,t.b=h,g&&(l=1,t.m=E,t.d=v,t.n=w)}while(!l);return h==e.length?e:gh(e,0,h)}((function(n){if(8!=(15&n[0])||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(32&n[1])throw"invalid zlib data: preset dictionaries not supported"}(n),n.subarray(2,-4)),e)}var pr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Xu(){pr.console&&"function"==typeof pr.console.log&&pr.console.log.apply(pr.console,arguments)}var vi={log:Xu,warn:function(n){pr.console&&("function"==typeof pr.console.warn?pr.console.warn.apply(pr.console,arguments):Xu.call(null,arguments))},error:function(n){pr.console&&("function"==typeof pr.console.error?pr.console.error.apply(pr.console,arguments):Xu(n))}};function Ju(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){gc(r.response,e,t)},r.onerror=function(){vi.error("could not download file")},r.send()}function vh(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function nu(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Al,ed,gc=pr.saveAs||("object"!==(typeof window>"u"?"undefined":Ui(window))||window!==pr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=pr.URL||pr.webkitURL,i=document.createElement("a");i.download=e=e||n.name||"download",i.rel="noopener","string"==typeof n?(i.href=n,i.origin!==location.origin?vh(i.href)?Ju(n,e,t):nu(i,i.target="_blank"):nu(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){nu(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download","string"==typeof n)if(vh(n))Ju(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){nu(r)})}else navigator.msSaveOrOpenBlob((i=n,void 0===(s=t)?s={autoBom:!1}:"object"!==Ui(s)&&(vi.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i),e);var i,s}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof n)return Ju(n,e,t);var i="application/octet-stream"===n.type,s=/constructor/i.test(pr.HTMLElement)||pr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&"object"===(typeof FileReader>"u"?"undefined":Ui(FileReader))){var l=new FileReader;l.onloadend=function(){var g=l.result;g=o?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},l.readAsDataURL(n)}else{var d=pr.URL||pr.webkitURL,h=d.createObjectURL(n);r?r.location=h:location.href=h,r=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});function bh(n){var e;n=n||"",this.ok=!1,"#"==n.charAt(0)&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<t.length;r++){var s=t[r].process,o=t[r].re.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),h=this.b.toString(16);return 1==l.length&&(l="0"+l),1==d.length&&(d="0"+d),1==h.length&&(h="0"+h),"#"+l+d+h}}function B0(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=No(t,r,i,s,e[0],7,-680876936),s=No(s,t,r,i,e[1],12,-389564586),i=No(i,s,t,r,e[2],17,606105819),r=No(r,i,s,t,e[3],22,-1044525330),t=No(t,r,i,s,e[4],7,-176418897),s=No(s,t,r,i,e[5],12,1200080426),i=No(i,s,t,r,e[6],17,-1473231341),r=No(r,i,s,t,e[7],22,-45705983),t=No(t,r,i,s,e[8],7,1770035416),s=No(s,t,r,i,e[9],12,-1958414417),i=No(i,s,t,r,e[10],17,-42063),r=No(r,i,s,t,e[11],22,-1990404162),t=No(t,r,i,s,e[12],7,1804603682),s=No(s,t,r,i,e[13],12,-40341101),i=No(i,s,t,r,e[14],17,-1502002290),t=ko(t,r=No(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ko(s,t,r,i,e[6],9,-1069501632),i=ko(i,s,t,r,e[11],14,643717713),r=ko(r,i,s,t,e[0],20,-373897302),t=ko(t,r,i,s,e[5],5,-701558691),s=ko(s,t,r,i,e[10],9,38016083),i=ko(i,s,t,r,e[15],14,-660478335),r=ko(r,i,s,t,e[4],20,-405537848),t=ko(t,r,i,s,e[9],5,568446438),s=ko(s,t,r,i,e[14],9,-1019803690),i=ko(i,s,t,r,e[3],14,-187363961),r=ko(r,i,s,t,e[8],20,1163531501),t=ko(t,r,i,s,e[13],5,-1444681467),s=ko(s,t,r,i,e[2],9,-51403784),i=ko(i,s,t,r,e[7],14,1735328473),t=Po(t,r=ko(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Po(s,t,r,i,e[8],11,-2022574463),i=Po(i,s,t,r,e[11],16,1839030562),r=Po(r,i,s,t,e[14],23,-35309556),t=Po(t,r,i,s,e[1],4,-1530992060),s=Po(s,t,r,i,e[4],11,1272893353),i=Po(i,s,t,r,e[7],16,-155497632),r=Po(r,i,s,t,e[10],23,-1094730640),t=Po(t,r,i,s,e[13],4,681279174),s=Po(s,t,r,i,e[0],11,-358537222),i=Po(i,s,t,r,e[3],16,-722521979),r=Po(r,i,s,t,e[6],23,76029189),t=Po(t,r,i,s,e[9],4,-640364487),s=Po(s,t,r,i,e[12],11,-421815835),i=Po(i,s,t,r,e[15],16,530742520),t=Ro(t,r=Po(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ro(s,t,r,i,e[7],10,1126891415),i=Ro(i,s,t,r,e[14],15,-1416354905),r=Ro(r,i,s,t,e[5],21,-57434055),t=Ro(t,r,i,s,e[12],6,1700485571),s=Ro(s,t,r,i,e[3],10,-1894986606),i=Ro(i,s,t,r,e[10],15,-1051523),r=Ro(r,i,s,t,e[1],21,-2054922799),t=Ro(t,r,i,s,e[8],6,1873313359),s=Ro(s,t,r,i,e[15],10,-30611744),i=Ro(i,s,t,r,e[6],15,-1560198380),r=Ro(r,i,s,t,e[13],21,1309151649),t=Ro(t,r,i,s,e[4],6,-145523070),s=Ro(s,t,r,i,e[11],10,-1120210379),i=Ro(i,s,t,r,e[2],15,718787259),r=Ro(r,i,s,t,e[9],21,-343485551),n[0]=td(t,n[0]),n[1]=td(r,n[1]),n[2]=td(i,n[2]),n[3]=td(s,n[3])}function $m(n,e,t,r,i,s){return e=td(td(e,n),td(r,s)),td(e<<i|e>>>32-i,t)}function No(n,e,t,r,i,s,o){return $m(e&t|~e&r,n,e,i,s,o)}function ko(n,e,t,r,i,s,o){return $m(e&r|t&~r,n,e,i,s,o)}function Po(n,e,t,r,i,s,o){return $m(e^t^r,n,e,i,s,o)}function Ro(n,e,t,r,i,s,o){return $m(t^(e|~r),n,e,i,s,o)}function yw(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)B0(r,QS(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(B0(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,B0(r,i),r}function QS(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Al=pr.atob.bind(pr),ed=pr.btoa.bind(pr);var vw="0123456789abcdef".split("");function lk(n){for(var e="",t=0;t<4;t++)e+=vw[n>>8*t+4&15]+vw[n>>8*t&15];return e}function uk(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function U0(n){return yw(n).map(uk).join("")}var dk="5d41402abc4b2a76b9719d911017c592"!=function(n){for(var e=0;e<n.length;e++)n[e]=lk(n[e]);return n.join("")}(yw("hello"));function td(n,e){if(dk){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function qm(n,e){var t,r,i;if(n!==t){for(var o=(i=n,new Array(1+(256/n.length>>0)+1).join(i)),l=[],d=0;d<256;d++)l[d]=d;var h=0;for(d=0;d<256;d++){var g=l[d];h=(h+g+o.charCodeAt(d))%256,l[d]=l[h],l[h]=g}t=n,r=l}else l=r;var v=e.length,E=0,w=0,D="";for(d=0;d<v;d++)w=(w+(g=l[E=(E+1)%256]))%256,l[E]=l[w],l[w]=g,o=l[(l[E]+l[w])%256],D+=String.fromCharCode(e.charCodeAt(d)^o);return D}var j0={print:4,modify:8,copy:16,"annot-forms":32};function pp(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(l){if(void 0!==j0.perm)throw new Error("Invalid permission: "+l);i+=j0[l]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=U0(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qm(this.encryptionKey,this.padding)}function ru(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function Gm(n){if("object"!==Ui(n))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,"string"!=typeof t||"function"!=typeof r||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],0===Object.keys(e[r]).length&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(l){pr.console&&vi.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function gp(n){if(!(this instanceof gp))return new gp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function XS(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function iu(n,e,t,r,i){if(!(this instanceof iu))return new iu(n,e,t,r,i);this.type="axial"===n?2:3,this.coords=e,this.colors=t,XS.call(this,r,i)}function nd(n,e,t,r,i){if(!(this instanceof nd))return new nd(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,XS.call(this,r,i)}function gr(n){var e,t="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,d=16,h="S",g=null;"object"===Ui(n=n||{})&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,null!==(g=n.encryption||null)&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),l="number"==typeof n.userUnit?Math.abs(n.userUnit):1,void 0!==n.precision&&(e=n.precision),void 0!==n.floatPrecision&&(d=n.floatPrecision),h=n.defaultPathOperation||"S"),o=n.filters||(!0===s?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var v=n.putOnlyUsedFonts||!1,E={},w={internal:{},__private__:{}};w.__private__.PubSub=Gm;var D="1.3",P=w.__private__.getPdfVersion=function(){return D};w.__private__.setPdfVersion=function(T){D=T};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};w.__private__.getPageFormats=function(){return L};var F=w.__private__.getPageFormat=function(T){return L[T]};i=i||"a4";var U={COMPAT:"compat",ADVANCED:"advanced"},K=U.COMPAT;function J(){this.saveGraphicsState(),ye(new Er(kn,0,0,-kn,0,Sg()*kn).toString()+" cm"),this.setFontSize(this.getFontSize()/kn),h="n",K=U.ADVANCED}function ie(){this.restoreGraphicsState(),h="S",K=U.COMPAT}var _e=w.__private__.combineFontStyleAndFontWeight=function(T,V){if("bold"==T&&"normal"==V||"bold"==T&&400==V||"normal"==T&&"italic"==V||"bold"==T&&"italic"==V)throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(T=400==V||"normal"===V?"italic"===T?"italic":"normal":700!=V&&"bold"!==V||"normal"!==T?(700==V?"bold":V)+""+T:"bold"),T};w.advancedAPI=function(T){var V=K===U.COMPAT;return V&&J.call(this),"function"!=typeof T||(T(this),V&&ie.call(this)),this},w.compatAPI=function(T){var V=K===U.ADVANCED;return V&&ie.call(this),"function"!=typeof T||(T(this),V&&J.call(this)),this},w.isAdvancedAPI=function(){return K===U.ADVANCED};var fe,oe=function(T){if(K!==U.ADVANCED)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Be=w.roundToPrecision=w.__private__.roundToPrecision=function(T,V){var pe=e||V;if(isNaN(T)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(pe).replace(/0+$/,"")};fe=w.hpf=w.__private__.hpf="number"==typeof d?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(T,d)}:"smart"===d?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(T,16)};var tt=w.f2=w.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return Be(T,2)},ne=w.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return Be(T,3)},te=w.scale=w.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return K===U.COMPAT?T*kn:K===U.ADVANCED?T:void 0},xe=function(T){return K===U.COMPAT?Sg()-T:K===U.ADVANCED?T:void 0},ve=function(T){return te(xe(T))};w.__private__.setPrecision=w.setPrecision=function(T){"number"==typeof parseInt(T,10)&&(e=parseInt(T,10))};var Ve,Ze="00000000000000000000000000000000",ut=w.__private__.getFileId=function(){return Ze},Ye=w.__private__.setFileId=function(T){return Ze=void 0!==T&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():Ze.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==g&&(Fa=new pp(g.userPermissions,g.userPassword,g.ownerPassword,Ze)),Ze};w.setFileId=function(T){return Ye(T),this},w.getFileId=function(){return ut()};var Tt=w.__private__.convertDateToPDFDate=function(T){var V=T.getTimezoneOffset(),pe=V<0?"+":"-",Ce=Math.floor(Math.abs(V/60)),qe=Math.abs(V%60),xt=[pe,me(Ce),"'",me(qe),"'"].join("");return["D:",T.getFullYear(),me(T.getMonth()+1),me(T.getDate()),me(T.getHours()),me(T.getMinutes()),me(T.getSeconds()),xt].join("")},It=w.__private__.convertPDFDateToDate=function(T){var V=parseInt(T.substr(2,4),10),pe=parseInt(T.substr(6,2),10)-1,Ce=parseInt(T.substr(8,2),10),qe=parseInt(T.substr(10,2),10),xt=parseInt(T.substr(12,2),10),nn=parseInt(T.substr(14,2),10);return new Date(V,pe,Ce,qe,xt,nn,0)},wn=w.__private__.setCreationDate=function(T){var V;if(void 0===T&&(T=new Date),T instanceof Date)V=Tt(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=T}return Ve=V},$=w.__private__.getCreationDate=function(T){var V=Ve;return"jsDate"===T&&(V=It(Ve)),V};w.setCreationDate=function(T){return wn(T),this},w.getCreationDate=function(T){return $(T)};var he,me=w.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},Me=w.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},je=0,ot=[],dt=[],_t=0,dn=[],cn=[],Rn=!1,zn=dt,Sr=function(){je=0,_t=0,dt=[],ot=[],dn=[],af=wo(),Au=wo()};w.__private__.setCustomOutputDestination=function(T){Rn=!0,zn=T};var Ct=function(T){Rn||(zn=T)};w.__private__.resetCustomOutputDestination=function(){Rn=!1,zn=dt};var ye=w.__private__.out=function(T){return T=T.toString(),_t+=T.length+1,zn.push(T),zn},$r=w.__private__.write=function(T){return ye(1===arguments.length?T.toString():Array.prototype.join.call(arguments," "))},nr=w.__private__.getArrayBuffer=function(T){for(var V=T.length,pe=new ArrayBuffer(V),Ce=new Uint8Array(pe);V--;)Ce[V]=T.charCodeAt(V);return pe},on=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];w.__private__.getStandardFonts=function(){return on};var vn=n.fontSize||16;w.__private__.setFontSize=w.setFontSize=function(T){return vn=K===U.ADVANCED?T/kn:T,this};var Nn,An=w.__private__.getFontSize=w.getFontSize=function(){return K===U.COMPAT?vn:vn*kn},cr=n.R2L||!1;w.__private__.setR2L=w.setR2L=function(T){return cr=T,this},w.__private__.getR2L=w.getR2L=function(){return cr};var Vr,Xr=w.__private__.setZoomMode=function(T){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))Nn=T;else if(isNaN(T)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(T))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');Nn=T}else Nn=parseInt(T,10)};w.__private__.getZoomMode=function(){return Nn};var si,Ci=w.__private__.setPageMode=function(T){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');Vr=T};w.__private__.getPageMode=function(){return Vr};var os=w.__private__.setLayoutMode=function(T){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');si=T};w.__private__.getLayoutMode=function(){return si},w.__private__.setDisplayMode=w.setDisplayMode=function(T,V,pe){return Xr(T),os(V),Ci(pe),this};var Mr={title:"",subject:"",author:"",keywords:"",creator:""};w.__private__.getDocumentProperty=function(T){if(-1===Object.keys(Mr).indexOf(T))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mr[T]},w.__private__.getDocumentProperties=function(){return Mr},w.__private__.setDocumentProperties=w.setProperties=w.setDocumentProperties=function(T){for(var V in Mr)Mr.hasOwnProperty(V)&&T[V]&&(Mr[V]=T[V]);return this},w.__private__.setDocumentProperty=function(T,V){if(-1===Object.keys(Mr).indexOf(T))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mr[T]=V};var ui,kn,La,ki,Eu,fs={},Vs={},Rd=[],qi={},gy={},ro={},xu={},sf=null,io=0,zr=[],Gi=new Gm(w),my=n.hotfixes||[],xa={},Od={},Ld=[],Er=function T(V,pe,Ce,qe,xt,nn){if(!(this instanceof T))return new T(V,pe,Ce,qe,xt,nn);isNaN(V)&&(V=1),isNaN(pe)&&(pe=0),isNaN(Ce)&&(Ce=0),isNaN(qe)&&(qe=1),isNaN(xt)&&(xt=0),isNaN(nn)&&(nn=0),this._matrix=[V,pe,Ce,qe,xt,nn]};Object.defineProperty(Er.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Er.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Er.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Er.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Er.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Er.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Er.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Er.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Er.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Er.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Er.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Er.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Er.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Er.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Er.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Er.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Er.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(T)},Er.prototype.multiply=function(T){return new Er(T.sx*this.sx+T.shy*this.shx,T.sx*this.shy+T.shy*this.sy,T.shx*this.sx+T.sy*this.shx,T.shx*this.shy+T.sy*this.sy,T.tx*this.sx+T.ty*this.shx+this.tx,T.tx*this.shy+T.ty*this.sy+this.ty)},Er.prototype.decompose=function(){var T=this.sx,V=this.shy,pe=this.shx,Ce=this.sy,qe=this.tx,xt=this.ty,nn=Math.sqrt(T*T+V*V),On=(T/=nn)*pe+(V/=nn)*Ce;pe-=T*On,Ce-=V*On;var dr=Math.sqrt(pe*pe+Ce*Ce);return On/=dr,T*(Ce/=dr)<V*(pe/=dr)&&(T=-T,V=-V,On=-On,nn=-nn),{scale:new Er(nn,0,0,dr,0,0),translate:new Er(1,0,0,1,qe,xt),rotate:new Er(T,V,-V,T,0,0),skew:new Er(1,0,On,1,0,0)}},Er.prototype.toString=function(T){return this.join(" ")},Er.prototype.inversed=function(){var T=this.sx,V=this.shy,pe=this.shx,Ce=this.sy,qe=this.tx,xt=this.ty,nn=1/(T*Ce-V*pe),On=Ce*nn,dr=-V*nn,qr=-pe*nn,ei=T*nn;return new Er(On,dr,qr,ei,-On*qe-qr*xt,-dr*qe-ei*xt)},Er.prototype.applyToPoint=function(T){return new Vb(T.x*this.sx+T.y*this.shx+this.tx,T.x*this.shy+T.y*this.sy+this.ty)},Er.prototype.applyToRectangle=function(T){var V=this.applyToPoint(T),pe=this.applyToPoint(new Vb(T.x+T.w,T.y+T.h));return new VE(V.x,V.y,pe.x-V.x,pe.y-V.y)},Er.prototype.clone=function(){return new Er(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},w.Matrix=Er;var Su=w.matrixMult=function(T,V){return V.multiply(T)},Fd=new Er(1,0,0,1,0,0);w.unitMatrix=w.identityMatrix=Fd;var Nc=function(T,V){if(!gy[T]){var pe=(V instanceof iu?"Sh":"P")+(Object.keys(qi).length+1).toString(10);V.id=pe,gy[T]=pe,qi[pe]=V,Gi.publish("addPattern",V)}};w.ShadingPattern=iu,w.TilingPattern=nd,w.addShadingPattern=function(T,V){return oe("addShadingPattern()"),Nc(T,V),this},w.beginTilingPattern=function(T){oe("beginTilingPattern()"),tM(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},w.endTilingPattern=function(T,V){oe("endTilingPattern()"),V.stream=cn[he].join("\n"),Nc(T,V),Gi.publish("endTilingPattern",V),Ld.pop().restore()};var zo=w.__private__.newObject=function(){var T=wo();return hl(T,!0),T},wo=w.__private__.newObjectDeferred=function(){return je++,ot[je]=function(){return _t},je},hl=function(T,V){return V="boolean"==typeof V&&V,ot[T]=_t,V&&ye(T+" 0 obj"),T},Tb=w.__private__.newAdditionalObject=function(){var T={objId:wo(),content:""};return dn.push(T),T},af=wo(),Au=wo(),Cu=w.__private__.decodeColorString=function(T){var V=T.split(" ");if(2!==V.length||"g"!==V[1]&&"G"!==V[1])5===V.length&&("k"===V[4]||"K"===V[4])&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var pe=parseFloat(V[0]);V=[pe,pe,pe,"r"]}for(var Ce="#",qe=0;qe<3;qe++)Ce+=("0"+Math.floor(255*parseFloat(V[qe])).toString(16)).slice(-2);return Ce},Tu=w.__private__.encodeColorString=function(T){var V;"string"==typeof T&&(T={ch1:T});var pe=T.ch1,Ce=T.ch2,qe=T.ch3,xt=T.ch4,nn="draw"===T.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof pe&&"#"!==pe.charAt(0)){var On=new bh(pe);if(On.ok)pe=On.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if("string"==typeof pe&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),"string"==typeof pe&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var dr=parseInt(pe.substr(1),16);pe=dr>>16&255,Ce=dr>>8&255,qe=255&dr}if(void 0===Ce||void 0===xt&&pe===Ce&&Ce===qe)V="string"==typeof pe?pe+" "+nn[0]:2===T.precision?tt(pe/255)+" "+nn[0]:ne(pe/255)+" "+nn[0];else if(void 0===xt||"object"===Ui(xt)){if(xt&&!isNaN(xt.a)&&0===xt.a)return["1.","1.","1.",nn[1]].join(" ");V="string"==typeof pe?[pe,Ce,qe,nn[1]].join(" "):2===T.precision?[tt(pe/255),tt(Ce/255),tt(qe/255),nn[1]].join(" "):[ne(pe/255),ne(Ce/255),ne(qe/255),nn[1]].join(" ")}else V="string"==typeof pe?[pe,Ce,qe,xt,nn[2]].join(" "):2===T.precision?[tt(pe),tt(Ce),tt(qe),tt(xt),nn[2]].join(" "):[ne(pe),ne(Ce),ne(qe),ne(xt),nn[2]].join(" ");return V},Bd=w.__private__.getFilters=function(){return o},Bl=w.__private__.putStream=function(T){var V=(T=T||{}).data||"",pe=T.filters||Bd(),Ce=T.alreadyAppliedFilters||[],qe=T.addLength1||!1,xt=V.length,nn=T.objectId,On=function(Ba){return Ba};if(null!==g&&void 0===nn)throw new Error("ObjectId must be passed to putStream for file encryption");null!==g&&(On=Fa.encryptor(nn,0));var dr={};!0===pe&&(pe=["FlateEncode"]);var qr=T.additionalKeyValues||[],ei=(dr=void 0!==gr.API.processDataByFilters?gr.API.processDataByFilters(V,pe):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(Ce)?Ce.join(" "):Ce.toString());if(0!==dr.data.length&&(qr.push({key:"Length",value:dr.data.length}),!0===qe&&qr.push({key:"Length1",value:xt})),0!=ei.length)if(ei.split("/").length-1==1)qr.push({key:"Filter",value:ei});else{qr.push({key:"Filter",value:"["+ei+"]"});for(var Ii=0;Ii<qr.length;Ii+=1)if("DecodeParms"===qr[Ii].key){for(var $s=[],so=0;so<dr.reverseChain.split("/").length-1;so+=1)$s.push("null");$s.push(qr[Ii].value),qr[Ii].value="["+$s.join(" ")+"]"}}ye("<<");for(var Io=0;Io<qr.length;Io++)ye("/"+qr[Io].key+" "+qr[Io].value);ye(">>"),0!==dr.data.length&&(ye("stream"),ye(On(dr.data)),ye("endstream"))},Ud=w.__private__.putPage=function(T){var V=T.number,pe=T.data,Ce=T.objId,qe=T.contentsObjId;hl(Ce,!0),ye("<</Type /Page"),ye("/Parent "+T.rootDictionaryObjId+" 0 R"),ye("/Resources "+T.resourceDictionaryObjId+" 0 R"),ye("/MediaBox ["+parseFloat(fe(T.mediaBox.bottomLeftX))+" "+parseFloat(fe(T.mediaBox.bottomLeftY))+" "+fe(T.mediaBox.topRightX)+" "+fe(T.mediaBox.topRightY)+"]"),null!==T.cropBox&&ye("/CropBox ["+fe(T.cropBox.bottomLeftX)+" "+fe(T.cropBox.bottomLeftY)+" "+fe(T.cropBox.topRightX)+" "+fe(T.cropBox.topRightY)+"]"),null!==T.bleedBox&&ye("/BleedBox ["+fe(T.bleedBox.bottomLeftX)+" "+fe(T.bleedBox.bottomLeftY)+" "+fe(T.bleedBox.topRightX)+" "+fe(T.bleedBox.topRightY)+"]"),null!==T.trimBox&&ye("/TrimBox ["+fe(T.trimBox.bottomLeftX)+" "+fe(T.trimBox.bottomLeftY)+" "+fe(T.trimBox.topRightX)+" "+fe(T.trimBox.topRightY)+"]"),null!==T.artBox&&ye("/ArtBox ["+fe(T.artBox.bottomLeftX)+" "+fe(T.artBox.bottomLeftY)+" "+fe(T.artBox.topRightX)+" "+fe(T.artBox.topRightY)+"]"),"number"==typeof T.userUnit&&1!==T.userUnit&&ye("/UserUnit "+T.userUnit),Gi.publish("putPage",{objId:Ce,pageContext:zr[V],pageNumber:V,page:pe}),ye("/Contents "+qe+" 0 R"),ye(">>"),ye("endobj");var xt=pe.join("\n");return K===U.ADVANCED&&(xt+="\nQ"),hl(qe,!0),Bl({data:xt,filters:Bd(),objectId:qe}),ye("endobj"),Ce},_y=w.__private__.putPages=function(){var T,V,pe=[];for(T=1;T<=io;T++)zr[T].objId=wo(),zr[T].contentsObjId=wo();for(T=1;T<=io;T++)pe.push(Ud({number:T,data:cn[T],objId:zr[T].objId,contentsObjId:zr[T].contentsObjId,mediaBox:zr[T].mediaBox,cropBox:zr[T].cropBox,bleedBox:zr[T].bleedBox,trimBox:zr[T].trimBox,artBox:zr[T].artBox,userUnit:zr[T].userUnit,rootDictionaryObjId:af,resourceDictionaryObjId:Au}));hl(af,!0),ye("<</Type /Pages");var Ce="/Kids [";for(V=0;V<io;V++)Ce+=pe[V]+" 0 R ";ye(Ce+"]"),ye("/Count "+io),ye(">>"),ye("endobj"),Gi.publish("postPutPages")},Db=function(T){Gi.publish("putFont",{font:T,out:ye,newObject:zo,putStream:Bl}),!0!==T.isAlreadyPutted&&(T.objectNumber=zo(),ye("<<"),ye("/Type /Font"),ye("/BaseFont /"+ru(T.postScriptName)),ye("/Subtype /Type1"),"string"==typeof T.encoding&&ye("/Encoding /"+T.encoding),ye("/FirstChar 32"),ye("/LastChar 255"),ye(">>"),ye("endobj"))},Mb=function(){for(var T in fs)fs.hasOwnProperty(T)&&(!1===v||!0===v&&E.hasOwnProperty(T))&&Db(fs[T])},Nb=function(T){T.objectNumber=zo();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[fe(T.x),fe(T.y),fe(T.x+T.width),fe(T.y+T.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var pe=T.pages[1].join("\n");Bl({data:pe,additionalKeyValues:V,objectId:T.objectNumber}),ye("endobj")},kb=function(){for(var T in xa)xa.hasOwnProperty(T)&&Nb(xa[T])},F5=function(T,V){var pe,Ce=[],qe=1/(V-1);for(pe=0;pe<1;pe+=qe)Ce.push(pe);Ce.push(1),0!=T[0].offset&&T.unshift({offset:0,color:T[0].color}),1!=T[T.length-1].offset&&T.push({offset:1,color:T[T.length-1].color});for(var On="",dr=0,qr=0;qr<Ce.length;qr++){for(pe=Ce[qr];pe>T[dr+1].offset;)dr++;var ei=T[dr].offset,Ii=(pe-ei)/(T[dr+1].offset-ei),$s=T[dr].color,so=T[dr+1].color;On+=Me(Math.round((1-Ii)*$s[0]+Ii*so[0]).toString(16))+Me(Math.round((1-Ii)*$s[1]+Ii*so[1]).toString(16))+Me(Math.round((1-Ii)*$s[2]+Ii*so[2]).toString(16))}return On.trim()},y4=function(T,V){V||(V=21);var pe=zo(),Ce=F5(T.colors,V),qe=[];qe.push({key:"FunctionType",value:"0"}),qe.push({key:"Domain",value:"[0.0 1.0]"}),qe.push({key:"Size",value:"["+V+"]"}),qe.push({key:"BitsPerSample",value:"8"}),qe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Bl({data:Ce,additionalKeyValues:qe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),ye("endobj"),T.objectNumber=zo(),ye("<< /ShadingType "+T.type),ye("/ColorSpace /DeviceRGB");var xt="/Coords ["+fe(parseFloat(T.coords[0]))+" "+fe(parseFloat(T.coords[1]))+" ";xt+=2===T.type?fe(parseFloat(T.coords[2]))+" "+fe(parseFloat(T.coords[3])):fe(parseFloat(T.coords[2]))+" "+fe(parseFloat(T.coords[3]))+" "+fe(parseFloat(T.coords[4]))+" "+fe(parseFloat(T.coords[5])),ye(xt+="]"),T.matrix&&ye("/Matrix ["+T.matrix.toString()+"]"),ye("/Function "+pe+" 0 R"),ye("/Extend [true true]"),ye(">>"),ye("endobj")},v4=function(T,V){var pe=wo(),Ce=zo();V.push({resourcesOid:pe,objectOid:Ce}),T.objectNumber=Ce;var qe=[];qe.push({key:"Type",value:"/Pattern"}),qe.push({key:"PatternType",value:"1"}),qe.push({key:"PaintType",value:"1"}),qe.push({key:"TilingType",value:"1"}),qe.push({key:"BBox",value:"["+T.boundingBox.map(fe).join(" ")+"]"}),qe.push({key:"XStep",value:fe(T.xStep)}),qe.push({key:"YStep",value:fe(T.yStep)}),qe.push({key:"Resources",value:pe+" 0 R"}),T.matrix&&qe.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),Bl({data:T.stream,additionalKeyValues:qe,objectId:T.objectNumber}),ye("endobj")},Pb=function(T){var V;for(V in qi)qi.hasOwnProperty(V)&&(qi[V]instanceof iu?y4(qi[V]):qi[V]instanceof nd&&v4(qi[V],T))},B5=function(T){for(var V in T.objectNumber=zo(),ye("<<"),T)switch(V){case"opacity":ye("/ca "+tt(T[V]));break;case"stroke-opacity":ye("/CA "+tt(T[V]))}ye(">>"),ye("endobj")},b4=function(){var T;for(T in ro)ro.hasOwnProperty(T)&&B5(ro[T])},NE=function(){for(var T in ye("/XObject <<"),xa)xa.hasOwnProperty(T)&&xa[T].objectNumber>=0&&ye("/"+T+" "+xa[T].objectNumber+" 0 R");Gi.publish("putXobjectDict"),ye(">>")},w4=function(){Fa.oid=zo(),ye("<<"),ye("/Filter /Standard"),ye("/V "+Fa.v),ye("/R "+Fa.r),ye("/U <"+Fa.toHexString(Fa.U)+">"),ye("/O <"+Fa.toHexString(Fa.O)+">"),ye("/P "+Fa.P),ye(">>"),ye("endobj")},U5=function(){for(var T in ye("/Font <<"),fs)fs.hasOwnProperty(T)&&(!1===v||!0===v&&E.hasOwnProperty(T))&&ye("/"+T+" "+fs[T].objectNumber+" 0 R");ye(">>")},I4=function(){if(Object.keys(qi).length>0){for(var T in ye("/Shading <<"),qi)qi.hasOwnProperty(T)&&qi[T]instanceof iu&&qi[T].objectNumber>=0&&ye("/"+T+" "+qi[T].objectNumber+" 0 R");Gi.publish("putShadingPatternDict"),ye(">>")}},Rb=function(T){if(Object.keys(qi).length>0){for(var V in ye("/Pattern <<"),qi)qi.hasOwnProperty(V)&&qi[V]instanceof w.TilingPattern&&qi[V].objectNumber>=0&&qi[V].objectNumber<T&&ye("/"+V+" "+qi[V].objectNumber+" 0 R");Gi.publish("putTilingPatternDict"),ye(">>")}},E4=function(){if(Object.keys(ro).length>0){var T;for(T in ye("/ExtGState <<"),ro)ro.hasOwnProperty(T)&&ro[T].objectNumber>=0&&ye("/"+T+" "+ro[T].objectNumber+" 0 R");Gi.publish("putGStateDict"),ye(">>")}},po=function(T){hl(T.resourcesOid,!0),ye("<<"),ye("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),U5(),I4(),Rb(T.objectOid),E4(),NE(),ye(">>"),ye("endobj")},j5=function(){var T=[];Mb(),b4(),kb(),Pb(T),Gi.publish("putResources"),T.forEach(po),po({resourcesOid:Au,objectOid:Number.MAX_SAFE_INTEGER}),Gi.publish("postPutResources")},V5=function(){Gi.publish("putAdditionalObjects");for(var T=0;T<dn.length;T++){var V=dn[T];hl(V.objId,!0),ye(V.content),ye("endobj")}Gi.publish("postPutAdditionalObjects")},z5=function(T){Vs[T.fontName]=Vs[T.fontName]||{},Vs[T.fontName][T.fontStyle]=T.id},kE=function(T,V,pe,Ce,qe){var xt={id:"F"+(Object.keys(fs).length+1).toString(10),postScriptName:T,fontName:V,fontStyle:pe,encoding:Ce,isStandardFont:qe||!1,metadata:{}};return Gi.publish("addFont",{font:xt,instance:this}),fs[xt.id]=xt,z5(xt),xt.id},x4=function(T){for(var V=0,pe=on.length;V<pe;V++){var Ce=kE.call(this,T[V][0],T[V][1],T[V][2],on[V][3],!0);!1===v&&(E[Ce]=!0);var qe=T[V][0].split("-");z5({id:Ce,fontName:qe[0],fontStyle:qe[1]||""})}Gi.publish("addFonts",{fonts:fs,dictionary:Vs})},Du=function(T){return T.foo=function(){try{return T.apply(this,arguments)}catch(Ce){var V=Ce.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var pe="Error in function "+V.split("\n")[0].split("<")[0]+": "+Ce.message;if(!pr.console)throw new Error(pe);pr.console.error(pe,Ce),pr.alert&&alert(pe)}},T.foo.bar=T,T.foo},Ob=function(T,V){var pe,Ce,qe,xt,nn,On,dr,qr,ei;if(qe=(V=V||{}).sourceEncoding||"Unicode",nn=V.outputEncoding,(V.autoencode||nn)&&fs[ui].metadata&&fs[ui].metadata[qe]&&fs[ui].metadata[qe].encoding&&(xt=fs[ui].metadata[qe].encoding,!nn&&fs[ui].encoding&&(nn=fs[ui].encoding),!nn&&xt.codePages&&(nn=xt.codePages[0]),"string"==typeof nn&&(nn=xt[nn]),nn)){for(dr=!1,On=[],pe=0,Ce=T.length;pe<Ce;pe++)(qr=nn[T.charCodeAt(pe)])?On.push(String.fromCharCode(qr)):On.push(T[pe]),On[pe].charCodeAt(0)>>8&&(dr=!0);T=On.join("")}for(pe=T.length;void 0===dr&&0!==pe;)T.charCodeAt(pe-1)>>8&&(dr=!0),pe--;if(!dr)return T;for(On=V.noBOM?[]:[254,255],pe=0,Ce=T.length;pe<Ce;pe++){if((ei=(qr=T.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+T+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");On.push(ei),On.push(qr-(ei<<8))}return String.fromCharCode.apply(void 0,On)},kc=w.__private__.pdfEscape=w.pdfEscape=function(T,V){return Ob(T,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},PE=w.__private__.beginPage=function(T){cn[++io]=[],zr[io]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},W5(io),Ct(cn[he])},H5=function(T,V){var pe,Ce,qe;switch(t=V||t,"string"==typeof T&&(pe=F(T.toLowerCase()),Array.isArray(pe)&&(Ce=pe[0],qe=pe[1])),Array.isArray(T)&&(Ce=T[0]*kn,qe=T[1]*kn),isNaN(Ce)&&(Ce=i[0],qe=i[1]),(Ce>14400||qe>14400)&&(vi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ce=Math.min(14400,Ce),qe=Math.min(14400,qe)),i=[Ce,qe],t.substr(0,1)){case"l":qe>Ce&&(i=[qe,Ce]);break;case"p":Ce>qe&&(i=[qe,Ce])}PE(i),Y5(FE),ye(Mu),0!==UE&&ye(UE+" J"),0!==jE&&ye(jE+" j"),Gi.publish("addPage",{pageNumber:io})},S4=function(T){T>0&&T<=io&&(cn.splice(T,1),zr.splice(T,1),io--,he>io&&(he=io),this.setPage(he))},W5=function(T){T>0&&T<=io&&(he=T)},A4=w.__private__.getNumberOfPages=w.getNumberOfPages=function(){return cn.length-1},$5=function(T,V,pe){var Ce,qe=void 0;return pe=pe||{},V=void 0!==V?V:fs[ui].fontStyle,Ce=(T=void 0!==T?T:fs[ui].fontName).toLowerCase(),void 0!==Vs[Ce]&&void 0!==Vs[Ce][V]?qe=Vs[Ce][V]:void 0!==Vs[T]&&void 0!==Vs[T][V]?qe=Vs[T][V]:!1===pe.disableWarning&&vi.warn("Unable to look up font label for font '"+T+"', '"+V+"'. Refer to getFontList() for available fonts."),qe||pe.noFallback||null==(qe=Vs.times[V])&&(qe=Vs.times.normal),qe},C4=w.__private__.putInfo=function(){var T=zo(),V=function(Ce){return Ce};for(var pe in null!==g&&(V=Fa.encryptor(T,0)),ye("<<"),ye("/Producer ("+kc(V("jsPDF "+gr.version))+")"),Mr)Mr.hasOwnProperty(pe)&&Mr[pe]&&ye("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+kc(V(Mr[pe]))+")");ye("/CreationDate ("+kc(V(Ve))+")"),ye(">>"),ye("endobj")},RE=w.__private__.putCatalog=function(T){var V=(T=T||{}).rootDictionaryObjId||af;switch(zo(),ye("<<"),ye("/Type /Catalog"),ye("/Pages "+V+" 0 R"),Nn||(Nn="fullwidth"),Nn){case"fullwidth":ye("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ye("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ye("/OpenAction [3 0 R /Fit]");break;case"original":ye("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+Nn;"%"===pe.substr(pe.length-1)&&(Nn=parseInt(Nn)/100),"number"==typeof Nn&&ye("/OpenAction [3 0 R /XYZ null null "+tt(Nn)+"]")}switch(si||(si="continuous"),si){case"continuous":ye("/PageLayout /OneColumn");break;case"single":ye("/PageLayout /SinglePage");break;case"two":case"twoleft":ye("/PageLayout /TwoColumnLeft");break;case"tworight":ye("/PageLayout /TwoColumnRight")}Vr&&ye("/PageMode /"+Vr),Gi.publish("putCatalog"),ye(">>"),ye("endobj")},T4=w.__private__.putTrailer=function(){ye("trailer"),ye("<<"),ye("/Size "+(je+1)),ye("/Root "+je+" 0 R"),ye("/Info "+(je-1)+" 0 R"),null!==g&&ye("/Encrypt "+Fa.oid+" 0 R"),ye("/ID [ <"+Ze+"> <"+Ze+"> ]"),ye(">>")},D4=w.__private__.putHeader=function(){ye("%PDF-"+D),ye("%\xba\xdf\xac\xe0")},M4=w.__private__.putXRef=function(){var T="0000000000";ye("xref"),ye("0 "+(je+1)),ye("0000000000 65535 f ");for(var V=1;V<=je;V++)ye("function"==typeof ot[V]?(T+ot[V]()).slice(-10)+" 00000 n ":void 0!==ot[V]?(T+ot[V]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},cf=w.__private__.buildDocument=function(){Sr(),Ct(dt),Gi.publish("buildDocument"),D4(),_y(),V5(),j5(),null!==g&&w4(),C4(),RE();var T=_t;return M4(),T4(),ye("startxref"),ye(""+T),ye("%%EOF"),Ct(cn[he]),dt.join("\n")},Lb=w.__private__.getBlob=function(T){return new Blob([nr(T)],{type:"application/pdf"})},Fb=w.output=w.__private__.output=Du(function(T,V){switch("string"==typeof(V=V||{})?V={filename:V}:V.filename=V.filename||"generated.pdf",T){case void 0:return cf();case"save":w.save(V.filename);break;case"arraybuffer":return nr(cf());case"blob":return Lb(cf());case"bloburi":case"bloburl":if(void 0!==pr.URL&&"function"==typeof pr.URL.createObjectURL)return pr.URL&&pr.URL.createObjectURL(Lb(cf()))||void 0;vi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",Ce=cf();try{pe=ed(Ce)}catch{pe=ed(unescape(encodeURIComponent(Ce)))}return"data:application/pdf;filename="+V.filename+";base64,"+pe;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(pr)){var qe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(qe=V.pdfObjectUrl,xt="");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+qe+'"'+xt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",On=pr.open();return null!==On&&On.document.write(nn),On}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(pr)){var dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',qr=pr.open();if(null!==qr){qr.document.write(dr);var ei=this;qr.document.documentElement.querySelector("#pdfViewer").onload=function(){qr.document.title=V.filename,qr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ei.output("bloburl"))}}return qr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(pr))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ii='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',$s=pr.open();if(null!==$s&&($s.document.write(Ii),$s.document.title=V.filename),$s||typeof safari>"u")return $s;break;case"datauri":case"dataurl":return pr.document.location.href=this.output("datauristring",V);default:return null}}),q5=function(T){return!0===Array.isArray(my)&&my.indexOf(T)>-1};switch(r){case"pt":kn=1;break;case"mm":kn=72/25.4;break;case"cm":kn=72/2.54;break;case"in":kn=72;break;case"px":kn=1==q5("px_scaling")?.75:96/72;break;case"pc":case"em":kn=12;break;case"ex":kn=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);kn=r}var Fa=null;wn(),Ye();var N4=function(T){return null!==g?Fa.encryptor(T,0):function(V){return V}},G5=w.__private__.getPageInfo=w.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zr[T].objId,pageNumber:T,pageContext:zr[T]}},Or=w.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in zr)if(zr[V].objId===T)break;return G5(V)},k4=w.__private__.getCurrentPageInfo=w.getCurrentPageInfo=function(){return{objId:zr[he].objId,pageNumber:he,pageContext:zr[he]}};w.addPage=function(){return H5.apply(this,arguments),this},w.setPage=function(){return W5.apply(this,arguments),Ct.call(this,cn[he]),this},w.insertPage=function(T){return this.addPage(),this.movePage(he,T),this},w.movePage=function(T,V){var pe,Ce;if(T>V){pe=cn[T],Ce=zr[T];for(var qe=T;qe>V;qe--)cn[qe]=cn[qe-1],zr[qe]=zr[qe-1];cn[V]=pe,zr[V]=Ce,this.setPage(V)}else if(T<V){pe=cn[T],Ce=zr[T];for(var xt=T;xt<V;xt++)cn[xt]=cn[xt+1],zr[xt]=zr[xt+1];cn[V]=pe,zr[V]=Ce,this.setPage(V)}return this},w.deletePage=function(){return S4.apply(this,arguments),this},w.__private__.text=w.text=function(T,V,pe,Ce,qe){var xt,nn,On,dr,qr,ei,Ii,$s,so,Io=(Ce=Ce||{}).scope||this;if("number"==typeof T&&"number"==typeof V&&("string"==typeof pe||Array.isArray(pe))){var Ba=pe;pe=V,V=T,T=Ba}if(arguments[3]instanceof Er?(oe("The transform parameter of text() with a Matrix value"),so=qe):(On=arguments[4],dr=arguments[5],"object"===Ui(Ii=arguments[3])&&null!==Ii||("string"==typeof On&&(dr=On,On=null),"string"==typeof Ii&&(dr=Ii,Ii=null),"number"==typeof Ii&&(On=Ii,Ii=null),Ce={flags:Ii,angle:On,align:dr})),isNaN(V)||isNaN(pe)||null==T)throw new Error("Invalid arguments passed to jsPDF.text");if(0===T.length)return Io;var sa="",Nu=!1,fl="number"==typeof Ce.lineHeightFactor?Ce.lineHeightFactor:vy,uf=Io.internal.scaleFactor;function nM(vs){return vs=vs.split("\t").join(Array(Ce.TabLen||9).join(" ")),kc(vs,Ii)}function $E(vs){for(var bs,go=vs.concat(),Ho=[],pf=go.length;pf--;)"string"==typeof(bs=go.shift())?Ho.push(bs):Array.isArray(vs)&&(1===bs.length||void 0===bs[1]&&void 0===bs[2])?Ho.push(bs[0]):Ho.push([bs[0],bs[1],bs[2]]);return Ho}function qE(vs,bs){var go;if("string"==typeof vs)go=bs(vs)[0];else if(Array.isArray(vs)){for(var Ho,pf,Mg=vs.concat(),Qb=[],iM=Mg.length;iM--;)"string"==typeof(Ho=Mg.shift())?Qb.push(bs(Ho)[0]):Array.isArray(Ho)&&"string"==typeof Ho[0]&&(pf=bs(Ho[0],Ho[1],Ho[2]),Qb.push([pf[0],pf[1],pf[2]]));go=Qb}return go}var Hb=!1,GE=!0;if("string"==typeof T)Hb=!0;else if(Array.isArray(T)){var KE=T.concat();nn=[];for(var Wb,Pc=KE.length;Pc--;)("string"!=typeof(Wb=KE.shift())||Array.isArray(Wb)&&"string"!=typeof Wb[0])&&(GE=!1);Hb=GE}if(!1===Hb)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');"string"==typeof T&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var $b=vn/Io.internal.scaleFactor,qb=$b*(fl-1);switch(Ce.baseline){case"bottom":pe-=qb;break;case"top":pe+=$b-qb;break;case"hanging":pe+=$b-2*qb;break;case"middle":pe+=$b/2-qb}if((ei=Ce.maxWidth||0)>0&&("string"==typeof T?T=Io.splitTextToSize(T,ei):"[object Array]"===Object.prototype.toString.call(T)&&(T=T.reduce(function(vs,bs){return vs.concat(Io.splitTextToSize(bs,ei))},[]))),Gi.publish("preProcessText",xt={text:T,x:V,y:pe,options:Ce,mutex:{pdfEscape:kc,activeFontKey:ui,fonts:fs,activeFontSize:vn}}),T=xt.text,On=(Ce=xt.options).angle,so instanceof Er||!On||"number"!=typeof On)On&&On instanceof Er&&(so=On);else{On*=Math.PI/180,0===Ce.rotationDirection&&(On=-On),K===U.ADVANCED&&(On=-On);var Gb=Math.cos(On),ZE=Math.sin(On);so=new Er(Gb,ZE,-ZE,Gb,0,0)}K!==U.ADVANCED||so||(so=Fd),void 0!==(qr=Ce.charSpace||jb)&&(sa+=fe(te(qr))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==($s=Ce.horizontalScale)&&(sa+=fe(100*$s)+" Tz\n");var Rc=-1,z4=void 0!==Ce.renderingMode?Ce.renderingMode:Ce.stroke,YE=Io.internal.getCurrentPageInfo().pageContext;switch(z4){case 0:case!1:case"fill":Rc=0;break;case 1:case!0:case"stroke":Rc=1;break;case 2:case"fillThenStroke":Rc=2;break;case 3:case"invisible":Rc=3;break;case 4:case"fillAndAddForClipping":Rc=4;break;case 5:case"strokeAndAddPathForClipping":Rc=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rc=6;break;case 7:case"addToPathForClipping":Rc=7}var rM=void 0!==YE.usedRenderingMode?YE.usedRenderingMode:-1;-1!==Rc?sa+=Rc+" Tr\n":-1!==rM&&(sa+="0 Tr\n"),-1!==Rc&&(YE.usedRenderingMode=Rc),dr=Ce.align||"left";var ku,QE=vn*fl,H4=Io.internal.pageSize.getWidth(),W4=fs[ui];qr=Ce.charSpace||jb,ei=Ce.maxWidth||0,Ii=Object.assign({autoencode:!0,noBOM:!0},Ce.flags);var Ag=[];if("[object Array]"===Object.prototype.toString.call(T)){var Ul;nn=$E(T),"left"!==dr&&(ku=nn.map(function(vs){return Io.getStringUnitWidth(vs,{font:W4,charSpace:qr,fontSize:vn,doKerning:!1})*vn/uf}));var Pu,Cg=0;if("right"===dr){V-=ku[0],T=[],Pc=nn.length;for(var Vd=0;Vd<Pc;Vd++)0===Vd?(Pu=lf(V),Ul=Eg(pe)):(Pu=te(Cg-ku[Vd]),Ul=-QE),T.push([nn[Vd],Pu,Ul]),Cg=ku[Vd]}else if("center"===dr){V-=ku[0]/2,T=[],Pc=nn.length;for(var df=0;df<Pc;df++)0===df?(Pu=lf(V),Ul=Eg(pe)):(Pu=te((Cg-ku[df])/2),Ul=-QE),T.push([nn[df],Pu,Ul]),Cg=ku[df]}else if("left"===dr){T=[],Pc=nn.length;for(var Kb=0;Kb<Pc;Kb++)T.push(nn[Kb])}else{if("justify"!==dr)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');T=[],Pc=nn.length,ei=0!==ei?ei:H4;for(var Ru=0;Ru<Pc;Ru++)Ul=0===Ru?Eg(pe):-QE,Pu=0===Ru?lf(V):0,Ag.push(Ru<Pc-1?fe(te((ei-ku[Ru])/(nn[Ru].split(" ").length-1))):0),T.push([nn[Ru],Pu,Ul])}}var Zb="boolean"==typeof Ce.R2L?Ce.R2L:cr;!0===Zb&&(T=qE(T,function(vs,bs,go){return[vs.split("").reverse().join(""),bs,go]})),Gi.publish("postProcessText",xt={text:T,x:V,y:pe,options:Ce,mutex:{pdfEscape:kc,activeFontKey:ui,fonts:fs,activeFontSize:vn}}),T=xt.text,Nu=xt.mutex.isHex||!1;var XE=fs[ui].encoding;"WinAnsiEncoding"!==XE&&"StandardEncoding"!==XE||(T=qE(T,function(vs,bs,go){return[nM(vs),bs,go]})),nn=$E(T),T=[];for(var Tg,Ou,hf,Iy=0,Yb=1,Ey=Array.isArray(nn[0])?Yb:Iy,Dg="",JE=function(vs,bs,go){var Ho="";return go instanceof Er?(go="number"==typeof Ce.angle?Su(go,new Er(1,0,0,1,vs,bs)):Su(new Er(1,0,0,1,vs,bs),go),K===U.ADVANCED&&(go=Su(new Er(1,0,0,-1,0,0),go)),Ho=go.join(" ")+" Tm\n"):Ho=fe(vs)+" "+fe(bs)+" Td\n",Ho},jl=0;jl<nn.length;jl++){switch(Dg="",Ey){case Yb:hf=(Nu?"<":"(")+nn[jl][0]+(Nu?">":")"),Tg=parseFloat(nn[jl][1]),Ou=parseFloat(nn[jl][2]);break;case Iy:hf=(Nu?"<":"(")+nn[jl]+(Nu?">":")"),Tg=lf(V),Ou=Eg(pe)}void 0!==Ag&&void 0!==Ag[jl]&&(Dg=Ag[jl]+" Tw\n"),0===jl?T.push(Dg+JE(Tg,Ou,so)+hf):Ey===Iy?T.push(Dg+hf):Ey===Yb&&T.push(Dg+JE(Tg,Ou,so)+hf)}T=T.join(Ey===Iy?" Tj\nT* ":" Tj\n"),T+=" Tj\n";var ff="BT\n/";return ff+=ui+" "+vn+" Tf\n",ff+=fe(vn*fl)+" TL\n",ff+=by+"\n",ff+=sa,ff+=T,ye(ff+="ET"),E[ui]=!0,Io};var P4=w.__private__.clip=w.clip=function(T){return ye("evenodd"===T?"W*":"W"),this};w.clipEvenOdd=function(){return P4("evenodd")},w.__private__.discardPath=w.discardPath=function(){return ye("n"),this};var jd=w.__private__.isValidStyle=function(T){var V=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)&&(V=!0),V};w.__private__.setDefaultPathOperation=w.setDefaultPathOperation=function(T){return jd(T)&&(h=T),this};var K5=w.__private__.getStyle=w.getStyle=function(T){var V=h;switch(T){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=T}return V},Z5=w.close=function(){return ye("h"),this};w.stroke=function(){return ye("S"),this},w.fill=function(T){return Bb("f",T),this},w.fillEvenOdd=function(T){return Bb("f*",T),this},w.fillStroke=function(T){return Bb("B",T),this},w.fillStrokeEvenOdd=function(T){return Bb("B*",T),this};var Bb=function(T,V){"object"===Ui(V)?O4(V,T):ye(T)},OE=function(T){null===T||K===U.ADVANCED&&void 0===T||(T=K5(T),ye(T))};function R4(T,V,pe,Ce,qe){var xt=new nd(V||this.boundingBox,pe||this.xStep,Ce||this.yStep,this.gState,qe||this.matrix);xt.stream=this.stream;var nn=T+"$$"+this.cloneIndex+++"$$";return Nc(nn,xt),xt}var O4=function(T,V){var pe=gy[T.key],Ce=qi[pe];if(Ce instanceof iu)ye("q"),ye(L4(V)),Ce.gState&&w.setGState(Ce.gState),ye(T.matrix.toString()+" cm"),ye("/"+pe+" sh"),ye("Q");else if(Ce instanceof nd){var qe=new Er(1,0,0,-1,0,Sg());T.matrix&&(qe=qe.multiply(T.matrix||Fd),pe=R4.call(Ce,T.key,T.boundingBox,T.xStep,T.yStep,qe).id),ye("q"),ye("/Pattern cs"),ye("/"+pe+" scn"),Ce.gState&&w.setGState(Ce.gState),ye(V),ye("Q")}},L4=function(T){switch(T){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},LE=w.moveTo=function(T,V){return ye(fe(te(T))+" "+fe(ve(V))+" m"),this},yy=w.lineTo=function(T,V){return ye(fe(te(T))+" "+fe(ve(V))+" l"),this},Ig=w.curveTo=function(T,V,pe,Ce,qe,xt){return ye([fe(te(T)),fe(ve(V)),fe(te(pe)),fe(ve(Ce)),fe(te(qe)),fe(ve(xt)),"c"].join(" ")),this};w.__private__.line=w.line=function(T,V,pe,Ce,qe){if(isNaN(T)||isNaN(V)||isNaN(pe)||isNaN(Ce)||!jd(qe))throw new Error("Invalid arguments passed to jsPDF.line");return K===U.COMPAT?this.lines([[pe-T,Ce-V]],T,V,[1,1],qe||"S"):this.lines([[pe-T,Ce-V]],T,V,[1,1]).stroke()},w.__private__.lines=w.lines=function(T,V,pe,Ce,qe,xt){var nn,On,dr,qr,ei,Ba,sa,Nu;if("number"==typeof T&&(Nu=pe,pe=V,V=T,T=Nu),Ce=Ce||[1,1],xt=xt||!1,isNaN(V)||isNaN(pe)||!Array.isArray(T)||!Array.isArray(Ce)||!jd(qe)||"boolean"!=typeof xt)throw new Error("Invalid arguments passed to jsPDF.lines");for(LE(V,pe),nn=Ce[0],On=Ce[1],qr=T.length,Ba=V,sa=pe,dr=0;dr<qr;dr++)2===(ei=T[dr]).length?yy(Ba=ei[0]*nn+Ba,sa=ei[1]*On+sa):Ig(ei[0]*nn+Ba,ei[1]*On+sa,ei[2]*nn+Ba,ei[3]*On+sa,Ba=ei[4]*nn+Ba,sa=ei[5]*On+sa);return xt&&Z5(),OE(qe),this},w.path=function(T){for(var V=0;V<T.length;V++){var pe=T[V],Ce=pe.c;switch(pe.op){case"m":LE(Ce[0],Ce[1]);break;case"l":yy(Ce[0],Ce[1]);break;case"c":Ig.apply(this,Ce);break;case"h":Z5()}}return this},w.__private__.rect=w.rect=function(T,V,pe,Ce,qe){if(isNaN(T)||isNaN(V)||isNaN(pe)||isNaN(Ce)||!jd(qe))throw new Error("Invalid arguments passed to jsPDF.rect");return K===U.COMPAT&&(Ce=-Ce),ye([fe(te(T)),fe(ve(V)),fe(te(pe)),fe(te(Ce)),"re"].join(" ")),OE(qe),this},w.__private__.triangle=w.triangle=function(T,V,pe,Ce,qe,xt,nn){if(isNaN(T)||isNaN(V)||isNaN(pe)||isNaN(Ce)||isNaN(qe)||isNaN(xt)||!jd(nn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-T,Ce-V],[qe-pe,xt-Ce],[T-qe,V-xt]],T,V,[1,1],nn,!0),this},w.__private__.roundedRect=w.roundedRect=function(T,V,pe,Ce,qe,xt,nn){if(isNaN(T)||isNaN(V)||isNaN(pe)||isNaN(Ce)||isNaN(qe)||isNaN(xt)||!jd(nn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var On=4/3*(Math.SQRT2-1);return qe=Math.min(qe,.5*pe),xt=Math.min(xt,.5*Ce),this.lines([[pe-2*qe,0],[qe*On,0,qe,xt-xt*On,qe,xt],[0,Ce-2*xt],[0,xt*On,-qe*On,xt,-qe,xt],[2*qe-pe,0],[-qe*On,0,-qe,-xt*On,-qe,-xt],[0,2*xt-Ce],[0,-xt*On,qe*On,-xt,qe,-xt]],T+qe,V,[1,1],nn,!0),this},w.__private__.ellipse=w.ellipse=function(T,V,pe,Ce,qe){if(isNaN(T)||isNaN(V)||isNaN(pe)||isNaN(Ce)||!jd(qe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xt=4/3*(Math.SQRT2-1)*pe,nn=4/3*(Math.SQRT2-1)*Ce;return LE(T+pe,V),Ig(T+pe,V-nn,T+xt,V-Ce,T,V-Ce),Ig(T-xt,V-Ce,T-pe,V-nn,T-pe,V),Ig(T-pe,V+nn,T-xt,V+Ce,T,V+Ce),Ig(T+xt,V+Ce,T+pe,V+nn,T+pe,V),OE(qe),this},w.__private__.circle=w.circle=function(T,V,pe,Ce){if(isNaN(T)||isNaN(V)||isNaN(pe)||!jd(Ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,V,pe,pe,Ce)},w.setFont=function(T,V,pe){return pe&&(V=_e(V,pe)),ui=$5(T,V,{disableWarning:!1}),this};var F4=w.__private__.getFont=w.getFont=function(){return fs[$5.apply(w,arguments)]};w.__private__.getFontList=w.getFontList=function(){var T,V,pe={};for(T in Vs)if(Vs.hasOwnProperty(T))for(V in pe[T]=[],Vs[T])Vs[T].hasOwnProperty(V)&&pe[T].push(V);return pe},w.addFont=function(T,V,pe,Ce,qe){var xt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==xt.indexOf(arguments[3])?qe=arguments[3]:arguments[3]&&-1==xt.indexOf(arguments[3])&&(pe=_e(pe,Ce)),kE.call(this,T,V,pe,qe=qe||"Identity-H")};var vy,FE=n.lineWidth||.200025,Ub=w.__private__.getLineWidth=w.getLineWidth=function(){return FE},Y5=w.__private__.setLineWidth=w.setLineWidth=function(T){return FE=T,ye(fe(te(T))+" w"),this};w.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(T,V){if(T=T||[],V=V||0,isNaN(V)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(pe){return fe(te(pe))}).join(" "),V=fe(te(V)),ye("["+T+"] "+V+" d"),this};var Q5=w.__private__.getLineHeight=w.getLineHeight=function(){return vn*vy};w.__private__.getLineHeight=w.getLineHeight=function(){return vn*vy};var X5=w.__private__.setLineHeightFactor=w.setLineHeightFactor=function(T){return"number"==typeof(T=T||1.15)&&(vy=T),this},J5=w.__private__.getLineHeightFactor=w.getLineHeightFactor=function(){return vy};X5(n.lineHeight);var lf=w.__private__.getHorizontalCoordinate=function(T){return te(T)},Eg=w.__private__.getVerticalCoordinate=function(T){return K===U.ADVANCED?T:zr[he].mediaBox.topRightY-zr[he].mediaBox.bottomLeftY-te(T)},B4=w.__private__.getHorizontalCoordinateString=w.getHorizontalCoordinateString=function(T){return fe(lf(T))},xg=w.__private__.getVerticalCoordinateString=w.getVerticalCoordinateString=function(T){return fe(Eg(T))},Mu=n.strokeColor||"0 G";w.__private__.getStrokeColor=w.getDrawColor=function(){return Cu(Mu)},w.__private__.setStrokeColor=w.setDrawColor=function(T,V,pe,Ce){return Mu=Tu({ch1:T,ch2:V,ch3:pe,ch4:Ce,pdfColorType:"draw",precision:2}),ye(Mu),this};var BE=n.fillColor||"0 g";w.__private__.getFillColor=w.getFillColor=function(){return Cu(BE)},w.__private__.setFillColor=w.setFillColor=function(T,V,pe,Ce){return BE=Tu({ch1:T,ch2:V,ch3:pe,ch4:Ce,pdfColorType:"fill",precision:2}),ye(BE),this};var by=n.textColor||"0 g",U4=w.__private__.getTextColor=w.getTextColor=function(){return Cu(by)};w.__private__.setTextColor=w.setTextColor=function(T,V,pe,Ce){return by=Tu({ch1:T,ch2:V,ch3:pe,ch4:Ce,pdfColorType:"text",precision:3}),this};var jb=n.charSpace,j4=w.__private__.getCharSpace=w.getCharSpace=function(){return parseFloat(jb||0)};w.__private__.setCharSpace=w.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return jb=T,this};var UE=0;w.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},w.__private__.setLineCap=w.setLineCap=function(T){var V=w.CapJoinStyles[T];if(void 0===V)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return UE=V,ye(V+" J"),this};var jE=0;w.__private__.setLineJoin=w.setLineJoin=function(T){var V=w.CapJoinStyles[T];if(void 0===V)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jE=V,ye(V+" j"),this},w.__private__.setLineMiterLimit=w.__private__.setMiterLimit=w.setLineMiterLimit=w.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ye(fe(te(T))+" M"),this},w.GState=gp,w.setGState=function(T){(T="string"==typeof T?ro[xu[T]]:eM(null,T)).equals(sf)||(ye("/"+T.id+" gs"),sf=T)};var eM=function(T,V){if(!T||!xu[T]){var pe=!1;for(var Ce in ro)if(ro.hasOwnProperty(Ce)&&ro[Ce].equals(V)){pe=!0;break}if(pe)V=ro[Ce];else{var qe="GS"+(Object.keys(ro).length+1).toString(10);ro[qe]=V,V.id=qe}return T&&(xu[T]=V.id),Gi.publish("addGState",V),V}};w.addGState=function(T,V){return eM(T,V),this},w.saveGraphicsState=function(){return ye("q"),Rd.push({key:ui,size:vn,color:by}),this},w.restoreGraphicsState=function(){ye("Q");var T=Rd.pop();return ui=T.key,vn=T.size,by=T.color,sf=null,this},w.setCurrentTransformationMatrix=function(T){return ye(T.toString()+" cm"),this},w.comment=function(T){return ye("#"+T),this};var Vb=function(T,V){var pe=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(xt){isNaN(xt)||(pe=parseFloat(xt))}});var Ce=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(xt){isNaN(xt)||(Ce=parseFloat(xt))}});var qe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return qe},set:function(xt){qe=xt.toString()}}),this},VE=function(T,V,pe,Ce){Vb.call(this,T,V),this.type="rect";var qe=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return qe},set:function(nn){isNaN(nn)||(qe=parseFloat(nn))}});var xt=Ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xt},set:function(nn){isNaN(nn)||(xt=parseFloat(nn))}}),this},zE=function(){this.page=io,this.currentPage=he,this.pages=cn.slice(0),this.pagesContext=zr.slice(0),this.x=La,this.y=ki,this.matrix=Eu,this.width=wy(he),this.height=Sg(he),this.outputDestination=zn,this.id="",this.objectNumber=-1};zE.prototype.restore=function(){io=this.page,zr=this.pagesContext,cn=this.pages,La=this.x,ki=this.y,Eu=this.matrix,HE(he=this.currentPage,this.width),WE(he,this.height),zn=this.outputDestination};var tM=function(T,V,pe,Ce,qe){Ld.push(new zE),io=he=0,cn=[],La=T,ki=V,Eu=qe,PE([pe,Ce])},V4=function(T){if(Od[T])Ld.pop().restore();else{var V=new zE,pe="Xo"+(Object.keys(xa).length+1).toString(10);V.id=pe,Od[T]=pe,xa[pe]=V,Gi.publish("addFormObject",V),Ld.pop().restore()}};for(var zb in w.beginFormObject=function(T,V,pe,Ce,qe){return tM(T,V,pe,Ce,qe),this},w.endFormObject=function(T){return V4(T),this},w.doFormObject=function(T,V){var pe=xa[Od[T]];return ye("q"),ye(V.toString()+" cm"),ye("/"+pe.id+" Do"),ye("Q"),this},w.getFormObject=function(T){var V=xa[Od[T]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},w.save=function(T,V){return T=T||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,!1===V.returnPromise?(gc(Lb(cf()),T),"function"==typeof gc.unload&&pr.setTimeout&&setTimeout(gc.unload,911),this):new Promise(function(pe,Ce){try{var qe=gc(Lb(cf()),T);"function"==typeof gc.unload&&pr.setTimeout&&setTimeout(gc.unload,911),pe(qe)}catch(xt){Ce(xt.message)}})},gr.API)gr.API.hasOwnProperty(zb)&&("events"===zb&&gr.API.events.length?function(T,V){var Ce,qe;for(qe=V.length-1;-1!==qe;qe--)T.subscribe.apply(T,[V[qe][0]].concat("function"==typeof(Ce=V[qe][1])?[Ce]:Ce))}(Gi,gr.API.events):w[zb]=gr.API[zb]);var wy=w.getPageWidth=function(T){return(zr[T=T||he].mediaBox.topRightX-zr[T].mediaBox.bottomLeftX)/kn},HE=w.setPageWidth=function(T,V){zr[T].mediaBox.topRightX=V*kn+zr[T].mediaBox.bottomLeftX},Sg=w.getPageHeight=function(T){return(zr[T=T||he].mediaBox.topRightY-zr[T].mediaBox.bottomLeftY)/kn},WE=w.setPageHeight=function(T,V){zr[T].mediaBox.topRightY=V*kn+zr[T].mediaBox.bottomLeftY};return w.internal={pdfEscape:kc,getStyle:K5,getFont:F4,getFontSize:An,getCharSpace:j4,getTextColor:U4,getLineHeight:Q5,getLineHeightFactor:J5,getLineWidth:Ub,write:$r,getHorizontalCoordinate:lf,getVerticalCoordinate:Eg,getCoordinateString:B4,getVerticalCoordinateString:xg,collections:{},newObject:zo,newAdditionalObject:Tb,newObjectDeferred:wo,newObjectDeferredBegin:hl,getFilters:Bd,putStream:Bl,events:Gi,scaleFactor:kn,pageSize:{getWidth:function(){return wy(he)},setWidth:function(T){HE(he,T)},getHeight:function(){return Sg(he)},setHeight:function(T){WE(he,T)}},encryptionOptions:g,encryption:Fa,getEncryptor:N4,output:Fb,getNumberOfPages:A4,pages:cn,out:ye,f2:tt,f3:ne,getPageInfo:G5,getPageInfoByObjId:Or,getCurrentPageInfo:k4,getPDFVersion:P,Point:Vb,Rectangle:VE,Matrix:Er,hasHotfix:q5},Object.defineProperty(w.internal.pageSize,"width",{get:function(){return wy(he)},set:function(T){HE(he,T)},enumerable:!0,configurable:!0}),Object.defineProperty(w.internal.pageSize,"height",{get:function(){return Sg(he)},set:function(T){WE(he,T)},enumerable:!0,configurable:!0}),x4.call(w,on),ui="F1",H5(i,t),Gi.publish("initialized"),w}pp.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},pp.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pp.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},pp.prototype.processOwnerPassword=function(n,e){return qm(U0(e).substr(0,5),n)},pp.prototype.encryptor=function(n,e){var t=U0(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return qm(t,r)}},gp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Ui(n)!==Ui(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return 0===r},gr.API={events:[]},gr.version="2.5.1";var ks=gr.API,Km=1,rd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mp=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ar=function(n){return n.toFixed(2)},su=function(n){return n.toFixed(5)};ks.__acroform__={};var Da=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},bw=function(n){return n*Km},Yc=function(n){var e=new oA,t=qn.internal.getHeight(n)||0,r=qn.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Ar(r)),Number(Ar(t))],e},JS=ks.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},eA=ks.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},hk=ks.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(n&1<<e)?0:1},Ps=ks.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hk(n,e-1)},Rs=ks.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return JS(n,e-1)},Os=ks.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return eA(n,e-1)},ww=ks.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],l=n[3],d={};return d.lowerLeft_X=t(i)||0,d.lowerLeft_Y=r(s+l)||0,d.upperRight_X=t(i+o)||0,d.upperRight_Y=r(s)||0,[Number(Ar(d.lowerLeft_X)),Number(Ar(d.lowerLeft_Y)),Number(Ar(d.upperRight_X)),Number(Ar(d.upperRight_Y))]},tA=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],r=V0(n,n._V||n.DV),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Ar(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Yc(n);return s.scope=n.scope,s.stream=e.join("\n"),s}},V0=function(n,e){var t=0===n.fontSize?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");i=i.map(n.multiline?function(ne){return ne.split("\n")}:function(ne){return[ne]});var s=t,o=qn.internal.getHeight(n)||0;o=o<0?-o:o;var ne,l=qn.internal.getWidth(n)||0;l=l<0?-l:l,s++;e:for(;s>0;){e="",s--;var h,g,v=Zm("3",n,s).height,E=n.multiline?o-s:(o-v)/2,w=E+=2,D=0,P=0,L=0;if(s<=0){e="(...) Tj\n",e+="% Width of Text: "+Zm(e,n,s=12).width+", FieldWidth:"+l+"\n";break}for(var F="",U=0,K=0;K<i.length;K++)if(i.hasOwnProperty(K)){var J=!1;if(1!==i[K].length&&L!==i[K].length-1){if((v+2)*(U+2)+2>o)continue e;F+=i[K][L],J=!0,P=K,K--}else{F=" "==(F+=i[K][L]+" ").substr(F.length-1)?F.substr(0,F.length-1):F;var ie=parseInt(K),_e=(ne=ie)+1<i.length&&Zm(F+" "+i[ne+1][0],n,s).width<=l-4,fe=K>=i.length-1;if(_e&&!fe){F+=" ",L=0;continue}if(_e||fe){if(fe)P=ie;else if(n.multiline&&(v+2)*(U+2)+2>o)continue e}else{if(!n.multiline||(v+2)*(U+2)+2>o)continue e;P=ie}}for(var oe="",Be=D;Be<=P;Be++){var tt=i[Be];if(n.multiline){if(Be===P){oe+=tt[L]+" ",L=(L+1)%tt.length;continue}if(Be===D){oe+=tt[tt.length-1]+" ";continue}}oe+=tt[0]+" "}switch(oe=" "==oe.substr(oe.length-1)?oe.substr(0,oe.length-1):oe,g=Zm(oe,n,s).width,n.textAlign){case"right":h=l-g-2;break;case"center":h=(l-g)/2;break;default:h=2}e+=Ar(h)+" "+Ar(w)+" Td\n",e+="("+rd(oe)+") Tj\n",e+=-Ar(h)+" 0 Td\n",w=-(s+2),g=0,D=J?P:P+1,U++,F=""}break}return r.text=e,r.fontSize=s,r},Zm=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},nA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},rA=function(n,e){var t={type:"reference",object:n};void 0===e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Iw=ks.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(0!==s&&(i+=" "),Ui(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":"/"!==n[s].substr(0,1)?(void 0!==e&&t&&(r=t.internal.getEncryptor(e)),i+="("+rd(r(n[s].toString()))+")"):i+=n[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},_p=function(n,e,t){var r=function(i){return i};return void 0!==e&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+rd(r(n))+")"},Oo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Oo.prototype.toString=function(){return this.objId+" 0 R"},Oo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Oo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return"content"!=s&&"appearanceStreamContent"!=s&&"scope"!=s&&"objId"!=s&&"_"!=s.substring(0,1)});for(var t in e)if(!1===Object.getOwnPropertyDescriptor(this,e[t]).configurable){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:Iw(i,this.objId,this.scope)}):i instanceof Oo?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&n.push({key:r,value:i}))}return n};var oA=function(){Oo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Da(oA,Oo);var aA=function(){Oo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+rd(t(n))+")"}},set:function(t){n=t}})};Da(aA,Oo);var $a=function n(){Oo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute F supplied.');e=F}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(e,3))},set:function(F){this.F=!0===Boolean(F)?Rs(e,3):Os(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute Ff supplied.');t=F}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(F){r=void 0!==F?F:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(F){r[0]=F}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(F){r[1]=F}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(F){r[2]=F}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(F){r[3]=F}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(F){switch(F){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=F;break;default:throw new Error('Invalid value "'+F+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof z0)return;s="FieldObject"+n.FieldNum++}var F=function(U){return U};return this.scope&&(F=this.scope.internal.getEncryptor(this.objId)),"("+rd(F(s))+")"},set:function(F){s=F.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(F){s=F}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(F){o=F}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(F){l=F}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(F){d=F}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===h?50/Km:h},set:function(F){h=F}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(F){g=F}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof z0||this instanceof wh))return _p(v,this.objId,this.scope)},set:function(F){F=F.toString(),v=F}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof Lo?E:_p(E,this.objId,this.scope)},set:function(F){F=F.toString(),E=this instanceof Lo?F:"("===F.substr(0,1)?mp(F.substr(1,F.length-2)):mp(F)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lo?mp(E.substr(1,E.length-1)):E},set:function(F){F=F.toString(),E=this instanceof Lo?"/"+F:F}});var w=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(w)return w},set:function(F){this.V=F}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Lo?w:_p(w,this.objId,this.scope)},set:function(F){F=F.toString(),w=this instanceof Lo?F:"("===F.substr(0,1)?mp(F.substr(1,F.length-2)):mp(F)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lo?mp(w.substr(1,w.length-1)):w},set:function(F){F=F.toString(),w=this instanceof Lo?"/"+F:F}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(F){F=Boolean(F),P=F}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(F){D=F}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,1))},set:function(F){this.Ff=!0===Boolean(F)?Rs(this.Ff,1):Os(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,2))},set:function(F){this.Ff=!0===Boolean(F)?Rs(this.Ff,2):Os(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,3))},set:function(F){this.Ff=!0===Boolean(F)?Rs(this.Ff,3):Os(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==L)return L},set:function(F){if(-1===[0,1,2].indexOf(F))throw new Error('Invalid value "'+F+'" for attribute Q supplied.');L=F}}),Object.defineProperty(this,"textAlign",{get:function(){var F;switch(L){case 0:default:F="left";break;case 1:F="center";break;case 2:F="right"}return F},configurable:!0,enumerable:!0,set:function(F){switch(F){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Da($a,Oo);var mc=function(){$a.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Iw(e,this.objId,this.scope)},set:function(t){var r,i;i=[],"string"==typeof(r=t)&&(i=function(s,o,l){l||(l=1);for(var d,h=[];d=o.exec(s);)h.push(d[l]);return h}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,18))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,18):Os(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,19))},set:function(t){!0===this.combo&&(this.Ff=!0===Boolean(t)?Rs(this.Ff,19):Os(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=Rs(this.Ff,20),e.sort()):this.Ff=Os(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,22))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,22):Os(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,23))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,23):Os(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,27))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,27):Os(this.Ff,27)}}),this.hasAppearanceStream=!1};Da(mc,$a);var id=function(){mc.call(this),this.fontName="helvetica",this.combo=!1};Da(id,mc);var yp=function(){id.call(this),this.combo=!0};Da(yp,id);var vp=function(){yp.call(this),this.edit=!0};Da(vp,yp);var Lo=function(){$a.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,15))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,15):Os(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,16))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,16):Os(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,17))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,17):Os(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,26))},set:function(t){this.Ff=!0===Boolean(t)?Rs(this.Ff,26):Os(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+rd(t(e[r]))+")");return i.push(">>"),i.join("\n")}},set:function(t){"object"===Ui(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Da(Lo,$a);var Ew=function(){Lo.call(this),this.pushButton=!0};Da(Ew,Lo);var bp=function(){Lo.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=void 0!==e?e:[]}})};Da(bp,Lo);var z0=function(){var n,e;$a.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+rd(i(r[s]))+")");return o.push(">>"),o.join("\n")},set:function(i){"object"===Ui(i)&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){"string"==typeof i&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Da(z0,$a),bp.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},bp.prototype.createOption=function(n){var e=new z0;return e.Parent=this,e.optionName=n,this.Kids.push(e),fk.call(this.scope,e),e};var Ym=function(){Lo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qn.CheckBox.createAppearanceStream()};Da(Ym,Lo);var wh=function(){$a.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,13))},set:function(e){this.Ff=!0===Boolean(e)?Rs(this.Ff,13):Os(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,21))},set:function(e){this.Ff=!0===Boolean(e)?Rs(this.Ff,21):Os(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,23))},set:function(e){this.Ff=!0===Boolean(e)?Rs(this.Ff,23):Os(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,24))},set:function(e){this.Ff=!0===Boolean(e)?Rs(this.Ff,24):Os(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,25))},set:function(e){this.Ff=!0===Boolean(e)?Rs(this.Ff,25):Os(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,26))},set:function(e){this.Ff=!0===Boolean(e)?Rs(this.Ff,26):Os(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Da(wh,$a);var Ls=function(){wh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ps(this.Ff,14))},set:function(n){this.Ff=!0===Boolean(n)?Rs(this.Ff,14):Os(this.Ff,14)}}),this.password=!0};Da(Ls,wh);var qn={CheckBox:{createAppearanceStream:function(){return{N:{On:qn.CheckBox.YesNormal},D:{On:qn.CheckBox.YesPushDown,Off:qn.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Yc(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=V0(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Ar(qn.internal.getWidth(n))+" "+Ar(qn.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Ar(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join("\n"),e},YesNormal:function(n){var e=Yc(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=qn.internal.getHeight(n),o=qn.internal.getWidth(n),l=V0(n,n.caption);return i.push("1 g"),i.push("0 0 "+Ar(o)+" "+Ar(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ar(o-1)+" "+Ar(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Ar(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(n){var e=Yc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ar(qn.internal.getWidth(n))+" "+Ar(qn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:qn.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=qn.RadioButton.Circle.YesNormal,e.D[n]=qn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Yc(n);e.scope=n.scope;var t=[],r=qn.internal.getWidth(n)<=qn.internal.getHeight(n)?qn.internal.getWidth(n)/4:qn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((r*qn.internal.Bezier_C).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+su(qn.internal.getWidth(n)/2)+" "+su(qn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(n){var e=Yc(n);e.scope=n.scope;var t=[],r=qn.internal.getWidth(n)<=qn.internal.getHeight(n)?qn.internal.getWidth(n)/4:qn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*qn.internal.Bezier_C).toFixed(5)),o=Number((r*qn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+su(qn.internal.getWidth(n)/2)+" "+su(qn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+su(qn.internal.getWidth(n)/2)+" "+su(qn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},OffPushDown:function(n){var e=Yc(n);e.scope=n.scope;var t=[],r=qn.internal.getWidth(n)<=qn.internal.getHeight(n)?qn.internal.getWidth(n)/4:qn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*qn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+su(qn.internal.getWidth(n)/2)+" "+su(qn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:qn.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=qn.RadioButton.Cross.YesNormal,e.D[n]=qn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Yc(n);e.scope=n.scope;var t=[],r=qn.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Ar(qn.internal.getWidth(n)-2)+" "+Ar(qn.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Ar(r.x1.x)+" "+Ar(r.x1.y)+" m"),t.push(Ar(r.x2.x)+" "+Ar(r.x2.y)+" l"),t.push(Ar(r.x4.x)+" "+Ar(r.x4.y)+" m"),t.push(Ar(r.x3.x)+" "+Ar(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(n){var e=Yc(n);e.scope=n.scope;var t=qn.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ar(qn.internal.getWidth(n))+" "+Ar(qn.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ar(qn.internal.getWidth(n)-2)+" "+Ar(qn.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Ar(t.x1.x)+" "+Ar(t.x1.y)+" m"),r.push(Ar(t.x2.x)+" "+Ar(t.x2.y)+" l"),r.push(Ar(t.x4.x)+" "+Ar(t.x4.y)+" m"),r.push(Ar(t.x3.x)+" "+Ar(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(n){var e=Yc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ar(qn.internal.getWidth(n))+" "+Ar(qn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join("\n"),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};qn.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=qn.internal.getWidth(n),t=qn.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},qn.internal.getWidth=function(n){var e=0;return"object"===Ui(n)&&(e=bw(n.Rect[2])),e},qn.internal.getHeight=function(n){var e=0;return"object"===Ui(n)&&(e=bw(n.Rect[3])),e};var n,e,fk=ks.addField=function(n){if(function(n,e){if(e.scope=n,void 0!==n.internal&&(void 0===n.internal.acroformPlugin||!1===n.internal.acroformPlugin.isInitialized)){if($a.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(nA)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Km=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new aA,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){var t;(t=n).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),n.internal.events.subscribe("buildDocument",function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&rA(s,t)}}(n)}),n.internal.events.subscribe("putCatalog",function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(n)}),n.internal.events.subscribe("postPutPages",function(t){!function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],d=[],h=l.Rect;if(l.Rect&&(l.Rect=ww(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=qn.createDefaultAppearanceStream(l),"object"===Ui(l)&&"function"==typeof l.getKeyValueListForStream&&(d=l.getKeyValueListForStream()),l.Rect=h,l.hasAppearanceStream&&!l.appearanceStreamContent){var g=tA(l);d.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(l.appearanceStreamContent){var v="";for(var E in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(E)){var w=l.appearanceStreamContent[E];if(v+="/"+E+" ",v+="<<",Object.keys(w).length>=1||Array.isArray(w)){for(var o in w)if(w.hasOwnProperty(o)){var D=w[o];"function"==typeof D&&(D=D.call(i,l)),v+="/"+o+" "+D+" ",i.internal.acroformPlugin.xForms.indexOf(D)>=0||i.internal.acroformPlugin.xForms.push(D)}}else"function"==typeof(D=w)&&(D=D.call(i,l)),v+="/"+o+" "+D,i.internal.acroformPlugin.xForms.indexOf(D)>=0||i.internal.acroformPlugin.xForms.push(D);v+=">>"}d.push({key:"AP",value:"<<\n"+v+">>"})}i.internal.putStream({additionalKeyValues:d,objectId:l.objId}),i.internal.out("endobj")}s&&function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),"object"===Ui(i)&&"function"==typeof i.putStream&&i.putStream(),delete n[r]}}(i.internal.acroformPlugin.xForms,i)}(t,n)}),n.internal.acroformPlugin.isInitialized=!0}}(this,n),!(n instanceof $a))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};function xw(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}ks.AcroFormChoiceField=mc,ks.AcroFormListBox=id,ks.AcroFormComboBox=yp,ks.AcroFormEditBox=vp,ks.AcroFormButton=Lo,ks.AcroFormPushButton=Ew,ks.AcroFormRadioButton=bp,ks.AcroFormCheckBox=Ym,ks.AcroFormTextField=wh,ks.AcroFormPasswordField=Ls,ks.AcroFormAppearance=qn,ks.AcroForm={ChoiceField:mc,ListBox:id,ComboBox:yp,EditBox:vp,Button:Lo,PushButton:Ew,RadioButton:bp,CheckBox:Ym,TextField:wh,PasswordField:Ls,Appearance:qn},gr.AcroForm={ChoiceField:mc,ListBox:id,ComboBox:yp,EditBox:vp,Button:Lo,PushButton:Ew,RadioButton:bp,CheckBox:Ym,TextField:wh,PasswordField:Ls,Appearance:qn},function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(ne,te){var xe,ve,Ve,Ze,ut,Ye=e;if("RGBA"===(te=te||e)||void 0!==ne.data&&ne.data instanceof Uint8ClampedArray&&"height"in ne&&"width"in ne)return"RGBA";if(_e(ne))for(ut in t)for(Ve=t[ut],xe=0;xe<Ve.length;xe+=1){for(Ze=!0,ve=0;ve<Ve[xe].length;ve+=1)if(void 0!==Ve[xe][ve]&&Ve[xe][ve]!==ne[ve]){Ze=!1;break}if(!0===Ze){Ye=ut;break}}else for(ut in t)for(Ve=t[ut],xe=0;xe<Ve.length;xe+=1){for(Ze=!0,ve=0;ve<Ve[xe].length;ve+=1)if(void 0!==Ve[xe][ve]&&Ve[xe][ve]!==ne.charCodeAt(ve)){Ze=!1;break}if(!0===Ze){Ye=ut;break}}return Ye===e&&te!==e&&(Ye=te),Ye},i=function ne(te){for(var xe=this.internal.write,ve=this.internal.putStream,Ve=(0,this.internal.getFilters)();-1!==Ve.indexOf("FlateEncode");)Ve.splice(Ve.indexOf("FlateEncode"),1);te.objectId=this.internal.newObject();var Ze=[];if(Ze.push({key:"Type",value:"/XObject"}),Ze.push({key:"Subtype",value:"/Image"}),Ze.push({key:"Width",value:te.width}),Ze.push({key:"Height",value:te.height}),te.colorSpace===L.INDEXED?Ze.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(te.palette.length/3-1)+" "+("sMask"in te&&void 0!==te.sMask?te.objectId+2:te.objectId+1)+" 0 R]"}):(Ze.push({key:"ColorSpace",value:"/"+te.colorSpace}),te.colorSpace===L.DEVICE_CMYK&&Ze.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ze.push({key:"BitsPerComponent",value:te.bitsPerComponent}),"decodeParameters"in te&&void 0!==te.decodeParameters&&Ze.push({key:"DecodeParms",value:"<<"+te.decodeParameters+">>"}),"transparency"in te&&Array.isArray(te.transparency)){for(var ut="",Ye=0,Tt=te.transparency.length;Ye<Tt;Ye++)ut+=te.transparency[Ye]+" "+te.transparency[Ye]+" ";Ze.push({key:"Mask",value:"["+ut+"]"})}if(void 0!==te.sMask&&Ze.push({key:"SMask",value:te.objectId+1+" 0 R"}),ve({data:te.data,additionalKeyValues:Ze,alreadyAppliedFilters:void 0!==te.filter?["/"+te.filter]:void 0,objectId:te.objectId}),xe("endobj"),"sMask"in te&&void 0!==te.sMask){var $={width:te.width,height:te.height,colorSpace:"DeviceGray",bitsPerComponent:te.bitsPerComponent,decodeParameters:"/Predictor "+te.predictor+" /Colors 1 /BitsPerComponent "+te.bitsPerComponent+" /Columns "+te.width,data:te.sMask};"filter"in te&&($.filter=te.filter),ne.call(this,$)}if(te.colorSpace===L.INDEXED){var he=this.internal.newObject();ve({data:oe(new Uint8Array(te.palette)),objectId:he}),xe("endobj")}},s=function(){var ne=this.internal.collections.addImage_images;for(var te in ne)i.call(this,ne[te])},o=function(){var ne,te=this.internal.collections.addImage_images,xe=this.internal.write;for(var ve in te)xe("/I"+(ne=te[ve]).index,ne.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var ne=this.internal.collections.addImage_images;return l.call(this),ne},h=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(ne){return"function"==typeof n["process"+ne.toUpperCase()]},v=function(ne){return"object"===Ui(ne)&&1===ne.nodeType},E=function(ne,te){if("IMG"===ne.nodeName&&ne.hasAttribute("src")){var xe=""+ne.getAttribute("src");if(0===xe.indexOf("data:image/"))return Al(unescape(xe).split("base64,").pop());var ve=n.loadFile(xe,!0);if(void 0!==ve)return ve}if("CANVAS"===ne.nodeName){if(0===ne.width||0===ne.height)throw new Error("Given canvas must have data. Canvas width: "+ne.width+", height: "+ne.height);var Ve;switch(te){case"PNG":Ve="image/png";break;case"WEBP":Ve="image/webp";break;default:Ve="image/jpeg"}return Al(ne.toDataURL(Ve,1).split("base64,").pop())}},w=function(ne){var te=this.internal.collections.addImage_images;if(te)for(var xe in te)if(ne===te[xe].alias)return te[xe]},D=function(ne,te,xe){return ne||te||(ne=-96,te=-96),ne<0&&(ne=-1*xe.width*72/ne/this.internal.scaleFactor),te<0&&(te=-1*xe.height*72/te/this.internal.scaleFactor),0===ne&&(ne=te*xe.width/xe.height),0===te&&(te=ne*xe.height/xe.width),[ne,te]},P=function(ne,te,xe,ve,Ve,Ze){var ut=D.call(this,xe,ve,Ve),Ye=this.internal.getCoordinateString,Tt=this.internal.getVerticalCoordinateString,It=d.call(this);if(xe=ut[0],ve=ut[1],It[Ve.index]=Ve,Ze){Ze*=Math.PI/180;var wn=Math.cos(Ze),$=Math.sin(Ze),he=function(Me){return Me.toFixed(4)},me=[he(wn),he($),he(-1*$),he(wn),0,0,"cm"]}this.internal.write("q"),Ze?(this.internal.write([1,"0","0",1,Ye(ne),Tt(te+ve),"cm"].join(" ")),this.internal.write(me.join(" ")),this.internal.write([Ye(xe),"0","0",Ye(ve),"0","0","cm"].join(" "))):this.internal.write([Ye(xe),"0","0",Ye(ve),Ye(ne),Tt(te+ve),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ve.index+" Do"),this.internal.write("Q")},L=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=n.__addimage__.sHashCode=function(ne){var te,xe,ve=0;if("string"==typeof ne)for(xe=ne.length,te=0;te<xe;te++)ve=(ve<<5)-ve+ne.charCodeAt(te),ve|=0;else if(_e(ne))for(xe=ne.byteLength/2,te=0;te<xe;te++)ve=(ve<<5)-ve+ne[te],ve|=0;return ve},K=n.__addimage__.validateStringAsBase64=function(ne){(ne=ne||"").toString().trim();var te=!0;return 0===ne.length&&(te=!1),ne.length%4!=0&&(te=!1),!1===/^[A-Za-z0-9+/]+$/.test(ne.substr(0,ne.length-2))&&(te=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ne.substr(-2))&&(te=!1),te},J=n.__addimage__.extractImageFromDataUrl=function(ne){var te=(ne=ne||"").split("base64,"),xe=null;if(2===te.length){var ve=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(te[0]);Array.isArray(ve)&&(xe={mimeType:ve[1],charset:ve[2],data:te[1]})}return xe},ie=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(ne){return ie()&&ne instanceof ArrayBuffer};var _e=n.__addimage__.isArrayBufferView=function(ne){return ie()&&typeof Uint32Array<"u"&&(ne instanceof Int8Array||ne instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array)},fe=n.__addimage__.binaryStringToUint8Array=function(ne){for(var te=ne.length,xe=new Uint8Array(te),ve=0;ve<te;ve++)xe[ve]=ne.charCodeAt(ve);return xe},oe=n.__addimage__.arrayBufferToBinaryString=function(ne){for(var te="",xe=_e(ne)?ne:new Uint8Array(ne),ve=0;ve<xe.length;ve+=8192)te+=String.fromCharCode.apply(null,xe.subarray(ve,ve+8192));return te};n.addImage=function(){var ne,te,xe,ve,Ve,Ze,ut,Ye,Tt;if("number"==typeof arguments[1]?(te=e,xe=arguments[1],ve=arguments[2],Ve=arguments[3],Ze=arguments[4],ut=arguments[5],Ye=arguments[6],Tt=arguments[7]):(te=arguments[1],xe=arguments[2],ve=arguments[3],Ve=arguments[4],Ze=arguments[5],ut=arguments[6],Ye=arguments[7],Tt=arguments[8]),"object"===Ui(ne=arguments[0])&&!v(ne)&&"imageData"in ne){var It=ne;ne=It.imageData,te=It.format||te||e,xe=It.x||xe||0,ve=It.y||ve||0,Ve=It.w||It.width||Ve,Ze=It.h||It.height||Ze,ut=It.alias||ut,Ye=It.compression||Ye,Tt=It.rotation||It.angle||Tt}var wn=this.internal.getFilters();if(void 0===Ye&&-1!==wn.indexOf("FlateEncode")&&(Ye="SLOW"),isNaN(xe)||isNaN(ve))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var $=Be.call(this,ne,te,ut,Ye);return P.call(this,xe,ve,Ve,Ze,$,Tt),this};var Be=function(ne,te,xe,ve){var Ve,Ze,ut,Tt;if("string"==typeof ne&&r(ne)===e){ne=unescape(ne);var Ye=tt(ne,!1);(""!==Ye||void 0!==(Ye=n.loadFile(ne,!0)))&&(ne=Ye)}if(v(ne)&&(ne=E(ne,te)),te=r(ne,te),!g(te))throw new Error("addImage does not support files of type '"+te+"', please ensure that a plugin for '"+te+"' support is added.");if((null==(ut=xe)||0===ut.length)&&(xe="string"==typeof(Tt=ne)||_e(Tt)?U(Tt):_e(Tt.data)?U(Tt.data):null),(Ve=w.call(this,xe))||(ie()&&(ne instanceof Uint8Array||"RGBA"===te||(Ze=ne,ne=fe(ne))),Ve=this["process"+te.toUpperCase()](ne,h.call(this),xe,function(Tt){return Tt&&"string"==typeof Tt&&(Tt=Tt.toUpperCase()),Tt in n.image_compression?Tt:F.NONE}(ve),Ze)),!Ve)throw new Error("An unknown error occurred whilst processing the image.");return Ve},tt=n.__addimage__.convertBase64ToBinaryString=function(ne,te){var xe;te="boolean"!=typeof te||te;var ve,Ve="";if("string"==typeof ne){ve=null!==(xe=J(ne))?xe.data:ne;try{Ve=Al(ve)}catch(Ze){if(te)throw K(ve)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ze.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ve};n.getImageProperties=function(ne){var te,xe,ve="";if(v(ne)&&(ne=E(ne)),"string"==typeof ne&&r(ne)===e&&(""===(ve=tt(ne,!1))&&(ve=n.loadFile(ne)||""),ne=ve),xe=r(ne),!g(xe))throw new Error("addImage does not support files of type '"+xe+"', please ensure that a plugin for '"+xe+"' support is added.");if(!ie()||ne instanceof Uint8Array||(ne=fe(ne)),!(te=this["process"+xe.toUpperCase()](ne)))throw new Error("An unknown error occurred whilst processing the image");return te.fileType=xe,te}}(gr.API),n=gr.API,e=function(t){if(void 0!==t&&""!=t)return!0},gr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(t.objId),h=t.pageContext.annotations,g=!1,v=0;v<h.length&&!g;v++)switch((r=h[v]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(0!=g){this.internal.write("/Annots [");for(var E=0;E<h.length;E++){r=h[E];var w=this.internal.pdfEscape,D=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),F=this.internal.getEncryptor(P.objId),U=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+w(F(r.contents))+")",s+=" /Popup "+L.objId+" 0 R",s+=" /P "+d.objId+" 0 R",s+=" /T ("+w(F(U))+") >>",P.content=s;var K=P.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+K,r.open&&(s+=" /Open true"),L.content=s+=" >>",this.internal.write(P.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var J=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+w(D(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",s+=" /Border [0 0 0]",this.internal.write(s+=" >>");break;case"link":if(r.options.name){var ie=this.annotations._nameMap[r.options.name];r.options.pageNumber=ie.page,r.options.top=ie.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+w(D(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var _e=l(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+_e+" "+r.options.zoom+"]"}""!=s&&this.internal.write(s+=" >>")}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var l=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:d(t),y:h(r),w:d(t+i),h:h(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,l,d=this.getTextWidth(t),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==s.maxWidth){var g=this.splitTextToSize(t,l=s.maxWidth).length;o=Math.ceil(h*g)}else l=d,o=h;return this.text(t,r,i,s),"center"===s.align&&(r-=d/2),"right"===s.align&&(r-=d),this.link(r,(i+=.2*h)-h,l,o,s),d},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor},function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(P){return void 0!==e[P.charCodeAt(0)]},o=n.__arabicParser__.isArabicLetter=function(P){return"string"==typeof P&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},l=n.__arabicParser__.isArabicEndLetter=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length<=2},d=n.__arabicParser__.isArabicAlfLetter=function(P){return o(P)&&i.indexOf(P.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length>=1};var h=n.__arabicParser__.arabicLetterHasFinalForm=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length>=3};var g=n.__arabicParser__.arabicLetterHasMedialForm=function(P){return o(P)&&s(P)&&4==e[P.charCodeAt(0)].length},v=n.__arabicParser__.resolveLigatures=function(P){var L=0,F=t,U="",K=0;for(L=0;L<P.length;L+=1)void 0!==F[P.charCodeAt(L)]?(K++,"number"==typeof(F=F[P.charCodeAt(L)])&&(U+=String.fromCharCode(F),F=t,K=0),L===P.length-1&&(F=t,U+=P.charAt(L-(K-1)),L-=K-1,K=0)):(F=t,U+=P.charAt(L-K),L-=K,K=0);return U};n.__arabicParser__.isArabicDiacritic=function(P){return void 0!==P&&void 0!==r[P.charCodeAt(0)]};var E=n.__arabicParser__.getCorrectForm=function(P,L,F){return o(P)?!1===s(P)?-1:!h(P)||!o(L)&&!o(F)||!o(F)&&l(L)||l(P)&&!o(L)||l(P)&&d(L)||l(P)&&l(L)?0:g(P)&&o(L)&&!l(L)&&o(F)&&h(F)?3:l(P)||!o(F)?1:2:-1},w=function(P){var L=0,F=0,U=0,K="",J="",ie="",_e=(P=P||"").split("\\s+"),fe=[];for(L=0;L<_e.length;L+=1){for(fe.push(""),F=0;F<_e[L].length;F+=1)J=_e[L][F-1],ie=_e[L][F+1],o(K=_e[L][F])?(U=E(K,J,ie),fe[L]+=-1!==U?String.fromCharCode(e[K.charCodeAt(0)][U]):K):fe[L]+=K;fe[L]=v(fe[L])}return fe.join(" ")},D=n.__arabicParser__.processArabic=n.processArabic=function(){var P,L="string"==typeof arguments[0]?arguments[0]:arguments[0].text,F=[];if(Array.isArray(L)){var U=0;for(F=[],U=0;U<L.length;U+=1)Array.isArray(L[U])?F.push([w(L[U][0]),L[U][1],L[U][2]]):F.push([w(L[U])]);P=F}else P=w(L);return"string"==typeof arguments[0]?P:(arguments[0].text=P,arguments[0])};n.events.push(["preProcessText",D])}(gr.API),gr.API.autoPrint=function(n){var e;return"javascript"===((n=n||{}).variant=n.variant||"non-conform",n.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||!1===Number.isInteger(l)||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||!1===Number.isInteger(l)||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if("2d"!==(t=t||"2d"))return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(P){d=P}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(P){h=P}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(P){g=P}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(P){v=P}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(P){E=P}});var w=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return w},set:function(P){w=P}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(P){D=P}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(d){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof d?d:void 0,this},n.getTextDimensions=function(d,h){r.call(this);var g=(h=h||{}).fontSize||this.getFontSize(),v=h.font||this.getFont(),E=h.scaleFactor||this.internal.scaleFactor,w=0,D=0,P=0,L=this;if(!Array.isArray(d)&&"string"!=typeof d){if("number"!=typeof d)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var F=h.maxWidth;F>0?"string"==typeof d?d=this.splitTextToSize(d,F):"[object Array]"===Object.prototype.toString.call(d)&&(d=d.reduce(function(K,J){return K.concat(L.splitTextToSize(J,F))},[])):d=Array.isArray(d)?d:[d];for(var U=0;U<d.length;U++)w<(P=this.getStringUnitWidth(d[U],{font:v})*g)&&(w=P);return 0!==w&&(D=d.length),{w:w/=E,h:Math.max((D*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/E,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var d;d=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var h=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,E=this.internal.__cell__.tableHeaderRow,w=this.internal.__cell__.printHeaders;return void 0!==h.lineNumber&&(h.lineNumber===d.lineNumber?(d.x=(h.x||0)+(h.width||0),d.y=h.y||0):h.y+h.height+d.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=v.top,w&&E&&(this.printHeaderRow(d.lineNumber,!0),d.y+=E[0].height)):d.y=h.y+h.height||d.y),void 0!==d.text[0]&&(this.rect(d.x,d.y,d.width,d.height,!0===t?"FD":void 0),"right"===d.align?this.text(d.text,d.x+d.width-g,d.y+g,{align:"right",baseline:"top"}):"center"===d.align?this.text(d.text,d.x+d.width/2,d.y+g,{align:"center",baseline:"top",maxWidth:d.width-g-g}):this.text(d.text,d.x+g,d.y+g,{align:"left",baseline:"top",maxWidth:d.width-g-g})),this.internal.__cell__.lastCell=d,this};n.table=function(d,h,g,v,E){if(r.call(this),!g)throw new Error("No data for PDF table.");var w,D,P,L,F=[],U=[],K=[],J={},ie={},_e=[],fe=[],oe=(E=E||{}).autoSize||!1,Be=!1!==E.printHeaders,tt=E.css&&void 0!==E.css["font-size"]?16*E.css["font-size"]:E.fontSize||12,ne=E.margins||Object.assign({width:this.getPageWidth()},e),te="number"==typeof E.padding?E.padding:3,xe=E.headerBackgroundColor||"#c8c8c8",ve=E.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Be,this.internal.__cell__.margins=ne,this.internal.__cell__.table_font_size=tt,this.internal.__cell__.padding=te,this.internal.__cell__.headerBackgroundColor=xe,this.internal.__cell__.headerTextColor=ve,this.setFontSize(tt),null==v)U=F=Object.keys(g[0]),K=F.map(function(){return"left"});else if(Array.isArray(v)&&"object"===Ui(v[0]))for(F=v.map(function(It){return It.name}),U=v.map(function(It){return It.prompt||It.name||""}),K=v.map(function(It){return It.align||"left"}),w=0;w<v.length;w+=1)ie[v[w].name]=v[w].width*(19.049976/25.4);else Array.isArray(v)&&"string"==typeof v[0]&&(U=F=v,K=F.map(function(){return"left"}));if(oe||Array.isArray(v)&&"string"==typeof v[0])for(w=0;w<F.length;w+=1){for(J[L=F[w]]=g.map(function(It){return It[L]}),this.setFont(void 0,"bold"),_e.push(this.getTextDimensions(U[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=J[L],this.setFont(void 0,"normal"),P=0;P<D.length;P+=1)_e.push(this.getTextDimensions(D[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ie[L]=Math.max.apply(null,_e)+te+te,_e=[]}if(Be){var Ve={};for(w=0;w<F.length;w+=1)Ve[F[w]]={},Ve[F[w]].text=U[w],Ve[F[w]].align=K[w];var Ze=l.call(this,Ve,ie);fe=F.map(function(It){return new s(d,h,ie[It],Ze,Ve[It].text,void 0,Ve[It].align)}),this.setTableHeaderRow(fe),this.printHeaderRow(1,!1)}var ut=v.reduce(function(It,wn){return It[wn.name]=wn.align,It},{});for(w=0;w<g.length;w+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:w,data:g[w]},this);var Ye=l.call(this,g[w],ie);for(P=0;P<F.length;P+=1){var Tt=g[w][F[P]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:w,col:P,data:Tt},this),o.call(this,new s(d,h,ie[F[P]],Ye,Tt,w+2,ut[F[P]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=h,this};var l=function(d,h){var g=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(d).map(function(w){var D=d[w];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,h[w]-g-g)},this).map(function(w){return this.getLineHeightFactor()*w.length*v/E+g+g},this).reduce(function(w,D){return Math.max(w,D)},0)};n.setTableHeaderRow=function(d){r.call(this),this.internal.__cell__.tableHeaderRow=d},n.printHeaderRow=function(d,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,"function"==typeof this.internal.__cell__.headerFunction){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],w=0;w<this.internal.__cell__.tableHeaderRow.length;w+=1){g=this.internal.__cell__.tableHeaderRow[w].clone(),h&&(g.y=this.internal.__cell__.margins.top||0,E.push(g)),g.lineNumber=d;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,g),this.setTextColor(D)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),t=!1}}(gr.API);var cA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Sw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H0=xw(Sw),Ih=[100,200,300,400,500,600,700,800,900],pk=xw(Ih);function Aw(n){var s,e=n.family.replace(/"|'/g,"").toLowerCase(),t=cA[s=(s=n.style)||"normal"]?s:"normal",r=function(s){return s?"number"==typeof s?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):"bold"===s?700:400:400}(n.weight),i=function(s){return"number"==typeof H0[s=s||"normal"]?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function Cw(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var gk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Tw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function mk(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function W0(n){return n.trimLeft()}function Cl(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function _k(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],n.substring(e[0].length)]}var $0,Qc,_c,qa=["times"];(function(n){var e,t,r,i,s,o,l,d,h,g=function($){return this.isStrokeTransparent=($=$||{}).isStrokeTransparent||!1,this.strokeOpacity=$.strokeOpacity||1,this.strokeStyle=$.strokeStyle||"#000000",this.fillStyle=$.fillStyle||"#000000",this.isFillTransparent=$.isFillTransparent||!1,this.fillOpacity=$.fillOpacity||1,this.font=$.font||"10px sans-serif",this.textBaseline=$.textBaseline||"alphabetic",this.textAlign=$.textAlign||"left",this.lineWidth=$.lineWidth||1,this.lineJoin=$.lineJoin||"miter",this.lineCap=$.lineCap||"butt",this.path=$.path||[],this.transform=void 0!==$.transform?$.transform.clone():new d,this.globalCompositeOperation=$.globalCompositeOperation||"normal",this.globalAlpha=$.globalAlpha||1,this.clip_path=$.clip_path||[],this.currentPoint=$.currentPoint||new o,this.miterLimit=$.miterLimit||10,this.lastPoint=$.lastPoint||new o,this.lineDashOffset=$.lineDashOffset||0,this.lineDash=$.lineDash||[],this.margin=$.margin||[0,0,0,0],this.prevPageLastElemOffset=$.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof $.ignoreClearRect||$.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,d=this.internal.Matrix,h=new g}]);var v=function($){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var he=$;Object.defineProperty(this,"pdf",{get:function(){return he}});var me=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return me},set:function(Ct){me=Boolean(Ct)}});var Me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Me},set:function(Ct){Me=Boolean(Ct)}});var je=0;Object.defineProperty(this,"posX",{get:function(){return je},set:function(Ct){isNaN(Ct)||(je=Ct)}});var ot=0;Object.defineProperty(this,"posY",{get:function(){return ot},set:function(Ct){isNaN(Ct)||(ot=Ct)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Ct){var ye;"number"==typeof Ct?ye=[Ct,Ct,Ct,Ct]:((ye=new Array(4))[0]=Ct[0],ye[1]=Ct.length>=2?Ct[1]:ye[0],ye[2]=Ct.length>=3?Ct[2]:ye[0],ye[3]=Ct.length>=4?Ct[3]:ye[1]),h.margin=ye}});var dt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return dt},set:function(Ct){dt=Ct}});var _t=0;Object.defineProperty(this,"lastBreak",{get:function(){return _t},set:function(Ct){_t=Ct}});var dn=[];Object.defineProperty(this,"pageBreaks",{get:function(){return dn},set:function(Ct){dn=Ct}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Ct){Ct instanceof g&&(h=Ct)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Ct){h.path=Ct}});var cn=[];Object.defineProperty(this,"ctxStack",{get:function(){return cn},set:function(Ct){cn=Ct}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ct){var ye;ye=E(Ct),this.ctx.fillStyle=ye.style,this.ctx.isFillTransparent=0===ye.a,this.ctx.fillOpacity=ye.a,this.pdf.setFillColor(ye.r,ye.g,ye.b,{a:ye.a}),this.pdf.setTextColor(ye.r,ye.g,ye.b,{a:ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ct){var ye=E(Ct);this.ctx.strokeStyle=ye.style,this.ctx.isStrokeTransparent=0===ye.a,this.ctx.strokeOpacity=ye.a,0===ye.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(ye.r,ye.g,ye.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ct){-1!==["butt","round","square"].indexOf(Ct)&&(this.ctx.lineCap=Ct,this.pdf.setLineCap(Ct))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ct){isNaN(Ct)||(this.ctx.lineWidth=Ct,this.pdf.setLineWidth(Ct))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ct){-1!==["bevel","round","miter"].indexOf(Ct)&&(this.ctx.lineJoin=Ct,this.pdf.setLineJoin(Ct))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ct){isNaN(Ct)||(this.ctx.miterLimit=Ct,this.pdf.setMiterLimit(Ct))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ct){this.ctx.textBaseline=Ct}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ct){-1!==["right","end","center","left","start"].indexOf(Ct)&&(this.ctx.textAlign=Ct)}});var Rn=null,Sr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Sr},set:function(Ct){Rn=null,Sr=Ct}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ct){var ye;if(this.ctx.font=Ct,null!==(ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ct))){var $r=ye[1],nr=ye[3],on=ye[4],vn=ye[6],Nn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(on)[2];on=Math.floor("px"===Nn?parseFloat(on)*this.pdf.internal.scaleFactor:"em"===Nn?parseFloat(on)*this.pdf.getFontSize():parseFloat(on)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(on);var An=function(Mr){var ui,kn,La=[],ki=Mr.trim();if(""===ki)return qa;if(ki in Tw)return[Tw[ki]];for(;""!==ki;){switch(kn=null,ui=(ki=W0(ki)).charAt(0)){case'"':case"'":kn=Cl(ki.substring(1),ui);break;default:kn=_k(ki)}if(null===kn||(La.push(kn[0]),""!==(ki=W0(kn[1]))&&","!==ki.charAt(0)))return qa;ki=ki.replace(/^,/,"")}return La}(vn);if(this.fontFaces){var cr=function Dw(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},gk,t.genericFontFamilies||{}),s=null,o=null,l=0;l<e.length;++l)if(i[(s=Aw(e[l])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+mk(s)+"' and default family '"+r+"'.");if(o=function(d,h){if(h[d])return h[d];var g=H0[d],E=Cw(h,Sw,g,g<=H0.normal?-1:1);if(!E)throw new Error("Could not find a matching font-stretch value for "+d);return E}(s.stretch,o),o=function(d,h){if(h[d])return h[d];for(var g=cA[d],v=0;v<g.length;++v)if(h[g[v]])return h[g[v]];throw new Error("Could not find a matching font-style for "+d)}(s.style,o),!(o=function(d,h){if(h[d])return h[d];if(400===d&&h[500])return h[500];if(500===d&&h[400])return h[400];var v=Cw(h,Ih,pk[d],d<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+d);return v}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+mk(s)+"'.");return o}(function zn(Ct,ye){if(null===Rn){var $r=(nr=Ct.getFontList(),on=[],Object.keys(nr).forEach(function(vn){nr[vn].forEach(function(Nn){var An=null;switch(Nn){case"bold":An={family:vn,weight:"bold"};break;case"italic":An={family:vn,style:"italic"};break;case"bolditalic":An={family:vn,weight:"bold",style:"italic"};break;case"":case"normal":An={family:vn}}null!==An&&(An.ref={name:vn,style:Nn},on.push(An))})}),on);Rn=function(nr){for(var on={},vn=0;vn<nr.length;++vn){var Nn=Aw(nr[vn]),An=Nn.family,cr=Nn.stretch,Vr=Nn.style,Xr=Nn.weight;on[An]=on[An]||{},on[An][cr]=on[An][cr]||{},on[An][cr][Vr]=on[An][cr][Vr]||{},on[An][cr][Vr][Xr]=Nn}return on}($r.concat(ye))}var nr,on;return Rn}(this.pdf,this.fontFaces),An.map(function(Mr){return{family:Mr,stretch:"normal",weight:nr,style:$r}}));this.pdf.setFont(cr.ref.name,cr.ref.style)}else{var Vr="";("bold"===nr||parseInt(nr,10)>=700||"bold"===$r)&&(Vr="bold"),"italic"===$r&&(Vr+="italic"),0===Vr.length&&(Vr="normal");for(var Xr="",si={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ci=0;Ci<An.length;Ci++){if(void 0!==this.pdf.internal.getFont(An[Ci],Vr,{noFallback:!0,disableWarning:!0})){Xr=An[Ci];break}if("bolditalic"===Vr&&void 0!==this.pdf.internal.getFont(An[Ci],"bold",{noFallback:!0,disableWarning:!0}))Xr=An[Ci],Vr="bold";else if(void 0!==this.pdf.internal.getFont(An[Ci],"normal",{noFallback:!0,disableWarning:!0})){Xr=An[Ci],Vr="normal";break}}if(""===Xr)for(var os=0;os<An.length;os++)if(si[An[os]]){Xr=si[An[os]];break}this.pdf.setFont(Xr=""===Xr?"Times":Xr,Vr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ct){this.ctx.globalCompositeOperation=Ct}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ct){this.ctx.globalAlpha=Ct}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ct){this.ctx.lineDashOffset=Ct,wn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ct){this.ctx.lineDash=Ct,wn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ct){this.ctx.ignoreClearRect=Boolean(Ct)}})};v.prototype.setLineDash=function($){this.lineDash=$},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){J.call(this,"fill",!1)},v.prototype.stroke=function(){J.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function($,he){if(isNaN($)||isNaN(he))throw vi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var me=this.ctx.transform.applyToPoint(new o($,he));this.path.push({type:"mt",x:me.x,y:me.y}),this.ctx.lastPoint=new o($,he)},v.prototype.closePath=function(){var $=new o(0,0),he=0;for(he=this.path.length-1;-1!==he;he--)if("begin"===this.path[he].type&&"object"===Ui(this.path[he+1])&&"number"==typeof this.path[he+1].x){$=new o(this.path[he+1].x,this.path[he+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o($.x,$.y)},v.prototype.lineTo=function($,he){if(isNaN($)||isNaN(he))throw vi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var me=this.ctx.transform.applyToPoint(new o($,he));this.path.push({type:"lt",x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},v.prototype.quadraticCurveTo=function($,he,me,Me){if(isNaN(me)||isNaN(Me)||isNaN($)||isNaN(he))throw vi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var je=this.ctx.transform.applyToPoint(new o(me,Me)),ot=this.ctx.transform.applyToPoint(new o($,he));this.path.push({type:"qct",x1:ot.x,y1:ot.y,x:je.x,y:je.y}),this.ctx.lastPoint=new o(je.x,je.y)},v.prototype.bezierCurveTo=function($,he,me,Me,je,ot){if(isNaN(je)||isNaN(ot)||isNaN($)||isNaN(he)||isNaN(me)||isNaN(Me))throw vi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var dt=this.ctx.transform.applyToPoint(new o(je,ot)),_t=this.ctx.transform.applyToPoint(new o($,he)),dn=this.ctx.transform.applyToPoint(new o(me,Me));this.path.push({type:"bct",x1:_t.x,y1:_t.y,x2:dn.x,y2:dn.y,x:dt.x,y:dt.y}),this.ctx.lastPoint=new o(dt.x,dt.y)},v.prototype.arc=function($,he,me,Me,je,ot){if(isNaN($)||isNaN(he)||isNaN(me)||isNaN(Me)||isNaN(je))throw vi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ot=Boolean(ot),!this.ctx.transform.isIdentity){var dt=this.ctx.transform.applyToPoint(new o($,he));$=dt.x,he=dt.y;var _t=this.ctx.transform.applyToPoint(new o(0,me)),dn=this.ctx.transform.applyToPoint(new o(0,0));me=Math.sqrt(Math.pow(_t.x-dn.x,2)+Math.pow(_t.y-dn.y,2))}Math.abs(je-Me)>=2*Math.PI&&(Me=0,je=2*Math.PI),this.path.push({type:"arc",x:$,y:he,radius:me,startAngle:Me,endAngle:je,counterclockwise:ot})},v.prototype.arcTo=function($,he,me,Me,je){throw new Error("arcTo not implemented.")},v.prototype.rect=function($,he,me,Me){if(isNaN($)||isNaN(he)||isNaN(me)||isNaN(Me))throw vi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($,he),this.lineTo($+me,he),this.lineTo($+me,he+Me),this.lineTo($,he+Me),this.lineTo($,he),this.lineTo($+me,he),this.lineTo($,he)},v.prototype.fillRect=function($,he,me,Me){if(isNaN($)||isNaN(he)||isNaN(me)||isNaN(Me))throw vi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!w.call(this)){var je={};"butt"!==this.lineCap&&(je.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(je.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($,he,me,Me),this.fill(),je.hasOwnProperty("lineCap")&&(this.lineCap=je.lineCap),je.hasOwnProperty("lineJoin")&&(this.lineJoin=je.lineJoin)}},v.prototype.strokeRect=function($,he,me,Me){if(isNaN($)||isNaN(he)||isNaN(me)||isNaN(Me))throw vi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect($,he,me,Me),this.stroke())},v.prototype.clearRect=function($,he,me,Me){if(isNaN($)||isNaN(he)||isNaN(me)||isNaN(Me))throw vi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($,he,me,Me))},v.prototype.save=function($){$="boolean"!=typeof $||$;for(var he=this.pdf.internal.getCurrentPageInfo().pageNumber,me=0;me<this.pdf.internal.getNumberOfPages();me++)this.pdf.setPage(me+1),this.pdf.internal.out("q");if(this.pdf.setPage(he),$){this.ctx.fontSize=this.pdf.internal.getFontSize();var Me=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Me}},v.prototype.restore=function($){$="boolean"!=typeof $||$;for(var he=this.pdf.internal.getCurrentPageInfo().pageNumber,me=0;me<this.pdf.internal.getNumberOfPages();me++)this.pdf.setPage(me+1),this.pdf.internal.out("Q");this.pdf.setPage(he),$&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function($){var he,me,Me,je;if(!0===$.isCanvasGradient&&($=$.getColor()),!$)return{r:0,g:0,b:0,a:0,style:$};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($))he=0,me=0,Me=0,je=0;else{var ot=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($);if(null!==ot)he=parseInt(ot[1]),me=parseInt(ot[2]),Me=parseInt(ot[3]),je=1;else if(null!==(ot=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($)))he=parseInt(ot[1]),me=parseInt(ot[2]),Me=parseInt(ot[3]),je=parseFloat(ot[4]);else{if(je=1,"string"==typeof $&&"#"!==$.charAt(0)){var dt=new bh($);$=dt.ok?dt.toHex():"#000000"}4===$.length?(he=$.substring(1,2),he+=he,me=$.substring(2,3),me+=me,Me=$.substring(3,4),Me+=Me):(he=$.substring(1,3),me=$.substring(3,5),Me=$.substring(5,7)),he=parseInt(he,16),me=parseInt(me,16),Me=parseInt(Me,16)}}return{r:he,g:me,b:Me,a:je,style:$}},w=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},D=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};v.prototype.fillText=function($,he,me,Me){if(isNaN(he)||isNaN(me)||"string"!=typeof $)throw vi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Me=isNaN(Me)?void 0:Me,!w.call(this)){var je=Ye(this.ctx.transform.rotation),ot=this.ctx.transform.scaleX;te.call(this,{text:$,x:he,y:me,scale:ot,angle:je,align:this.textAlign,maxWidth:Me})}},v.prototype.strokeText=function($,he,me,Me){if(isNaN(he)||isNaN(me)||"string"!=typeof $)throw vi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){Me=isNaN(Me)?void 0:Me;var je=Ye(this.ctx.transform.rotation),ot=this.ctx.transform.scaleX;te.call(this,{text:$,x:he,y:me,scale:ot,renderingMode:"stroke",angle:je,align:this.textAlign,maxWidth:Me})}},v.prototype.measureText=function($){if("string"!=typeof $)throw vi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var he=this.pdf,me=this.pdf.internal.scaleFactor,Me=he.internal.getFontSize(),je=he.getStringUnitWidth($)*Me/he.internal.scaleFactor,ot=function(dt){var _t=(dt=dt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _t}}),this};return new ot({width:je*=Math.round(96*me/72*1e4)/1e4})},v.prototype.scale=function($,he){if(isNaN($)||isNaN(he))throw vi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var me=new d($,0,0,he,0,0);this.ctx.transform=this.ctx.transform.multiply(me)},v.prototype.rotate=function($){if(isNaN($))throw vi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var he=new d(Math.cos($),Math.sin($),-Math.sin($),Math.cos($),0,0);this.ctx.transform=this.ctx.transform.multiply(he)},v.prototype.translate=function($,he){if(isNaN($)||isNaN(he))throw vi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var me=new d(1,0,0,1,$,he);this.ctx.transform=this.ctx.transform.multiply(me)},v.prototype.transform=function($,he,me,Me,je,ot){if(isNaN($)||isNaN(he)||isNaN(me)||isNaN(Me)||isNaN(je)||isNaN(ot))throw vi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var dt=new d($,he,me,Me,je,ot);this.ctx.transform=this.ctx.transform.multiply(dt)},v.prototype.setTransform=function($,he,me,Me,je,ot){$=isNaN($)?1:$,he=isNaN(he)?0:he,me=isNaN(me)?0:me,Me=isNaN(Me)?1:Me,je=isNaN(je)?0:je,ot=isNaN(ot)?0:ot,this.ctx.transform=new d($,he,me,Me,je,ot)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function($,he,me,Me,je,ot,dt,_t,dn){var cn=this.pdf.getImageProperties($),Rn=1,zn=1,Sr=1,Ct=1;void 0!==Me&&void 0!==_t&&(Sr=_t/Me,Ct=dn/je,Rn=cn.width/Me*_t/Me,zn=cn.height/je*dn/je),void 0===ot&&(ot=he,dt=me,he=0,me=0),void 0!==Me&&void 0===_t&&(_t=Me,dn=je),void 0===Me&&void 0===_t&&(_t=cn.width,dn=cn.height);for(var ye,$r=this.ctx.transform.decompose(),nr=Ye($r.rotate.shx),on=new d,vn=(on=(on=(on=on.multiply($r.translate)).multiply($r.skew)).multiply($r.scale)).applyToRectangle(new l(ot-he*Sr,dt-me*Ct,Me*Rn,je*zn)),Nn=L.call(this,vn),An=[],cr=0;cr<Nn.length;cr+=1)-1===An.indexOf(Nn[cr])&&An.push(Nn[cr]);if(K(An),this.autoPaging)for(var Vr=An[0],Xr=An[An.length-1],si=Vr;si<Xr+1;si++){this.pdf.setPage(si);var Ci=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],os=1===si?this.posY+this.margin[0]:this.margin[0],ui=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],kn=1===si?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(si-2)*ui;if(0!==this.ctx.clip_path.length){var La=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(ye,this.posX+this.margin[3],-kn+os+this.ctx.prevPageLastElemOffset),ie.call(this,"fill",!0),this.path=La}var ki=JSON.parse(JSON.stringify(vn));ki=U([ki],this.posX+this.margin[3],-kn+os+this.ctx.prevPageLastElemOffset)[0];var Eu=(si>Vr||si<Xr)&&P.call(this);Eu&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ci,ui,null).clip().discardPath()),this.pdf.addImage($,"JPEG",ki.x,ki.y,ki.w,ki.h,null,null,nr),Eu&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($,"JPEG",vn.x,vn.y,vn.w,vn.h,null,null,nr)};var L=function($,he,me){var Me=[];he=he||this.pdf.internal.pageSize.width,me=me||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var je=this.posY+this.ctx.prevPageLastElemOffset;switch($.type){default:case"mt":case"lt":Me.push(Math.floor(($.y+je)/me)+1);break;case"arc":Me.push(Math.floor(($.y+je-$.radius)/me)+1),Me.push(Math.floor(($.y+je+$.radius)/me)+1);break;case"qct":var ot=Tt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x,$.y);Me.push(Math.floor((ot.y+je)/me)+1),Me.push(Math.floor((ot.y+ot.h+je)/me)+1);break;case"bct":var dt=It(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x2,$.y2,$.x,$.y);Me.push(Math.floor((dt.y+je)/me)+1),Me.push(Math.floor((dt.y+dt.h+je)/me)+1);break;case"rect":Me.push(Math.floor(($.y+je)/me)+1),Me.push(Math.floor(($.y+$.h+je)/me)+1)}for(var _t=0;_t<Me.length;_t+=1)for(;this.pdf.internal.getNumberOfPages()<Me[_t];)F.call(this);return Me},F=function(){var $=this.fillStyle,he=this.strokeStyle,me=this.font,Me=this.lineCap,je=this.lineWidth,ot=this.lineJoin;this.pdf.addPage(),this.fillStyle=$,this.strokeStyle=he,this.font=me,this.lineCap=Me,this.lineWidth=je,this.lineJoin=ot},U=function($,he,me){for(var Me=0;Me<$.length;Me++)switch($[Me].type){case"bct":$[Me].x2+=he,$[Me].y2+=me;case"qct":$[Me].x1+=he,$[Me].y1+=me;default:$[Me].x+=he,$[Me].y+=me}return $},K=function($){return $.sort(function(he,me){return he-me})},J=function($,he){for(var me,Me,je=this.fillStyle,ot=this.strokeStyle,dt=this.lineCap,_t=this.lineWidth,dn=Math.abs(_t*this.ctx.transform.scaleX),cn=this.lineJoin,Rn=JSON.parse(JSON.stringify(this.path)),zn=JSON.parse(JSON.stringify(this.path)),Sr=[],Ct=0;Ct<zn.length;Ct++)if(void 0!==zn[Ct].x)for(var ye=L.call(this,zn[Ct]),$r=0;$r<ye.length;$r+=1)-1===Sr.indexOf(ye[$r])&&Sr.push(ye[$r]);for(var nr=0;nr<Sr.length;nr++)for(;this.pdf.internal.getNumberOfPages()<Sr[nr];)F.call(this);if(K(Sr),this.autoPaging)for(var on=Sr[0],vn=Sr[Sr.length-1],Nn=on;Nn<vn+1;Nn++){this.pdf.setPage(Nn),this.fillStyle=je,this.strokeStyle=ot,this.lineCap=dt,this.lineWidth=dn,this.lineJoin=cn;var An=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],cr=1===Nn?this.posY+this.margin[0]:this.margin[0],Xr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],si=1===Nn?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Nn-2)*Xr;if(0!==this.ctx.clip_path.length){var Ci=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(me,this.posX+this.margin[3],-si+cr+this.ctx.prevPageLastElemOffset),ie.call(this,$,!0),this.path=Ci}if(Me=JSON.parse(JSON.stringify(Rn)),this.path=U(Me,this.posX+this.margin[3],-si+cr+this.ctx.prevPageLastElemOffset),!1===he||0===Nn){var os=(Nn>on||Nn<vn)&&P.call(this);os&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],An,Xr,null).clip().discardPath()),ie.call(this,$,he),os&&this.pdf.restoreGraphicsState()}this.lineWidth=_t}else this.lineWidth=dn,ie.call(this,$,he),this.lineWidth=_t;this.path=Rn},ie=function($,he){if(("stroke"!==$||he||!D.call(this))&&("stroke"===$||he||!w.call(this))){for(var me,Me,je=[],ot=this.path,dt=0;dt<ot.length;dt++){var _t=ot[dt];switch(_t.type){case"begin":je.push({begin:!0});break;case"close":je.push({close:!0});break;case"mt":je.push({start:_t,deltas:[],abs:[]});break;case"lt":var dn=je.length;if(ot[dt-1]&&!isNaN(ot[dt-1].x)&&(me=[_t.x-ot[dt-1].x,_t.y-ot[dt-1].y],dn>0))for(;dn>=0;dn--)if(!0!==je[dn-1].close&&!0!==je[dn-1].begin){je[dn-1].deltas.push(me),je[dn-1].abs.push(_t);break}break;case"bct":je[je.length-1].deltas.push(me=[_t.x1-ot[dt-1].x,_t.y1-ot[dt-1].y,_t.x2-ot[dt-1].x,_t.y2-ot[dt-1].y,_t.x-ot[dt-1].x,_t.y-ot[dt-1].y]);break;case"qct":je[je.length-1].deltas.push(me=[ot[dt-1].x+2/3*(_t.x1-ot[dt-1].x)-ot[dt-1].x,ot[dt-1].y+2/3*(_t.y1-ot[dt-1].y)-ot[dt-1].y,_t.x+2/3*(_t.x1-_t.x)-ot[dt-1].x,_t.y+2/3*(_t.y1-_t.y)-ot[dt-1].y,_t.x-ot[dt-1].x,_t.y-ot[dt-1].y]);break;case"arc":je.push({deltas:[],abs:[],arc:!0}),Array.isArray(je[je.length-1].abs)&&je[je.length-1].abs.push(_t)}}Me=he?null:"stroke"===$?"stroke":"fill";for(var $r=!1,nr=0;nr<je.length;nr++)if(je[nr].arc)for(var on=je[nr].abs,vn=0;vn<on.length;vn++){var Nn=on[vn];"arc"===Nn.type?oe.call(this,Nn.x,Nn.y,Nn.radius,Nn.startAngle,Nn.endAngle,Nn.counterclockwise,void 0,he,!$r):xe.call(this,Nn.x,Nn.y),$r=!0}else!0===je[nr].close?(this.pdf.internal.out("h"),$r=!1):!0!==je[nr].begin&&(ve.call(this,je[nr].deltas,je[nr].start.x,je[nr].start.y),$r=!0);Me&&Be.call(this,Me),he&&tt.call(this)}},_e=function($){var he=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,me=he*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $-me;case"top":return $+he-me;case"hanging":return $+he-2*me;case"middle":return $+he/2-me;default:return $}},fe=function($){return $+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var $=function(){};return $.colorStops=[],$.addColorStop=function(he,me){this.colorStops.push([he,me])},$.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},$.isCanvasGradient=!0,$},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var oe=function($,he,me,Me,je,ot,dt,_t,dn){for(var cn=Ze.call(this,me,Me,je,ot),Rn=0;Rn<cn.length;Rn++){var zn=cn[Rn];0===Rn&&(dn?ne.call(this,zn.x1+$,zn.y1+he):xe.call(this,zn.x1+$,zn.y1+he)),Ve.call(this,$,he,zn.x2,zn.y2,zn.x3,zn.y3,zn.x4,zn.y4)}_t?tt.call(this):Be.call(this,dt)},Be=function($){switch($){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},tt=function(){this.pdf.clip(),this.pdf.discardPath()},ne=function($,he){this.pdf.internal.out(t($)+" "+r(he)+" m")},te=function($){var he;switch($.align){case"right":case"end":he="right";break;case"center":he="center";break;default:he="left"}var me=this.pdf.getTextDimensions($.text),Me=_e.call(this,$.y),je=fe.call(this,Me)-me.h,ot=this.ctx.transform.applyToPoint(new o($.x,Me)),dt=this.ctx.transform.decompose(),_t=new d;_t=(_t=(_t=_t.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale);for(var dn,cn,Rn,zn=this.ctx.transform.applyToRectangle(new l($.x,Me,me.w,me.h)),Sr=_t.applyToRectangle(new l($.x,je,me.w,me.h)),Ct=L.call(this,Sr),ye=[],$r=0;$r<Ct.length;$r+=1)-1===ye.indexOf(Ct[$r])&&ye.push(Ct[$r]);if(K(ye),this.autoPaging)for(var nr=ye[0],on=ye[ye.length-1],vn=nr;vn<on+1;vn++){this.pdf.setPage(vn);var Nn=1===vn?this.posY+this.margin[0]:this.margin[0],cr=this.pdf.internal.pageSize.height-this.margin[2],Vr=cr-this.margin[0],Xr=this.pdf.internal.pageSize.width-this.margin[1],si=Xr-this.margin[3],Ci=1===vn?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(vn-2)*Vr;if(0!==this.ctx.clip_path.length){var os=this.path;dn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(dn,this.posX+this.margin[3],-1*Ci+Nn),ie.call(this,"fill",!0),this.path=os}var Mr=U([JSON.parse(JSON.stringify(Sr))],this.posX+this.margin[3],-Ci+Nn+this.ctx.prevPageLastElemOffset)[0];$.scale>=.01&&(cn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(cn*$.scale),this.lineWidth=(Rn=this.lineWidth)*$.scale);var ui="text"!==this.autoPaging;if(ui||Mr.y+Mr.h<=cr){if(ui||Mr.y>=Nn&&Mr.x<=Xr){var kn=ui?$.text:this.pdf.splitTextToSize($.text,$.maxWidth||Xr-Mr.x)[0],La=U([JSON.parse(JSON.stringify(zn))],this.posX+this.margin[3],-Ci+Nn+this.ctx.prevPageLastElemOffset)[0],ki=ui&&(vn>nr||vn<on)&&P.call(this);ki&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],si,Vr,null).clip().discardPath()),this.pdf.text(kn,La.x,La.y,{angle:$.angle,align:he,renderingMode:$.renderingMode}),ki&&this.pdf.restoreGraphicsState()}}else Mr.y<cr&&(this.ctx.prevPageLastElemOffset+=cr-Mr.y);$.scale>=.01&&(this.pdf.setFontSize(cn),this.lineWidth=Rn)}else $.scale>=.01&&(cn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(cn*$.scale),this.lineWidth=(Rn=this.lineWidth)*$.scale),this.pdf.text($.text,ot.x+this.posX,ot.y+this.posY,{angle:$.angle,align:he,renderingMode:$.renderingMode,maxWidth:$.maxWidth}),$.scale>=.01&&(this.pdf.setFontSize(cn),this.lineWidth=Rn)},xe=function($,he,me,Me){Me=Me||0,this.pdf.internal.out(t($+(me=me||0))+" "+r(he+Me)+" l")},ve=function($,he,me){return this.pdf.lines($,he,me,null,null)},Ve=function($,he,me,Me,je,ot,dt,_t){this.pdf.internal.out([e(i(me+$)),e(s(Me+he)),e(i(je+$)),e(s(ot+he)),e(i(dt+$)),e(s(_t+he)),"c"].join(" "))},Ze=function($,he,me,Me){for(var je=2*Math.PI,ot=Math.PI/2;he>me;)he-=je;var dt=Math.abs(me-he);dt<je&&Me&&(dt=je-dt);for(var _t=[],dn=Me?-1:1,cn=he;dt>1e-5;){var Rn=cn+dn*Math.min(dt,ot);_t.push(ut.call(this,$,cn,Rn)),dt-=Math.abs(Rn-cn),cn=Rn}return _t},ut=function($,he,me){var Me=(me-he)/2,je=$*Math.cos(Me),ot=$*Math.sin(Me),dt=je,_t=-ot,dn=dt*dt+_t*_t,cn=dn+dt*je+_t*ot,Rn=4/3*(Math.sqrt(2*dn*cn)-cn)/(dt*ot-_t*je),zn=dt-Rn*_t,Sr=_t+Rn*dt,Ct=zn,ye=-Sr,$r=Me+he,nr=Math.cos($r),on=Math.sin($r);return{x1:$*Math.cos(he),y1:$*Math.sin(he),x2:zn*nr-Sr*on,y2:zn*on+Sr*nr,x3:Ct*nr-ye*on,y3:Ct*on+ye*nr,x4:$*Math.cos(me),y4:$*Math.sin(me)}},Ye=function($){return 180*$/Math.PI},Tt=function($,he,me,Me,je,ot){var dt=$+.5*(me-$),_t=he+.5*(Me-he),dn=je+.5*(me-je),cn=ot+.5*(Me-ot),Rn=Math.min($,je,dt,dn),zn=Math.max($,je,dt,dn),Sr=Math.min(he,ot,_t,cn),Ct=Math.max(he,ot,_t,cn);return new l(Rn,Sr,zn-Rn,Ct-Sr)},It=function($,he,me,Me,je,ot,dt,_t){var dn,cn,Rn,zn,Sr,Ct,ye,$r,nr,on,vn,Nn,An,cr,Vr=me-$,Xr=Me-he,si=je-me,Ci=ot-Me,os=dt-je,Mr=_t-ot;for(cn=0;cn<41;cn++)nr=(ye=(Rn=$+(dn=cn/40)*Vr)+dn*((Sr=me+dn*si)-Rn))+dn*(Sr+dn*(je+dn*os-Sr)-ye),on=($r=(zn=he+dn*Xr)+dn*((Ct=Me+dn*Ci)-zn))+dn*(Ct+dn*(ot+dn*Mr-Ct)-$r),0==cn?(vn=nr,Nn=on,An=nr,cr=on):(vn=Math.min(vn,nr),Nn=Math.min(Nn,on),An=Math.max(An,nr),cr=Math.max(cr,on));return new l(Math.round(vn),Math.round(Nn),Math.round(An-vn),Math.round(cr-Nn))},wn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var me=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==me&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=me)}}})(gr.API),function(n){var e=function(s){var o,l,d,h,g,v,E,w,D,P;for(/[^\x00-\xFF]/.test(s),l=[],d=0,h=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;h>d;d+=4)0!==(g=(s.charCodeAt(d)<<24)+(s.charCodeAt(d+1)<<16)+(s.charCodeAt(d+2)<<8)+s.charCodeAt(d+3))?(v=(g=((g=((g=((g=(g-(P=g%85))/85)-(D=g%85))/85)-(w=g%85))/85)-(E=g%85))/85)%85,l.push(v+33,E+33,w+33,D+33,P+33)):l.push(122);return function(L,F){for(var U=F;U>0;U--)L.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},t=function(s){var o,l,d,h,g,v=String,E="length",w=255,D="charCodeAt",P="slice",L="replace";for(s[P](-2),s=s[P](0,-2)[L](/\s/g,"")[L]("z","!!!!!"),d=[],h=0,g=(s+=o="uuuuu"[P](s[E]%5||5))[E];g>h;h+=5)l=52200625*(s[D](h)-33)+614125*(s[D](h+1)-33)+7225*(s[D](h+2)-33)+85*(s[D](h+3)-33)+(s[D](h+4)-33),d.push(w&l>>24,w&l>>16,w&l>>8,w&l);return function(F,U){for(var K=U;K>0;K--)F.pop()}(d,o[E]),v.fromCharCode.apply(v,d)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(s=s.replace(/\s/g,"")).indexOf(">")&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),!1===o.test(s))return"";for(var l="",d=0;d<s.length;d+=2)l+=String.fromCharCode("0x"+(s[d]+s[d+1]));return l},i=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=Wm(o)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};n.processDataByFilters=function(s,o){var l=0,d=s||"",h=[];for("string"==typeof(o=o||[])&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=r(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}}(gr.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=!1!==s,o="function"==typeof o?o:function(){};var l=void 0;try{l=function(d,h,g){var v=new XMLHttpRequest,E=0,w=function(D){var P=D.length,L=[],F=String.fromCharCode;for(E=0;E<P;E+=1)L.push(F(255&D.charCodeAt(E)));return L.join("")};if(v.open("GET",d,!h),v.overrideMimeType("text/plain; charset=x-user-defined"),!1===h&&(v.onload=function(){g(200===v.status?w(this.responseText):void 0)}),v.send(null),h&&200===v.status)return w(v.responseText)}(i,s,o)}catch{}return l}(e,t,r)},n.loadImageFile=n.loadFile}(gr.API),function(n){function e(){return(pr.html2canvas?Promise.resolve(pr.html2canvas):Q.e(159).then(Q.t.bind(Q,4159,23))).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(pr.DOMPurify?Promise.resolve(pr.DOMPurify):Q.e(735).then(Q.t.bind(Q,2735,23))).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=Ui(o);return"undefined"===l?"undefined":"string"===l||o instanceof String?"string":"number"===l||o instanceof Number?"number":"function"===l||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&1===o.nodeType?"element":"object"===l?"object":"unknown"},i=function(o,l){var d=document.createElement(o);for(var h in l.className&&(d.className=l.className),l.innerHTML&&l.dompurify&&(d.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)d.style[h]=l.style[h];return d},s=function o(l){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),d);return(h=h.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(d){switch(r(d)){case"string":return"string";case"element":return"canvas"===d.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function d(h,g){for(var v=3===h.nodeType?document.createTextNode(h.nodeValue):h.cloneNode(!1),E=h.firstChild;E;E=E.nextSibling)!0!==g&&1===E.nodeType&&"SCRIPT"===E.nodeName||v.appendChild(d(E,g));return 1===h.nodeType&&("CANVAS"===h.nodeName?(v.width=h.width,v.height=h.height,v.getContext("2d").drawImage(h,0,0)):"TEXTAREA"!==h.nodeName&&"SELECT"!==h.nodeName||(v.value=h.value),v.addEventListener("load",function(){v.scrollTop=h.scrollTop,v.scrollLeft=h.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===l.tagName&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(l){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,l(this.prop.container,d)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(l){var d=this.opt.jsPDF,h=this.opt.fontFaces,g="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,d.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var E=0;E<h.length;++E){var w=h[E],D=w.src.find(function(P){return"truetype"===P.format});D&&d.addFont(D.url,w.ref.name,w.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=0==v.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,d.context2d.save(!0),l(this.prop.container,v)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,d){return"img"===(d=d||"pdf").toLowerCase()||"image"===d.toLowerCase()?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if("object"!==r(o))return this;var l=Object.keys(o||{}).map(function(d){if(d in s.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var d=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(d):d})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(2===o.length&&(o=[o[0],o[1],o[0],o[1]]),4===o.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(o=o||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,d,h){return null!=o&&(this.progress.val=o),null!=l&&(this.progress.state=l),null!=d&&(this.progress.n=d),null!=h&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,d,h){return this.setProgress(o?this.progress.val+o:null,l||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(o,l){var d=this;return this.thenCore(o,l,function(h,g){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return d.updateProgress(null,h),v}).then(h,g).then(function(v){return d.updateProgress(1),v})})},s.prototype.thenCore=function(o,l,d){d=d||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var h=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),g=d.call(h,o,l);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(d){l=l.thenCore(d)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gr.getPageSize=function(o,l,d){if("object"===Ui(o)){var h=o;o=h.orientation,l=h.unit||l,d=h.format||d}l=l||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var g,v=(""+d).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var w,D=0,P=0;if(E.hasOwnProperty(v))D=E[v][1]/g,P=E[v][0]/g;else try{D=d[1],P=d[0]}catch{throw new Error("Invalid format: "+d)}if("p"===o||"portrait"===o)o="p",P>D&&(w=P,P=D,D=w);else{if("l"!==o&&"landscape"!==o)throw"Invalid orientation: "+o;o="l",D>P&&(w=P,P=D,D=w)}return{width:P,height:D,unit:l,k:g,orientation:o}},n.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Aw):null;var d=new s(l);return l.worker?d:d.from(o).doCallback()}}(gr.API),gr.API.addJS=function(n){return _c=n,this.internal.events.subscribe("postPutResources",function(){$0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Qc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_c+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==$0&&void 0!==Qc&&this.internal.out("/Names <</JavaScript "+$0+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=r.exec(o);null!=l&&t.internal.newObjectDeferredBegin(l[1],!1),t.internal.write(o)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,g=[];for(s=0;s<h;s++){var v=t.internal.newObject();g.push(v);var E=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var w=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+w+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return null==r&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var d=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},t.outline.line=function(r){this.ctx.val+=r+"\r\n"},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+="\r\n"+r.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(gr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,l){var d,h=this.decode.DCT_DECODE,g=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=o||t)?new Uint8Array(t):t,(d=function(v){for(var E,w=256*v.charCodeAt(4)+v.charCodeAt(5),D=v.length,P={width:0,height:0,numcomponents:1},L=4;L<D;L+=2){if(-1!==e.indexOf(v.charCodeAt((L+=w)+1))){E=256*v.charCodeAt(L+5)+v.charCodeAt(L+6),P={width:256*v.charCodeAt(L+7)+v.charCodeAt(L+8),height:E,numcomponents:v.charCodeAt(L+9)};break}w=256*v.charCodeAt(L+2)+v.charCodeAt(L+3)}return P}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}g={data:t,width:d.width,height:d.height,colorSpace:l,bitsPerComponent:8,filter:h,index:r,alias:i}}return g}}(gr.API);var Eh,Qm,lA,uA,dA,yk=function(){var n,e,t;function r(s){var o,d,h,g,v,E,w,D,P,L,F,U,K;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(o=this.readUInt32(),D=function(){var J,ie;for(ie=[],J=0;J<4;++J)ie.push(String.fromCharCode(this.data[this.pos++]));return ie}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),h=this.readUInt16()||100,v.delay=1e3*g/h,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for("fdAT"===D&&(this.pos+=4,o-=4),s=v?.data||this.imgData,F=0;0<=o?F<o:F>o;0<=o?++F:--F)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((P=d-this.transparency.indexed.length)>0)for(U=0;0<=P?U<P:U>P;0<=P?++U:--U)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":E=(L=this.read(o)).indexOf(0),w=String.fromCharCode.apply(String,L.slice(0,E)),this.text[w]=String.fromCharCode.apply(String,L.slice(E+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(K=this.colorType)||6===K,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),d=0,h=this;if(null==s&&(s=this.imgData),0===s.length)return new Uint8Array(0);function g(v,E,w,D){var P,L,F,U,K,J,ie,_e,oe,Be,tt,ne,te,xe,ve,Ve,Ze,ut,Ye,Tt,It=Math.ceil((h.width-v)/w),wn=Math.ceil((h.height-E)/D),$=h.width==It&&h.height==wn;for(te=o*It,tt=$?l:new Uint8Array(te*wn),J=s.length,ne=0,L=0;ne<wn&&d<J;){switch(s[d++]){case 0:for(U=Ve=0;Ve<te;U=Ve+=1)tt[L++]=s[d++];break;case 1:for(U=Ze=0;Ze<te;U=Ze+=1)P=s[d++],K=U<o?0:tt[L-o],tt[L++]=(P+K)%256;break;case 2:for(U=ut=0;ut<te;U=ut+=1)P=s[d++],F=(U-U%o)/o,tt[L++]=((xe=ne&&tt[(ne-1)*te+F*o+U%o])+P)%256;break;case 3:for(U=Ye=0;Ye<te;U=Ye+=1)P=s[d++],F=(U-U%o)/o,K=U<o?0:tt[L-o],xe=ne&&tt[(ne-1)*te+F*o+U%o],tt[L++]=(P+Math.floor((K+xe)/2))%256;break;case 4:for(U=Tt=0;Tt<te;U=Tt+=1)P=s[d++],F=(U-U%o)/o,0===ne?xe=ve=0:(xe=tt[(ne-1)*te+F*o+U%o],ve=F&&tt[(ne-1)*te+(F-1)*o+U%o]),ie=(K=U<o?0:tt[L-o])+xe-ve,_e=Math.abs(ie-K),oe=Math.abs(ie-xe),Be=Math.abs(ie-ve),tt[L++]=(P+(_e<=oe&&_e<=Be?K:oe<=Be?xe:ve))%256;break;default:throw new Error("Invalid filter algorithm: "+s[d-1])}if(!$){var he=((E+ne*D)*h.width+v)*o,me=ne*te;for(U=0;U<It;U+=1){for(var Me=0;Me<o;Me+=1)l[he++]=tt[me++];he+=(w-1)*o}}ne++}}return s=L0(s),1==h.interlaceMethod?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),l},r.prototype.decodePalette=function(){var s,o,l,d,h,g,v,E,w;for(l=this.palette,g=this.transparency.indexed||[],h=new Uint8Array((g.length||0)+l.length),d=0,s=0,o=v=0,E=l.length;v<E;o=v+=3)h[d++]=l[o],h[d++]=l[o+1],h[d++]=l[o+2],h[d++]=null!=(w=g[s++])?w:255;return h},r.prototype.copyToImageData=function(s,o){var l,d,h,g,v,E,w,D,P,L,F;if(d=this.colors,P=null,l=this.hasAlphaChannel,this.palette.length&&(P=null!=(F=this._decodedPalette)?F:this._decodedPalette=this.decodePalette(),d=4,l=!0),D=(h=s.data||s).length,v=P||o,g=E=0,1===d)for(;g<D;)w=P?4*o[g/4]:E,L=v[w++],h[g++]=L,h[g++]=L,h[g++]=L,h[g++]=l?v[w++]:255,E=w;else for(;g<D;)w=P?4*o[g/4]:E,h[g++]=v[w++],h[g++]=v[w++],h[g++]=v[w++],h[g++]=l?v[w++]:255,E=w},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if("[object Window]"===Object.prototype.toString.call(pr)){try{e=pr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(!0===i())return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,l,d,h,g,v,E,w;if(this.animation){for(w=[],l=g=0,v=(E=this.animation.frames).length;g<v;l=++g)d=s.createImageData((o=E[l]).width,o.height),h=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(d,h),o.imageData=d,w.push(o.image=n(d));return w}},r.prototype.renderFrame=function(s,o){var l,d,h;return l=(d=this.animation.frames)[o],h=d[o-1],0===o&&s.clearRect(0,0,this.width,this.height),1===h?.disposeOp?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):2===h?.disposeOp&&s.putImageData(h.imageData,h.xOffset,h.yOffset),0===l.blendOp&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var o,l,d,h,g,v,E=this;return l=0,h=(v=this.animation).numFrames,d=v.frames,g=v.numPlays,(o=function(){var w,D;if(w=l++%h,D=d[w],E.renderFrame(s,w),h>1&&l/h<g)return E.animation._timeout=setTimeout(o,D.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout(null!=(s=this.animation)?s._timeout:void 0)},r.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},r}();function Mw(n){var e=0;if(71!==n[e++]||73!==n[e++]||70!==n[e++]||56!==n[e++]||56!=(n[e++]+1&253)||97!==n[e++])throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=1<<1+(7&i);e++,e++;var l=null,d=null;i>>7&&(l=e,d=o,e+=3*o);var h=!0,g=[],v=0,E=null,w=0,D=null;for(this.width=t,this.height=r;h&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(11!==n[e]||78==n[e+1]&&69==n[e+2]&&84==n[e+3]&&83==n[e+4]&&67==n[e+5]&&65==n[e+6]&&80==n[e+7]&&69==n[e+8]&&50==n[e+9]&&46==n[e+10]&&48==n[e+11]&&3==n[e+12]&&1==n[e+13]&&0==n[e+16])e+=14,D=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((ne=n[e++])>=0))throw Error("Invalid block size");if(0===ne)break;e+=ne}break;case 249:if(4!==n[e++]||0!==n[e+4])throw new Error("Invalid graphics extension block.");var P=n[e++];v=n[e++]|n[e++]<<8,E=n[e++],0==(1&P)&&(E=null),w=P>>2&7,e++;break;case 254:for(;;){if(!((ne=n[e++])>=0))throw Error("Invalid block size");if(0===ne)break;e+=ne}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var L=n[e++]|n[e++]<<8,F=n[e++]|n[e++]<<8,U=n[e++]|n[e++]<<8,K=n[e++]|n[e++]<<8,J=n[e++],ie=J>>6&1,_e=1<<1+(7&J),fe=l,oe=d,Be=!1;J>>7&&(Be=!0,fe=e,oe=_e,e+=3*_e);var tt=e;for(e++;;){var ne;if(!((ne=n[e++])>=0))throw Error("Invalid block size");if(0===ne)break;e+=ne}g.push({x:L,y:F,width:U,height:K,has_local_palette:Be,palette_offset:fe,palette_size:oe,data_offset:tt,data_length:e-tt,transparent_index:E,interlaced:!!ie,delay:v,disposal:w});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return D},this.frameInfo=function(te){if(te<0||te>=g.length)throw new Error("Frame index out of range.");return g[te]},this.decodeAndBlitFrameBGRA=function(te,xe){var ve=this.frameInfo(te),Ve=ve.width*ve.height,Ze=new Uint8Array(Ve);wp(n,ve.data_offset,Ze,Ve);var ut=ve.palette_offset,Ye=ve.transparent_index;null===Ye&&(Ye=256);var Tt=ve.width,It=t-Tt,wn=Tt,$=4*(ve.y*t+ve.x),he=4*((ve.y+ve.height)*t+ve.x),me=$,Me=4*It;!0===ve.interlaced&&(Me+=4*t*7);for(var je=8,ot=0,dt=Ze.length;ot<dt;++ot){var _t=Ze[ot];if(0===wn&&(wn=Tt,(me+=Me)>=he&&(Me=4*It+4*t*(je-1),me=$+(Tt+It)*(je<<1),je>>=1)),_t===Ye)me+=4;else{var dn=n[ut+3*_t],cn=n[ut+3*_t+1];xe[me++]=n[ut+3*_t+2],xe[me++]=cn,xe[me++]=dn,xe[me++]=255}--wn}},this.decodeAndBlitFrameRGBA=function(te,xe){var ve=this.frameInfo(te),Ve=ve.width*ve.height,Ze=new Uint8Array(Ve);wp(n,ve.data_offset,Ze,Ve);var ut=ve.palette_offset,Ye=ve.transparent_index;null===Ye&&(Ye=256);var Tt=ve.width,It=t-Tt,wn=Tt,$=4*(ve.y*t+ve.x),he=4*((ve.y+ve.height)*t+ve.x),me=$,Me=4*It;!0===ve.interlaced&&(Me+=4*t*7);for(var je=8,ot=0,dt=Ze.length;ot<dt;++ot){var _t=Ze[ot];if(0===wn&&(wn=Tt,(me+=Me)>=he&&(Me=4*It+4*t*(je-1),me=$+(Tt+It)*(je<<1),je>>=1)),_t===Ye)me+=4;else{var cn=n[ut+3*_t+1],Rn=n[ut+3*_t+2];xe[me++]=n[ut+3*_t],xe[me++]=cn,xe[me++]=Rn,xe[me++]=255}--wn}}}function wp(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,l=o+1,d=i+1,h=(1<<d)-1,g=0,v=0,E=0,w=n[e++],D=new Int32Array(4096),P=null;;){for(;g<16&&0!==w;)v|=n[e++]<<g,g+=8,1===w?w=n[e++]:--w;if(g<d)break;var L=v&h;if(v>>=d,g-=d,L!==s){if(L===o)break;for(var F=L<l?L:P,U=0,K=F;K>s;)K=D[K]>>8,++U;var J=K;if(E+U+(F!==L?1:0)>r)return void vi.log("Warning, gif stream longer than expected.");t[E++]=J;var ie=E+=U;for(F!==L&&(t[E++]=J),K=F;U--;)t[--ie]=255&(K=D[K]),K>>=8;null!==P&&l<4096&&(D[l++]=P<<8|J,l>=h+1&&d<12&&(++d,h=h<<1|1)),P=L}else l=o+1,h=(1<<(d=i+1))-1,P=null}return E!==r&&vi.log("Warning, gif stream shorter than expected."),t}function Nw(n){var e,t,r,i,s,o=Math.floor,l=new Array(64),d=new Array(64),h=new Array(64),g=new Array(64),v=new Array(65535),E=new Array(65535),w=new Array(64),D=new Array(64),P=[],L=0,F=7,U=new Array(64),K=new Array(64),J=new Array(64),ie=new Array(256),_e=new Array(2048),fe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],oe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Be=[0,1,2,3,4,5,6,7,8,9,10,11],tt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ne=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],te=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],xe=[0,1,2,3,4,5,6,7,8,9,10,11],ve=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ze($,he){for(var me=0,Me=0,je=new Array,ot=1;ot<=16;ot++){for(var dt=1;dt<=$[ot];dt++)je[he[Me]]=[],je[he[Me]][0]=me,je[he[Me]][1]=ot,Me++,me++;me*=2}return je}function ut($){for(var he=$[0],me=$[1]-1;me>=0;)he&1<<me&&(L|=1<<F),me--,--F<0&&(255==L?(Ye(255),Ye(0)):Ye(L),F=7,L=0)}function Ye($){P.push($)}function Tt($){Ye($>>8&255),Ye(255&$)}function It($,he,me,Me,je){for(var ot,dt=je[0],_t=je[240],dn=function(on,vn){var Nn,An,cr,Vr,Xr,si,Ci,os,Mr,ui,kn=0;for(Mr=0;Mr<8;++Mr){var La=(Nn=on[kn])+(os=on[kn+7]),ki=Nn-os,Eu=(An=on[kn+1])+(Ci=on[kn+6]),fs=An-Ci,Vs=(cr=on[kn+2])+(si=on[kn+5]),Rd=cr-si,qi=(Vr=on[kn+3])+(Xr=on[kn+4]),gy=Vr-Xr,ro=La+qi,xu=La-qi,sf=Eu+Vs,io=Eu-Vs;on[kn]=ro+sf,on[kn+4]=ro-sf;var zr=.707106781*(io+xu);on[kn+2]=xu+zr,on[kn+6]=xu-zr;var Gi=.382683433*((ro=gy+Rd)-(io=fs+ki)),my=.5411961*ro+Gi,xa=1.306562965*io+Gi,Od=.707106781*(sf=Rd+fs),Ld=ki+Od,Er=ki-Od;on[kn+5]=Er+my,on[kn+3]=Er-my,on[kn+1]=Ld+xa,on[kn+7]=Ld-xa,kn+=8}for(kn=0,Mr=0;Mr<8;++Mr){var Su=(Nn=on[kn])+(os=on[kn+56]),Fd=Nn-os,Nc=(An=on[kn+8])+(Ci=on[kn+48]),zo=An-Ci,wo=(cr=on[kn+16])+(si=on[kn+40]),hl=cr-si,Tb=(Vr=on[kn+24])+(Xr=on[kn+32]),af=Vr-Xr,Au=Su+Tb,Cu=Su-Tb,Tu=Nc+wo,Bd=Nc-wo;on[kn]=Au+Tu,on[kn+32]=Au-Tu;var Bl=.707106781*(Bd+Cu);on[kn+16]=Cu+Bl,on[kn+48]=Cu-Bl;var Ud=.382683433*((Au=af+hl)-(Bd=zo+Fd)),_y=.5411961*Au+Ud,Db=1.306562965*Bd+Ud,Mb=.707106781*(Tu=hl+zo),Nb=Fd+Mb,kb=Fd-Mb;on[kn+40]=kb+_y,on[kn+24]=kb-_y,on[kn+8]=Nb+Db,on[kn+56]=Nb-Db,kn++}for(Mr=0;Mr<64;++Mr)w[Mr]=(ui=on[Mr]*vn[Mr])>0?ui+.5|0:ui-.5|0;return w}($,he),cn=0;cn<64;++cn)D[fe[cn]]=dn[cn];var Rn=D[0]-me;me=D[0],0==Rn?ut(Me[0]):(ut(Me[E[ot=32767+Rn]]),ut(v[ot]));for(var zn=63;zn>0&&0==D[zn];)zn--;if(0==zn)return ut(dt),me;for(var Sr,Ct=1;Ct<=zn;){for(var ye=Ct;0==D[Ct]&&Ct<=zn;)++Ct;var $r=Ct-ye;if($r>=16){Sr=$r>>4;for(var nr=1;nr<=Sr;++nr)ut(_t);$r&=15}ut(je[($r<<4)+E[ot=32767+D[Ct]]]),ut(v[ot]),Ct++}return 63!=zn&&ut(dt),me}function wn($){$=Math.min(Math.max($,1),100),s!=$&&(function(he){for(var me=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Me=0;Me<64;Me++){var je=o((me[Me]*he+50)/100);je=Math.min(Math.max(je,1),255),l[fe[Me]]=je}for(var ot=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],dt=0;dt<64;dt++){var _t=o((ot[dt]*he+50)/100);_t=Math.min(Math.max(_t,1),255),d[fe[dt]]=_t}for(var dn=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],cn=0,Rn=0;Rn<8;Rn++)for(var zn=0;zn<8;zn++)h[cn]=1/(l[fe[cn]]*dn[Rn]*dn[zn]*8),g[cn]=1/(d[fe[cn]]*dn[Rn]*dn[zn]*8),cn++}($<50?Math.floor(5e3/$):Math.floor(200-2*$)),s=$)}this.encode=function($,he){var An,cr;he&&wn(he),P=new Array,L=0,F=7,Tt(65496),Tt(65504),Tt(16),Ye(74),Ye(70),Ye(73),Ye(70),Ye(0),Ye(1),Ye(1),Ye(0),Tt(1),Tt(1),Ye(0),Ye(0),function(){Tt(65499),Tt(132),Ye(0);for(var An=0;An<64;An++)Ye(l[An]);Ye(1);for(var cr=0;cr<64;cr++)Ye(d[cr])}(),An=$.width,cr=$.height,Tt(65472),Tt(17),Ye(8),Tt(cr),Tt(An),Ye(3),Ye(1),Ye(17),Ye(0),Ye(2),Ye(17),Ye(1),Ye(3),Ye(17),Ye(1),function(){Tt(65476),Tt(418),Ye(0);for(var An=0;An<16;An++)Ye(oe[An+1]);for(var cr=0;cr<=11;cr++)Ye(Be[cr]);Ye(16);for(var Vr=0;Vr<16;Vr++)Ye(tt[Vr+1]);for(var Xr=0;Xr<=161;Xr++)Ye(ne[Xr]);Ye(1);for(var si=0;si<16;si++)Ye(te[si+1]);for(var Ci=0;Ci<=11;Ci++)Ye(xe[Ci]);Ye(17);for(var os=0;os<16;os++)Ye(ve[os+1]);for(var Mr=0;Mr<=161;Mr++)Ye(Ve[Mr])}(),Tt(65498),Tt(12),Ye(3),Ye(1),Ye(0),Ye(2),Ye(17),Ye(3),Ye(17),Ye(0),Ye(63),Ye(0);var me=0,Me=0,je=0;L=0,F=7,this.encode.displayName="_encode_";for(var ot,dt,_t,dn,cn,Rn,zn,Sr,Ct,ye=$.data,nr=$.height,on=4*$.width,vn=0;vn<nr;){for(ot=0;ot<on;){for(cn=on*vn+ot,zn=-1,Sr=0,Ct=0;Ct<64;Ct++)Rn=cn+(Sr=Ct>>3)*on+(zn=4*(7&Ct)),vn+Sr>=nr&&(Rn-=on*(vn+1+Sr-nr)),ot+zn>=on&&(Rn-=ot+zn-on+4),dt=ye[Rn++],_t=ye[Rn++],dn=ye[Rn++],U[Ct]=(_e[dt]+_e[_t+256>>0]+_e[dn+512>>0]>>16)-128,K[Ct]=(_e[dt+768>>0]+_e[_t+1024>>0]+_e[dn+1280>>0]>>16)-128,J[Ct]=(_e[dt+1280>>0]+_e[_t+1536>>0]+_e[dn+1792>>0]>>16)-128;me=It(U,h,me,e,r),Me=It(K,g,Me,t,i),je=It(J,g,je,t,i),ot+=32}vn+=8}if(F>=0){var Nn=[];Nn[1]=F+1,Nn[0]=(1<<F+1)-1,ut(Nn)}return Tt(65497),new Uint8Array(P)},n=n||50,function(){for(var $=String.fromCharCode,he=0;he<256;he++)ie[he]=$(he)}(),e=Ze(oe,Be),t=Ze(te,xe),r=Ze(tt,ne),i=Ze(ve,Ve),function(){for(var $=1,he=2,me=1;me<=15;me++){for(var Me=$;Me<he;Me++)E[32767+Me]=me,v[32767+Me]=[],v[32767+Me][1]=me,v[32767+Me][0]=Me;for(var je=-(he-1);je<=-$;je++)E[32767+je]=me,v[32767+je]=[],v[32767+je][1]=me,v[32767+je][0]=he-1+je;$<<=1,he<<=1}}(),function(){for(var $=0;$<256;$++)_e[$]=19595*$,_e[$+256>>0]=38470*$,_e[$+512>>0]=7471*$+32768,_e[$+768>>0]=-11059*$,_e[$+1024>>0]=-21709*$,_e[$+1280>>0]=32768*$+8421375,_e[$+1536>>0]=-27439*$,_e[$+1792>>0]=-5329*$}(),wn(n)}function yc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function hA(n){function e(oe){if(!oe)throw Error("assert :P")}function t(oe,Be,tt){for(var ne=0;4>ne;ne++)if(oe[Be+ne]!=tt.charCodeAt(ne))return!0;return!1}function r(oe,Be,tt,ne,te){for(var xe=0;xe<te;xe++)oe[Be+xe]=tt[ne+xe]}function i(oe,Be,tt,ne){for(var te=0;te<ne;te++)oe[Be+te]=tt}function s(oe){return new Int32Array(oe)}function o(oe,Be){for(var tt=[],ne=0;ne<oe;ne++)tt.push(new Be);return tt}function l(oe,Be){var tt=[];return function ne(te,xe,ve){for(var Ve=ve[xe],Ze=0;Ze<Ve&&(te.push(ve.length>xe+1?[]:new Be),!(ve.length<xe+1));Ze++)ne(te[Ze],xe+1,ve)}(tt,0,oe),tt}var d=function(){var oe=this;function Be(_,x){for(var k=1<<x-1>>>0;_&k;)k>>>=1;return k?(_&k-1)+k:_}function tt(_,x,k,O,j){e(!(O%k));do{_[x+(O-=k)]=j}while(0<O)}function ne(_,x,k,O,j){if(e(2328>=j),512>=j)var W=s(512);else if(null==(W=s(j)))return 0;return function(q,Y,ee,ae,Ne,Qe){var Xe,Ue,jt=Y,vt=1<<ee,ke=s(16),Oe=s(16);for(e(0!=Ne),e(null!=ae),e(null!=q),e(0<ee),Ue=0;Ue<Ne;++Ue){if(15<ae[Ue])return 0;++ke[ae[Ue]]}if(ke[0]==Ne)return 0;for(Oe[1]=0,Xe=1;15>Xe;++Xe){if(ke[Xe]>1<<Xe)return 0;Oe[Xe+1]=Oe[Xe]+ke[Xe]}for(Ue=0;Ue<Ne;++Ue)Xe=ae[Ue],0<ae[Ue]&&(Qe[Oe[Xe]++]=Ue);if(1==Oe[15])return(ae=new te).g=0,ae.value=Qe[0],tt(q,jt,1,vt,ae),vt;var Bt,Zt=-1,Ut=vt-1,jn=0,bn=1,_r=1,En=1<<ee;for(Ue=0,Xe=1,Ne=2;Xe<=ee;++Xe,Ne<<=1){if(bn+=_r<<=1,0>(_r-=ke[Xe]))return 0;for(;0<ke[Xe];--ke[Xe])(ae=new te).g=Xe,ae.value=Qe[Ue++],tt(q,jt+jn,Ne,En,ae),jn=Be(jn,Xe)}for(Xe=ee+1,Ne=2;15>=Xe;++Xe,Ne<<=1){if(bn+=_r<<=1,0>(_r-=ke[Xe]))return 0;for(;0<ke[Xe];--ke[Xe]){if(ae=new te,(jn&Ut)!=Zt){for(jt+=En,Bt=1<<(Zt=Xe)-ee;15>Zt&&!(0>=(Bt-=ke[Zt]));)++Zt,Bt<<=1;vt+=En=1<<(Bt=Zt-ee),q[Y+(Zt=jn&Ut)].g=Bt+ee,q[Y+Zt].value=jt-Y-Zt}ae.g=Xe-ee,ae.value=Qe[Ue++],tt(q,jt+(jn>>ee),Ne,En,ae),jn=Be(jn,Xe)}}return bn!=2*Oe[15]-1?0:vt}(_,x,k,O,j,W)}function te(){this.value=this.g=0}function xe(){this.value=this.g=0}function ve(){this.G=o(5,te),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Pc,xe)}function Ve(_,x,k,O){e(null!=_),e(null!=x),e(2147483648>O),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=x,_.pa=k,_.Jd=x,_.Yc=k+O,_.Zc=4<=O?k+O-4+1:k,ot(_)}function Ze(_,x){for(var k=0;0<x--;)k|=_t(_,128)<<x;return k}function ut(_,x){var k=Ze(_,x);return dt(_)?-k:k}function Ye(_,x,k,O){var j,W=0;for(e(null!=_),e(null!=x),e(4294967288>O),_.Sb=O,_.Ra=0,_.u=0,_.h=0,4<O&&(O=4),j=0;j<O;++j)W+=x[k+j]<<8*j;_.Ra=W,_.bb=O,_.oa=x,_.pa=k}function Tt(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Gb-8>>>0,++_.bb,_.u-=8;me(_)&&(_.h=1,_.u=0)}function It(_,x){if(e(0<=x),!_.h&&x<=qb){var k=he(_)&$b[x];return _.u+=x,Tt(_),k}return _.h=1,_.u=0}function wn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function he(_){return _.Ra>>>(_.u&Gb-1)>>>0}function me(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Gb}function Me(_,x){_.u=x,_.h=me(_)}function je(_){_.u>=ZE&&(e(_.u>=ZE),Tt(_))}function ot(_){e(null!=_&&null!=_.oa),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(null!=_&&null!=_.oa),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function dt(_){return Ze(_,1)}function _t(_,x){var k=_.Ca;0>_.b&&ot(_);var O=_.b,j=k*x>>>8,W=(_.I>>>O>j)+0;for(W?(k-=j,_.I-=j+1<<O>>>0):k=j+1,O=k,j=0;256<=O;)j+=8,O>>=8;return _.b-=O=7^j+Rc[O],_.Ca=(k<<O)-1,W}function dn(_,x,k){_[x+0]=k>>24&255,_[x+1]=k>>16&255,_[x+2]=k>>8&255,_[x+3]=k>>0&255}function cn(_,x){return _[x+0]<<0|_[x+1]<<8}function Rn(_,x){return cn(_,x)|_[x+2]<<16}function zn(_,x){return cn(_,x)|cn(_,x+2)<<16}function Sr(_,x){var k=1<<x;return e(null!=_),e(0<x),_.X=s(k),null==_.X?0:(_.Mb=32-x,_.Xa=x,1)}function Ct(_,x){e(null!=_),e(null!=x),e(_.Xa==x.Xa),r(x.X,0,_.X,0,1<<x.Xa)}function ye(){this.X=[],this.Xa=this.Mb=0}function $r(_,x,k,O){e(null!=k),e(null!=O);var j=k[0],W=O[0];return 0==j&&(j=(_*W+x/2)/x),0==W&&(W=(x*j+_/2)/_),0>=j||0>=W?0:(k[0]=j,O[0]=W,1)}function nr(_,x){return _+(1<<x)-1>>>x}function on(_,x){return((4278255360&_)+(4278255360&x)>>>0&4278255360)+((16711935&_)+(16711935&x)>>>0&16711935)>>>0}function vn(_,x){oe[x]=function(k,O,j,W,q,Y,ee){var ae;for(ae=0;ae<q;++ae){var Ne=oe[_](Y[ee+ae-1],j,W+ae);Y[ee+ae]=on(k[O+ae],Ne)}}}function Nn(){this.ud=this.hd=this.jd=0}function An(_,x){return((4278124286&(_^x))>>>1)+(_&x)>>>0}function cr(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Vr(_,x){return cr(_+(_-x+.5>>1))}function Xr(_,x,k){return Math.abs(x-k)-Math.abs(_-k)}function si(_,x,k,O,j,W,q){for(O=W[q-1],k=0;k<j;++k)W[q+k]=O=on(_[x+k],O)}function Ci(_,x,k,O,j){var W;for(W=0;W<k;++W){var q=_[x+W],Y=q>>8&255,ee=16711935&(ee=(ee=16711935&q)+((Y<<16)+Y));O[j+W]=(4278255360&q)+ee>>>0}}function os(_,x){x.jd=_>>0&255,x.hd=_>>8&255,x.ud=_>>16&255}function Mr(_,x,k,O,j,W){var q;for(q=0;q<O;++q){var Y=x[k+q],ee=Y>>>8,ae=Y,Ne=255&(Ne=(Ne=Y>>>16)+((_.jd<<24>>24)*(ee<<24>>24)>>>5));ae=255&(ae=(ae+=(_.hd<<24>>24)*(ee<<24>>24)>>>5)+((_.ud<<24>>24)*(Ne<<24>>24)>>>5)),j[W+q]=(4278255360&Y)+(Ne<<16)+ae}}function ui(_,x,k,O,j){oe[x]=function(W,q,Y,ee,ae,Ne,Qe,Xe,Ue){for(ee=Qe;ee<Xe;++ee)for(Qe=0;Qe<Ue;++Qe)ae[Ne++]=j(Y[O(W[q++])])},oe[_]=function(W,q,Y,ee,ae,Ne,Qe){var Xe=8>>W.b,Ue=W.Ea,jt=W.K[0],vt=W.w;if(8>Xe)for(W=(1<<W.b)-1,vt=(1<<Xe)-1;q<Y;++q){var ke,Oe=0;for(ke=0;ke<Ue;++ke)ke&W||(Oe=O(ee[ae++])),Ne[Qe++]=j(jt[Oe&vt]),Oe>>=Xe}else oe["VP8LMapColor"+k](ee,ae,jt,vt,Ne,Qe,q,Y,Ue)}}function kn(_,x,k,O,j){for(k=x+k;x<k;){var W=_[x++];O[j++]=W>>16&255,O[j++]=W>>8&255,O[j++]=W>>0&255}}function La(_,x,k,O,j){for(k=x+k;x<k;){var W=_[x++];O[j++]=W>>16&255,O[j++]=W>>8&255,O[j++]=W>>0&255,O[j++]=W>>24&255}}function ki(_,x,k,O,j){for(k=x+k;x<k;){var W=(q=_[x++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;O[j++]=W,O[j++]=q}}function Eu(_,x,k,O,j){for(k=x+k;x<k;){var W=(q=_[x++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;O[j++]=W,O[j++]=q}}function fs(_,x,k,O,j){for(k=x+k;x<k;){var W=_[x++];O[j++]=W>>0&255,O[j++]=W>>8&255,O[j++]=W>>16&255}}function Vs(_,x,k,O,j,W){if(0==W)for(k=x+k;x<k;)dn(O,((W=_[x++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),j+=32;else r(O,j,_,x,k)}function Rd(_,x){oe[x][0]=oe[_+"0"],oe[x][1]=oe[_+"1"],oe[x][2]=oe[_+"2"],oe[x][3]=oe[_+"3"],oe[x][4]=oe[_+"4"],oe[x][5]=oe[_+"5"],oe[x][6]=oe[_+"6"],oe[x][7]=oe[_+"7"],oe[x][8]=oe[_+"8"],oe[x][9]=oe[_+"9"],oe[x][10]=oe[_+"10"],oe[x][11]=oe[_+"11"],oe[x][12]=oe[_+"12"],oe[x][13]=oe[_+"13"],oe[x][14]=oe[_+"0"],oe[x][15]=oe[_+"0"]}function qi(_){return _==G4||_==K4||_==uM||_==Z4}function gy(){this.eb=[],this.size=this.A=this.fb=0}function ro(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xu(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gy,this.f.kb=new ro,this.sd=null}function sf(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function io(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function zr(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Gi(_,x){var k=_.T,O=x.ba.f.RGBA,j=O.eb,W=O.fb+_.ka*O.A,q=zl[x.ba.S],Y=_.y,ee=_.O,ae=_.f,Ne=_.N,Qe=_.ea,Xe=_.W,Ue=x.cc,jt=x.dc,vt=x.Mc,ke=x.Nc,Oe=_.ka,Bt=_.ka+_.T,Zt=_.U,Ut=Zt+1>>1;for(0==Oe?q(Y,ee,null,null,ae,Ne,Qe,Xe,ae,Ne,Qe,Xe,j,W,null,null,Zt):(q(x.ec,x.fc,Y,ee,Ue,jt,vt,ke,ae,Ne,Qe,Xe,j,W-O.A,j,W,Zt),++k);Oe+2<Bt;Oe+=2)q(Y,(ee+=2*_.fa)-_.fa,Y,ee,Ue=ae,jt=Ne,vt=Qe,ke=Xe,ae,Ne+=_.Rc,Qe,Xe+=_.Rc,j,(W+=2*O.A)-O.A,j,W,Zt);return ee+=_.fa,_.j+Bt<_.o?(r(x.ec,x.fc,Y,ee,Zt),r(x.cc,x.dc,ae,Ne,Ut),r(x.Mc,x.Nc,Qe,Xe,Ut),k--):1&Bt||q(Y,ee,null,null,ae,Ne,Qe,Xe,ae,Ne,Qe,Xe,j,W+O.A,null,null,Zt),k}function my(_,x,k){var O=_.F,j=[_.J];if(null!=O){var W=_.U,q=x.ba.S,Y=q==lM||q==uM;x=x.ba.f.RGBA;var ee=[0],ae=_.ka;ee[0]=_.T,_.Kb&&(0==ae?--ee[0]:(--ae,j[0]-=_.width),_.j+_.ka+_.T==_.o&&(ee[0]=_.o-_.j-ae));var Ne=x.eb;_=iM(O,j[0],_.width,W,ee,Ne,(ae=x.fb+ae*x.A)+(Y?0:3),x.A),e(k==ee),_&&qi(q)&&Mg(Ne,ae,Y,W,ee,x.A)}return 0}function xa(_){var x=_.ma,k=x.ba.S,O=11>k,j=k==aM||k==cM||k==lM||k==q4||12==k||qi(k);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!GE(x.Oa,_,j?11:12))return 0;if(j&&qi(k)&&nn(),_.da)alert("todo:use_scaling");else{if(O){if(x.Ib=zr,_.Kb){if(x.memory=s(_.U+2*(k=_.U+1>>1)),null==x.memory)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+_.U,x.Mc=x.cc,x.Nc=x.dc+k,x.Ib=Gi,nn()}}else alert("todo:EmitYUV");j&&(x.Jb=my,O&&qe())}if(O&&!Bq){for(_=0;256>_;++_)Ege[_]=89858*(_-128)+hM>>dM,Age[_]=-22014*(_-128)+hM,Sge[_]=-45773*(_-128),xge[_]=113618*(_-128)+hM>>dM;for(_=tx;_<X4;++_)Cge[_-tx]=fl(x=76283*(_-16)+hM>>dM,255),Tge[_-tx]=fl(x+8>>4,15);Bq=1}return 1}function Od(_){var x=_.ma,k=_.U,O=_.T;return e(!(1&_.ka)),0>=k||0>=O?0:(k=x.Ib(_,x),null!=x.Jb&&x.Jb(_,x,k),x.Dc+=k,1)}function Ld(_){_.ma.memory=null}function Er(_,x,k,O){return 47!=It(_,8)?0:(x[0]=It(_,14)+1,k[0]=It(_,14)+1,O[0]=It(_,1),0!=It(_,3)?0:!_.h)}function Su(_,x){if(4>_)return _+1;var k=_-2>>1;return(2+(1&_)<<k)+It(x,k)+1}function Fd(_,x){return 120<x?x-120:1<=(k=((k=lge[x-1])>>4)*_+(8-(15&k)))?k:1;var k}function Nc(_,x,k){var O=he(k),j=_[x+=255&O].g-8;return 0<j&&(Me(k,k.u+8),O=he(k),x+=_[x].value,x+=O&(1<<j)-1),Me(k,k.u+_[x].g),_[x].value}function zo(_,x,k){return k.g+=_.g,k.value+=_.value<<x>>>0,e(8>=k.g),_.g}function wo(_,x,k){var O=_.xc;return e((x=0==O?0:_.vc[_.md*(k>>O)+(x>>O)])<_.Wb),_.Ya[x]}function hl(_,x,k,O){var j=_.ab,W=_.c*x,q=_.C;x=q+x;var Y=k,ee=O;for(O=_.Ta,k=_.Ua;0<j--;){var ae=_.gc[j],Ne=q,Qe=x,Xe=Y,Ue=ee,jt=(ee=O,Y=k,ae.Ea);switch(e(Ne<Qe),e(Qe<=ae.nc),ae.hc){case 2:rM(Xe,Ue,(Qe-Ne)*jt,ee,Y);break;case 0:var vt=Ne,ke=Qe,Oe=ee,Bt=Y,Zt=(En=ae).Ea;0==vt&&(z4(Xe,Ue,null,null,1,Oe,Bt),si(Xe,Ue+1,0,0,Zt-1,Oe,Bt+1),Ue+=Zt,Bt+=Zt,++vt);for(var Ut=1<<En.b,jn=Ut-1,bn=nr(Zt,En.b),_r=En.K,En=En.w+(vt>>En.b)*bn;vt<ke;){var Vi=_r,Xi=En,Ti=1;for(YE(Xe,Ue,Oe,Bt-Zt,1,Oe,Bt);Ti<Zt;){var gi=(Ti&~jn)+Ut;gi>Zt&&(gi=Zt),(0,Ag[Vi[Xi++]>>8&15])(Xe,Ue+ +Ti,Oe,Bt+Ti-Zt,gi-Ti,Oe,Bt+Ti),Ti=gi}Ue+=Zt,Bt+=Zt,++vt&jn||(En+=bn)}Qe!=ae.nc&&r(ee,Y-jt,ee,Y+(Qe-Ne-1)*jt,jt);break;case 1:for(jt=Xe,ke=Ue,Zt=(Xe=ae.Ea)-(Bt=Xe&~(Oe=(Ue=1<<ae.b)-1)),vt=nr(Xe,ae.b),Ut=ae.K,ae=ae.w+(Ne>>ae.b)*vt;Ne<Qe;){for(jn=Ut,bn=ae,_r=new Nn,En=ke+Bt,Vi=ke+Xe;ke<En;)os(jn[bn++],_r),Ul(_r,jt,ke,Ue,ee,Y),ke+=Ue,Y+=Ue;ke<Vi&&(os(jn[bn++],_r),Ul(_r,jt,ke,Zt,ee,Y),ke+=Zt,Y+=Zt),++Ne&Oe||(ae+=vt)}break;case 3:if(Xe==ee&&Ue==Y&&0<ae.b){for(ke=ee,Xe=jt=Y+(Qe-Ne)*jt-(Bt=(Qe-Ne)*nr(ae.Ea,ae.b)),Ue=ee,Oe=Y,vt=[],Bt=(Zt=Bt)-1;0<=Bt;--Bt)vt[Bt]=Ue[Oe+Bt];for(Bt=Zt-1;0<=Bt;--Bt)ke[Xe+Bt]=vt[Bt];ku(ae,Ne,Qe,ee,jt,ee,Y)}else ku(ae,Ne,Qe,Xe,Ue,ee,Y)}Y=O,ee=k}ee!=k&&r(O,k,Y,ee,W)}function Tb(_,x){var k=_.V,O=_.Ba+_.c*_.C,j=x-_.C;if(e(x<=_.l.o),e(16>=j),0<j){var W=_.l,q=_.Ta,Y=_.Ua,ee=W.width;if(hl(_,j,k,O),j=Y=[Y],e((k=_.C)<(O=x)),e(W.v<W.va),O>W.o&&(O=W.o),k<W.j){var ae=W.j-k;k=W.j,j[0]+=ae*ee}if(k>=O?k=0:(j[0]+=4*W.v,W.ka=k-W.j,W.U=W.va-W.v,W.T=O-k,k=1),k){if(Y=Y[0],11>(k=_.ca).S){var Ne=k.f.RGBA,Qe=(O=k.S,j=W.U,W=W.T,ae=Ne.eb,Ne.A),Xe=W;for(Ne=Ne.fb+_.Ma*Ne.A;0<Xe--;){var Ue=q,jt=Y,vt=j,ke=ae,Oe=Ne;switch(O){case oM:Pu(Ue,jt,vt,ke,Oe);break;case aM:Cg(Ue,jt,vt,ke,Oe);break;case G4:Cg(Ue,jt,vt,ke,Oe),Mg(ke,Oe,0,vt,1,0);break;case Tq:Kb(Ue,jt,vt,ke,Oe);break;case cM:Vs(Ue,jt,vt,ke,Oe,1);break;case K4:Vs(Ue,jt,vt,ke,Oe,1),Mg(ke,Oe,0,vt,1,0);break;case lM:Vs(Ue,jt,vt,ke,Oe,0);break;case uM:Vs(Ue,jt,vt,ke,Oe,0),Mg(ke,Oe,1,vt,1,0);break;case q4:Vd(Ue,jt,vt,ke,Oe);break;case Z4:Vd(Ue,jt,vt,ke,Oe),Qb(ke,Oe,vt,1,0);break;case Dq:df(Ue,jt,vt,ke,Oe);break;default:e(0)}Y+=ee,Ne+=Qe}_.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=k.height)}}_.C=x,e(_.C<=_.i)}function af(_){var x;if(0<_.ua)return 0;for(x=0;x<_.Wb;++x){var k=_.Ya[x].G,O=_.Ya[x].H;if(0<k[1][O[1]+0].g||0<k[2][O[2]+0].g||0<k[3][O[3]+0].g)return 0}return 1}function Au(_,x,k,O,j,W){if(0!=_.Z){var q=_.qd,Y=_.rd;for(e(null!=kg[_.Z]);x<k;++x)kg[_.Z](q,Y,O,j,O,j,W),q=O,Y=j,j+=W;_.qd=q,_.rd=Y}}function Cu(_,x){var k=_.l.ma,O=0==k.Z||1==k.Z?_.l.j:_.C;if(O=_.C<O?O:_.C,e(x<=_.l.o),x>O){var j=_.l.width,W=k.ca,q=k.tb+j*O,Y=_.V,ee=_.Ba+_.c*O,ae=_.gc;e(1==_.ab),e(3==ae[0].hc),H4(ae[0],O,x,Y,ee,W,q),Au(k,O,x,W,q,j)}_.C=_.Ma=x}function Tu(_,x,k,O,j,W,q){var Y=_.$/O,ee=_.$%O,ae=_.m,Ne=_.s,Qe=k+_.$,Xe=Qe;j=k+O*j;var Ue=k+O*W,jt=280+Ne.ua,vt=_.Pb?Y:16777216,ke=0<Ne.ua?Ne.Wa:null,Oe=Ne.wc,Bt=Qe<Ue?wo(Ne,ee,Y):null;e(_.C<W),e(Ue<=j);var Zt=!1;e:for(;;){for(;Zt||Qe<Ue;){var Ut=0;if(Y>=vt){var jn=Qe-k;e((vt=_).Pb),vt.wd=vt.m,vt.xd=jn,0<vt.s.ua&&Ct(vt.s.Wa,vt.s.vb),vt=Y+dge}if(ee&Oe||(Bt=wo(Ne,ee,Y)),e(null!=Bt),Bt.Qb&&(x[Qe]=Bt.qb,Zt=!0),!Zt)if(je(ae),Bt.jc){jn=x;var bn=Qe,_r=Bt.pd[he(Ut=ae)&Pc-1];e(Bt.jc),256>_r.g?(Me(Ut,Ut.u+_r.g),jn[bn]=_r.value,Ut=0):(Me(Ut,Ut.u+_r.g-256),e(256<=_r.value),Ut=_r.value),0==Ut&&(Zt=!0)}else Ut=Nc(Bt.G[0],Bt.H[0],ae);if(ae.h)break;if(Zt||256>Ut){if(!Zt)if(Bt.nd)x[Qe]=(Bt.qb|Ut<<8)>>>0;else{if(je(ae),Zt=Nc(Bt.G[1],Bt.H[1],ae),je(ae),jn=Nc(Bt.G[2],Bt.H[2],ae),bn=Nc(Bt.G[3],Bt.H[3],ae),ae.h)break;x[Qe]=(bn<<24|Zt<<16|Ut<<8|jn)>>>0}if(Zt=!1,++Qe,++ee>=O&&(ee=0,++Y,null!=q&&Y<=W&&!(Y%16)&&q(_,Y),null!=ke))for(;Xe<Qe;)Ut=x[Xe++],ke.X[(506832829*Ut&4294967295)>>>ke.Mb]=Ut}else if(280>Ut){if(Ut=Su(Ut-256,ae),jn=Nc(Bt.G[4],Bt.H[4],ae),je(ae),jn=Fd(O,jn=Su(jn,ae)),ae.h)break;if(Qe-k<jn||j-Qe<Ut)break e;for(bn=0;bn<Ut;++bn)x[Qe+bn]=x[Qe+bn-jn];for(Qe+=Ut,ee+=Ut;ee>=O;)ee-=O,++Y,null!=q&&Y<=W&&!(Y%16)&&q(_,Y);if(e(Qe<=j),ee&Oe&&(Bt=wo(Ne,ee,Y)),null!=ke)for(;Xe<Qe;)Ut=x[Xe++],ke.X[(506832829*Ut&4294967295)>>>ke.Mb]=Ut}else{if(!(Ut<jt))break e;for(Zt=Ut-280,e(null!=ke);Xe<Qe;)Ut=x[Xe++],ke.X[(506832829*Ut&4294967295)>>>ke.Mb]=Ut;Ut=Qe,e(!(Zt>>>(jn=ke).Xa)),x[Ut]=jn.X[Zt],Zt=!0}Zt||e(ae.h==me(ae))}if(_.Pb&&ae.h&&Qe<j)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Ct(_.s.vb,_.s.Wa);else{if(ae.h)break e;q?.(_,Y>W?W:Y),_.a=0,_.$=Qe-k}return 1}return _.a=3,0}function Bd(_){e(null!=_),_.vc=null,_.yc=null,_.Ya=null;var x=_.Wa;null!=x&&(x.X=null),_.vb=null,e(null!=_)}function Bl(){var _=new V4;return null==_?null:(_.a=0,_.xb=kq,Rd("Predictor","VP8LPredictors"),Rd("Predictor","VP8LPredictors_C"),Rd("PredictorAdd","VP8LPredictorsAdd"),Rd("PredictorAdd","VP8LPredictorsAdd_C"),rM=Ci,Ul=Mr,Pu=kn,Cg=La,Vd=ki,df=Eu,Kb=fs,oe.VP8LMapColor32b=QE,oe.VP8LMapColor8b=W4,_)}function Ud(_,x,k,O,j){var W=1,q=[_],Y=[x],ee=O.m,ae=O.s,Ne=null,Qe=0;e:for(;;){if(k)for(;W&&It(ee,1);){var Xe=q,Ue=Y,jt=O,vt=1,ke=jt.m,Oe=jt.gc[jt.ab],Bt=It(ke,2);if(jt.Oc&1<<Bt)W=0;else{switch(jt.Oc|=1<<Bt,Oe.hc=Bt,Oe.Ea=Xe[0],Oe.nc=Ue[0],Oe.K=[null],++jt.ab,e(4>=jt.ab),Bt){case 0:case 1:Oe.b=It(ke,3)+2,vt=Ud(nr(Oe.Ea,Oe.b),nr(Oe.nc,Oe.b),0,jt,Oe.K),Oe.K=Oe.K[0];break;case 3:var Zt,Ut=It(ke,8)+1,jn=16<Ut?0:4<Ut?1:2<Ut?2:3;if(Xe[0]=nr(Oe.Ea,jn),Oe.b=jn,Zt=vt=Ud(Ut,1,0,jt,Oe.K)){var bn,_r=Ut,En=Oe,Vi=1<<(8>>En.b),Xi=s(Vi);if(null==Xi)Zt=0;else{var Ti=En.K[0],gi=En.w;for(Xi[0]=En.K[0][0],bn=1;bn<1*_r;++bn)Xi[bn]=on(Ti[gi+bn],Xi[bn-1]);for(;bn<4*Vi;++bn)Xi[bn]=0;En.K[0]=null,En.K[0]=Xi,Zt=1}}vt=Zt;break;case 2:break;default:e(0)}W=vt}}if(q=q[0],Y=Y[0],W&&It(ee,1)&&!(W=1<=(Qe=It(ee,4))&&11>=Qe)){O.a=3;break e}var ps;if(ps=W)t:{var as,Yr,Eo,Oc=O,xo=q,Lc=Y,Ji=Qe,gl=k,ml=Oc.m,oa=Oc.s,Sa=[null],nc=1,Hl=0,zd=uge[Ji];n:for(;;){if(gl&&It(ml,1)){var aa=It(ml,3)+2,mf=nr(xo,aa),xy=nr(Lc,aa),Xb=mf*xy;if(!Ud(mf,xy,0,Oc,Sa))break n;for(Sa=Sa[0],oa.xc=aa,as=0;as<Xb;++as){var Pg=Sa[as]>>8&65535;Sa[as]=Pg,Pg>=nc&&(nc=Pg+1)}}if(ml.h)break n;for(Yr=0;5>Yr;++Yr){var oo=Mq[Yr];!Yr&&0<Ji&&(oo+=1<<Ji),Hl<oo&&(Hl=oo)}var J4=o(nc*zd,te),Vq=nc,zq=o(Vq,ve);if(null==zq)var pM=null;else e(65536>=Vq),pM=zq;var nx=s(Hl);if(null==pM||null==nx||null==J4){Oc.a=1;break n}var gM=J4;for(as=Eo=0;as<nc;++as){var Fu=pM[as],Jb=Fu.G,e1=Fu.H,Hq=0,mM=1,Wq=0;for(Yr=0;5>Yr;++Yr){oo=Mq[Yr],Jb[Yr]=gM,e1[Yr]=Eo,!Yr&&0<Ji&&(oo+=1<<Ji);i:{var _M,e6=oo,yM=Oc,rx=nx,Nge=gM,kge=Eo,t6=0,Rg=yM.m,Pge=It(Rg,1);if(i(rx,0,0,e6),Pge){var Rge=It(Rg,1)+1,Oge=It(Rg,1),$q=It(Rg,0==Oge?1:8);rx[$q]=1,2==Rge&&(rx[$q=It(Rg,8)]=1);var vM=1}else{var qq=s(19),Gq=It(Rg,4)+4;if(19<Gq){yM.a=3;var bM=0;break i}for(_M=0;_M<Gq;++_M)qq[cge[_M]]=It(Rg,3);var n6=void 0,ix=void 0,Kq=yM,Lge=qq,wM=e6,Zq=rx,r6=0,Og=Kq.m,Yq=8,Qq=o(128,te);r:for(;ne(Qq,0,7,Lge,19);){if(It(Og,1)){var Fge=2+2*It(Og,3);if((n6=2+It(Og,Fge))>wM)break r}else n6=wM;for(ix=0;ix<wM&&n6--;){je(Og);var Xq=Qq[0+(127&he(Og))];Me(Og,Og.u+Xq.g);var t1=Xq.value;if(16>t1)Zq[ix++]=t1,0!=t1&&(Yq=t1);else{var Bge=16==t1,Jq=t1-16,Uge=oge[Jq],eG=It(Og,sge[Jq])+Uge;if(ix+eG>wM)break r;for(var jge=Bge?Yq:0;0<eG--;)Zq[ix++]=jge}}r6=1;break r}r6||(Kq.a=3),vM=r6}(vM=vM&&!Rg.h)&&(t6=ne(Nge,kge,8,rx,e6)),vM&&0!=t6?bM=t6:(yM.a=3,bM=0)}if(0==bM)break n;if(mM&&1==age[Yr]&&(mM=0==gM[Eo].g),Hq+=gM[Eo].g,Eo+=bM,3>=Yr){var sx,i6=nx[0];for(sx=1;sx<oo;++sx)nx[sx]>i6&&(i6=nx[sx]);Wq+=i6}}if(Fu.nd=mM,Fu.Qb=0,mM&&(Fu.qb=(Jb[3][e1[3]+0].value<<24|Jb[1][e1[1]+0].value<<16|Jb[2][e1[2]+0].value)>>>0,0==Hq&&256>Jb[0][e1[0]+0].value&&(Fu.Qb=1,Fu.qb+=Jb[0][e1[0]+0].value<<8)),Fu.jc=!Fu.Qb&&6>Wq,Fu.jc){var IM,_f=Fu;for(IM=0;IM<Pc;++IM){var Lg=IM,Fg=_f.pd[Lg],EM=_f.G[0][_f.H[0]+Lg];256<=EM.value?(Fg.g=EM.g+256,Fg.value=EM.value):(Fg.g=0,Fg.value=0,Lg>>=zo(EM,8,Fg),Lg>>=zo(_f.G[1][_f.H[1]+Lg],16,Fg),Lg>>=zo(_f.G[2][_f.H[2]+Lg],0,Fg),zo(_f.G[3][_f.H[3]+Lg],24,Fg))}}}oa.vc=Sa,oa.Wb=nc,oa.Ya=pM,oa.yc=J4,ps=1;break t}ps=0}if(!(W=ps)){O.a=3;break e}if(0<Qe){if(ae.ua=1<<Qe,!Sr(ae.Wa,Qe)){O.a=1,W=0;break e}}else ae.ua=0;var s6=O,tG=q,Vge=Y,o6=s6.s,a6=o6.xc;if(s6.c=tG,s6.i=Vge,o6.md=nr(tG,a6),o6.wc=0==a6?-1:(1<<a6)-1,k){O.xb=yge;break e}if(null==(Ne=s(q*Y))){O.a=1,W=0;break e}W=(W=Tu(O,Ne,0,q,Y,Y,null))&&!ee.h;break e}return W?(null!=j?j[0]=Ne:(e(null==Ne),e(k)),O.$=0,k||Bd(ae)):Bd(ae),W}function _y(_,x){var k=_.c*_.i,O=k+x+16*x;return e(_.c<=x),_.V=s(O),null==_.V?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+k+x,1)}function Db(_,x){var k=_.C,O=x-k,j=_.V,W=_.Ba+_.c*k;for(e(x<=_.l.o);0<O;){var q=16<O?16:O,Y=_.l.ma,ee=_.l.width,ae=ee*q,Ne=Y.ca,Qe=Y.tb+ee*k,Xe=_.Ta,Ue=_.Ua;hl(_,q,j,W),Iq(Xe,Ue,Ne,Qe,ae),Au(Y,k,k+q,Ne,Qe,ee),O-=q,j+=q*_.c,k+=q}e(k==x),_.C=_.Ma=x}function Mb(){this.ub=this.yd=this.td=this.Rb=0}function Nb(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function kb(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function F5(){var _;this.Yb=(function x(k,O,j){for(var W=j[O],q=0;q<W&&(k.push(j.length>O+1?[]:0),!(j.length<O+1));q++)x(k[q],O+1,j)}(_=[],0,[3,11]),_)}function y4(){this.jb=s(3),this.Wc=l([4,8],F5),this.Xc=l([4,17],F5)}function v4(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Pb(){this.ld=this.La=this.dd=this.tc=0}function B5(){this.Na=this.la=0}function b4(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function NE(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function w4(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pb),this.Y=0,this.ya=Array(new NE),this.aa=0,this.l=new Rb}function U5(){this.y=s(16),this.f=s(8),this.ea=s(8)}function I4(){this.cb=this.a=0,this.sc="",this.m=new wn,this.Od=new Mb,this.Kc=new Nb,this.ed=new v4,this.Qa=new kb,this.Ic=this.$c=this.Aa=0,this.D=new w4,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,wn),this.ia=0,this.pb=o(4,b4),this.Pa=new y4,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new U5),this.Hd=0,this.rb=Array(new B5),this.sb=0,this.wa=Array(new Pb),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new NE),this.L=this.aa=0,this.gd=l([4,2],Pb),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Rb(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function E4(){var _=new I4;return null!=_&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,ex||(ex=z5)),_}function po(_,x,k){return 0==_.a&&(_.a=x,_.sc=k,_.cb=0),0}function j5(_,x,k){return 3<=k&&157==_[x+0]&&1==_[x+1]&&42==_[x+2]}function V5(_,x){if(null==_)return 0;if(_.a=0,_.sc="OK",null==x)return po(_,2,"null VP8Io passed to VP8GetHeaders()");var k=x.data,O=x.w,j=x.ha;if(4>j)return po(_,7,"Truncated header.");var W=k[O+0]|k[O+1]<<8|k[O+2]<<16,q=_.Od;if(q.Rb=!(1&W),q.td=W>>1&7,q.yd=W>>4&1,q.ub=W>>5,3<q.td)return po(_,3,"Incorrect keyframe parameters.");if(!q.yd)return po(_,4,"Frame not displayable.");O+=3,j-=3;var Y=_.Kc;if(q.Rb){if(7>j)return po(_,7,"cannot parse picture header");if(!j5(k,O,j))return po(_,3,"Bad code word");Y.c=16383&(k[O+4]<<8|k[O+3]),Y.Td=k[O+4]>>6,Y.i=16383&(k[O+6]<<8|k[O+5]),Y.Ud=k[O+6]>>6,O+=7,j-=7,_.za=Y.c+15>>4,_.Ub=Y.i+15>>4,x.width=Y.c,x.height=Y.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,i((W=_.Pa).jb,0,255,W.jb.length),e(null!=(W=_.Qa)),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(q.ub>j)return po(_,7,"bad partition length");Ve(W=_.m,k,O,q.ub),O+=q.ub,j-=q.ub,q.Rb&&(Y.Ld=dt(W),Y.Kd=dt(W)),Y=_.Qa;var ee,ae=_.Pa;if(e(null!=W),e(null!=Y),Y.Cb=dt(W),Y.Cb){if(Y.Bb=dt(W),dt(W)){for(Y.Fb=dt(W),ee=0;4>ee;++ee)Y.Zb[ee]=dt(W)?ut(W,7):0;for(ee=0;4>ee;++ee)Y.Lb[ee]=dt(W)?ut(W,6):0}if(Y.Bb)for(ee=0;3>ee;++ee)ae.jb[ee]=dt(W)?Ze(W,8):255}else Y.Bb=0;if(W.Ka)return po(_,3,"cannot parse segment header");if((Y=_.ed).zd=dt(W),Y.Tb=Ze(W,6),Y.wb=Ze(W,3),Y.Pc=dt(W),Y.Pc&&dt(W)){for(ae=0;4>ae;++ae)dt(W)&&(Y.vd[ae]=ut(W,6));for(ae=0;4>ae;++ae)dt(W)&&(Y.od[ae]=ut(W,6))}if(_.L=0==Y.Tb?0:Y.zd?1:2,W.Ka)return po(_,3,"cannot parse filter header");var Ne=j;if(j=ee=O,O=ee+Ne,Y=Ne,_.Xb=(1<<Ze(_.m,2))-1,Ne<3*(ae=_.Xb))k=7;else{for(ee+=3*ae,Y-=3*ae,Ne=0;Ne<ae;++Ne){var Qe=k[j+0]|k[j+1]<<8|k[j+2]<<16;Qe>Y&&(Qe=Y),Ve(_.Jc[+Ne],k,ee,Qe),ee+=Qe,Y-=Qe,j+=3}Ve(_.Jc[+ae],k,ee,Y),k=ee<O?0:5}if(0!=k)return po(_,k,"cannot parse partitions");for(k=Ze(ee=_.m,7),j=dt(ee)?ut(ee,4):0,O=dt(ee)?ut(ee,4):0,Y=dt(ee)?ut(ee,4):0,ae=dt(ee)?ut(ee,4):0,ee=dt(ee)?ut(ee,4):0,Ne=_.Qa,Qe=0;4>Qe;++Qe){if(Ne.Cb){var Xe=Ne.Zb[Qe];Ne.Fb||(Xe+=k)}else{if(0<Qe){_.pb[Qe]=_.pb[0];continue}Xe=k}var Ue=_.pb[Qe];Ue.Sc[0]=Y4[fl(Xe+j,127)],Ue.Sc[1]=Q4[fl(Xe+0,127)],Ue.Eb[0]=2*Y4[fl(Xe+O,127)],Ue.Eb[1]=101581*Q4[fl(Xe+Y,127)]>>16,8>Ue.Eb[1]&&(Ue.Eb[1]=8),Ue.Qc[0]=Y4[fl(Xe+ae,117)],Ue.Qc[1]=Q4[fl(Xe+ee,127)],Ue.lc=Xe+ee}if(!q.Rb)return po(_,4,"Not a key frame.");for(dt(W),q=_.Pa,k=0;4>k;++k){for(j=0;8>j;++j)for(O=0;3>O;++O)for(Y=0;11>Y;++Y)ae=_t(W,mge[k][j][O][Y])?Ze(W,8):pge[k][j][O][Y],q.Wc[k][j].Yb[O][Y]=ae;for(j=0;17>j;++j)q.Xc[k][j]=q.Wc[k][_ge[j]]}return _.kc=dt(W),_.kc&&(_.Bd=Ze(W,8)),_.cb=1}function z5(_,x,k,O,j,W,q){var Y=x[j].Yb[k];for(k=0;16>j;++j){if(!_t(_,Y[k+0]))return j;for(;!_t(_,Y[k+1]);)if(Y=x[++j].Yb[0],k=0,16==j)return 16;var ee=x[j+1].Yb;if(_t(_,Y[k+2])){var ae=_,Ne=0;if(_t(ae,(Xe=Y)[(Qe=k)+3]))if(_t(ae,Xe[Qe+6])){for(Y=0,Qe=2*(Ne=_t(ae,Xe[Qe+8]))+(Xe=_t(ae,Xe[Qe+9+Ne])),Ne=0,Xe=hge[Qe];Xe[Y];++Y)Ne+=Ne+_t(ae,Xe[Y]);Ne+=3+(8<<Qe)}else _t(ae,Xe[Qe+7])?(Ne=7+2*_t(ae,165),Ne+=_t(ae,145)):Ne=5+_t(ae,159);else Ne=_t(ae,Xe[Qe+4])?3+_t(ae,Xe[Qe+5]):2;Y=ee[2]}else Ne=1,Y=ee[1];ee=q+fge[j],0>(ae=_).b&&ot(ae);var Qe,Xe=ae.b,Ue=(Qe=ae.Ca>>1)-(ae.I>>Xe)>>31;--ae.b,ae.Ca+=Ue,ae.Ca|=1,ae.I-=(Qe+1&Ue)<<Xe,W[ee]=((Ne^Ue)-Ue)*O[(0<j)+0]}return 16}function kE(_){var x=_.rb[_.sb-1];x.la=0,x.Na=0,i(_.zc,0,0,_.zc.length),_.ja=0}function Du(_,x,k,O,j){_[x+k+32*O]=-256&(j=_[x+k+32*O]+(j>>3))?0>j?0:255:j}function Ob(_,x,k,O,j,W){Du(_,x,0,k,O+j),Du(_,x,1,k,O+W),Du(_,x,2,k,O-W),Du(_,x,3,k,O-j)}function kc(_){return(20091*_>>16)+_}function PE(_,x,k,O){var j,W=0,q=s(16);for(j=0;4>j;++j){var Y=_[x+0]+_[x+8],ee=_[x+0]-_[x+8],ae=(35468*_[x+4]>>16)-kc(_[x+12]),Ne=kc(_[x+4])+(35468*_[x+12]>>16);q[W+0]=Y+Ne,q[W+1]=ee+ae,q[W+2]=ee-ae,q[W+3]=Y-Ne,W+=4,x++}for(j=W=0;4>j;++j)Y=(_=q[W+0]+4)+q[W+8],ee=_-q[W+8],ae=(35468*q[W+4]>>16)-kc(q[W+12]),Du(k,O,0,0,Y+(Ne=kc(q[W+4])+(35468*q[W+12]>>16))),Du(k,O,1,0,ee+ae),Du(k,O,2,0,ee-ae),Du(k,O,3,0,Y-Ne),W++,O+=32}function H5(_,x,k,O){var j=_[x+0]+4,W=35468*_[x+4]>>16,q=kc(_[x+4]),Y=35468*_[x+1]>>16;Ob(k,O,0,j+q,_=kc(_[x+1]),Y),Ob(k,O,1,j+W,_,Y),Ob(k,O,2,j-W,_,Y),Ob(k,O,3,j-q,_,Y)}function S4(_,x,k,O,j){PE(_,x,k,O),j&&PE(_,x+16,k,O+4)}function W5(_,x,k,O){Zb(_,x+0,k,O,1),Zb(_,x+32,k,O+128,1)}function A4(_,x,k,O){var j;for(_=_[x+0]+4,j=0;4>j;++j)for(x=0;4>x;++x)Du(k,O,x,j,_)}function $5(_,x,k,O){_[x+0]&&Ou(_,x+0,k,O),_[x+16]&&Ou(_,x+16,k,O+4),_[x+32]&&Ou(_,x+32,k,O+128),_[x+48]&&Ou(_,x+48,k,O+128+4)}function C4(_,x,k,O){var j,W=s(16);for(j=0;4>j;++j){var q=_[x+0+j]+_[x+12+j],Y=_[x+4+j]+_[x+8+j],ee=_[x+4+j]-_[x+8+j],ae=_[x+0+j]-_[x+12+j];W[0+j]=q+Y,W[8+j]=q-Y,W[4+j]=ae+ee,W[12+j]=ae-ee}for(j=0;4>j;++j)q=(_=W[0+4*j]+3)+W[3+4*j],ee=W[1+4*j]-W[2+4*j],ae=_-W[3+4*j],k[O+0]=q+(Y=W[1+4*j]+W[2+4*j])>>3,k[O+16]=ae+ee>>3,k[O+32]=q-Y>>3,k[O+48]=ae-ee>>3,O+=64}function RE(_,x,k){var O,j=x-32,W=pl,q=255-_[j-1];for(O=0;O<k;++O){var Y,ee=W,ae=q+_[x-1];for(Y=0;Y<k;++Y)_[x+Y]=ee[ae+_[j+Y]];x+=32}}function T4(_,x){RE(_,x,4)}function D4(_,x){RE(_,x,8)}function M4(_,x){RE(_,x,16)}function cf(_,x){var k;for(k=0;16>k;++k)r(_,x+32*k,_,x-32,16)}function Lb(_,x){var k;for(k=16;0<k;--k)i(_,x,_[x-1],16),x+=32}function Fb(_,x,k){var O;for(O=0;16>O;++O)i(x,k+32*O,_,16)}function q5(_,x){var k,O=16;for(k=0;16>k;++k)O+=_[x-1+32*k]+_[x+k-32];Fb(O>>5,_,x)}function Fa(_,x){var k,O=8;for(k=0;16>k;++k)O+=_[x-1+32*k];Fb(O>>4,_,x)}function N4(_,x){var k,O=8;for(k=0;16>k;++k)O+=_[x+k-32];Fb(O>>4,_,x)}function G5(_,x){Fb(128,_,x)}function Or(_,x,k){return _+2*x+k+2>>2}function k4(_,x){var k,O=x-32;for(O=new Uint8Array([Or(_[O-1],_[O+0],_[O+1]),Or(_[O+0],_[O+1],_[O+2]),Or(_[O+1],_[O+2],_[O+3]),Or(_[O+2],_[O+3],_[O+4])]),k=0;4>k;++k)r(_,x+32*k,O,0,O.length)}function P4(_,x){var k=_[x-1],O=_[x-1+32],j=_[x-1+64],W=_[x-1+96];dn(_,x+0,16843009*Or(_[x-1-32],k,O)),dn(_,x+32,16843009*Or(k,O,j)),dn(_,x+64,16843009*Or(O,j,W)),dn(_,x+96,16843009*Or(j,W,W))}function jd(_,x){var k,O=4;for(k=0;4>k;++k)O+=_[x+k-32]+_[x-1+32*k];for(O>>=3,k=0;4>k;++k)i(_,x+32*k,O,4)}function K5(_,x){var k=_[x-1+0],O=_[x-1+32],j=_[x-1+64],W=_[x-1-32],q=_[x+0-32],Y=_[x+1-32],ee=_[x+2-32],ae=_[x+3-32];_[x+0+96]=Or(O,j,_[x-1+96]),_[x+1+96]=_[x+0+64]=Or(k,O,j),_[x+2+96]=_[x+1+64]=_[x+0+32]=Or(W,k,O),_[x+3+96]=_[x+2+64]=_[x+1+32]=_[x+0+0]=Or(q,W,k),_[x+3+64]=_[x+2+32]=_[x+1+0]=Or(Y,q,W),_[x+3+32]=_[x+2+0]=Or(ee,Y,q),_[x+3+0]=Or(ae,ee,Y)}function Z5(_,x){var k=_[x+1-32],O=_[x+2-32],j=_[x+3-32],W=_[x+4-32],q=_[x+5-32],Y=_[x+6-32],ee=_[x+7-32];_[x+0+0]=Or(_[x+0-32],k,O),_[x+1+0]=_[x+0+32]=Or(k,O,j),_[x+2+0]=_[x+1+32]=_[x+0+64]=Or(O,j,W),_[x+3+0]=_[x+2+32]=_[x+1+64]=_[x+0+96]=Or(j,W,q),_[x+3+32]=_[x+2+64]=_[x+1+96]=Or(W,q,Y),_[x+3+64]=_[x+2+96]=Or(q,Y,ee),_[x+3+96]=Or(Y,ee,ee)}function Bb(_,x){var k=_[x-1+0],O=_[x-1+32],j=_[x-1+64],W=_[x-1-32],q=_[x+0-32],Y=_[x+1-32],ee=_[x+2-32],ae=_[x+3-32];_[x+0+0]=_[x+1+64]=W+q+1>>1,_[x+1+0]=_[x+2+64]=q+Y+1>>1,_[x+2+0]=_[x+3+64]=Y+ee+1>>1,_[x+3+0]=ee+ae+1>>1,_[x+0+96]=Or(j,O,k),_[x+0+64]=Or(O,k,W),_[x+0+32]=_[x+1+96]=Or(k,W,q),_[x+1+32]=_[x+2+96]=Or(W,q,Y),_[x+2+32]=_[x+3+96]=Or(q,Y,ee),_[x+3+32]=Or(Y,ee,ae)}function OE(_,x){var k=_[x+0-32],O=_[x+1-32],j=_[x+2-32],W=_[x+3-32],q=_[x+4-32],Y=_[x+5-32],ee=_[x+6-32],ae=_[x+7-32];_[x+0+0]=k+O+1>>1,_[x+1+0]=_[x+0+64]=O+j+1>>1,_[x+2+0]=_[x+1+64]=j+W+1>>1,_[x+3+0]=_[x+2+64]=W+q+1>>1,_[x+0+32]=Or(k,O,j),_[x+1+32]=_[x+0+96]=Or(O,j,W),_[x+2+32]=_[x+1+96]=Or(j,W,q),_[x+3+32]=_[x+2+96]=Or(W,q,Y),_[x+3+64]=Or(q,Y,ee),_[x+3+96]=Or(Y,ee,ae)}function R4(_,x){var k=_[x-1+0],O=_[x-1+32],j=_[x-1+64],W=_[x-1+96];_[x+0+0]=k+O+1>>1,_[x+2+0]=_[x+0+32]=O+j+1>>1,_[x+2+32]=_[x+0+64]=j+W+1>>1,_[x+1+0]=Or(k,O,j),_[x+3+0]=_[x+1+32]=Or(O,j,W),_[x+3+32]=_[x+1+64]=Or(j,W,W),_[x+3+64]=_[x+2+64]=_[x+0+96]=_[x+1+96]=_[x+2+96]=_[x+3+96]=W}function O4(_,x){var k=_[x-1+0],O=_[x-1+32],j=_[x-1+64],W=_[x-1+96],q=_[x-1-32],Y=_[x+0-32],ee=_[x+1-32],ae=_[x+2-32];_[x+0+0]=_[x+2+32]=k+q+1>>1,_[x+0+32]=_[x+2+64]=O+k+1>>1,_[x+0+64]=_[x+2+96]=j+O+1>>1,_[x+0+96]=W+j+1>>1,_[x+3+0]=Or(Y,ee,ae),_[x+2+0]=Or(q,Y,ee),_[x+1+0]=_[x+3+32]=Or(k,q,Y),_[x+1+32]=_[x+3+64]=Or(O,k,q),_[x+1+64]=_[x+3+96]=Or(j,O,k),_[x+1+96]=Or(W,j,O)}function L4(_,x){var k;for(k=0;8>k;++k)r(_,x+32*k,_,x-32,8)}function LE(_,x){var k;for(k=0;8>k;++k)i(_,x,_[x-1],8),x+=32}function yy(_,x,k){var O;for(O=0;8>O;++O)i(x,k+32*O,_,8)}function Ig(_,x){var k,O=8;for(k=0;8>k;++k)O+=_[x+k-32]+_[x-1+32*k];yy(O>>4,_,x)}function F4(_,x){var k,O=4;for(k=0;8>k;++k)O+=_[x+k-32];yy(O>>3,_,x)}function vy(_,x){var k,O=4;for(k=0;8>k;++k)O+=_[x-1+32*k];yy(O>>3,_,x)}function FE(_,x){yy(128,_,x)}function Ub(_,x,k){var O=_[x-k],j=_[x+0],W=3*(j-O)+$4[1020+_[x-2*k]-_[x+k]],q=sM[112+(W+4>>3)];_[x-k]=pl[255+O+sM[112+(W+3>>3)]],_[x+0]=pl[255+j-q]}function Y5(_,x,k,O){return Vl[255+_[x-2*k]-_[x-k]]>O||Vl[255+_[x+k]-_[x+0]]>O}function Q5(_,x,k,O){return 4*Vl[255+_[x-k]-_[x+0]]+Vl[255+_[x-2*k]-_[x+k]]<=O}function X5(_,x,k,O,j){var W=_[x-3*k],q=_[x-2*k],Y=_[x-k],ee=_[x+0],ae=_[x+k],Ne=_[x+2*k];return 4*Vl[255+Y-ee]+Vl[255+q-ae]>O?0:Vl[255+_[x-4*k]-W]<=j&&Vl[255+W-q]<=j&&Vl[255+q-Y]<=j&&Vl[255+_[x+3*k]-Ne]<=j&&Vl[255+Ne-ae]<=j&&Vl[255+ae-ee]<=j}function J5(_,x,k,O){var j=2*O+1;for(O=0;16>O;++O)Q5(_,x+O,k,j)&&Ub(_,x+O,k)}function lf(_,x,k,O){var j=2*O+1;for(O=0;16>O;++O)Q5(_,x+O*k,1,j)&&Ub(_,x+O*k,1)}function Eg(_,x,k,O){var j;for(j=3;0<j;--j)J5(_,x+=4*k,k,O)}function B4(_,x,k,O){var j;for(j=3;0<j;--j)lf(_,x+=4,k,O)}function xg(_,x,k,O,j,W,q,Y){for(W=2*W+1;0<j--;){if(X5(_,x,k,W,q))if(Y5(_,x,k,Y))Ub(_,x,k);else{var ee=_,ae=x,Ne=k,Qe=ee[ae-2*Ne],Xe=ee[ae-Ne],Ue=ee[ae+0],jt=ee[ae+Ne],vt=ee[ae+2*Ne],ke=27*(Bt=$4[1020+3*(Ue-Xe)+$4[1020+Qe-jt]])+63>>7,Oe=18*Bt+63>>7,Bt=9*Bt+63>>7;ee[ae-3*Ne]=pl[255+ee[ae-3*Ne]+Bt],ee[ae-2*Ne]=pl[255+Qe+Oe],ee[ae-Ne]=pl[255+Xe+ke],ee[ae+0]=pl[255+Ue-ke],ee[ae+Ne]=pl[255+jt-Oe],ee[ae+2*Ne]=pl[255+vt-Bt]}x+=O}}function Mu(_,x,k,O,j,W,q,Y){for(W=2*W+1;0<j--;){if(X5(_,x,k,W,q))if(Y5(_,x,k,Y))Ub(_,x,k);else{var ee=_,ae=x,Ne=k,Qe=ee[ae-Ne],Xe=ee[ae+0],Ue=ee[ae+Ne],jt=sM[112+(4+(vt=3*(Xe-Qe))>>3)],vt=sM[112+(vt+3>>3)],ke=jt+1>>1;ee[ae-2*Ne]=pl[255+ee[ae-2*Ne]+ke],ee[ae-Ne]=pl[255+Qe+vt],ee[ae+0]=pl[255+Xe-jt],ee[ae+Ne]=pl[255+Ue-ke]}x+=O}}function BE(_,x,k,O,j,W){xg(_,x,k,1,16,O,j,W)}function by(_,x,k,O,j,W){xg(_,x,1,k,16,O,j,W)}function U4(_,x,k,O,j,W){var q;for(q=3;0<q;--q)Mu(_,x+=4*k,k,1,16,O,j,W)}function jb(_,x,k,O,j,W){var q;for(q=3;0<q;--q)Mu(_,x+=4,1,k,16,O,j,W)}function j4(_,x,k,O,j,W,q,Y){xg(_,x,j,1,8,W,q,Y),xg(k,O,j,1,8,W,q,Y)}function UE(_,x,k,O,j,W,q,Y){xg(_,x,1,j,8,W,q,Y),xg(k,O,1,j,8,W,q,Y)}function jE(_,x,k,O,j,W,q,Y){Mu(_,x+4*j,j,1,8,W,q,Y),Mu(k,O+4*j,j,1,8,W,q,Y)}function eM(_,x,k,O,j,W,q,Y){Mu(_,x+4,1,j,8,W,q,Y),Mu(k,O+4,1,j,8,W,q,Y)}function Vb(){this.ba=new xu,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new io,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function VE(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function zE(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tM(){this.ua=0,this.Wa=new ye,this.vb=new ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ve,this.yc=new te}function V4(){this.xb=this.a=0,this.l=new Rb,this.ca=new xu,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tM,this.ab=0,this.gc=o(4,zE),this.Oc=0}function zb(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Rb,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wy(_,x,k,O,j,W,q){for(_=null==_?0:_[x+0],x=0;x<q;++x)j[W+x]=_+k[O+x]&255,_=j[W+x]}function HE(_,x,k,O,j,W,q){var Y;if(null==_)wy(null,null,k,O,j,W,q);else for(Y=0;Y<q;++Y)j[W+Y]=_[x+Y]+k[O+Y]&255}function Sg(_,x,k,O,j,W,q){if(null==_)wy(null,null,k,O,j,W,q);else{var Y,ee=_[x+0],ae=ee,Ne=ee;for(Y=0;Y<q;++Y)ae=Ne+(ee=_[x+Y])-ae,Ne=k[O+Y]+(-256&ae?0>ae?0:255:ae)&255,ae=ee,j[W+Y]=Ne}}function WE(_,x,k,O){var j=x.width,W=x.o;if(e(null!=_&&null!=x),0>k||0>=O||k+O>W)return null;if(!_.Cc){if(null==_.ga){var q;if(_.ga=new zb,(q=null==_.ga)||(q=x.width*x.o,e(0==_.Gb.length),_.Gb=s(q),_.Uc=0,null==_.Gb?q=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,q=1),q=!q),!q){var Y=_.Fa,ee=_.P,ae=_.qc,Ne=_.mb,Qe=_.nb,Xe=ee+1,Ue=ae-1,jt=(q=_.ga).l;if(e(null!=Y&&null!=Ne&&null!=x),kg[0]=null,kg[1]=wy,kg[2]=HE,kg[3]=Sg,q.ca=Ne,q.tb=Qe,q.c=x.width,q.i=x.height,e(0<q.c&&0<q.i),1>=ae)x=0;else if(q.$a=Y[ee+0]>>0&3,q.Z=Y[ee+0]>>2&3,q.Lc=Y[ee+0]>>4&3,ee=Y[ee+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||ee)x=0;else if(jt.put=Od,jt.ac=xa,jt.bc=Ld,jt.ma=q,jt.width=x.width,jt.height=x.height,jt.Da=x.Da,jt.v=x.v,jt.va=x.va,jt.j=x.j,jt.o=x.o,q.$a)e:{e(1==q.$a),x=Bl();t:for(;;){if(null==x){x=0;break e}if(e(null!=q),q.mc=x,x.c=q.c,x.i=q.i,x.l=q.l,x.l.ma=q,x.l.width=q.c,x.l.height=q.i,x.a=0,Ye(x.m,Y,Xe,Ue),!Ud(q.c,q.i,1,x,null)||(1==x.ab&&3==x.gc[0].hc&&af(x.s)?(q.ic=1,Y=x.c*x.i,x.Ta=null,x.Ua=0,x.V=s(Y),x.Ba=0,null==x.V?(x.a=1,x=0):x=1):(q.ic=0,x=_y(x,q.c)),!x))break t;x=1;break e}q.mc=null,x=0}else x=Ue>=q.c*q.i;q=!x}if(q)return null;1!=_.ga.Lc?_.Ga=0:O=W-k}e(null!=_.ga),e(k+O<=W);e:{if(x=(Y=_.ga).c,W=Y.l.o,0==Y.$a){if(Xe=_.rc,Ue=_.Vc,jt=_.Fa,ae=_.mb,Ne=_.nb+k*x,e((ee=_.P+1+k*x)<=_.P+_.qc),0!=Y.Z)for(e(null!=kg[Y.Z]),q=0;q<O;++q)kg[Y.Z](Xe,Ue,jt,ee,ae,Ne,x),Xe=ae,Ue=Ne,Ne+=x,ee+=x;else for(q=0;q<O;++q)r(ae,Ne,jt,ee,x),Xe=ae,Ue=Ne,Ne+=x,ee+=x;_.rc=Xe,_.Vc=Ue}else{if(e(null!=Y.mc),x=k+O,e(null!=(q=Y.mc)),e(x<=q.i),q.C>=x)x=1;else if(Y.ic||qe(),Y.ic){Y=q.V,Xe=q.Ba;var vt=q.i,ke=(jt=1,ee=q.$/(Ue=q.c),ae=q.$%Ue,Ne=q.m,Qe=q.s,q.$),Oe=Ue*vt,Bt=Ue*x,Zt=Qe.wc,Ut=ke<Bt?wo(Qe,ae,ee):null;e(ke<=Oe),e(x<=vt),e(af(Qe));t:for(;;){for(;!Ne.h&&ke<Bt;){if(ae&Zt||(Ut=wo(Qe,ae,ee)),e(null!=Ut),je(Ne),256>(vt=Nc(Ut.G[0],Ut.H[0],Ne)))Y[Xe+ke]=vt,++ke,++ae>=Ue&&(ae=0,++ee<=x&&!(ee%16)&&Cu(q,ee));else{if(!(280>vt)){jt=0;break t}vt=Su(vt-256,Ne);var jn,bn=Nc(Ut.G[4],Ut.H[4],Ne);if(je(Ne),!(ke>=(bn=Fd(Ue,bn=Su(bn,Ne)))&&Oe-ke>=vt)){jt=0;break t}for(jn=0;jn<vt;++jn)Y[Xe+ke+jn]=Y[Xe+ke+jn-bn];for(ke+=vt,ae+=vt;ae>=Ue;)ae-=Ue,++ee<=x&&!(ee%16)&&Cu(q,ee);ke<Bt&&ae&Zt&&(Ut=wo(Qe,ae,ee))}e(Ne.h==me(Ne))}Cu(q,ee>x?x:ee);break t}!jt||Ne.h&&ke<Oe?(jt=0,q.a=Ne.h?5:3):q.$=ke,x=jt}else x=Tu(q,q.V,q.Ba,q.c,q.i,x,Db);if(!x){O=0;break e}}k+O>=W&&(_.Cc=1),O=1}if(!O)return null;if(_.Cc&&(null!=(O=_.ga)&&(O.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+k*j}function T(_,x,k,O,j,W){for(;0<j--;){var q,Y=_,ee=x+(k?1:0),ae=_,Ne=x+(k?0:3);for(q=0;q<O;++q){var Qe=ae[Ne+4*q];255!=Qe&&(Y[ee+4*q+0]=Y[ee+4*q+0]*(Qe*=32897)>>23,Y[ee+4*q+1]=Y[ee+4*q+1]*Qe>>23,Y[ee+4*q+2]=Y[ee+4*q+2]*Qe>>23)}x+=W}}function V(_,x,k,O,j){for(;0<O--;){var W;for(W=0;W<k;++W){var q=_[x+2*W+0],Y=15&(ae=_[x+2*W+1]),ee=4369*Y,ae=(240&ae|ae>>4)*ee>>16;_[x+2*W+0]=(240&q|q>>4)*ee>>16&240|(15&q|q<<4)*ee>>16>>4&15,_[x+2*W+1]=240&ae|Y}x+=j}}function pe(_,x,k,O,j,W,q,Y){var ee,ae,Ne=255;for(ae=0;ae<j;++ae){for(ee=0;ee<O;++ee){var Qe=_[x+ee];W[q+4*ee]=Qe,Ne&=Qe}x+=k,q+=Y}return 255!=Ne}function Ce(_,x,k,O,j){var W;for(W=0;W<j;++W)k[O+W]=_[x+W]>>8}function qe(){Mg=T,Qb=V,iM=pe,Iq=Ce}function xt(_,x,k){oe[_]=function(O,j,W,q,Y,ee,ae,Ne,Qe,Xe,Ue,jt,vt,ke,Oe,Bt,Zt){var Ut,jn=Zt-1>>1,bn=Y[ee+0]|ae[Ne+0]<<16,_r=Qe[Xe+0]|Ue[jt+0]<<16;e(null!=O);var En=3*bn+_r+131074>>2;for(x(O[j+0],255&En,En>>16,vt,ke),null!=W&&x(W[q+0],255&(En=3*_r+bn+131074>>2),En>>16,Oe,Bt),Ut=1;Ut<=jn;++Ut){var Vi=Y[ee+Ut]|ae[Ne+Ut]<<16,Xi=Qe[Xe+Ut]|Ue[jt+Ut]<<16,Ti=bn+Vi+_r+Xi+524296,gi=Ti+2*(Vi+_r)>>3;En=gi+bn>>1,bn=(Ti=Ti+2*(bn+Xi)>>3)+Vi>>1,x(O[j+2*Ut-1],255&En,En>>16,vt,ke+(2*Ut-1)*k),x(O[j+2*Ut-0],255&bn,bn>>16,vt,ke+(2*Ut-0)*k),null!=W&&(bn=gi+Xi>>1,x(W[q+2*Ut-1],255&(En=Ti+_r>>1),En>>16,Oe,Bt+(2*Ut-1)*k),x(W[q+2*Ut+0],255&bn,bn>>16,Oe,Bt+(2*Ut+0)*k)),bn=Vi,_r=Xi}1&Zt||(x(O[j+Zt-1],255&(En=3*bn+_r+131074>>2),En>>16,vt,ke+(Zt-1)*k),null!=W&&x(W[q+Zt-1],255&(En=3*_r+bn+131074>>2),En>>16,Oe,Bt+(Zt-1)*k))}}function nn(){zl[oM]=vge,zl[aM]=Pq,zl[Tq]=bge,zl[cM]=Rq,zl[lM]=Oq,zl[q4]=Lq,zl[Dq]=wge,zl[G4]=Pq,zl[K4]=Rq,zl[uM]=Oq,zl[Z4]=Lq}function On(_){return _&~Ige?0>_?0:255:_>>Fq}function dr(_,x){return On((19077*_>>8)+(26149*x>>8)-14234)}function qr(_,x,k){return On((19077*_>>8)-(6419*x>>8)-(13320*k>>8)+8708)}function ei(_,x){return On((19077*_>>8)+(33050*x>>8)-17685)}function Ii(_,x,k,O,j){O[j+0]=dr(_,k),O[j+1]=qr(_,x,k),O[j+2]=ei(_,x)}function $s(_,x,k,O,j){O[j+0]=ei(_,x),O[j+1]=qr(_,x,k),O[j+2]=dr(_,k)}function so(_,x,k,O,j){var W=qr(_,x,k);x=W<<3&224|ei(_,x)>>3,O[j+0]=248&dr(_,k)|W>>5,O[j+1]=x}function Io(_,x,k,O,j){var W=240&ei(_,x)|15;O[j+0]=240&dr(_,k)|qr(_,x,k)>>4,O[j+1]=W}function Ba(_,x,k,O,j){O[j+0]=255,Ii(_,x,k,O,j+1)}function sa(_,x,k,O,j){$s(_,x,k,O,j),O[j+3]=255}function Nu(_,x,k,O,j){Ii(_,x,k,O,j),O[j+3]=255}function fl(_,x){return 0>_?0:_>x?x:_}function uf(_,x,k){oe[_]=function(O,j,W,q,Y,ee,ae,Ne,Qe){for(var Xe=Ne+(-2&Qe)*k;Ne!=Xe;)x(O[j+0],W[q+0],Y[ee+0],ae,Ne),x(O[j+1],W[q+0],Y[ee+0],ae,Ne+k),j+=2,++q,++ee,Ne+=2*k;1&Qe&&x(O[j+0],W[q+0],Y[ee+0],ae,Ne)}}function nM(_,x,k){return 0==k?0==_?0==x?6:5:0==x?4:0:k}function $E(_,x,k,O,j){switch(_>>>30){case 3:Zb(x,k,O,j,0);break;case 2:XE(x,k,O,j);break;case 1:Ou(x,k,O,j)}}function qE(_,x){var k,O,j=x.M,W=x.Nb,q=_.oc,Y=_.pc+40,ee=_.oc,ae=_.pc+584,Ne=_.oc,Qe=_.pc+600;for(k=0;16>k;++k)q[Y+32*k-1]=129;for(k=0;8>k;++k)ee[ae+32*k-1]=129,Ne[Qe+32*k-1]=129;for(0<j?q[Y-1-32]=ee[ae-1-32]=Ne[Qe-1-32]=129:(i(q,Y-32-1,127,21),i(ee,ae-32-1,127,9),i(Ne,Qe-32-1,127,9)),O=0;O<_.za;++O){var Xe=x.ya[x.aa+O];if(0<O){for(k=-1;16>k;++k)r(q,Y+32*k-4,q,Y+32*k+12,4);for(k=-1;8>k;++k)r(ee,ae+32*k-4,ee,ae+32*k+4,4),r(Ne,Qe+32*k-4,Ne,Qe+32*k+4,4)}var Ue=_.Gd,jt=_.Hd+O,vt=Xe.ad,ke=Xe.Hc;if(0<j&&(r(q,Y-32,Ue[jt].y,0,16),r(ee,ae-32,Ue[jt].f,0,8),r(Ne,Qe-32,Ue[jt].ea,0,8)),Xe.Za){var Oe=q,Bt=Y-32+16;for(0<j&&(O>=_.za-1?i(Oe,Bt,Ue[jt].y[15],4):r(Oe,Bt,Ue[jt+1].y,0,4)),k=0;4>k;k++)Oe[Bt+128+k]=Oe[Bt+256+k]=Oe[Bt+384+k]=Oe[Bt+0+k];for(k=0;16>k;++k,ke<<=2)Lu[Xe.Ob[k]](Oe=q,Bt=Y+Uq[k]),$E(ke,vt,16*+k,Oe,Bt)}else if(Oe=nM(O,j,Xe.Ob[0]),Ng[Oe](q,Y),0!=ke)for(k=0;16>k;++k,ke<<=2)$E(ke,vt,16*+k,q,Y+Uq[k]);for(k=Xe.Gc,Oe=nM(O,j,Xe.Dd),gf[Oe](ee,ae),gf[Oe](Ne,Qe),ke=vt,Oe=ee,Bt=ae,255&(Xe=k>>0)&&(170&Xe?Tg(ke,256,Oe,Bt):hf(ke,256,Oe,Bt)),Xe=Ne,ke=Qe,255&(k>>=8)&&(170&k?Tg(vt,320,Xe,ke):hf(vt,320,Xe,ke)),j<_.Ub-1&&(r(Ue[jt].y,0,q,Y+480,16),r(Ue[jt].f,0,ee,ae+224,8),r(Ue[jt].ea,0,Ne,Qe+224,8)),Ue=_.sa,jt=_.ta+16*O+16*W*_.R,vt=_.qa,Xe=_.ra+8*O+(k=8*W*_.B),ke=_.Ha,Oe=_.Ia+8*O+k,k=0;16>k;++k)r(Ue,jt+k*_.R,q,Y+32*k,16);for(k=0;8>k;++k)r(vt,Xe+k*_.B,ee,ae+32*k,8),r(ke,Oe+k*_.B,Ne,Qe+32*k,8)}}function Hb(_,x,k,O,j,W,q,Y,ee){var ae=[0],Ne=[0],Qe=0,Xe=null!=ee?ee.kd:0,Ue=ee??new VE;if(null==_||12>k)return 7;Ue.data=_,Ue.w=x,Ue.ha=k,x=[x],k=[k],Ue.gb=[Ue.gb];e:{var jt=x,vt=k,ke=Ue.gb;if(e(null!=_),e(null!=vt),e(null!=ke),ke[0]=0,12<=vt[0]&&!t(_,jt[0],"RIFF")){if(t(_,jt[0]+8,"WEBP")){ke=3;break e}var Oe=zn(_,jt[0]+4);if(12>Oe||4294967286<Oe){ke=3;break e}if(Xe&&Oe>vt[0]-8){ke=7;break e}ke[0]=Oe,jt[0]+=12,vt[0]-=12}ke=0}if(0!=ke)return ke;for(Oe=0<Ue.gb[0],k=k[0];;){e:{var Bt=_;vt=x,ke=k;var Zt=ae,Ut=Ne,jn=jt=[0];if((En=Qe=[Qe])[0]=0,8>ke[0])ke=7;else{if(!t(Bt,vt[0],"VP8X")){if(10!=zn(Bt,vt[0]+4)){ke=3;break e}if(18>ke[0]){ke=7;break e}var bn=zn(Bt,vt[0]+8),_r=1+Rn(Bt,vt[0]+12);if(2147483648<=_r*(Bt=1+Rn(Bt,vt[0]+15))){ke=3;break e}null!=jn&&(jn[0]=bn),null!=Zt&&(Zt[0]=_r),null!=Ut&&(Ut[0]=Bt),vt[0]+=18,ke[0]-=18,En[0]=1}ke=0}}if(Qe=Qe[0],0!=ke)return ke;if(vt=!!(2&(jt=jt[0])),!Oe&&Qe)return 3;if(null!=W&&(W[0]=!!(16&jt)),null!=q&&(q[0]=vt),null!=Y&&(Y[0]=0),q=ae[0],jt=Ne[0],Qe&&vt&&null==ee){ke=0;break}if(4>k){ke=7;break}if(Oe&&Qe||!Oe&&!Qe&&!t(_,x[0],"ALPH")){k=[k],Ue.na=[Ue.na],Ue.P=[Ue.P],Ue.Sa=[Ue.Sa];e:{ke=x,Oe=k;var En=Ue.gb;Zt=Ue.na,Ut=Ue.P,jn=Ue.Sa,_r=22,e(null!=(bn=_)),e(null!=Oe),Bt=ke[0];var Vi=Oe[0];for(e(null!=Zt),e(null!=jn),Zt[0]=null,Ut[0]=null,jn[0]=0;;){if(ke[0]=Bt,Oe[0]=Vi,8>Vi){ke=7;break e}var Xi=zn(bn,Bt+4);if(4294967286<Xi){ke=3;break e}var Ti=8+Xi+1&-2;if(_r+=Ti,0<En&&_r>En){ke=3;break e}if(!t(bn,Bt,"VP8 ")||!t(bn,Bt,"VP8L")){ke=0;break e}if(Vi[0]<Ti){ke=7;break e}t(bn,Bt,"ALPH")||(Zt[0]=bn,Ut[0]=Bt+8,jn[0]=Xi),Bt+=Ti,Vi-=Ti}}if(k=k[0],Ue.na=Ue.na[0],Ue.P=Ue.P[0],Ue.Sa=Ue.Sa[0],0!=ke)break}k=[k],Ue.Ja=[Ue.Ja],Ue.xa=[Ue.xa];e:if(En=_,ke=x,Oe=k,Zt=Ue.gb[0],Ut=Ue.Ja,jn=Ue.xa,bn=ke[0],Bt=!t(En,bn,"VP8 "),_r=!t(En,bn,"VP8L"),e(null!=En),e(null!=Oe),e(null!=Ut),e(null!=jn),8>Oe[0])ke=7;else{if(Bt||_r){if(En=zn(En,bn+4),12<=Zt&&En>Zt-12){ke=3;break e}if(Xe&&En>Oe[0]-8){ke=7;break e}Ut[0]=En,ke[0]+=8,Oe[0]-=8,jn[0]=_r}else jn[0]=5<=Oe[0]&&47==En[bn+0]&&!(En[bn+4]>>5),Ut[0]=Oe[0];ke=0}if(k=k[0],Ue.Ja=Ue.Ja[0],Ue.xa=Ue.xa[0],x=x[0],0!=ke)break;if(4294967286<Ue.Ja)return 3;if(null==Y||vt||(Y[0]=Ue.xa?2:1),q=[q],jt=[jt],Ue.xa){if(5>k){ke=7;break}Y=q,Xe=jt,vt=W,null==_||5>k?_=0:5<=k&&47==_[x+0]&&!(_[x+4]>>5)?(Oe=[0],En=[0],Zt=[0],Ye(Ut=new $,_,x,k),Er(Ut,Oe,En,Zt)?(null!=Y&&(Y[0]=Oe[0]),null!=Xe&&(Xe[0]=En[0]),null!=vt&&(vt[0]=Zt[0]),_=1):_=0):_=0}else{if(10>k){ke=7;break}Y=jt,null==_||10>k||!j5(_,x+3,k-3)?_=0:(Xe=_[x+0]|_[x+1]<<8|_[x+2]<<16,vt=16383&(_[x+7]<<8|_[x+6]),_=16383&(_[x+9]<<8|_[x+8]),1&Xe||3<(Xe>>1&7)||!(Xe>>4&1)||Xe>>5>=Ue.Ja||!vt||!_?_=0:(q&&(q[0]=vt),Y&&(Y[0]=_),_=1))}if(!_||(q=q[0],jt=jt[0],Qe&&(ae[0]!=q||Ne[0]!=jt)))return 3;null!=ee&&(ee[0]=Ue,ee.offset=x-ee.w,e(4294967286>x-ee.w),e(ee.offset==ee.ha-k));break}return 0==ke||7==ke&&Qe&&null==ee?(null!=W&&(W[0]|=null!=Ue.na&&0<Ue.na.length),null!=O&&(O[0]=q),null!=j&&(j[0]=jt),0):ke}function GE(_,x,k){var O=x.width,j=x.height,W=0,q=0,Y=O,ee=j;if(x.Da=null!=_&&0<_.Da,x.Da&&(Y=_.cd,ee=_.bd,W=_.v,q=_.j,11>k||(W&=-2,q&=-2),0>W||0>q||0>=Y||0>=ee||W+Y>O||q+ee>j))return 0;if(x.v=W,x.j=q,x.va=W+Y,x.o=q+ee,x.U=Y,x.T=ee,x.da=null!=_&&0<_.da,x.da){if(!$r(Y,ee,k=[_.ib],W=[_.hb]))return 0;x.ib=k[0],x.hb=W[0]}return x.ob=null!=_&&_.ob,x.Kb=null==_||!_.Sd,x.da&&(x.ob=x.ib<3*O/4&&x.hb<3*j/4,x.Kb=0),1}function KE(_){if(null==_)return 2;if(11>_.S){var x=_.f.RGBA;x.fb+=(_.height-1)*x.A,x.A=-x.A}else(x=_.f.kb).O+=((_=_.height)-1)*x.fa,x.fa=-x.fa,x.N+=(_-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(_-1>>1)*x.Db,x.Db=-x.Db,null!=x.F&&(x.J+=(_-1)*x.lb,x.lb=-x.lb);return 0}function Wb(_,x,k,O){if(null==O||0>=_||0>=x)return 2;if(null!=k){if(k.Da){var j=k.cd,W=k.bd,q=-2&k.v,Y=-2&k.j;if(0>q||0>Y||0>=j||0>=W||q+j>_||Y+W>x)return 2;_=j,x=W}if(k.da){if(!$r(_,x,j=[k.ib],W=[k.hb]))return 2;_=j[0],x=W[0]}}O.width=_,O.height=x;e:{var ee=O.width,ae=O.height;if(_=O.S,0>=ee||0>=ae||!(_>=oM&&13>_))_=2;else{if(0>=O.Rd&&null==O.sd){q=W=j=x=0;var Ne=(Y=ee*jq[_])*ae;if(11>_||(W=(ae+1)/2*(x=(ee+1)/2),12==_&&(q=(j=ee)*ae)),null==(ae=s(Ne+2*W+q))){_=1;break e}O.sd=ae,11>_?((ee=O.f.RGBA).eb=ae,ee.fb=0,ee.A=Y,ee.size=Ne):((ee=O.f.kb).y=ae,ee.O=0,ee.fa=Y,ee.Fd=Ne,ee.f=ae,ee.N=0+Ne,ee.Ab=x,ee.Cd=W,ee.ea=ae,ee.W=0+Ne+W,ee.Db=x,ee.Ed=W,12==_&&(ee.F=ae,ee.J=0+Ne+2*W),ee.Tc=q,ee.lb=j)}if(x=1,W=O.width,q=O.height,(j=O.S)>=oM&&13>j)if(11>j)_=O.f.RGBA,x&=(Y=Math.abs(_.A))*(q-1)+W<=_.size,x&=Y>=W*jq[j],x&=null!=_.eb;else{_=O.f.kb,Y=(W+1)/2,Ne=(q+1)/2,ee=Math.abs(_.fa),ae=Math.abs(_.Ab);var Qe=Math.abs(_.Db),Xe=Math.abs(_.lb);x&=ee*(q-1)+W<=_.Fd,x&=ae*(Ne-1)+Y<=_.Cd,x=(x&=Qe*(Ne-1)+Y<=_.Ed)&ee>=W&ae>=Y&Qe>=Y,x&=null!=_.y,x&=null!=_.f,x&=null!=_.ea,12==j&&(x&=Xe>=W,x&=Xe*(q-1)+W<=_.Tc,x&=null!=_.F)}else x=0;_=x?0:2}}return 0!=_||null!=k&&k.fd&&(_=KE(O)),_}var Pc=64,$b=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qb=24,Gb=32,ZE=8,Rc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];vn("Predictor0","PredictorAdd0"),oe.Predictor0=function(){return 4278190080},oe.Predictor1=function(_){return _},oe.Predictor2=function(_,x,k){return x[k+0]},oe.Predictor3=function(_,x,k){return x[k+1]},oe.Predictor4=function(_,x,k){return x[k-1]},oe.Predictor5=function(_,x,k){return An(An(_,x[k+1]),x[k+0])},oe.Predictor6=function(_,x,k){return An(_,x[k-1])},oe.Predictor7=function(_,x,k){return An(_,x[k+0])},oe.Predictor8=function(_,x,k){return An(x[k-1],x[k+0])},oe.Predictor9=function(_,x,k){return An(x[k+0],x[k+1])},oe.Predictor10=function(_,x,k){return An(An(_,x[k-1]),An(x[k+0],x[k+1]))},oe.Predictor11=function(_,x,k){var O=x[k+0];return 0>=Xr(O>>24&255,_>>24&255,(x=x[k-1])>>24&255)+Xr(O>>16&255,_>>16&255,x>>16&255)+Xr(O>>8&255,_>>8&255,x>>8&255)+Xr(255&O,255&_,255&x)?O:_},oe.Predictor12=function(_,x,k){var O=x[k+0];return(cr((_>>24&255)+(O>>24&255)-((x=x[k-1])>>24&255))<<24|cr((_>>16&255)+(O>>16&255)-(x>>16&255))<<16|cr((_>>8&255)+(O>>8&255)-(x>>8&255))<<8|cr((255&_)+(255&O)-(255&x)))>>>0},oe.Predictor13=function(_,x,k){var O=x[k-1];return(Vr((_=An(_,x[k+0]))>>24&255,O>>24&255)<<24|Vr(_>>16&255,O>>16&255)<<16|Vr(_>>8&255,O>>8&255)<<8|Vr(_>>0&255,O>>0&255))>>>0};var z4=oe.PredictorAdd0;oe.PredictorAdd1=si,vn("Predictor2","PredictorAdd2"),vn("Predictor3","PredictorAdd3"),vn("Predictor4","PredictorAdd4"),vn("Predictor5","PredictorAdd5"),vn("Predictor6","PredictorAdd6"),vn("Predictor7","PredictorAdd7"),vn("Predictor8","PredictorAdd8"),vn("Predictor9","PredictorAdd9"),vn("Predictor10","PredictorAdd10"),vn("Predictor11","PredictorAdd11"),vn("Predictor12","PredictorAdd12"),vn("Predictor13","PredictorAdd13");var YE=oe.PredictorAdd2;ui("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),ui("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var rM,ku=oe.ColorIndexInverseTransform,QE=oe.MapARGB,H4=oe.VP8LColorIndexInverseTransformAlpha,W4=oe.MapAlpha,Ag=oe.VP8LPredictorsAdd=[];Ag.length=16,(oe.VP8LPredictors=[]).length=16,(oe.VP8LPredictorsAdd_C=[]).length=16,(oe.VP8LPredictors_C=[]).length=16;var Ul,Pu,Cg,Vd,df,Kb,Ru,Zb,XE,Tg,Ou,hf,Iy,Yb,Ey,Dg,JE,jl,ff,vs,bs,go,Ho,pf,Mg,Qb,iM,Iq,Eq=s(511),xq=s(2041),Sq=s(225),Aq=s(767),Cq=0,$4=xq,sM=Sq,pl=Aq,Vl=Eq,oM=0,aM=1,Tq=2,cM=3,lM=4,q4=5,Dq=6,G4=7,K4=8,uM=9,Z4=10,sge=[2,3,7],oge=[3,3,11],Mq=[280,256,256,256,40],age=[0,1,1,1,0],cge=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lge=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],uge=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dge=8,Y4=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Q4=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ex=null,hge=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fge=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Nq=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],pge=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gge=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],mge=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_ge=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ng=[],Lu=[],gf=[],yge=1,kq=2,kg=[],zl=[];xt("UpsampleRgbLinePair",Ii,3),xt("UpsampleBgrLinePair",$s,3),xt("UpsampleRgbaLinePair",Nu,4),xt("UpsampleBgraLinePair",sa,4),xt("UpsampleArgbLinePair",Ba,4),xt("UpsampleRgba4444LinePair",Io,2),xt("UpsampleRgb565LinePair",so,2);var vge=oe.UpsampleRgbLinePair,bge=oe.UpsampleBgrLinePair,Pq=oe.UpsampleRgbaLinePair,Rq=oe.UpsampleBgraLinePair,Oq=oe.UpsampleArgbLinePair,Lq=oe.UpsampleRgba4444LinePair,wge=oe.UpsampleRgb565LinePair,dM=16,hM=1<<dM-1,tx=-227,X4=482,Fq=6,Ige=(256<<Fq)-1,Bq=0,Ege=s(256),xge=s(256),Sge=s(256),Age=s(256),Cge=s(X4-tx),Tge=s(X4-tx);uf("YuvToRgbRow",Ii,3),uf("YuvToBgrRow",$s,3),uf("YuvToRgbaRow",Nu,4),uf("YuvToBgraRow",sa,4),uf("YuvToArgbRow",Ba,4),uf("YuvToRgba4444Row",Io,2),uf("YuvToRgb565Row",so,2);var Uq=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fM=[0,2,8],Dge=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(_,x,k,O,j){var W=aM,q=new Vb,Y=new xu;q.ba=Y,Y.S=W,Y.width=[Y.width],Y.height=[Y.height];var ee=Y.width,ae=Y.height,Ne=new sf;if(null==Ne||null==_)var Qe=2;else e(null!=Ne),Qe=Hb(_,x,k,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(0!=Qe?ee=0:(null!=ee&&(ee[0]=Ne.width[0]),null!=ae&&(ae[0]=Ne.height[0]),ee=1),ee){Y.width=Y.width[0],Y.height=Y.height[0],null!=O&&(O[0]=Y.width),null!=j&&(j[0]=Y.height);e:{if(O=new Rb,(j=new VE).data=_,j.w=x,j.ha=k,j.kd=1,x=[0],e(null!=j),(0==(_=Hb(j.data,j.w,j.ha,null,null,null,x,null,j))||7==_)&&x[0]&&(_=4),0==(x=_)){if(e(null!=q),O.data=j.data,O.w=j.w+j.offset,O.ha=j.ha-j.offset,O.put=Od,O.ac=xa,O.bc=Ld,O.ma=q,j.xa){if(null==(_=Bl())){q=1;break e}if(function(Xe,Ue){var jt=[0],vt=[0],ke=[0];t:for(;;){if(null==Xe)return 0;if(null==Ue)return Xe.a=2,0;if(Xe.l=Ue,Xe.a=0,Ye(Xe.m,Ue.data,Ue.w,Ue.ha),!Er(Xe.m,jt,vt,ke)){Xe.a=3;break t}if(Xe.xb=kq,Ue.width=jt[0],Ue.height=vt[0],!Ud(jt[0],vt[0],1,Xe,null))break t;return 1}return e(0!=Xe.a),0}(_,O)){if(O=0==(x=Wb(O.width,O.height,q.Oa,q.ba))){t:{O=_;n:for(;;){if(null==O){O=0;break t}if(e(null!=O.s.yc),e(null!=O.s.Ya),e(0<O.s.Wb),e(null!=(k=O.l)),e(null!=(j=k.ma)),0!=O.xb){if(O.ca=j.ba,O.tb=j.tb,e(null!=O.ca),!GE(j.Oa,k,cM)){O.a=2;break n}if(!_y(O,k.width)||k.da)break n;if((k.da||qi(O.ca.S))&&qe(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=O.ca.f.kb.F&&qe()),O.Pb&&0<O.s.ua&&null==O.s.vb.X&&!Sr(O.s.vb,O.s.Wa.Xa)){O.a=1;break n}O.xb=0}if(!Tu(O,O.V,O.Ba,O.c,O.i,k.o,Tb))break n;j.Dc=O.Ma,O=1;break t}e(0!=O.a),O=0}O=!O}O&&(x=_.a)}else x=_.a}else{if(null==(_=new E4)){q=1;break e}if(_.Fa=j.na,_.P=j.P,_.qc=j.Sa,V5(_,O)){if(0==(x=Wb(O.width,O.height,q.Oa,q.ba))){if(_.Aa=0,k=q.Oa,e(null!=(j=_)),null!=k){if(0<(ee=0>(ee=k.Md)?0:100<ee?255:255*ee/100)){for(ae=Ne=0;4>ae;++ae)12>(Qe=j.pb[ae]).lc&&(Qe.ia=ee*Dge[0>Qe.lc?0:Qe.lc]>>3),Ne|=Qe.ia;Ne&&(alert("todo:VP8InitRandom"),j.ia=1)}j.Ga=k.Id,100<j.Ga?j.Ga=100:0>j.Ga&&(j.Ga=0)}(function x4(_,x){if(null==_)return 0;if(null==x)return po(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!V5(_,x))return 0;if(e(_.cb),null==x.ac||x.ac(x)){x.ob&&(_.L=0);var k=fM[_.L];if(2==_.L?(_.yb=0,_.zb=0):(_.yb=x.v-k>>4,_.zb=x.j-k>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=x.o+15+k>>4,_.Hb=x.va+15+k>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var O=_.ed;for(k=0;4>k;++k){var j;if(_.Qa.Cb){var W=_.Qa.Lb[k];_.Qa.Fb||(W+=O.Tb)}else W=O.Tb;for(j=0;1>=j;++j){var q=_.gd[k][j],Y=W;if(O.Pc&&(Y+=O.vd[0],j&&(Y+=O.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var ee=Y;0<O.wb&&(ee=4<O.wb?ee>>2:ee>>1)>9-O.wb&&(ee=9-O.wb),1>ee&&(ee=1),q.dd=ee,q.tc=2*Y+ee,q.ld=40<=Y?2:15<=Y?1:0}else q.tc=0;q.La=j}}}k=0}else po(_,6,"Frame setup failed"),k=_.a;if(k=0==k){if(k){_.$c=0,0<_.Aa||(_.Ic=1);e:{O=4*(ee=_.za);var ae=32*ee,Ne=ee+1,Qe=0<_.L?ee*(0<_.Aa?2:1):0,Xe=(2==_.Aa?2:1)*ee;if((q=O+832+(j=3*(16*(k=_.Ic)+fM[_.L])/2*ae)+(W=null!=_.Fa&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=q)k=0;else{if(q>_.Vb){if(_.Vb=0,_.Ec=s(q),_.Fc=0,null==_.Ec){k=po(_,1,"no memory during frame initialization.");break e}_.Vb=q}Y=_.Fc,_.Ac=q=_.Ec,_.Bc=Y,Y+=O,_.Gd=o(ae,U5),_.Hd=0,_.rb=o(Ne+1,B5),_.sb=1,_.wa=Qe?o(Qe,Pb):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=ee),e(!0),_.oc=q,_.pc=Y,Y+=832,_.ya=o(Xe,NE),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,2==_.Aa&&(_.D.aa+=ee),_.R=16*ee,_.B=8*ee,ee=(ae=fM[_.L])*_.R,ae=ae/2*_.B,_.sa=q,_.ta=Y+ee,_.qa=_.sa,_.ra=_.ta+16*k*_.R+ae,_.Ha=_.qa,_.Ia=_.ra+8*k*_.B+ae,_.$c=0,Y+=j,_.mb=W?q:null,_.nb=W?Y:null,e(Y+W<=_.Fc+_.Vb),kE(_),i(_.Ac,_.Bc,0,O),k=1}}if(k){if(x.ka=0,x.y=_.sa,x.O=_.ta,x.f=_.qa,x.N=_.ra,x.ea=_.Ha,x.Vd=_.Ia,x.fa=_.R,x.Rc=_.B,x.F=null,x.J=0,!Cq){for(k=-255;255>=k;++k)Eq[255+k]=0>k?-k:k;for(k=-1020;1020>=k;++k)xq[1020+k]=-128>k?-128:127<k?127:k;for(k=-112;112>=k;++k)Sq[112+k]=-16>k?-16:15<k?15:k;for(k=-255;510>=k;++k)Aq[255+k]=0>k?0:255<k?255:k;Cq=1}Ru=C4,Zb=S4,Tg=W5,Ou=A4,hf=$5,XE=H5,Iy=BE,Yb=by,Ey=j4,Dg=UE,JE=U4,jl=jb,ff=jE,vs=eM,bs=J5,go=lf,Ho=Eg,pf=B4,Lu[0]=jd,Lu[1]=T4,Lu[2]=k4,Lu[3]=P4,Lu[4]=K5,Lu[5]=Bb,Lu[6]=Z5,Lu[7]=OE,Lu[8]=O4,Lu[9]=R4,Ng[0]=q5,Ng[1]=M4,Ng[2]=cf,Ng[3]=Lb,Ng[4]=Fa,Ng[5]=N4,Ng[6]=G5,gf[0]=Ig,gf[1]=D4,gf[2]=L4,gf[3]=LE,gf[4]=vy,gf[5]=F4,gf[6]=FE,k=1}else k=0}k&&(k=function(Ue,jt){for(Ue.M=0;Ue.M<Ue.Va;++Ue.M){var vt,ke=Ue.Jc[Ue.M&Ue.Xb],Oe=Ue.m,Bt=Ue;for(vt=0;vt<Bt.za;++vt){var Zt=Oe,Ut=Bt,jn=Ut.Ac,bn=Ut.Bc+4*vt,_r=Ut.zc,En=Ut.ya[Ut.aa+vt];if(En.$b=Ut.Qa.Bb?_t(Zt,Ut.Pa.jb[0])?2+_t(Zt,Ut.Pa.jb[2]):_t(Zt,Ut.Pa.jb[1]):0,Ut.kc&&(En.Ad=_t(Zt,Ut.Bd)),En.Za=!_t(Zt,145)+0,En.Za){var Vi=En.Ob,Xi=0;for(Ut=0;4>Ut;++Ut){var Ti,gi=_r[0+Ut];for(Ti=0;4>Ti;++Ti){for(var ps=Nq[_t(Zt,(gi=gge[jn[bn+Ti]][gi])[0])];0<ps;)ps=Nq[2*ps+_t(Zt,gi[ps])];jn[bn+Ti]=gi=-ps}r(Vi,Xi,jn,bn,4),Xi+=4,_r[0+Ut]=gi}}else gi=_t(Zt,156)?_t(Zt,128)?1:3:_t(Zt,163)?2:0,En.Ob[0]=gi,i(jn,bn,gi,4),i(_r,0,gi,4);En.Dd=_t(Zt,142)?_t(Zt,114)?_t(Zt,183)?1:3:2:0}if(Bt.m.Ka)return po(Ue,7,"Premature end-of-partition0 encountered.");for(;Ue.ja<Ue.za;++Ue.ja){if(Bt=ke,Zt=(Oe=Ue).rb[Oe.sb-1],jn=Oe.rb[Oe.sb+Oe.ja],vt=Oe.ya[Oe.aa+Oe.ja],bn=Oe.kc?vt.Ad:0)Zt.la=jn.la=0,vt.Za||(Zt.Na=jn.Na=0),vt.Hc=0,vt.Gc=0,vt.ia=0;else{var as,Yr;if(Zt=jn,jn=Bt,bn=Oe.Pa.Xc,En=Oe.pb[(_r=Oe.ya[Oe.aa+Oe.ja]).$b],Xi=Oe.rb[Oe.sb-1],gi=Ti=0,i(Ut=_r.ad,Vi=0,0,384),_r.Za)var Eo=0,Oc=bn[3];else{ps=s(16);var xo=Zt.Na+Xi.Na;if(xo=ex(jn,bn[1],xo,En.Eb,0,ps,0),Zt.Na=Xi.Na=(0<xo)+0,1<xo)Ru(ps,0,Ut,Vi);else{var Lc=ps[0]+3>>3;for(ps=0;256>ps;ps+=16)Ut[Vi+ps]=Lc}Eo=1,Oc=bn[0]}var Ji=15&Zt.la,gl=15&Xi.la;for(ps=0;4>ps;++ps){var ml=1&gl;for(Lc=Yr=0;4>Lc;++Lc)Ji=Ji>>1|(ml=(xo=ex(jn,Oc,xo=ml+(1&Ji),En.Sc,Eo,Ut,Vi))>Eo)<<7,Yr=Yr<<2|(3<xo?3:1<xo?2:0!=Ut[Vi+0]),Vi+=16;Ji>>=4,gl=gl>>1|ml<<7,Ti=(Ti<<8|Yr)>>>0}for(Oc=Ji,Eo=gl>>4,as=0;4>as;as+=2){for(Yr=0,Ji=Zt.la>>4+as,gl=Xi.la>>4+as,ps=0;2>ps;++ps){for(ml=1&gl,Lc=0;2>Lc;++Lc)Ji=Ji>>1|(ml=0<(xo=ex(jn,bn[2],xo=ml+(1&Ji),En.Qc,0,Ut,Vi)))<<3,Yr=Yr<<2|(3<xo?3:1<xo?2:0!=Ut[Vi+0]),Vi+=16;Ji>>=2,gl=gl>>1|ml<<5}gi|=Yr<<4*as,Oc|=Ji<<4<<as,Eo|=(240&gl)<<as}Zt.la=Oc,Xi.la=Eo,_r.Hc=Ti,_r.Gc=gi,_r.ia=43690&gi?0:En.ia,bn=!(Ti|gi)}if(0<Oe.L&&(Oe.wa[Oe.Y+Oe.ja]=Oe.gd[vt.$b][vt.Za],Oe.wa[Oe.Y+Oe.ja].La|=!bn),Bt.Ka)return po(Ue,7,"Premature end-of-file encountered.")}if(kE(Ue),Oe=jt,Bt=1,vt=(ke=Ue).D,Zt=0<ke.L&&ke.M>=ke.zb&&ke.M<=ke.Va,0==ke.Aa)e:{if(vt.M=ke.M,vt.uc=Zt,qE(ke,vt),Bt=1,vt=(Yr=ke.D).Nb,Zt=(gi=fM[ke.L])*ke.R,bn=ke.sa,_r=ke.ta-Zt+(ps=16*vt*ke.R),En=ke.qa,Ut=ke.ra-(jn=gi/2*ke.B)+(Lc=8*vt*ke.B),Vi=ke.Ha,Xi=ke.Ia-jn+Lc,gl=0==(Ji=Yr.M),Ti=Ji>=ke.Va-1,2==ke.Aa&&qE(ke,Yr),Yr.uc)for(ml=(xo=ke).D.M,e(xo.D.uc),Yr=xo.yb;Yr<xo.Hb;++Yr){Oc=ml;var oa=(Sa=(oo=xo).D).Nb,Sa=Sa.wa[Sa.Y+(Eo=Yr)],nc=oo.sa,Hl=oo.ta+16*oa*(as=oo.R)+16*Eo,zd=Sa.dd,aa=Sa.tc;if(0!=aa)if(e(3<=aa),1==oo.L)0<Eo&&go(nc,Hl,as,aa+4),Sa.La&&pf(nc,Hl,as,aa),0<Oc&&bs(nc,Hl,as,aa+4),Sa.La&&Ho(nc,Hl,as,aa);else{var mf=oo.B,xy=oo.qa,Xb=oo.ra+8*oa*mf+8*Eo,Pg=oo.Ha,oo=oo.Ia+8*oa*mf+8*Eo;oa=Sa.ld,0<Eo&&(Yb(nc,Hl,as,aa+4,zd,oa),Dg(xy,Xb,Pg,oo,mf,aa+4,zd,oa)),Sa.La&&(jl(nc,Hl,as,aa,zd,oa),vs(xy,Xb,Pg,oo,mf,aa,zd,oa)),0<Oc&&(Iy(nc,Hl,as,aa+4,zd,oa),Ey(xy,Xb,Pg,oo,mf,aa+4,zd,oa)),Sa.La&&(JE(nc,Hl,as,aa,zd,oa),ff(xy,Xb,Pg,oo,mf,aa,zd,oa))}}if(ke.ia&&alert("todo:DitherRow"),null!=Oe.put){if(Yr=16*Ji,Ji=16*(Ji+1),gl?(Oe.y=ke.sa,Oe.O=ke.ta+ps,Oe.f=ke.qa,Oe.N=ke.ra+Lc,Oe.ea=ke.Ha,Oe.W=ke.Ia+Lc):(Yr-=gi,Oe.y=bn,Oe.O=_r,Oe.f=En,Oe.N=Ut,Oe.ea=Vi,Oe.W=Xi),Ti||(Ji-=gi),Ji>Oe.o&&(Ji=Oe.o),Oe.F=null,Oe.J=null,null!=ke.Fa&&0<ke.Fa.length&&Yr<Ji&&(Oe.J=WE(ke,Oe,Yr,Ji-Yr),Oe.F=ke.mb,null==Oe.F&&0==Oe.F.length)){Bt=po(ke,3,"Could not decode alpha data.");break e}Yr<Oe.j&&(gi=Oe.j-Yr,Yr=Oe.j,e(!(1&gi)),Oe.O+=ke.R*gi,Oe.N+=ke.B*(gi>>1),Oe.W+=ke.B*(gi>>1),null!=Oe.F&&(Oe.J+=Oe.width*gi)),Yr<Ji&&(Oe.O+=Oe.v,Oe.N+=Oe.v>>1,Oe.W+=Oe.v>>1,null!=Oe.F&&(Oe.J+=Oe.v),Oe.ka=Yr-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=Ji-Yr,Bt=Oe.put(Oe))}vt+1!=ke.Ic||Ti||(r(ke.sa,ke.ta-Zt,bn,_r+16*ke.R,Zt),r(ke.qa,ke.ra-jn,En,Ut+8*ke.B,jn),r(ke.Ha,ke.Ia-jn,Vi,Xi+8*ke.B,jn))}if(!Bt)return po(Ue,6,"Output aborted.")}return 1}(_,x)),null!=x.bc&&x.bc(x),k&=1}return k?(_.cb=0,k):0})(_,O)||(x=_.a)}}else x=_.a}0==x&&null!=q.Oa&&q.Oa.fd&&(x=KE(q.ba))}q=x}W=0!=q?null:11>W?Y.f.RGBA.eb:Y.f.kb.y}else W=null;return W};var jq=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(oe,Be){for(var tt="",ne=0;ne<4;ne++)tt+=String.fromCharCode(oe[Be++]);return tt}function g(oe,Be){return(oe[Be+0]<<0|oe[Be+1]<<8|oe[Be+2]<<16)>>>0}function v(oe,Be){return(oe[Be+0]<<0|oe[Be+1]<<8|oe[Be+2]<<16|oe[Be+3]<<24)>>>0}new d;var E=[0],w=[0],D=[],P=new d,L=n,F=function(oe,Be){var tt={},ne=0,te=!1,xe=0,ve=0;if(tt.frames=[],!function(he,me,Me,je){for(var ot=0;ot<4;ot++)if(he[me+ot]!="RIFF".charCodeAt(ot))return!0;return!1}(oe,Be)){var Ve,Ze;for(v(oe,Be+=4),Be+=8;Be<oe.length;){var ut=h(oe,Be),Ye=v(oe,Be+=4);Be+=4;var Tt=Ye+(1&Ye);switch(ut){case"VP8 ":case"VP8L":void 0===tt.frames[ne]&&(tt.frames[ne]={}),($=tt.frames[ne]).src_off=te?ve:Be-8,$.src_size=xe+Ye+8,ne++,te&&(te=!1,xe=0,ve=0);break;case"VP8X":($=tt.header={}).feature_flags=oe[Be];var It=Be+4;$.canvas_width=1+g(oe,It),$.canvas_height=1+g(oe,It+=3),It+=3;break;case"ALPH":te=!0,xe=Tt+8,ve=Be-8;break;case"ANIM":($=tt.header).bgcolor=v(oe,Be),$.loop_count=(Ve=oe)[(Ze=It=Be+4)+0]<<0|Ve[Ze+1]<<8,It+=2;break;case"ANMF":var wn,$;($=tt.frames[ne]={}).offset_x=2*g(oe,Be),$.offset_y=2*g(oe,Be+=3),$.width=1+g(oe,Be+=3),$.height=1+g(oe,Be+=3),$.duration=g(oe,Be+=3),Be+=3,wn=oe[Be++],$.dispose=1&wn,$.blend=wn>>1&1}"ANMF"!=ut&&(Be+=Tt)}return tt}}(L,0);F.response=L,F.rgbaoutput=!0,F.dataurl=!1;var U=F.header?F.header:null,K=F.frames?F.frames:null;if(U){U.loop_counter=U.loop_count,E=[U.canvas_height],w=[U.canvas_width];for(var J=0;J<K.length&&0!=K[J].blend;J++);}var ie=K[0],_e=P.WebPDecodeRGBA(L,ie.src_off,ie.src_size,w,E);ie.rgba=_e,ie.imgwidth=w[0],ie.imgheight=E[0];for(var fe=0;fe<w[0]*E[0]*4;fe++)D[fe]=_e[fe];return this.width=w,this.height=E,this.data=D,this}(function(n){var t=function(E,w,D,P){var L=4,F=o;switch(P){case n.image_compression.FAST:L=1,F=s;break;case n.image_compression.MEDIUM:L=6,F=l;break;case n.image_compression.SLOW:L=9,F=d}var U=Wm(E=r(E,w,D,F),{level:L});return n.__addimage__.arrayBufferToBinaryString(U)},r=function(E,w,D,P){for(var L,F,U,K=E.length/w,J=new Uint8Array(E.length+K),ie=g(),_e=0;_e<K;_e+=1){if(L=E.subarray(U=_e*w,U+w),P)J.set(P(L,D,F),U+_e);else{for(var fe,oe=ie.length,Be=[];fe<oe;fe+=1)Be[fe]=ie[fe](L,D,F);var tt=v(Be.concat());J.set(Be[tt],U+_e)}F=L}return J},i=function(E){var w=Array.apply([],E);return w.unshift(0),w},s=function(E,w){var P=[],L=E.length;P[0]=1;for(var F=0;F<L;F+=1)P[F+1]=E[F]-(E[F-w]||0)+256&255;return P},o=function(E,w,D){var L=[],F=E.length;L[0]=2;for(var U=0;U<F;U+=1)L[U+1]=E[U]-(D&&D[U]||0)+256&255;return L},l=function(E,w,D){var F=[],U=E.length;F[0]=3;for(var K=0;K<U;K+=1)F[K+1]=E[K]+256-((E[K-w]||0)+(D&&D[K]||0)>>>1)&255;return F},d=function(E,w,D){var U,K=[],J=E.length;K[0]=4;for(var ie=0;ie<J;ie+=1)U=h(E[ie-w]||0,D&&D[ie]||0,D&&D[ie-w]||0),K[ie+1]=E[ie]-U+256&255;return K},h=function(E,w,D){if(E===w&&w===D)return E;var P=Math.abs(w-D),L=Math.abs(E-D),F=Math.abs(E+w-D-D);return P<=L&&P<=F?E:L<=F?w:D},g=function(){return[i,s,o,l,d]},v=function(E){var w=E.map(function(D){return D.reduce(function(P,L){return P+Math.abs(L)},0)});return w.indexOf(Math.min.apply(null,w))};n.processPNG=function(E,w,D,P){var L,F,U,K,J,ie,_e,fe,oe,Be,tt,ne,te,xe,ve,Ve=this.decode.FLATE_DECODE,Ze="";if(this.__addimage__.isArrayBuffer(E)&&(E=new Uint8Array(E)),this.__addimage__.isArrayBufferView(E)){if(E=(U=new yk(E)).imgData,F=U.bits,L=U.colorSpace,J=U.colors,-1!==[4,6].indexOf(U.colorType)){if(8===U.bits){oe=(fe=32==U.pixelBitlength?new Uint32Array(U.decodePixels().buffer):16==U.pixelBitlength?new Uint16Array(U.decodePixels().buffer):new Uint8Array(U.decodePixels().buffer)).length,tt=new Uint8Array(oe*U.colors),Be=new Uint8Array(oe);var ut,Ye=U.pixelBitlength-U.bits;for(xe=0,ve=0;xe<oe;xe++){for(te=fe[xe],ut=0;ut<Ye;)tt[ve++]=te>>>ut&255,ut+=U.bits;Be[xe]=te>>>ut&255}}if(16===U.bits){oe=(fe=new Uint32Array(U.decodePixels().buffer)).length,tt=new Uint8Array(oe*(32/U.pixelBitlength)*U.colors),Be=new Uint8Array(oe*(32/U.pixelBitlength)),ne=U.colors>1,xe=0,ve=0;for(var Tt=0;xe<oe;)te=fe[xe++],tt[ve++]=te>>>0&255,ne&&(tt[ve++]=te>>>16&255,te=fe[xe++],tt[ve++]=te>>>0&255),Be[Tt++]=te>>>16&255;F=8}P!==n.image_compression.NONE?(E=t(tt,U.width*U.colors,U.colors,P),_e=t(Be,U.width,1,P)):(E=tt,_e=Be,Ve=void 0)}if(3===U.colorType&&(L=this.color_spaces.INDEXED,ie=U.palette,U.transparency.indexed)){var It=U.transparency.indexed,wn=0;for(xe=0,oe=It.length;xe<oe;++xe)wn+=It[xe];if((wn/=255)==oe-1&&-1!==It.indexOf(0))K=[It.indexOf(0)];else if(wn!==oe){for(fe=U.decodePixels(),Be=new Uint8Array(fe.length),xe=0,oe=fe.length;xe<oe;xe++)Be[xe]=It[fe[xe]];_e=t(Be,U.width,1)}}var $=function(he){var me;switch(he){case n.image_compression.FAST:me=11;break;case n.image_compression.MEDIUM:me=13;break;case n.image_compression.SLOW:me=14;break;default:me=12}return me}(P);return Ve===this.decode.FLATE_DECODE&&(Ze="/Predictor "+$+" "),Ze+="/Colors "+J+" /BitsPerComponent "+F+" /Columns "+U.width,(this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),(_e&&this.__addimage__.isArrayBuffer(_e)||this.__addimage__.isArrayBufferView(_e))&&(_e=this.__addimage__.arrayBufferToBinaryString(_e)),{alias:D,data:E,index:w,filter:Ve,decodeParameters:Ze,transparency:K,palette:ie,sMask:_e,predictor:$,width:U.width,height:U.height,bitsPerComponent:F,colorSpace:L}}}})(gr.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new Mw(e),o=s.width,l=s.height,d=[];s.decodeAndBlitFrameRGBA(0,d);var h={data:d,width:o,height:l},g=new Nw(100).encode(h,100);return n.processJPEG.call(this,g,t,r,i)},n.processGIF87A=n.processGIF89A}(gr.API),yc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},yc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[n]()}catch(t){vi.log("bit decode error:"+t)}},yc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var d=this.palette[s>>7-l&1];this.data[o+4*l]=d.blue,this.data[o+4*l+1]=d.green,this.data[o+4*l+2]=d.red,this.data[o+4*l+3]=255}0!==t&&(this.pos+=4-t)}},yc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,d=15&s,h=this.palette[s>>4];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*i+1>=this.width)break;this.data[o+4]=(h=this.palette[d]).blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}0!==e&&(this.pos+=4-e)}},yc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==n&&(this.pos+=4-n)}},yc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,h=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=(s>>10&e)/e*255|0,this.data[g+1]=l,this.data[g+2]=o,this.data[g+3]=h}this.pos+=n}},yc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,d=(o>>5&t)/t*255|0,g=i*this.width*4+4*s;this.data[g]=(o>>11)/e*255|0,this.data[g+1]=d,this.data[g+2]=l,this.data[g+3]=255}this.pos+=n}},yc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},yc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=o}},yc.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new yc(e,!1),o=s.width,l=s.height,d={data:s.getData(),width:o,height:l},h=new Nw(100).encode(d,100);return n.processJPEG.call(this,h,t,r,i)}}(gr.API),hA.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new hA(e,!1),o=s.width,l=s.height,d={data:s.getData(),width:o,height:l},h=new Nw(100).encode(d,100);return n.processJPEG.call(this,h,t,r,i)}}(gr.API),gr.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,d=0,h=0;h<i;h+=4){var v=r[h+1],E=r[h+2],w=r[h+3];s[l++]=r[h],s[l++]=v,s[l++]=E,o[d++]=w}var D=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:D,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},gr.API.setLanguage=function(n){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]&&(this.internal.languageSettings.languageCode=n,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qm=(Eh=gr.API).getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,d=l.fof?l.fof:1,h=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=h.fof?h.fof:1,v=!1!==e.doKerning,E=0,w=n.length,D=0,P=l[0]||d,L=[];for(t=0;t<w;t++)r=n.charCodeAt(t),"function"==typeof i.metadata.widthOfString?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(E=v&&"object"===Ui(h[r])&&!isNaN(parseInt(h[r][D],10))?h[r][D]/g:0,L.push((l[r]||P)/d+E)),D=r;return L},lA=Eh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Eh.processArabic&&(n=Eh.processArabic(n)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(n,t,i)/t:Qm.apply(this,arguments).reduce(function(s,o){return s+o},0)},uA=function(n,e,t,r){for(var i=[],s=0,o=n.length,l=0;s!==o&&l+e[s]<t;)l+=e[s],s++;i.push(n.slice(0,s));var d=s;for(l=0;s!==o;)l+e[s]>r&&(i.push(n.slice(d,s)),l=0,d=s),l+=e[s],s++;return d!==s&&i.push(n.slice(d,s)),i},dA=function(n,e,t){t||(t={});var r,i,s,o,l,d,g=[],v=[g],E=t.textIndent||0,w=0,D=0,P=n.split(" "),L=Qm.apply(this,[" ",t])[0];if(d=-1===t.lineIndent?P[0].length+2:t.lineIndent||0){var F=Array(d).join(" "),U=[];P.map(function(J){(J=J.split(/\s*\n/)).length>1?U=U.concat(J.map(function(ie,_e){return(_e&&ie.length?"\n":"")+ie})):U.push(J[0])}),P=U,d=lA.apply(this,[F,t])}for(s=0,o=P.length;s<o;s++){var K=0;if(r=P[s],d&&"\n"==r[0]&&(r=r.substr(1),K=1),E+w+(D=(i=Qm.apply(this,[r,t])).reduce(function(J,ie){return J+ie},0))>e||K){if(D>e){for(l=uA.apply(this,[r,i,e-(E+w),e]),g.push(l.shift()),g=[l.pop()];l.length;)v.push([l.shift()]);D=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(J,ie){return J+ie},0)}else g=[r];v.push(g),E=D+d,w=L}else g.push(r),E+=w+D,w=L}return v.map(d?function(J,ie){return(ie?F:"")+J.join(" ")}:function(J){return J.join(" ")})},Eh.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var v=this.internal.getFont(g.fontName,g.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var l,d,h=[];for(l=0,d=r.length;l<d;l++)h=h.concat(dA.apply(this,[r[l],o,s]));return h},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(v){return"0x"+parseInt(v,10).toString(16)},o=n.__fontmetrics__.compress=function(v){var E,w,D,P,L=["{"];for(var F in v){if(E=v[F],isNaN(parseInt(F,10))?w="'"+F+"'":(F=parseInt(F,10),w=(w=s(F).slice(2)).slice(0,-1)+r[w.slice(-1)]),"number"==typeof E)E<0?(D=s(E).slice(3),P="-"):(D=s(E).slice(2),P=""),D=P+D.slice(0,-1)+r[D.slice(-1)];else{if("object"!==Ui(E))throw new Error("Don't know what to do with value type "+Ui(E)+".");D=o(E)}L.push(w+D)}return L.push("}"),L.join("")},l=n.__fontmetrics__.uncompress=function(v){if("string"!=typeof v)throw new Error("Invalid argument passed to uncompress.");for(var E,w,D,P,L={},F=1,U=L,K=[],J="",ie="",_e=v.length-1,fe=1;fe<_e;fe+=1)"'"==(P=v[fe])?E?(D=E.join(""),E=void 0):E=[]:E?E.push(P):"{"==P?(K.push([U,D]),U={},D=void 0):"}"==P?((w=K.pop())[0][w[1]]=U,D=void 0,U=w[0]):"-"==P?F=-1:void 0===D?t.hasOwnProperty(P)?(J+=t[P],D=parseInt(J,16)*F,F=1,J=""):J+=P:t.hasOwnProperty(P)?(ie+=t[P],U[D]=parseInt(ie,16)*F,F=1,D=void 0,ie=""):ie+=P;return L},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var E=v.font,w=g.Unicode[E.postScriptName];w&&(E.metadata.Unicode={},E.metadata.Unicode.widths=w.widths,E.metadata.Unicode.kerning=w.kerning);var D=h.Unicode[E.postScriptName];D&&(E.metadata.Unicode.encoding=D,E.encoding=D.codePages[0])}])}(gr.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var o,l,r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(i.postScriptName)?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");o=i,l=/^\x00\x01\x00\x00/.test(l=r)?e(l):e(Al(l)),o.metadata=n.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]}}])}(gr),function(n){function e(){return(pr.canvg?Promise.resolve(pr.canvg):Q.e(489).then(Q.bind(Q,6489))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}gr.API.addSvgAsImage=function(t,r,i,s,o,l,d,h){if(isNaN(r)||isNaN(i))throw vi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw vi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=o;var v=g.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,g.width,g.height);var E={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return e().then(function(D){return D.fromString(v,t,E)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(D){return D.render(E)}).then(function(){w.addImage(g.toDataURL("image/jpeg",1),r,i,s,o,d,h)})}}(),gr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},gr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),d=[],h=0,g=0,v=0;function E(D,P){var L,F=!1;for(L=0;L<D.length;L+=1)D[L]===P&&(F=!0);return F}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,"reset"===n||!0===e){var w=l.length;for(v=0;v<w;v+=1)t[l[v]].value=t[l[v]].defaultValue,t[l[v]].explicitSet=!1}if("object"===Ui(n))for(i in n)if(s=n[i],E(l,i)&&void 0!==s){if("boolean"===t[i].type&&"boolean"==typeof s)t[i].value=s;else if("name"===t[i].type&&E(t[i].valueSet,s))t[i].value=s;else if("integer"===t[i].type&&Number.isInteger(s))t[i].value=s;else if("array"===t[i].type){for(h=0;h<s.length;h+=1)if(r=!0,1===s[h].length&&"number"==typeof s[h][0])d.push(String(s[h]-1));else if(s[h].length>1){for(g=0;g<s[h].length;g+=1)"number"!=typeof s[h][g]&&(r=!1);!0===r&&d.push([s[h][0]-1,s[h][1]-1].join(" "))}t[i].value="["+d.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var D,P=[];for(D in t)!0===t[D].explicitSet&&P.push("name"===t[D].type?"/"+D+" /"+t[D].value:"/"+D+" "+t[D].value);0!==P.length&&this.internal.write("/ViewerPreferences\n<<\n"+P.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+o.length+l.length+i.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+l+d),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(gr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var l,d=o.metadata.Unicode.widths,h=["","0","00","000","0000"],g=[""],v=0,E=s.length;v<E;++v){if(l=o.metadata.characterToGlyph(s.charCodeAt(v)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(v),-1==d.indexOf(l)&&(d.push(l),d.push([parseInt(o.metadata.widthOfGlyph(l),10)])),"0"==l)return g.join("");l=l.toString(16),g.push(h[4-l.length],l)}return g.join("")},r=function(s){var o,l,d,h,g,v,E;for(g="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",d=[],v=0,E=(l=Object.keys(s).sort(function(w,D){return w-D})).length;v<E;v++)o=l[v],d.length>=100&&(g+="\n"+d.length+" beginbfchar\n"+d.join("\n")+"\nendbfchar",d=[]),null!=s[o]&&"function"==typeof s[o].toString&&(h=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+h+">"));return d.length&&(g+="\n"+d.length+" beginbfchar\n"+d.join("\n")+"\nendbfchar\n"),g+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(s){!function(o){var l=o.font,d=o.out,h=o.newObject,g=o.putStream;if(l.metadata instanceof n.API.TTFFont&&"Identity-H"===l.encoding){for(var v=l.metadata.Unicode.widths,E=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),w="",D=0;D<E.length;D++)w+=String.fromCharCode(E[D]);var P=h();g({data:w,addLength1:!0,objectId:P}),d("endobj");var L=h();g({data:r(l.metadata.toUnicode),addLength1:!0,objectId:L}),d("endobj");var F=h();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+ru(l.fontName)),d("/FontFile2 "+P+" 0 R"),d("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),d("/Flags "+l.metadata.flags),d("/StemV "+l.metadata.stemV),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d(">>"),d("endobj");var U=h();d("<<"),d("/Type /Font"),d("/BaseFont /"+ru(l.fontName)),d("/FontDescriptor "+F+" 0 R"),d("/W "+n.API.PDFObject.convert(v)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+l.encoding+")"),d(">>"),d(">>"),d("endobj"),l.objectNumber=h(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+L+" 0 R"),d("/BaseFont /"+ru(l.fontName)),d("/Encoding /"+l.encoding),d("/DescendantFonts ["+U+" 0 R]"),d(">>"),d("endobj"),l.isAlreadyPutted=!0}}(s)}]),e.events.push(["putFont",function(s){!function(o){var l=o.font,d=o.out,h=o.newObject,g=o.putStream;if(l.metadata instanceof n.API.TTFFont&&"WinAnsiEncoding"===l.encoding){for(var v=l.metadata.rawData,E="",w=0;w<v.length;w++)E+=String.fromCharCode(v[w]);var D=h();g({data:E,addLength1:!0,objectId:D}),d("endobj");var P=h();g({data:r(l.metadata.toUnicode),addLength1:!0,objectId:P}),d("endobj");var L=h();d("<<"),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d("/StemV "+l.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+D+" 0 R"),d("/Flags 96"),d("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),d("/FontName /"+ru(l.fontName)),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d(">>"),d("endobj"),l.objectNumber=h();for(var F=0;F<l.metadata.hmtx.widths.length;F++)l.metadata.hmtx.widths[F]=parseInt(l.metadata.hmtx.widths[F]*(1e3/l.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+ru(l.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),d("endobj"),l.isAlreadyPutted=!0}}(s)}]);var i=function(s){var o,l=s.text||"",d=s.x,h=s.y,g=s.options||{},v=s.mutex||{},E=v.pdfEscape,w=v.activeFontKey,D=v.fonts,P=w,L="",F=0,U="",K=D[P].encoding;if("Identity-H"!==D[P].encoding)return{text:l,x:d,y:h,options:g,mutex:v};for(U=l,P=w,Array.isArray(l)&&(U=l[0]),F=0;F<U.length;F+=1)D[P].metadata.hasOwnProperty("cmap")&&(o=D[P].metadata.cmap.unicode.codeMap[U[F].charCodeAt(0)]),o||U[F].charCodeAt(0)<256&&D[P].metadata.hasOwnProperty("Unicode")?L+=U[F]:L+="";var J="";return parseInt(P.slice(1))<14||"WinAnsiEncoding"===K?J=E(L,P).split("").map(function(ie){return ie.charCodeAt(0).toString(16)}).join(""):"Identity-H"===K&&(J=t(L,D[P])),v.isHex=!0,{text:J,x:d,y:h,options:g,mutex:v}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],d={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var h=0;for(h=0;h<o.length;h+=1)Array.isArray(o[h])&&3===o[h].length?l.push([i(Object.assign({},d,{text:o[h][0]})).text,o[h][1],o[h][2]]):l.push(i(Object.assign({},d,{text:o[h]})).text);s.text=l}else s.text=i(Object.assign({},d,{text:o})).text}])}(gr),function(n){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(gr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,l,d,h,g,v=e,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],F=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,K=0;this.__bidiEngine__={};var J=function(ne){var te=ne.charCodeAt(),xe=te>>8,ve=P[xe];return void 0!==ve?v[256*ve+(255&te)]:252===xe||253===xe?"AL":F.test(xe)?"L":8===xe?"R":"N"},ie=function(ne){for(var te,xe=0;xe<ne.length;xe++){if("L"===(te=J(ne.charAt(xe))))return!1;if("R"===te)return!0}return!1},_e=function(ne,te,xe,ve){var Ve,Ze,ut,Ye,Tt=te[ve];switch(Tt){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"N":case"AN":break;case"EN":U&&(Tt="AN");break;case"AL":U=!0,Tt="R";break;case"WS":case"BN":Tt="N";break;case"CS":ve<1||ve+1>=te.length||"EN"!==(Ve=xe[ve-1])&&"AN"!==Ve||"EN"!==(Ze=te[ve+1])&&"AN"!==Ze?Tt="N":U&&(Ze="AN"),Tt=Ze===Ve?Ze:"N";break;case"ES":Tt="EN"===(Ve=ve>0?xe[ve-1]:"B")&&ve+1<te.length&&"EN"===te[ve+1]?"EN":"N";break;case"ET":if(ve>0&&"EN"===xe[ve-1]){Tt="EN";break}if(U){Tt="N";break}for(ut=ve+1,Ye=te.length;ut<Ye&&"ET"===te[ut];)ut++;Tt=ut<Ye&&"EN"===te[ut]?"EN":"N";break;case"NSM":if(o&&!l){for(Ye=te.length,ut=ve+1;ut<Ye&&"NSM"===te[ut];)ut++;if(ut<Ye){var It=ne[ve];if(Ve=te[ut],(It>=1425&&It<=2303||64286===It)&&("R"===Ve||"AL"===Ve)){Tt="R";break}}}Tt=ve<1||"B"===(Ve=te[ve-1])?"N":xe[ve-1];break;case"B":U=!1,i=!0,Tt=K;break;case"S":s=!0,Tt="N"}return Tt},fe=function(ne,te,xe){var ve=ne.split("");return xe&&oe(ve,xe,{hiLevel:K}),ve.reverse(),te&&te.reverse(),ve.join("")},oe=function(ne,te,xe){var ve,Ve,Ze,ut,Ye,Tt=-1,It=ne.length,wn=0,$=[],he=K?w:E,me=[];for(U=!1,i=!1,s=!1,Ve=0;Ve<It;Ve++)me[Ve]=J(ne[Ve]);for(Ze=0;Ze<It;Ze++){if(Ye=wn,$[Ze]=_e(ne,me,$,Ze),ve=240&(wn=he[Ye][D[$[Ze]]]),te[Ze]=ut=he[wn&=15][5],ve>0)if(16===ve){for(Ve=Tt;Ve<Ze;Ve++)te[Ve]=1;Tt=-1}else Tt=-1;if(he[wn][6])-1===Tt&&(Tt=Ze);else if(Tt>-1){for(Ve=Tt;Ve<Ze;Ve++)te[Ve]=ut;Tt=-1}"B"===me[Ze]&&(te[Ze]=0),xe.hiLevel|=ut}s&&function(Me,je,ot){for(var dt=0;dt<ot;dt++)if("S"===Me[dt]){je[dt]=K;for(var _t=dt-1;_t>=0&&"WS"===Me[_t];_t--)je[_t]=K}}(me,te,It)},Be=function(ne,te,xe,ve,Ve){if(!(Ve.hiLevel<ne)){if(1===ne&&1===K&&!i)return te.reverse(),void(xe&&xe.reverse());for(var Ze,ut,Ye,Tt,It=te.length,wn=0;wn<It;){if(ve[wn]>=ne){for(Ye=wn+1;Ye<It&&ve[Ye]>=ne;)Ye++;for(Tt=wn,ut=Ye-1;Tt<ut;Tt++,ut--)Ze=te[Tt],te[Tt]=te[ut],te[ut]=Ze,xe&&(Ze=xe[Tt],xe[Tt]=xe[ut],xe[ut]=Ze);wn=Ye}wn++}}},tt=function(ne,te,xe){var ve=ne.split(""),Ve={hiLevel:K};return xe||(xe=[]),oe(ve,xe,Ve),function(Ze,ut,Ye){if(0!==Ye.hiLevel&&g)for(var Tt,It=0;It<Ze.length;It++)1===ut[It]&&(Tt=L.indexOf(Ze[It]))>=0&&(Ze[It]=L[Tt+1])}(ve,xe,Ve),Be(2,ve,te,xe,Ve),Be(1,ve,te,xe,Ve),ve.join("")};return this.__bidiEngine__.doBidiReorder=function(ne,te,xe){if(function(Ve,Ze){if(Ze)for(var ut=0;ut<Ve.length;ut++)Ze[ut]=ut;void 0===l&&(l=ie(Ve)),void 0===h&&(h=ie(Ve))}(ne,te),o||!d||h)if(o&&d&&l^h)K=l?1:0,ne=fe(ne,te,xe);else if(!o&&d&&h)K=l?1:0,ne=tt(ne,te,xe),ne=fe(ne,te);else if(!o||l||d||h){if(o&&!d&&l^h)ne=fe(ne,te),l?(K=0,ne=tt(ne,te,xe)):(K=1,ne=tt(ne,te,xe),ne=fe(ne,te));else if(o&&l&&!d&&h)K=1,ne=tt(ne,te,xe),ne=fe(ne,te);else if(!o&&!d&&l^h){var ve=g;l?(K=1,ne=tt(ne,te,xe),K=0,g=!1,ne=tt(ne,te,xe),g=ve):(K=0,ne=tt(ne,te,xe),ne=fe(ne,te),K=1,g=!1,ne=tt(ne,te,xe),g=ve,ne=fe(ne,te))}}else K=0,ne=tt(ne,te,xe);else K=l?1:0,ne=tt(ne,te,xe);return ne},this.__bidiEngine__.setOptions=function(ne){ne&&(o=ne.isInputVisual,d=ne.isOutputVisual,l=ne.isInputRtl,h=ne.isOutputRtl,g=ne.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=r.options||{},o=[];if(s.isInputVisual="boolean"!=typeof s.isInputVisual||s.isInputVisual,t.setOptions(s),"[object Array]"===Object.prototype.toString.call(i)){var l=0;for(o=[],l=0;l<i.length;l+=1)"[object Array]"===Object.prototype.toString.call(i[l])?o.push([t.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([t.doBidiReorder(i[l])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(gr),gr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ou(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new xk(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new q0(this.contents),this.head=new fA(this),this.name=new yA(this),this.cmap=new Xm(this),this.toUnicode={},this.hhea=new pA(this),this.maxp=new vA(this),this.hmtx=new bA(this),this.post=new mA(this),this.os2=new gA(this),this.loca=new Ek(this),this.glyf=new bk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,d,h;for(h=[],o=0,l=(d=this.bbox).length;o<l;o++)h.push(Math.round(d[o]*this.scaleFactor));return h}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),0!=(32768&(t=i>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(s=this.familyClass)||2===s||3===s||4===s||5===s||7===s,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*e},n}();var vc,ou=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,l,d;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^d)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*l+d},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var r,i,s;for(s=[],r=0,i=e.length;r<i;r++)s.push(this.writeByte(e[r]));return s},n}(),q0=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,l,d,h,g,v,E,w,D,P;for(P in w=Object.keys(t).length,d=Math.log(2),v=16*Math.floor(Math.log(w)/d),o=Math.floor(v/d),g=16*w-v,(i=new ou).writeInt(this.scalarType),i.writeShort(w),i.writeShort(v),i.writeShort(o),i.writeShort(g),h=i.pos+16*w,l=null,D=[],t)for(E=t[P],i.writeString(P),i.writeInt(n(E)),i.writeInt(h),i.writeInt(E.length),D=D.concat(E),"head"===P&&(l=h),h+=E.length;h%4;)D.push(0),h++;return i.write(D),r=2981146554-n(i.data),i.pos=l+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=kw.call(t);t.length%4;)t.push(0);for(s=new ou(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),vk={}.hasOwnProperty,Xc=function(n,e){for(var t in e)vk.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};vc=function(){function n(e){var t;this.file=e,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var fA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ou).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),G0=function(){function n(e,t){var r,i,s,o,l,d,h,g,v,E,w,D,P,L,F,U,K;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(w=e.readUInt16(),E=w/2,e.pos+=6,s=function(){var J,ie;for(ie=[],d=J=0;0<=E?J<E:J>E;d=0<=E?++J:--J)ie.push(e.readUInt16());return ie}(),e.pos+=2,P=function(){var J,ie;for(ie=[],d=J=0;0<=E?J<E:J>E;d=0<=E?++J:--J)ie.push(e.readUInt16());return ie}(),h=function(){var J,ie;for(ie=[],d=J=0;0<=E?J<E:J>E;d=0<=E?++J:--J)ie.push(e.readUInt16());return ie}(),g=function(){var J,ie;for(ie=[],d=J=0;0<=E?J<E:J>E;d=0<=E?++J:--J)ie.push(e.readUInt16());return ie}(),i=(this.length-e.pos+this.offset)/2,l=function(){var J,ie;for(ie=[],d=J=0;0<=i?J<i:J>i;d=0<=i?++J:--J)ie.push(e.readUInt16());return ie}(),d=F=0,K=s.length;F<K;d=++F)for(L=s[d],r=U=D=P[d];D<=L?U<=L:U>=L;r=D<=L?++U:--U)0===g[d]?o=r+h[d]:0!==(o=l[g[d]/2+(r-D)-(E-d)]||0)&&(o+=h[d]),this.codeMap[r]=65535&o}e.pos=v}return n.encode=function(e,t){var r,i,s,o,l,d,h,g,v,E,w,D,P,L,F,U,K,ie,_e,fe,oe,Be,tt,ne,te,xe,ve,Ve,Ze,ut,Ye,Tt,It,wn,$,he,me,Me,je,ot,dt,_t,dn,cn,Rn;switch(ve=new ou,o=Object.keys(e).sort(function(zn,Sr){return zn-Sr}),t){case"macroman":for(P=0,L=function(){var zn=[];for(D=0;D<256;++D)zn.push(0);return zn}(),U={0:0},s={},Ve=0,Tt=o.length;Ve<Tt;Ve++)null==U[_t=e[i=o[Ve]]]&&(U[_t]=++P),s[i]={old:e[i],new:U[e[i]]},L[i]=U[e[i]];return ve.writeUInt16(1),ve.writeUInt16(0),ve.writeUInt32(12),ve.writeUInt16(0),ve.writeUInt16(262),ve.writeUInt16(0),ve.write(L),{charMap:s,subtable:ve.data,maxGlyphID:P+1};case"unicode":for(te=[],v=[],K=0,U={},r={},F=h=null,Ze=0,It=o.length;Ze<It;Ze++)null==U[ie=e[i=o[Ze]]]&&(U[ie]=++K),r[i]={old:ie,new:U[ie]},l=U[ie]-i,null!=F&&l===h||(F&&v.push(F),te.push(i),h=l),F=i;for(F&&v.push(F),v.push(65535),te.push(65535),tt=2*(Be=te.length),oe=2*Math.pow(Math.log(Be)/Math.LN2,2),E=Math.log(oe/2)/Math.LN2,fe=2*Be-oe,d=[],_e=[],w=[],D=ut=0,wn=te.length;ut<wn;D=++ut){if(g=v[D],65535===(ne=te[D])){d.push(0),_e.push(0);break}if(ne-(xe=r[ne].new)>=32768)for(d.push(0),_e.push(2*(w.length+Be-D)),i=Ye=ne;ne<=g?Ye<=g:Ye>=g;i=ne<=g?++Ye:--Ye)w.push(r[i].new);else d.push(xe-ne),_e.push(0)}for(ve.writeUInt16(3),ve.writeUInt16(1),ve.writeUInt32(12),ve.writeUInt16(4),ve.writeUInt16(16+8*Be+2*w.length),ve.writeUInt16(0),ve.writeUInt16(tt),ve.writeUInt16(oe),ve.writeUInt16(E),ve.writeUInt16(fe),ot=0,$=v.length;ot<$;ot++)ve.writeUInt16(i=v[ot]);for(ve.writeUInt16(0),dt=0,he=te.length;dt<he;dt++)ve.writeUInt16(i=te[dt]);for(dn=0,me=d.length;dn<me;dn++)ve.writeUInt16(l=d[dn]);for(cn=0,Me=_e.length;cn<Me;cn++)ve.writeUInt16(_e[cn]);for(Rn=0,je=w.length;Rn<je;Rn++)ve.writeUInt16(P=w[Rn]);return{charMap:r,subtable:ve.data,maxGlyphID:K+1}}},n}(),Xm=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new G0(t,this.offset),this.tables.push(r),r.isUnicode&&null==this.unicode&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return null==r&&(r="macroman"),i=G0.encode(t,r),(s=new ou).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),pA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),gA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),mA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=function(){var l,d,h;for(h=[],o=l=0,d=this.file.maxp.numGlyphs;0<=d?l<d:l>d;o=0<=d?++l:--l)h.push(t.readUInt32());return h}.call(this)}},e}(),_A=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},yA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,l,d,h,g,v,E,w;for(t.pos=this.offset,t.readShort(),r=t.readShort(),d=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+d+t.readShort()});for(h={},o=v=0,E=i.length;v<E;o=++v)t.pos=(s=i[o]).offset,g=t.readString(s.length),l=new _A(g,s),null==h[w=s.nameID]&&(h[w]=[]),h[s.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),vA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),bA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,l,d,h;for(t.pos=this.offset,this.metrics=[],r=0,d=this.file.hhea.numberOfMetrics;0<=d?r<d:r>d;r=0<=d?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,v;for(v=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)v.push(t.readInt16());return v}(),this.widths=function(){var g,v,E,w;for(w=[],g=0,v=(E=this.metrics).length;g<v;g++)w.push(E[g].advance);return w}.call(this),i=this.widths[this.widths.length-1],h=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)h.push(this.widths.push(i));return h},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),kw=[].slice,bk=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,l,d,h,g,v,E;return t in this.cache?this.cache[t]:(r=this.file.contents,i=(o=this.file.loca).indexOf(t),0===(s=o.lengthOf(t))?this.cache[t]=null:(r.pos=this.offset+i,l=(d=new ou(r.read(s))).readShort(),g=d.readShort(),E=d.readShort(),h=d.readShort(),v=d.readShort(),this.cache[t]=-1===l?new Ik(d,g,E,h,v):new wk(d,l,g,E,h,v),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,l,d,h;for(l=[],o=[],d=0,h=r.length;d<h;d++)s=t[r[d]],o.push(l.length),s&&(l=l.concat(s.encode(i)));return o.push(l.length),{table:l,offsets:o}},e}(),wk=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Ik=function(){function n(e,t,r,i,s){var o,l;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ou(kw.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Ek=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Xc(e,vc),e.prototype.tag="loca",e.prototype.parse=function(t){var i;return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<i.length;++l)if(i[l]=s,o<r.length&&r[o]==l){++o,i[l]=s;var h=this.offsets[l+1]-this.offsets[l];h>0&&(s+=h)}for(var g=new Array(4*i.length),v=0;v<i.length;++v)g[4*v+3]=255&i[v],g[4*v+2]=(65280&i[v])>>8,g[4*v+1]=(16711680&i[v])>>16,g[4*v]=(4278190080&i[v])>>24;return g},e}(),xk=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)e[t]=i[s[t]];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,l,d;for(i={},o=0,l=e.length;o<l;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)null!=(r=i[s])&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in d=this.glyphsFor(t))i[s]=r=d[s];return i},n.prototype.encode=function(e,t){var r,i,s,o,d,h,g,v,E,w,D,P,L,F;for(i in r=Xm.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),w={0:0},F=r.charMap)w[(d=F[i]).old]=d.new;for(D in E=r.maxGlyphID,o)D in w||(w[D]=E++);return g=function(U){var K,J;for(K in J={},U)J[U[K]]=K;return J}(w),v=Object.keys(g).sort(function(U,K){return U-K}),P=function(){var U,K,J;for(J=[],U=0,K=v.length;U<K;U++)J.push(g[v[U]]);return J}(),s=this.font.glyf.encode(o,P,w),h=this.font.loca.encode(s.offsets,P),L={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n}();gr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var i,s;if(Array.isArray(t))return"["+function(){var l,d,h;for(h=[],l=0,d=t.length;l<d;l++)h.push(e.convert(t[l]));return h}().join(" ")+"]";if("string"==typeof t)return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(t)){for(i in s=["<<"],t)s.push("/"+i+" "+e.convert(t[i]));return s.push(">>"),s.join("\n")}return""+t},e}();const Sk=gr,wA={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let K0;const Ak=new Uint8Array(16);function Ck(){if(!K0&&(K0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!K0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return K0(Ak)}const Fo=[];for(let n=0;n<256;++n)Fo.push((n+256).toString(16).slice(1));const Dk=function Tk(n,e,t){if(wA.randomUUID&&!e&&!n)return wA.randomUUID();const r=(n=n||{}).random||(n.rng||Ck)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function IA(n,e=0){return(Fo[n[e+0]]+Fo[n[e+1]]+Fo[n[e+2]]+Fo[n[e+3]]+"-"+Fo[n[e+4]]+Fo[n[e+5]]+"-"+Fo[n[e+6]]+Fo[n[e+7]]+"-"+Fo[n[e+8]]+Fo[n[e+9]]+"-"+Fo[n[e+10]]+Fo[n[e+11]]+Fo[n[e+12]]+Fo[n[e+13]]+Fo[n[e+14]]+Fo[n[e+15]]).toLowerCase()}(r)};function au(...n){const e=(0,Zf.yG)(n);return(0,Mo.D)(n,e)}var Z0=Q(6451),Pw=Q(3099);function bc(n,e){return(0,Ca.e)((t,r)=>{let i=null,s=0,o=!1;const l=()=>o&&!i&&r.complete();t.subscribe((0,Zo.x)(r,d=>{i?.unsubscribe();let h=0;const g=s++;(0,lS.Xf)(n(d,g)).subscribe(i=(0,Zo.x)(r,v=>r.next(e?e(d,v,g,h++):v),()=>{i=null,l()}))},()=>{o=!0,l()}))})}function EA(n,e,t,r,i){return(s,o)=>{let l=t,d=e,h=0;s.subscribe((0,Zo.x)(o,g=>{const v=h++;d=l?n(d,g,v):(l=!0,g),r&&o.next(d)},i&&(()=>{l&&o.next(d),o.complete()})))}}function Ip(n,e){return(0,Ca.e)(EA(n,e,arguments.length>=2,!0))}function Rw(n,e=uh.y){return n=n??xA,(0,Ca.e)((t,r)=>{let i,s=!0;t.subscribe((0,Zo.x)(r,o=>{const l=e(o);(s||!n(i,l))&&(s=!1,i=l,r.next(o))}))})}function xA(n,e){return n===e}var ln=Q(2198),Qs=Q(2011),Ow=(Q(9568),Q(3942)),Ga=Q(4859),mt=Q(5861),Ni=Q(9681),X=Q(2090),wc=Q(1877);const Lw="@firebase/database";let CA="";function ar(n){CA=n}class Mk{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,X.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,X.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Nk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,X.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const TA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Mk(e)}}catch{}return new Nk},Ic=TA("localStorage"),Bw=TA("sessionStorage"),cu=new wc.Yd("@firebase/database"),Jm=function(){let n=1;return function(){return n++}}(),xs=function(n){const e=(0,X.dS)(n),t=new X.gQ;t.update(e);const r=t.digest();return X.US.encodeByteArray(r)},Y0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Y0.apply(null,r):e+="object"==typeof r?(0,X.Wl)(r):r,e+=" "}return e};let sd=null,Uw=!0;const DA=function(n,e){(0,X.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(cu.logLevel=wc.in.VERBOSE,sd=cu.log.bind(cu),e&&Bw.set("logging_enabled",!0)):"function"==typeof n?sd=n:(sd=null,Bw.remove("logging_enabled"))},co=function(...n){if(!0===Uw&&(Uw=!1,null===sd&&!0===Bw.get("logging_enabled")&&DA(!0)),sd){const e=Y0.apply(null,n);sd(e)}},xp=function(n){return function(...e){co(n,...e)}},Q0=function(...n){const e="FIREBASE INTERNAL ERROR: "+Y0(...n);cu.error(e)},Jc=function(...n){const e=`FIREBASE FATAL ERROR: ${Y0(...n)}`;throw cu.error(e),new Error(e)},Yo=function(...n){const e="FIREBASE WARNING: "+Y0(...n);cu.warn(e)},X0=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},od="[MIN_NAME]",lu="[MAX_NAME]",xh=function(n,e){if(n===e)return 0;if(n===od||e===lu)return-1;if(e===od||n===lu)return 1;{const t=Vw(n),r=Vw(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},J0=function(n,e){return n===e?0:n<e?-1:1},Sp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,X.Wl)(e))},ev=function(n){if("object"!=typeof n||null===n)return(0,X.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,X.Wl)(e[r]),t+=":",t+=ev(n[e[r]]);return t+="}",t},jw=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function vo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Ap=function(n){(0,X.hu)(!X0(n),"Invalid JSON number");const r=1023;let i,s,o,l,d;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=l+r,o=Math.round(n*Math.pow(2,52-l)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const h=[];for(d=52;d;d-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(d=11;d;d-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();const g=h.join("");let v="";for(d=0;d<64;d+=8){let E=parseInt(g.substr(d,8),2).toString(16);1===E.length&&(E="0"+E),v+=E}return v.toLowerCase()},Ok=new RegExp("^-?(0*)\\d{1,10}$"),Vw=function(n){if(Ok.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Cp=function(n){try{n()}catch(e){setTimeout(()=>{throw Yo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},n_=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Lk{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Yo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class R8{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(co("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yo(e)}}let tv=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const r_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Tp="websocket",OA="long_polling";class Ww{constructor(e,t,r,i,s=!1,o="",l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ic.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ic.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function LA(n,e,t){let r;if((0,X.hu)("string"==typeof e,"typeof type must == string"),(0,X.hu)("object"==typeof t,"typeof params must == object"),e===Tp)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==OA)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function jk(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return vo(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Vk{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,X.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,X.p$)(this.counters_)}}const rv={},$w={};function qw(n){const e=n.toString();return rv[e]||(rv[e]=new Vk),rv[e]}class zk{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ad{constructor(e,t,r,i,s,o,l){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xp(e),this.stats_=qw(t),this.urlFn=d=>(this.appCheckToken&&(d.ac=this.appCheckToken),LA(t,OA,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,X.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zw((...s)=>{const[o,l,d,h,g]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=l,this.password=d;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ad.forceAllow_=!0}static forceDisallow(){ad.forceDisallow_=!0}static isAvailable(){return!((0,X.Yr)()||!ad.forceAllow_&&(ad.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,X.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,X.h$)(t),i=jw(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,X.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,X.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Zw{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,X.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Jm(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Zw.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){co("frame writing exception"),l.stack&&co(l.stack),co(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||co("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,X.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{co("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let ov=null;typeof MozWebSocket<"u"?ov=MozWebSocket:typeof WebSocket<"u"&&(ov=WebSocket);let Dp=(()=>{class n{constructor(t,r,i,s,o,l,d){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xp(this.connId),this.stats_=qw(r),this.connURL=n.connectionURL_(r,l,d,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const l={v:"5"};return!(0,X.Yr)()&&typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),s&&(l.ac=s),o&&(l.p=o),LA(t,Tp,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ic.set("previous_websocket_failure",!0);try{let i;if((0,X.Yr)()){i={headers:{"User-Agent":`Firebase/5/${CA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,l=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;l&&(i.proxy={origin:l})}this.mySock=new ov(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ov&&!n.forceDisallow_}static previouslyFailed(){return Ic.isInMemoryStorage||!0===Ic.get("previous_websocket_failure")}markConnectionHealthy(){Ic.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,X.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,X.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,X.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=jw(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),HA=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ad,Dp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Dp&&Dp.isAvailable();let i=r&&!Dp.previouslyFailed();if(t.webSocketOnly&&(r||Yo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Dp];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class uv{constructor(e,t,r,i,s,o,l,d,h,g){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=d,this.onKill_=h,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xp("c:"+this.id+":"),this.transportManager_=new HA(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=n_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Sp("t",e),r=Sp("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Sp("t",e),r=Sp("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Sp("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Q0("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Q0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Yo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),n_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):n_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ic.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ZA{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class YA{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,X.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,X.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class uu extends YA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,X.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uu}getInitialEvent(e){return(0,X.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ji{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function mi(){return new ji("")}function Wr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function cd(n){return n.pieces_.length-n.pieceNum_}function $i(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ji(n.pieces_,e)}function Xw(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Sh(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Jw(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ji(e,0)}function ds(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ji)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ji(t,0)}function Kr(n){return n.pieceNum_>=n.pieces_.length}function Qo(n,e){const t=Wr(n),r=Wr(e);if(null===t)return e;if(t===r)return Qo($i(n),$i(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rP(n,e){const t=Sh(n,0),r=Sh(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=xh(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function e2(n,e){if(cd(n)!==cd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ec(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(cd(n)>cd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class iP{constructor(e,t){this.errorPrefix_=t,this.parts_=Sh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,X.ug)(this.parts_[r]);t2(this)}}function t2(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ah(n))}function Ah(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class n2 extends YA{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n2}getInitialEvent(e){return(0,X.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const dv=1e3;let fv,Ch=(()=>{class n extends ZA{constructor(t,r,i,s,o,l,d,h){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=d,this.authOverride_=h,this.id=n.nextPersistentConnectionId_++,this.log_=xp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dv,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!(0,X.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");n2.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&uu.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,X.Wl)(o)),(0,X.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new X.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:l=>{const d=l.d;"ok"===l.s?r.resolve(d):r.reject(d)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),(0,X.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,X.hu)(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const d={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(l).set(o,d),this.connected_&&this.sendListen_(d)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,d=>{const h=d.d,g=d.s;n.warnOnListenWarnings_(h,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",d),"ok"!==g&&this.removeListen_(i,s),t.onComplete&&t.onComplete(g,h))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,X.r3)(t,"w")){const i=(0,X.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Yo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,X.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,X.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,l=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,X.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const l={p:r,d:i};void 0!==o&&(l.h=o),this.outstandingPuts_.push({action:t,request:l,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,X.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Q0("Unrecognized action received from server: "+(0,X.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,X.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dv,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dv),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,mt.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,l=t.lastSessionId;let d=!1,h=null;const g=function(){h?h.close():(d=!0,s())};t.realtime_={close:g,sendRequest:function(w){(0,X.hu)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(w)}};const E=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[w,D]=yield Promise.all([t.authTokenProvider_.getToken(E),t.appCheckTokenProvider_.getToken(E)]);d?co("getToken() completed but was canceled"):(co("getToken() completed. Creating connection."),t.authToken_=w&&w.accessToken,t.appCheckToken_=D&&D.token,h=new uv(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,P=>{Yo(P+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},l))}catch(w){t.log_("Failed to get token: "+w),d||(t.repoInfo_.nodeAdmin&&Yo(w),g())}}})()}interrupt(t){co("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){co("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,X.xb)(this.interruptReasons_)&&(this.reconnectDelay_=dv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>ev(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new ji(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){co("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){co("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,X.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+CA.replace(/\./g,"-")]=1,(0,X.uI)()?t["framework.cordova"]=1:(0,X.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=uu.getInstance().currentlyOnline();return(0,X.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jr(e,t)}}class hv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Jr(od,e),i=new Jr(od,t);return 0!==this.compare(r,i)}minPost(){return Jr.MIN}}class nC extends hv{static get __EMPTY_NODE(){return fv}static set __EMPTY_NODE(e){fv=e}compare(e,t){return xh(e.name,t.name)}isDefinedOn(e){throw(0,X.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jr.MIN}maxPost(){return new Jr(lu,fv)}makePost(e,t){return(0,X.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jr(e,fv)}toString(){return".key"}}const Tl=new nC;class ld{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let gv,xc=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??pa.EMPTY_NODE,this.right=o??pa.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return pa.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return pa.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class pa{constructor(e,t=pa.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new pa(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xc.BLACK,null,null))}remove(e){return new pa(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ld(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ld(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ld(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ld(this.root_,null,this.comparator_,!0,e)}}function iC(n,e){return xh(n.name,e.name)}function pv(n,e){return xh(n,e)}pa.EMPTY_NODE=new class rC{copy(e,t,r,i,s){return this}insert(e,t,r){return new xc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const uP=function(n){return"number"==typeof n?"number:"+Ap(n):"string:"+n},r2=function(n){if(n.isLeafNode()){const e=n.val();(0,X.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,X.r3)(e,".sv"),"Priority must be a string or number.")}else(0,X.hu)(n===gv||n.isEmpty(),"priority of unexpected type.");(0,X.hu)(n===gv||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sC,oC,aC,Mp=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,X.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),r2(this.priorityNode_)}static set __childrenNodeConstructor(t){sC=t}static get __childrenNodeConstructor(){return sC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Kr(t)?this:".priority"===Wr(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Wr(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,X.hu)(".priority"!==i||1===cd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild($i(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+uP(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Ap(this.value_):this.value_,this.lazyHash_=xs(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,X.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,X.hu)(s>=0,"Unknown leaf type: "+r),(0,X.hu)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const li=new class i2 extends hv{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?xh(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jr.MIN}maxPost(){return new Jr(lu,new Mp("[PRIORITY-POST]",aC))}makePost(e,t){const r=oC(e);return new Jr(t,new Mp("[PRIORITY-POST]",r))}toString(){return".priority"}},hP=Math.log(2);class s2{constructor(e){this.count=parseInt(Math.log(e+1)/hP,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ud=function(n,e,t,r){n.sort(e);const i=function(d,h){const g=h-d;let v,E;if(0===g)return null;if(1===g)return v=n[d],E=t?t(v):v,new xc(E,v.node,xc.BLACK,null,null);{const w=parseInt(g/2,10)+d,D=i(d,w),P=i(w+1,h);return v=n[w],E=t?t(v):v,new xc(E,v.node,xc.BLACK,D,P)}},l=function(d){let h=null,g=null,v=n.length;const E=function(D,P){const L=v-D,F=v;v-=D;const U=i(L+1,F),K=n[L],J=t?t(K):K;w(new xc(J,K.node,P,null,U))},w=function(D){h?(h.left=D,h=D):(g=D,h=D)};for(let D=0;D<d.count;++D){const P=d.nextBitIsOne(),L=Math.pow(2,d.count-(D+1));P?E(L,xc.BLACK):(E(L,xc.BLACK),E(L,xc.RED))}return g}(new s2(n.length));return new pa(r||e,l)};let o2;const Np={};class du{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,X.hu)(Np&&li,"ChildrenNode.ts has not been loaded"),o2=o2||new du({".priority":Np},{".priority":li}),o2}get(e){const t=(0,X.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof pa?t:null}hasIndex(e){return(0,X.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,X.hu)(e!==Tl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Jr.Wrap);let l,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();l=i?ud(r,e.getCompare()):Np;const d=e.toString(),h=Object.assign({},this.indexSet_);h[d]=e;const g=Object.assign({},this.indexes_);return g[d]=l,new du(g,h)}addToIndexes(e,t){const r=(0,X.UI)(this.indexes_,(i,s)=>{const o=(0,X.DV)(this.indexSet_,s);if((0,X.hu)(o,"Missing index implementation for "+s),i===Np){if(o.isDefinedOn(e.node)){const l=[],d=t.getIterator(Jr.Wrap);let h=d.getNext();for(;h;)h.name!==e.name&&l.push(h),h=d.getNext();return l.push(e),ud(l,o.getCompare())}return Np}{const l=t.get(e.name);let d=i;return l&&(d=d.remove(new Jr(e.name,l))),d.insert(e,e.node)}});return new du(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,X.UI)(this.indexes_,i=>{if(i===Np)return i;{const s=t.get(e.name);return s?i.remove(new Jr(e.name,s)):i}});return new du(r,this.indexSet_)}}let dd,Cr=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&r2(this.priorityNode_),this.children_.isEmpty()&&(0,X.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dd||(dd=new n(new pa(pv),null,du.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dd}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?dd:r}}getChild(t){const r=Wr(t);return null===r?this:this.getImmediateChild(r).getChild($i(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,X.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Jr(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const l=s.isEmpty()?dd:this.priorityNode_;return new n(s,l,o)}}updateChild(t,r){const i=Wr(t);if(null===i)return r;{(0,X.hu)(".priority"!==Wr(t)||1===cd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild($i(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(li,(l,d)=>{r[l]=d.val(t),i++,o&&n.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!t&&o&&s<2*i){const l=[];for(const d in r)l[d]=r[d];return l}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+uP(this.getPriority().val())+":"),this.forEachChild(li,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":xs(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Jr(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Jr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Jr(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Jr.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Jr.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===o_?-1:0}withIndex(t){if(t===Tl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Tl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(li),s=r.getIterator(li);let o=i.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=s.getNext()}return null===o&&null===l}return!1}return!1}}resolveIndex_(t){return t===Tl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const o_=new class fP extends Cr{constructor(){super(new pa(pv),Cr.EMPTY_NODE,du.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Cr.EMPTY_NODE}isEmpty(){return!1}};function ms(n,e=null){if(null===n)return Cr.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,X.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Mp(n,ms(e));if(n instanceof Array){let t=Cr.EMPTY_NODE;return vo(n,(r,i)=>{if((0,X.r3)(n,r)&&"."!==r.substring(0,1)){const s=ms(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(ms(e))}{const t=[];let r=!1;if(vo(n,(o,l)=>{if("."!==o.substring(0,1)){const d=ms(l);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new Jr(o,d)))}}),0===t.length)return Cr.EMPTY_NODE;const s=ud(t,iC,o=>o.name,pv);if(r){const o=ud(t,li.getCompare());return new Cr(s,ms(e),new du({".priority":o},{".priority":li}))}return new Cr(s,ms(e),du.Default)}}Object.defineProperties(Jr,{MIN:{value:new Jr(od,Cr.EMPTY_NODE)},MAX:{value:new Jr(lu,o_)}}),nC.__EMPTY_NODE=Cr.EMPTY_NODE,Mp.__childrenNodeConstructor=Cr,function lP(n){gv=n}(o_),function dP(n){aC=n}(o_),function s_(n){oC=n}(ms);class a_ extends hv{constructor(e){super(),this.indexPath_=e,(0,X.hu)(!Kr(e)&&".priority"!==Wr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?xh(e.name,t.name):s}makePost(e,t){const r=ms(e),i=Cr.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jr(t,i)}maxPost(){const e=Cr.EMPTY_NODE.updateChild(this.indexPath_,o_);return new Jr(lu,e)}toString(){return Sh(this.indexPath_,0).join("/")}}const a2=new class lC extends hv{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?xh(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jr.MIN}maxPost(){return Jr.MAX}makePost(e,t){const r=ms(e);return new Jr(t,r)}toString(){return".value"}};function uC(n){return{type:"value",snapshotNode:n}}function c_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Th(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Dh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class l_{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,X.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Th(t,l)):(0,X.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(c_(t,r)):o.trackChildChange(Dh(t,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(li,(i,s)=>{t.hasChild(i)||r.trackChildChange(Th(i,s))}),t.isLeafNode()||t.forEachChild(li,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Dh(i,s,o))}else r.trackChildChange(c_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Cr.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Mh{constructor(e){this.indexedFilter_=new l_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Mh.getStartPost_(e),this.endPost_=Mh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Jr(t,r))||(r=Cr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Cr.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Cr.EMPTY_NODE);const s=this;return t.forEachChild(li,(o,l)=>{s.matches(new Jr(o,l))||(i=i.updateImmediateChild(o,Cr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class pP{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Mh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Jr(t,r))||(r=Cr.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Cr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Cr.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l)){if(!this.withinDirectionalEnd(l))break;i=i.updateImmediateChild(l.name,l.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Cr.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,Cr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const v=this.index_.getCompare();o=(E,w)=>v(w,E)}else o=this.index_.getCompare();const l=e;(0,X.hu)(l.numChildren()===this.limit_,"");const d=new Jr(t,r),h=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(l.hasChild(t)){const v=l.getImmediateChild(t);let E=i.getChildAfterChild(this.index_,h,this.reverse_);for(;null!=E&&(E.name===t||l.hasChild(E.name));)E=i.getChildAfterChild(this.index_,E,this.reverse_);const w=null==E?1:o(E,d);if(g&&!r.isEmpty()&&w>=0)return s?.trackChildChange(Dh(t,r,v)),l.updateImmediateChild(t,r);{s?.trackChildChange(Th(t,v));const P=l.updateImmediateChild(t,Cr.EMPTY_NODE);return null!=E&&this.rangedFilter_.matches(E)?(s?.trackChildChange(c_(E.name,E.node)),P.updateImmediateChild(E.name,E.node)):P}}return r.isEmpty()?e:g&&o(h,d)>=0?(null!=s&&(s.trackChildChange(Th(h.name,h.node)),s.trackChildChange(c_(t,r))),l.updateImmediateChild(t,r).updateImmediateChild(h.name,Cr.EMPTY_NODE)):e}}class mv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=li}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:od}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,X.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===li}copy(){const e=new mv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function u_(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function _v(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function d_(n,e){const t=n.copy();return t.index_=e,t}function pC(n){const e={};if(n.isDefault())return e;let t;if(n.index_===li?t="$priority":n.index_===a2?t="$value":n.index_===Tl?t="$key":((0,X.hu)(n.index_ instanceof a_,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,X.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,X.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,X.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,X.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,X.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function c2(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==li&&(e.i=n.index_.toString()),e}class h_ extends ZA{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,X.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=h_.getListenId_(e,r),l={};this.listens_[o]=l;const d=pC(e._queryParams);this.restRequest_(s+".json",d,(h,g)=>{let v=g;if(404===h&&(v=null,h=null),null===h&&this.onDataUpdate_(s,v,!1,r),(0,X.DV)(this.listens_,o)===l){let E;E=h?401===h?"permission_denied":"rest_error:"+h:"ok",i(E,null)}})}unlisten(e,t){const r=h_.getListenId_(e,t);delete this.listens_[r]}get(e){const t=pC(e._queryParams),r=e._path.toString(),i=new X.BH;return this.restRequest_(r+".json",t,(s,o)=>{let l=o;404===s&&(l=null,s=null),null===s?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,X.xO)(t);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&4===l.readyState){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let d=null;if(l.status>=200&&l.status<300){try{d=(0,X.cI)(l.responseText)}catch{Yo("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,d)}else 401!==l.status&&404!==l.status&&Yo("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}class yP{constructor(){this.rootNode_=Cr.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function f_(){return{value:null,children:new Map}}function kp(n,e,t){if(Kr(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Wr(e);n.children.has(r)||n.children.set(r,f_()),kp(n.children.get(r),e=$i(e),t)}}function Bo(n,e){if(Kr(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(li,(r,i)=>{kp(n,new ji(r),i)}),Bo(n,e)}}if(n.children.size>0){const t=Wr(e);return e=$i(e),n.children.has(t)&&Bo(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function hd(n,e,t){null!==n.value?t(e,n.value):function vP(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{hd(i,new ji(e.toString()+"/"+r),t)})}class bP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&vo(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class mC{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new bP(e);const r=1e4+2e4*Math.random();n_(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;vo(e,(i,s)=>{s>0&&(0,X.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),n_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Xo||(Xo={})),Xo))();function u2(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class g_{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Xo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Kr(this.path)){if(null!=this.affectedTree.value)return(0,X.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ji(e));return new g_(mi(),t,this.revert)}}return(0,X.hu)(Wr(this.path)===e,"operationForChild called for unrelated child."),new g_($i(this.path),this.affectedTree,this.revert)}}class m_{constructor(e,t){this.source=e,this.path=t,this.type=Xo.LISTEN_COMPLETE}operationForChild(e){return Kr(this.path)?new m_(this.source,mi()):new m_(this.source,$i(this.path))}}class Nh{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Xo.OVERWRITE}operationForChild(e){return Kr(this.path)?new Nh(this.source,mi(),this.snap.getImmediateChild(e)):new Nh(this.source,$i(this.path),this.snap)}}class Pp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Xo.MERGE}operationForChild(e){if(Kr(this.path)){const t=this.children.subtree(new ji(e));return t.isEmpty()?null:t.value?new Nh(this.source,mi(),t.value):new Pp(this.source,mi(),t)}return(0,X.hu)(Wr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pp(this.source,$i(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Kr(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class _C{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function fd(n,e,t,r,i,s){const o=r.filter(l=>l.type===t);o.sort((l,d)=>function F8(n,e,t){if(null==e.childName||null==t.childName)throw(0,X.g5)("Should only compare child_ events.");const r=new Jr(e.childName,e.snapshotNode),i=new Jr(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,l,d)),o.forEach(l=>{const d=function d2(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,l,s);i.forEach(h=>{h.respondsTo(l.type)&&e.push(h.createEvent(d,n.query_))})})}function __(n,e){return{eventCache:n,serverCache:e}}function y_(n,e,t,r){return __(new Dl(e,t,r),n.serverCache)}function h2(n,e,t,r){return __(n.eventCache,new Dl(e,t,r))}function hu(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function kh(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yv;class hs{constructor(e,t=(()=>(yv||(yv=new pa(J0)),yv))()){this.value=e,this.children=t}static fromObject(e){let t=new hs(null);return vo(e,(r,i)=>{t=t.set(new ji(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:mi(),value:this.value};if(Kr(e))return null;{const r=Wr(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue($i(e),t);return null!=s?{path:ds(new ji(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Kr(e))return this;{const t=Wr(e),r=this.children.get(t);return null!==r?r.subtree($i(e)):new hs(null)}}set(e,t){if(Kr(e))return new hs(t,this.children);{const r=Wr(e),s=(this.children.get(r)||new hs(null)).set($i(e),t),o=this.children.insert(r,s);return new hs(this.value,o)}}remove(e){if(Kr(e))return this.children.isEmpty()?new hs(null):new hs(null,this.children);{const t=Wr(e),r=this.children.get(t);if(r){const i=r.remove($i(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new hs(null):new hs(this.value,s)}return this}}get(e){if(Kr(e))return this.value;{const t=Wr(e),r=this.children.get(t);return r?r.get($i(e)):null}}setTree(e,t){if(Kr(e))return t;{const r=Wr(e),s=(this.children.get(r)||new hs(null)).setTree($i(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new hs(this.value,o)}}fold(e){return this.fold_(mi(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ds(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,mi(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Kr(e))return null;{const s=Wr(e),o=this.children.get(s);return o?o.findOnPath_($i(e),ds(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,mi(),t)}foreachOnPath_(e,t,r){if(Kr(e))return this;{this.value&&r(t,this.value);const i=Wr(e),s=this.children.get(i);return s?s.foreachOnPath_($i(e),ds(t,i),r):new hs(null)}}foreach(e){this.foreach_(mi(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ds(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class el{constructor(e){this.writeTree_=e}static empty(){return new el(new hs(null))}}function vv(n,e,t){if(Kr(e))return new el(new hs(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Qo(i,e);return s=s.updateChild(o,t),new el(n.writeTree_.set(i,s))}{const i=new hs(t),s=n.writeTree_.setTree(e,i);return new el(s)}}}function p2(n,e,t){let r=n;return vo(t,(i,s)=>{r=vv(r,ds(e,i),s)}),r}function vC(n,e){if(Kr(e))return el.empty();{const t=n.writeTree_.setTree(e,new hs(null));return new el(t)}}function g2(n,e){return null!=pd(n,e)}function pd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Qo(t.path,e)):null}function m2(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(li,(r,i)=>{e.push(new Jr(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Jr(r,i.value))}),e}function gd(n,e){if(Kr(e))return n;{const t=pd(n,e);return new el(null!=t?new hs(t):n.writeTree_.subtree(e))}}function bv(n){return n.writeTree_.isEmpty()}function Ph(n,e){return bC(mi(),n.writeTree_,e)}function bC(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,X.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=bC(ds(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ds(n,".priority"),r)),t}}function wv(n,e){return y2(e,n)}function xC(n,e){if(n.snap)return Ec(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ec(ds(n.path,t),e))return!0;return!1}function EP(n){return n.visible}function AC(n,e,t){let r=el.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let l;if(s.snap)Ec(t,o)?(l=Qo(t,o),r=vv(r,l,s.snap)):Ec(o,t)&&(l=Qo(o,t),r=vv(r,mi(),s.snap.getChild(l)));else{if(!s.children)throw(0,X.g5)("WriteRecord should have .snap or .children");if(Ec(t,o))l=Qo(t,o),r=p2(r,l,s.children);else if(Ec(o,t))if(l=Qo(o,t),Kr(l))r=p2(r,mi(),s.children);else{const d=(0,X.DV)(s.children,Wr(l));if(d){const h=d.getChild($i(l));r=vv(r,mi(),h)}}}}}return r}function xP(n,e,t,r,i){if(r||i){const s=gd(n.visibleWrites,e);return!i&&bv(s)?t:i||null!=t||g2(s,mi())?Ph(AC(n.allWrites,function(h){return(h.visible||i)&&(!r||!~r.indexOf(h.writeId))&&(Ec(h.path,e)||Ec(e,h.path))},e),t||Cr.EMPTY_NODE):null}{const s=pd(n.visibleWrites,e);if(null!=s)return s;{const o=gd(n.visibleWrites,e);return bv(o)?t:null!=t||g2(o,mi())?Ph(o,t||Cr.EMPTY_NODE):null}}}function _2(n,e,t,r){return xP(n.writeTree,n.treePath,e,t,r)}function TC(n,e){return function CC(n,e,t){let r=Cr.EMPTY_NODE;const i=pd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(li,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=gd(n.visibleWrites,e);return t.forEachChild(li,(o,l)=>{const d=Ph(gd(s,new ji(o)),l);r=r.updateImmediateChild(o,d)}),m2(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return m2(gd(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function SP(n,e,t,r){return function B8(n,e,t,r,i){(0,X.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ds(e,t);if(g2(n.visibleWrites,s))return null;{const o=gd(n.visibleWrites,s);return bv(o)?i.getChild(t):Ph(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Rh(n,e){return function j8(n,e){return pd(n.visibleWrites,e)}(n.writeTree,ds(n.treePath,e))}function Iv(n,e,t){return function U8(n,e,t,r){const i=ds(e,t),s=pd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Ph(gd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function v_(n,e){return y2(ds(n.treePath,e),n.writeTree)}function y2(n,e){return{treePath:n,writeTree:e}}class DC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,X.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,X.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Dh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Th(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,c_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,X.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Dh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Ev=new class W8{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class xv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Dl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Iv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:kh(this.viewCache_),s=function H8(n,e,t,r,i,s){return function V8(n,e,t,r,i,s,o){let l;const d=gd(n.visibleWrites,e),h=pd(d,mi());if(null!=h)l=h;else{if(null==t)return[];l=Ph(d,t)}if(l=l.withIndex(o),l.isEmpty()||l.isLeafNode())return[];{const g=[],v=o.getCompare(),E=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let w=E.getNext();for(;w&&g.length<i;)0!==v(w,r)&&g.push(w),w=E.getNext();return g}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function DP(n,e,t,r,i,s){const o=e.eventCache;if(null!=Rh(r,t))return e;{let l,d;if(Kr(t))if((0,X.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=kh(e),v=TC(r,h instanceof Cr?h:Cr.EMPTY_NODE);l=n.filter.updateFullNode(e.eventCache.getNode(),v,s)}else{const h=_2(r,kh(e));l=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const h=Wr(t);if(".priority"===h){(0,X.hu)(1===cd(t),"Can't have a priority with additional path components");const g=o.getNode();d=e.serverCache.getNode();const v=SP(r,t,g,d);l=null!=v?n.filter.updatePriority(g,v):o.getNode()}else{const g=$i(t);let v;if(o.isCompleteForChild(h)){d=e.serverCache.getNode();const E=SP(r,t,o.getNode(),d);v=null!=E?o.getNode().getImmediateChild(h).updateChild(g,E):o.getNode().getImmediateChild(h)}else v=Iv(r,h,e.serverCache);l=null!=v?n.filter.updateChild(o.getNode(),h,v,g,i,s):o.getNode()}}return y_(e,l,o.isFullyInitialized()||Kr(t),n.filter.filtersNodes())}}function Sv(n,e,t,r,i,s,o,l){const d=e.serverCache;let h;const g=o?n.filter:n.filter.getIndexedFilter();if(Kr(t))h=g.updateFullNode(d.getNode(),r,null);else if(g.filtersNodes()&&!d.isFiltered()){const w=d.getNode().updateChild(t,r);h=g.updateFullNode(d.getNode(),w,null)}else{const w=Wr(t);if(!d.isCompleteForPath(t)&&cd(t)>1)return e;const D=$i(t),L=d.getNode().getImmediateChild(w).updateChild(D,r);h=".priority"===w?g.updatePriority(d.getNode(),L):g.updateChild(d.getNode(),w,L,D,Ev,null)}const v=h2(e,h,d.isFullyInitialized()||Kr(t),g.filtersNodes());return DP(n,v,t,i,new xv(i,v,s),l)}function Rp(n,e,t,r,i,s,o){const l=e.eventCache;let d,h;const g=new xv(i,e,s);if(Kr(t))h=n.filter.updateFullNode(e.eventCache.getNode(),r,o),d=y_(e,h,!0,n.filter.filtersNodes());else{const v=Wr(t);if(".priority"===v)h=n.filter.updatePriority(e.eventCache.getNode(),r),d=y_(e,h,l.isFullyInitialized(),l.isFiltered());else{const E=$i(t),w=l.getNode().getImmediateChild(v);let D;if(Kr(E))D=r;else{const P=g.getCompleteChild(v);D=null!=P?".priority"===Xw(E)&&P.getChild(Jw(E)).isEmpty()?P:P.updateChild(E,r):Cr.EMPTY_NODE}d=w.equals(D)?e:y_(e,n.filter.updateChild(l.getNode(),v,D,E,g,o),l.isFullyInitialized(),n.filter.filtersNodes())}}return d}function MC(n,e){return n.eventCache.isCompleteForChild(e)}function MP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function NC(n,e,t,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h,d=e;h=Kr(t)?r:new hs(null).setTree(t,r);const g=e.serverCache.getNode();return h.children.inorderTraversal((v,E)=>{if(g.hasChild(v)){const D=MP(0,e.serverCache.getNode().getImmediateChild(v),E);d=Sv(n,d,new ji(v),D,i,s,o,l)}}),h.children.inorderTraversal((v,E)=>{const w=!e.serverCache.isCompleteForChild(v)&&null===E.value;if(!g.hasChild(v)&&!w){const P=MP(0,e.serverCache.getNode().getImmediateChild(v),E);d=Sv(n,d,new ji(v),P,i,s,o,l)}}),d}class K8{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new l_(r.getIndex()),s=function gP(n){return n.loadsAllData()?new l_(n.getIndex()):n.hasLimit()?new pP(n):new Mh(n)}(r);this.processor_=function AP(n){return{filter:n}}(s);const o=t.serverCache,l=t.eventCache,d=i.updateFullNode(Cr.EMPTY_NODE,o.getNode(),null),h=s.updateFullNode(Cr.EMPTY_NODE,l.getNode(),null),g=new Dl(d,o.isFullyInitialized(),i.filtersNodes()),v=new Dl(h,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=__(v,g),this.eventGenerator_=new _C(this.query_)}get query(){return this.query_}}function PC(n,e){const t=kh(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Kr(e)&&!t.getImmediateChild(Wr(e)).isEmpty())?t.getChild(e):null}function RP(n){return 0===n.eventRegistrations_.length}function RC(n,e,t){const r=[];if(t){(0,X.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Av(n,e,t,r){e.type===Xo.MERGE&&null!==e.source.queryId&&((0,X.hu)(kh(n.viewCache_),"We should always have a full cache before handling merges"),(0,X.hu)(hu(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function $8(n,e,t,r,i){const s=new DC;let o,l;if(t.type===Xo.OVERWRITE){const h=t;h.source.fromUser?o=Rp(n,e,h.path,h.snap,r,i,s):((0,X.hu)(h.source.fromServer,"Unknown source."),l=h.source.tagged||e.serverCache.isFiltered()&&!Kr(h.path),o=Sv(n,e,h.path,h.snap,r,i,l,s))}else if(t.type===Xo.MERGE){const h=t;h.source.fromUser?o=function q8(n,e,t,r,i,s,o){let l=e;return r.foreach((d,h)=>{const g=ds(t,d);MC(e,Wr(g))&&(l=Rp(n,l,g,h,i,s,o))}),r.foreach((d,h)=>{const g=ds(t,d);MC(e,Wr(g))||(l=Rp(n,l,g,h,i,s,o))}),l}(n,e,h.path,h.children,r,i,s):((0,X.hu)(h.source.fromServer,"Unknown source."),l=h.source.tagged||e.serverCache.isFiltered(),o=NC(n,e,h.path,h.children,r,i,l,s))}else if(t.type===Xo.ACK_USER_WRITE){const h=t;o=h.revert?function kP(n,e,t,r,i,s){let o;if(null!=Rh(r,t))return e;{const l=new xv(r,e,i),d=e.eventCache.getNode();let h;if(Kr(t)||".priority"===Wr(t)){let g;if(e.serverCache.isFullyInitialized())g=_2(r,kh(e));else{const v=e.serverCache.getNode();(0,X.hu)(v instanceof Cr,"serverChildren would be complete if leaf node"),g=TC(r,v)}h=n.filter.updateFullNode(d,g,s)}else{const g=Wr(t);let v=Iv(r,g,e.serverCache);null==v&&e.serverCache.isCompleteForChild(g)&&(v=d.getImmediateChild(g)),h=null!=v?n.filter.updateChild(d,g,v,$i(t),l,s):e.eventCache.getNode().hasChild(g)?n.filter.updateChild(d,g,Cr.EMPTY_NODE,$i(t),l,s):d,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=_2(r,kh(e)),o.isLeafNode()&&(h=n.filter.updateFullNode(h,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Rh(r,mi()),y_(e,h,o,n.filter.filtersNodes())}}(n,e,h.path,r,i,s):function NP(n,e,t,r,i,s,o){if(null!=Rh(i,t))return e;const l=e.serverCache.isFiltered(),d=e.serverCache;if(null!=r.value){if(Kr(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Sv(n,e,t,d.getNode().getChild(t),i,s,l,o);if(Kr(t)){let h=new hs(null);return d.getNode().forEachChild(Tl,(g,v)=>{h=h.set(new ji(g),v)}),NC(n,e,t,h,i,s,l,o)}return e}{let h=new hs(null);return r.foreach((g,v)=>{const E=ds(t,g);d.isCompleteForPath(E)&&(h=h.set(g,d.getNode().getChild(E)))}),NC(n,e,t,h,i,s,l,o)}}(n,e,h.path,h.affectedTree,r,i,s)}else{if(t.type!==Xo.LISTEN_COMPLETE)throw(0,X.g5)("Unknown operation type: "+t.type);o=function G8(n,e,t,r,i){const s=e.serverCache;return DP(n,h2(e,s.getNode(),s.isFullyInitialized()||Kr(t),s.isFiltered()),t,r,Ev,i)}(n,e,t.path,r,s)}const d=s.getChanges();return function TP(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=hu(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(uC(hu(e)))}}(e,o,d),{viewCache:o,changes:d}}(n.processor_,i,e,t,r);return function CP(n,e){(0,X.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,X.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,X.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,LP(n,s.changes,s.viewCache.eventCache.getNode(),null)}function LP(n,e,t,r){return function yC(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function dC(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),fd(n,i,"child_removed",e,r,t),fd(n,i,"child_added",e,r,t),fd(n,i,"child_moved",s,r,t),fd(n,i,"child_changed",e,r,t),fd(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ga,nl;class OC{constructor(){this.views=new Map}}function b_(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,X.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Av(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(Av(o,e,t,r));return s}}function b2(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let l=_2(t,i?r:null),d=!1;l?d=!0:r instanceof Cr?(l=TC(t,r),d=!1):(l=Cr.EMPTY_NODE,d=!1);const h=__(new Dl(l,d,!1),new Dl(r,i,!1));return new K8(e,h)}return o}function w2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fu(n,e){let t=null;for(const r of n.views.values())t=t||PC(r,e);return t}function FC(n,e){return e._queryParams.loadsAllData()?Op(n):n.views.get(e._queryIdentifier)}function I2(n,e){return null!=FC(n,e)}function md(n){return null!=Op(n)}function Op(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let pu=1;class UC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new hs(null),this.pendingWriteTree_=function z8(){return{visibleWrites:el.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jC(n,e,t,r,i){return function wC(n,e,t,r,i){(0,X.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=vv(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Lh(n,new Nh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Oh(n,e,t=!1){const r=function IC(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function EC(n,e){const t=n.allWrites.findIndex(l=>l.writeId===e);(0,X.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const l=n.allWrites[o];l.visible&&(o>=t&&xC(l,r.path)?i=!1:Ec(r.path,l.path)&&(s=!0)),o--}return!!i&&(s?(function SC(n){n.visibleWrites=AC(n.allWrites,EP,mi()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=vC(n.visibleWrites,r.path):vo(r.children,d=>{n.visibleWrites=vC(n.visibleWrites,ds(r.path,d))}),!0))}(n.pendingWriteTree_,e)){let s=new hs(null);return null!=r.snap?s=s.set(mi(),!0):vo(r.children,o=>{s=s.set(new ji(o),!0)}),Lh(n,new g_(r.path,s,t))}return[]}function w_(n,e,t){return Lh(n,new Nh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function I_(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let l=[];if(o&&("default"===e._queryIdentifier||I2(o,e))){const d=function UP(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const l=md(n);if("default"===i)for(const[d,h]of n.views.entries())o=o.concat(RC(h,t,r)),RP(h)&&(n.views.delete(d),h.query._queryParams.loadsAllData()||s.push(h.query));else{const d=n.views.get(i);d&&(o=o.concat(RC(d,t,r)),RP(d)&&(n.views.delete(i),d.query._queryParams.loadsAllData()||s.push(d.query)))}return l&&!md(n)&&s.push(new(function FP(){return(0,X.hu)(ga,"Reference.ts has not been loaded"),ga}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function BP(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const h=d.removed;if(l=d.events,!i){const g=-1!==h.findIndex(E=>E._queryParams.loadsAllData()),v=n.syncPointTree_.findOnPath(s,(E,w)=>md(w));if(g&&!v){const E=n.syncPointTree_.subtree(s);if(!E.isEmpty()){const w=function Y8(n){return n.fold((e,t,r)=>{if(t&&md(t))return[Op(t)];{let i=[];return t&&(i=w2(t)),vo(r,(s,o)=>{i=i.concat(o)}),i}})}(E);for(let D=0;D<w.length;++D){const P=w[D],L=P.query,F=A2(n,P);n.listenProvider_.startListening(Tv(L),Fh(n,L),F.hashFn,F.onComplete)}}}!v&&h.length>0&&!r&&(g?n.listenProvider_.stopListening(Tv(e),null):h.forEach(E=>{const w=n.queryToTagMap.get(Bh(E));n.listenProvider_.stopListening(Tv(E),w)}))}!function Q8(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Bh(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,h)}return l}function zC(n,e,t,r){const i=Cv(n,r);if(null!=i){const s=C2(i),o=s.path,l=s.queryId,d=Qo(o,e);return T2(n,o,new Nh(u2(l),d,t))}return[]}function WC(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(E,w)=>{const D=Qo(E,i);s=s||fu(w,D),o=o||md(w)});let d,l=n.syncPointTree_.get(i);l?(o=o||md(l),s=s||fu(l,mi())):(l=new OC,n.syncPointTree_=n.syncPointTree_.set(i,l)),null!=s?d=!0:(d=!1,s=Cr.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((w,D)=>{const P=fu(D,mi());P&&(s=s.updateImmediateChild(w,P))}));const h=I2(l,e);if(!h&&!e._queryParams.loadsAllData()){const E=Bh(e);(0,X.hu)(!n.queryToTagMap.has(E),"View does not exist, but we have a tag");const w=function qC(){return pu++}();n.queryToTagMap.set(E,w),n.tagToQueryMap.set(w,E)}let v=function LC(n,e,t,r,i,s){const o=b2(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function tl(n,e){n.eventRegistrations_.push(e)}(o,t),function OP(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(li,(s,o)=>{r.push(c_(s,o))}),t.isFullyInitialized()&&r.push(uC(t.getNode())),LP(n,r,t.getNode(),e)}(o,t)}(l,e,t,wv(n.pendingWriteTree_,i),s,d);if(!h&&!o&&!r){const E=FC(l,e);v=v.concat(function zP(n,e,t){const r=e._path,i=Fh(n,e),s=A2(n,t),o=n.listenProvider_.startListening(Tv(e),i,s.hashFn,s.onComplete),l=n.syncPointTree_.subtree(r);if(i)(0,X.hu)(!md(l.value),"If we're adding a query, it shouldn't be shadowed");else{const d=l.fold((h,g,v)=>{if(!Kr(h)&&g&&md(g))return[Op(g).query];{let E=[];return g&&(E=E.concat(w2(g).map(w=>w.query))),vo(v,(w,D)=>{E=E.concat(D)}),E}});for(let h=0;h<d.length;++h){const g=d[h];n.listenProvider_.stopListening(Tv(g),Fh(n,g))}}return o}(n,e,E))}return v}function Lp(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,l)=>{const h=fu(l,Qo(o,e));if(h)return h});return xP(i,e,s,t,!0)}function Lh(n,e){return x2(e,n.syncPointTree_,null,wv(n.pendingWriteTree_,mi()))}function x2(n,e,t,r){if(Kr(n.path))return S2(n,e,t,r);{const i=e.get(mi());null==t&&null!=i&&(t=fu(i,mi()));let s=[];const o=Wr(n.path),l=n.operationForChild(o),d=e.children.get(o);if(d&&l){const h=t?t.getImmediateChild(o):null,g=v_(r,o);s=s.concat(x2(l,d,h,g))}return i&&(s=s.concat(b_(i,n,r,t))),s}}function S2(n,e,t,r){const i=e.get(mi());null==t&&null!=i&&(t=fu(i,mi()));let s=[];return e.children.inorderTraversal((o,l)=>{const d=t?t.getImmediateChild(o):null,h=v_(r,o),g=n.operationForChild(o);g&&(s=s.concat(S2(g,l,d,h)))}),i&&(s=s.concat(b_(i,n,r,t))),s}function A2(n,e){const t=e.query,r=Fh(n,t);return{hashFn:()=>(function PP(n){return n.viewCache_.serverCache.getNode()}(e)||Cr.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Z8(n,e,t){const r=Cv(n,t);if(r){const i=C2(r),s=i.path,o=i.queryId,l=Qo(s,e);return T2(n,s,new m_(u2(o),l))}return[]}(n,t._path,r):function VC(n,e){return Lh(n,new m_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Rk(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return I_(n,t,null,s)}}}}function Fh(n,e){const t=Bh(e);return n.queryToTagMap.get(t)}function Bh(n){return n._path.toString()+"$"+n._queryIdentifier}function Cv(n,e){return n.tagToQueryMap.get(e)}function C2(n){const e=n.indexOf("$");return(0,X.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ji(n.substr(0,e))}}function T2(n,e,t){const r=n.syncPointTree_.get(e);return(0,X.hu)(r,"Missing sync point for query tag that we're tracking"),b_(r,t,wv(n.pendingWriteTree_,e),null)}function Tv(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function E2(){return(0,X.hu)(nl,"Reference.ts has not been loaded"),nl}())(n._repo,n._path):n}class D2{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new D2(t)}node(){return this.node_}}class M2{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ds(this.path_,e);return new M2(this.syncTree_,t)}node(){return Lp(this.syncTree_,this.path_)}}const HP=function(n,e,t){return n&&"object"==typeof n?((0,X.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?J8(n[".sv"],e,t):"object"==typeof n[".sv"]?eB(n[".sv"],e):void(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},J8=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,X.hu)(!1,"Unexpected server value: "+n)},eB=function(n,e,t){n.hasOwnProperty("increment")||(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,X.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,X.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},WP=function(n,e,t,r){return Fp(e,new M2(t,n),r)},N2=function(n,e,t){return Fp(n,new D2(e),t)};function Fp(n,e,t){const r=n.getPriority().val(),i=HP(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,l=HP(o.getValue(),e,t);return l!==o.getValue()||i!==o.getPriority().val()?new Mp(l,ms(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Mp(i))),o.forEachChild(li,(l,d)=>{const h=Fp(d,e.getImmediateChild(l),t);h!==d&&(s=s.updateImmediateChild(l,h))}),s}}class k2{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Dv(n,e){let t=e instanceof ji?e:new ji(e),r=n,i=Wr(t);for(;null!==i;){const s=(0,X.DV)(r.node.children,i)||{children:{},childCount:0};r=new k2(i,r,s),t=$i(t),i=Wr(t)}return r}function _d(n){return n.node.value}function gu(n,e){n.node.value=e,Up(n)}function P2(n){return n.node.childCount>0}function Bp(n,e){vo(n.node.children,(t,r)=>{e(new k2(t,n,r))})}function GC(n,e,t,r){t&&!r&&e(n),Bp(n,i=>{GC(i,e,!0,r)}),t&&r&&e(n)}function Uh(n){return new ji(null===n.parent?n.name:Uh(n.parent)+"/"+n.name)}function Up(n){null!==n.parent&&function tB(n,e,t){const r=function R2(n){return void 0===_d(n)&&!P2(n)}(t),i=(0,X.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Up(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Up(n))}(n.parent,n.name,n)}const nB=/[\[\].#$\/\u0000-\u001F\u007F]/,rB=/[\[\].#$\u0000-\u001F\u007F]/,KC=10485760,E_=function(n){return"string"==typeof n&&0!==n.length&&!nB.test(n)},ZC=function(n){return"string"==typeof n&&0!==n.length&&!rB.test(n)},x_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!X0(n)||n&&"object"==typeof n&&(0,X.r3)(n,".sv")},Ml=function(n,e,t,r){r&&void 0===e||jp((0,X.gK)(n,"value"),e,t)},jp=function(n,e,t){const r=t instanceof ji?new iP(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ah(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ah(r)+" with contents = "+e.toString());if(X0(e))throw new Error(n+"contains "+e.toString()+" "+Ah(r));if("string"==typeof e&&e.length>KC/3&&(0,X.ug)(e)>KC)throw new Error(n+"contains a string greater than "+KC+" utf8 bytes "+Ah(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(vo(e,(o,l)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!E_(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ah(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function JA(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,X.ug)(e),t2(n)})(r,o),jp(n,l,r),function O8(n){const e=n.parts_.pop();n.byteLength_-=(0,X.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ah(r)+" in addition to actual children.")}},L2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,X.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];vo(e,(o,l)=>{const d=new ji(o);if(jp(i,l,ds(t,d)),".priority"===Xw(d)&&!x_(l))throw new Error(i+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(d)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Sh(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!E_(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(rP);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ec(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},F2=function(n,e,t){if(!t||void 0!==e){if(X0(e))throw new Error((0,X.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!x_(e))throw new Error((0,X.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},S_=function(n,e,t,r){if(!(r&&void 0===t||E_(t)))throw new Error((0,X.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vp=function(n,e,t,r){if(!(r&&void 0===t||ZC(t)))throw new Error((0,X.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},rl=function(n,e){if(".info"===Wr(e))throw new Error(n+" failed = Can't modify data under /.info/")},U2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!E_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ZC(n)}(t))throw new Error((0,X.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class j2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Mv(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!e2(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function QC(n,e,t){Mv(n,t),qP(n,r=>e2(r,e))}function Sc(n,e,t){Mv(n,t),qP(n,r=>Ec(r,e)||Ec(e,r))}function qP(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(GP(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function GP(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();sd&&co("event: "+t.toString()),Cp(r)}}}const XC="repo_interrupt";class sB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new j2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=f_(),this.transactionQueueTree_=new k2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function KP(n){const t=n.infoData_.getNode(new ji(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Nv(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:KP(n)})}function ZP(n,e,t,r,i){n.dataUpdateCount++;const s=new ji(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const d=(0,X.UI)(t,h=>ms(h));o=function HC(n,e,t,r){const i=Cv(n,r);if(i){const s=C2(i),o=s.path,l=s.queryId,d=Qo(o,e),h=hs.fromObject(t);return T2(n,o,new Pp(u2(l),d,h))}return[]}(n.serverSyncTree_,s,d,i)}else{const d=ms(t);o=zC(n.serverSyncTree_,s,d,i)}else if(r){const d=(0,X.UI)(t,h=>ms(h));o=function VP(n,e,t){const r=hs.fromObject(t);return Lh(n,new Pp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,d)}else{const d=ms(t);o=w_(n.serverSyncTree_,s,d)}let l=s;o.length>0&&(l=Jt(n,s)),Sc(n.eventQueue_,l,o)}function JC(n,e){eT(n,"connected",e),!1===e&&function a(n){B(n,"onDisconnectEvents");const e=Nv(n),t=f_();hd(n.onDisconnect_,mi(),(i,s)=>{const o=WP(i,s,n.serverSyncTree_,e);kp(t,i,o)});let r=[];hd(t,mi(),(i,s)=>{r=r.concat(w_(n.serverSyncTree_,i,s));const o=rs(n,i);Jt(n,o)}),n.onDisconnect_=f_(),Sc(n.eventQueue_,mi(),r)}(n)}function eT(n,e,t){const r=new ji("/.info/"+e),i=ms(t);n.infoData_.updateSnapshot(r,i);const s=w_(n.infoSyncTree_,r,i);Sc(n.eventQueue_,r,s)}function V2(n){return n.nextWriteId_++}function tT(n,e,t,r,i){B(n,"set",{path:e.toString(),value:t,priority:r});const s=Nv(n),o=ms(t,r),l=Lp(n.serverSyncTree_,e),d=N2(o,l,s),h=V2(n),g=jC(n.serverSyncTree_,e,d,h,!0);Mv(n.eventQueue_,g),n.server_.put(e.toString(),o.val(!0),(E,w)=>{const D="ok"===E;D||Yo("set at "+e+" failed: "+E);const P=Oh(n.serverSyncTree_,h,!D);Sc(n.eventQueue_,e,P),H(0,i,E,w)});const v=rs(n,e);Jt(n,v),Sc(n.eventQueue_,v,[])}function c(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Bo(n.onDisconnect_,e),H(0,t,r,i)})}function u(n,e,t,r){const i=ms(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&kp(n.onDisconnect_,e,i),H(0,r,s,o)})}function S(n,e,t){let r;r=".info"===Wr(e._path)?I_(n.infoSyncTree_,e,t):I_(n.serverSyncTree_,e,t),QC(n.eventQueue_,e._path,r)}function M(n){n.persistentConnection_&&n.persistentConnection_.interrupt(XC)}function B(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),co(t,...e)}function H(n,e,t,r){e&&Cp(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function De(n,e,t){return Lp(n.serverSyncTree_,e,t)||Cr.EMPTY_NODE}function $e(n,e=n.transactionQueueTree_){if(e||Ir(n,e),_d(e)){const t=ur(n,e);(0,X.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function St(n,e,t){const r=t.map(h=>h.currentWriteId),i=De(n,e,r);let s=i;const o=i.hash();for(let h=0;h<t.length;h++){const g=t[h];(0,X.hu)(0===g.status,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const v=Qo(e,g.path);s=s.updateChild(v,g.currentOutputSnapshotRaw)}const l=s.val(!0),d=e;n.server_.put(d.toString(),l,h=>{B(n,"transaction put response",{path:d.toString(),status:h});let g=[];if("ok"===h){const v=[];for(let E=0;E<t.length;E++)t[E].status=2,g=g.concat(Oh(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&v.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();Ir(n,Dv(n.transactionQueueTree_,e)),$e(n,n.transactionQueueTree_),Sc(n.eventQueue_,e,g);for(let E=0;E<v.length;E++)Cp(v[E])}else{if("datastale"===h)for(let v=0;v<t.length;v++)t[v].status=3===t[v].status?4:0;else{Yo("transaction at "+d.toString()+" failed: "+h);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=h}Jt(n,e)}},o)}(n,Uh(e),t)}else P2(e)&&Bp(e,t=>{$e(n,t)})}function Jt(n,e){const t=Wn(n,e),r=Uh(t);return function _n(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(l=>0===l.status).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const d=e[l],h=Qo(t,d.path);let v,g=!1;if((0,X.hu)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===d.status)g=!0,v=d.abortReason,i=i.concat(Oh(n.serverSyncTree_,d.currentWriteId,!0));else if(0===d.status)if(d.retryCount>=25)g=!0,v="maxretry",i=i.concat(Oh(n.serverSyncTree_,d.currentWriteId,!0));else{const E=De(n,d.path,o);d.currentInputSnapshot=E;const w=e[l].update(E.val());if(void 0!==w){jp("transaction failed: Data returned ",w,d.path);let D=ms(w);"object"==typeof w&&null!=w&&(0,X.r3)(w,".priority")||(D=D.updatePriority(E.getPriority()));const L=d.currentWriteId,F=Nv(n),U=N2(D,E,F);d.currentOutputSnapshotRaw=D,d.currentOutputSnapshotResolved=U,d.currentWriteId=V2(n),o.splice(o.indexOf(L),1),i=i.concat(jC(n.serverSyncTree_,d.path,U,d.currentWriteId,d.applyLocally)),i=i.concat(Oh(n.serverSyncTree_,L,!0))}else g=!0,v="nodata",i=i.concat(Oh(n.serverSyncTree_,d.currentWriteId,!0))}Sc(n.eventQueue_,t,i),i=[],g&&(e[l].status=2,setTimeout(e[l].unwatcher,Math.floor(0)),e[l].onComplete&&r.push("nodata"===v?()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot):()=>e[l].onComplete(new Error(v),!1,null)))}Ir(n,n.transactionQueueTree_);for(let l=0;l<r.length;l++)Cp(r[l]);$e(n,n.transactionQueueTree_)}(n,ur(n,t),r),r}function Wn(n,e){let t,r=n.transactionQueueTree_;for(t=Wr(e);null!==t&&void 0===_d(r);)r=Dv(r,t),t=Wr(e=$i(e));return r}function ur(n,e){const t=[];return Kt(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Kt(n,e,t){const r=_d(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Bp(e,i=>{Kt(n,i,t)})}function Ir(n,e){const t=_d(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,gu(e,t.length>0?t:void 0)}Bp(e,r=>{Ir(n,r)})}function rs(n,e){const t=Uh(Wn(n,e)),r=Dv(n.transactionQueueTree_,e);return function O2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Ss(n,i)}),Ss(n,r),GC(r,i=>{Ss(n,i)}),t}function Ss(n,e){const t=_d(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,X.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,X.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Oh(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?gu(e,void 0):t.length=s+1,Sc(n.eventQueue_,Uh(e),i);for(let o=0;o<r.length;o++)Cp(r[o])}}const YP=function(n,e){const t=bG(n),r=t.namespace;return"firebase.com"===t.domain&&Jc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Jc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ww(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ji(t.pathString)}},bG=function(n){let e="",t="",r="",i="",s="",o=!0,l="https",d=443;if("string"==typeof n){let h=n.indexOf("//");h>=0&&(l=n.substring(0,h-1),n=n.substring(h+2));let g=n.indexOf("/");-1===g&&(g=n.length);let v=n.indexOf("?");-1===v&&(v=n.length),e=n.substring(0,Math.min(g,v)),g<v&&(i=function uB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(g,v)));const E=function vG(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Yo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,v)));h=e.indexOf(":"),h>=0?(o="https"===l||"wss"===l,d=parseInt(e.substring(h+1),10)):h=e.length;const w=e.slice(0,h);if("localhost"===w.toLowerCase())t="localhost";else if(w.split(".").length<=2)t=w;else{const D=e.indexOf(".");r=e.substring(0,D).toLowerCase(),t=e.substring(D+1),s=r}"ns"in E&&(s=E.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}},dB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wG=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=dB.charAt(t%64),t=Math.floor(t/64);(0,X.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=dB.charAt(e[i]);return(0,X.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class hB{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,X.Wl)(this.snapshot.exportVal())}}class fB{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class QP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,X.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class pB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new X.BH;return c(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){rl("OnDisconnect.remove",this._path);const e=new X.BH;return u(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){rl("OnDisconnect.set",this._path),Ml("OnDisconnect.set",e,this._path,!1);const t=new X.BH;return u(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){rl("OnDisconnect.setWithPriority",this._path),Ml("OnDisconnect.setWithPriority",e,this._path,!1),F2("OnDisconnect.setWithPriority",t,!1);const r=new X.BH;return function f(n,e,t,r,i){const s=ms(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,l)=>{"ok"===o&&kp(n.onDisconnect_,e,s),H(0,i,o,l)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){rl("OnDisconnect.update",this._path),L2("OnDisconnect.update",e,this._path,!1);const t=new X.BH;return function p(n,e,t,r){if((0,X.xb)(t))return co("onDisconnect().update() called with empty data.  Don't do anything."),void H(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&vo(t,(o,l)=>{const d=ms(l);kp(n.onDisconnect_,ds(e,o),d)}),H(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ac{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Kr(this._path)?null:Xw(this._path)}get ref(){return new Nl(this._repo,this._path)}get _queryIdentifier(){const e=c2(this._queryParams),t=ev(e);return"{}"===t?"default":t}get _queryObject(){return c2(this._queryParams)}isEqual(e){if(!((e=(0,X.m9)(e))instanceof Ac))return!1;const t=this._repo===e._repo,r=e2(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function nP(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function nT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Tl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==od)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==lu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===li){if(null!=e&&!x_(e)||null!=t&&!x_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,X.hu)(n.getIndex()instanceof a_||n.getIndex()===a2,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Nl extends Ac{constructor(e,t){super(e,t,new mv,!1)}get parent(){const e=Jw(this._path);return null===e?null:new Nl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class A_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ji(e),r=C_(this.ref,e);return new A_(this._node.getChild(t),r,li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new A_(i,C_(this.ref,r),li)))}hasChild(e){const t=new ji(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gB(n,e){return(n=(0,X.m9)(n))._checkNotDeleted("ref"),void 0!==e?C_(n._root,e):n._root}function mB(n,e){(n=(0,X.m9)(n))._checkNotDeleted("refFromURL");const t=YP(e,n._repo.repoInfo_.nodeAdmin);U2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Jc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),gB(n,t.path.toString())}function C_(n,e){return null===Wr((n=(0,X.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Vp("child","path",t,!1)):Vp("child","path",e,!1),new Nl(n._repo,ds(n._path,e));var t}function XP(n,e){n=(0,X.m9)(n),rl("set",n._path),Ml("set",e,n._path,!1);const t=new X.BH;return tT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function AG(n,e){L2("update",e,n._path,!1);const t=new X.BH;return function lB(n,e,t,r){B(n,"update",{path:e.toString(),value:t});let i=!0;const s=Nv(n),o={};if(vo(t,(l,d)=>{i=!1,o[l]=WP(ds(e,l),ms(d),n.serverSyncTree_,s)}),i)co("update() called with empty data.  Don't do anything."),H(0,r,"ok",void 0);else{const l=V2(n),d=function jP(n,e,t,r){!function IP(n,e,t,r){(0,X.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=p2(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=hs.fromObject(t);return Lh(n,new Pp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,l);Mv(n.eventQueue_,d),n.server_.merge(e.toString(),t,(h,g)=>{const v="ok"===h;v||Yo("update at "+e+" failed: "+h);const E=Oh(n.serverSyncTree_,l,!v),w=E.length>0?Jt(n,e):e;Sc(n.eventQueue_,w,E),H(0,r,h,g)}),vo(t,h=>{const g=rs(n,ds(e,h));Jt(n,g)}),Sc(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function CG(n){n=(0,X.m9)(n);const e=new QP(()=>{}),t=new z2(e);return function cB(n,e,t){const r=function $C(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(h,g)=>{const v=Qo(h,t);r=r||fu(g,v)});let i=n.syncPointTree_.get(t);i?r=r||fu(i,mi()):(i=new OC,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Dl(r,!0,!1):null;return function kC(n){return hu(n.viewCache_)}(b2(i,e,wv(n.pendingWriteTree_,e._path),s?o.getNode():Cr.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=ms(i).withIndex(e._queryParams.getIndex());let o;if(WC(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=w_(n.serverSyncTree_,e._path,s);else{const l=Fh(n.serverSyncTree_,e);o=zC(n.serverSyncTree_,e._path,s,l)}return Sc(n.eventQueue_,e._path,o),I_(n.serverSyncTree_,e,t,null,!0),s},i=>(B(n,"get for query "+(0,X.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new A_(r,new Nl(n._repo,n._path),n._queryParams.getIndex()))}class z2{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new hB("value",this,new A_(e.snapshotNode,new Nl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new fB(this,e,t):null}matches(e){return e instanceof z2&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class iT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new fB(this,e,t):null}createEvent(e,t){(0,X.hu)(null!=e.childName,"Child events should have a childName.");const r=C_(new Nl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new hB(e.type,this,new A_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof iT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function H2(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const d=t,h=(g,v)=>{S(n._repo,n,l),d(g,v)};h.userCallback=t.userCallback,h.context=t.context,t=h}const o=new QP(t,s||void 0),l="value"===e?new z2(o):new iT(e,o);return function y(n,e,t){let r;r=".info"===Wr(e._path)?WC(n.infoSyncTree_,e,t):WC(n.serverSyncTree_,e,t),QC(n.eventQueue_,e._path,r)}(n._repo,n,l),()=>S(n._repo,n,l)}function JP(n,e,t,r){return H2(n,"value",e,t,r)}function _B(n,e,t,r){return H2(n,"child_added",e,t,r)}function yB(n,e,t,r){return H2(n,"child_changed",e,t,r)}function vB(n,e,t,r){return H2(n,"child_moved",e,t,r)}function bB(n,e,t,r){return H2(n,"child_removed",e,t,r)}function wB(n,e,t){let r=null;const i=t?new QP(t):null;"value"===e?r=new z2(i):e&&(r=new iT(e,i)),S(n._repo,n,r)}class mu{}class IB extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("endAt",this._value,e._path,!0);const t=_v(e._queryParams,this._value,this._key);if(rT(t),zp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ac(e._repo,e._path,t,e._orderByCalled)}}class DG extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("endBefore",this._value,e._path,!1);const t=function _P(n,e,t){let r;return r=_v(n,e,n.index_===Tl||t?t:od),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(rT(t),zp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ac(e._repo,e._path,t,e._orderByCalled)}}class EB extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("startAt",this._value,e._path,!0);const t=u_(e._queryParams,this._value,this._key);if(rT(t),zp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ac(e._repo,e._path,t,e._orderByCalled)}}class kG extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("startAfter",this._value,e._path,!1);const t=function fC(n,e,t){let r;return r=u_(n,e,n.index_===Tl||t?t:lu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(rT(t),zp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ac(e._repo,e._path,t,e._orderByCalled)}}class RG extends mu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ac(e._repo,e._path,function mP(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class LG extends mu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ac(e._repo,e._path,function hC(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class BG extends mu{constructor(e){super(),this._path=e}_apply(e){nT(e,"orderByChild");const t=new ji(this._path);if(Kr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new a_(t),i=d_(e._queryParams,r);return zp(i),new Ac(e._repo,e._path,i,!0)}}class jG extends mu{_apply(e){nT(e,"orderByKey");const t=d_(e._queryParams,Tl);return zp(t),new Ac(e._repo,e._path,t,!0)}}class zG extends mu{_apply(e){nT(e,"orderByPriority");const t=d_(e._queryParams,li);return zp(t),new Ac(e._repo,e._path,t,!0)}}class WG extends mu{_apply(e){nT(e,"orderByValue");const t=d_(e._queryParams,a2);return zp(t),new Ac(e._repo,e._path,t,!0)}}class qG extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ml("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IB(this._value,this._key)._apply(new EB(this._value,this._key)._apply(e))}}function _u(n,...e){let t=(0,X.m9)(n);for(const r of e)t=r._apply(t);return t}(function v2(n){(0,X.hu)(!ga,"__referenceConstructor has already been defined"),ga=n})(Nl),function BC(n){(0,X.hu)(!nl,"__referenceConstructor has already been defined"),nl=n}(Nl);const eR={};function SB(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Jc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),co("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let d,h,o=YP(s,i),l=o.repoInfo;typeof process<"u"&&process.env&&(h=process.env.FIREBASE_DATABASE_EMULATOR_HOST),h?(d=!0,s=`http://${h}?ns=${l.namespace}`,o=YP(s,i),l=o.repoInfo):d=!o.repoInfo.secure;const g=i&&d?new tv(tv.OWNER):new R8(n.name,n.options,e);U2("Invalid Firebase Database URL",o),Kr(o.path)||Jc("Database URL must point to the root of a Firebase Database (not including a child path).");const v=function QG(n,e,t,r){let i=eR[e.name];i||(i={},eR[e.name]=i);let s=i[n.toURLString()];return s&&Jc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new sB(n,false,t,r),i[n.toURLString()]=s,s}(l,n,g,new Lk(n.name,t));return new JG(v,n)}class JG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function oB(n,e,t){if(n.stats_=qw(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new h_(n.repoInfo_,(r,i,s,o)=>{ZP(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>JC(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,X.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ch(n.repoInfo_,e,(r,i,s,o)=>{ZP(n,r,i,s,o)},r=>{JC(n,r)},r=>{!function aB(n,e){vo(e,(t,r)=>{eT(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function i_(n,e){const t=n.toString();return $w[t]||($w[t]=e()),$w[t]}(n.repoInfo_,()=>new mC(n.stats_,n.server_)),n.infoData_=new yP,n.infoSyncTree_=new UC({startListening:(r,i,s,o)=>{let l=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(l=w_(n.infoSyncTree_,r._path,d),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),eT(n,"connected",!1),n.serverSyncTree_=new UC({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(l,d)=>{const h=o(l,d);Sc(n.eventQueue_,r._path,h)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nl(this._repo,mi())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function YG(n,e){const t=eR[e];(!t||t[n.key]!==n)&&Jc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),M(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Jc("Cannot call "+e+" on a deleted database.")}}function AB(){HA.IS_TRANSPORT_INITIALIZED&&Yo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function eK(){AB(),ad.forceDisallow()}function tK(){AB(),Dp.forceDisallow(),ad.forceAllow()}function nK(n=(0,Ni.getApp)(),e){const t=(0,Ni._getProvider)(n,"database").getImmediate({identifier:e}),r=(0,X.P0)("database");return r&&CB(t,...r),t}function CB(n,e,t,r={}){(n=(0,X.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Jc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new tv(tv.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,X.Sg)(r.mockUserToken,n.app.options.projectId);s=new tv(o)}!function ZG(n,e,t,r){n.repoInfo_=new Ww(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}function sK(n,e){DA(n,e)}const aK={".sv":"timestamp"};class uK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ch.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ch.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function oK(n){ar(Ni.SDK_VERSION),(0,Ni._registerComponent)(new Ga.wA("database",(e,{instanceIdentifier:t})=>SB(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(Lw,"0.14.0",n),(0,Ni.registerVersion)(Lw,"0.14.0","esm2017")}();const pK=new wc.Yd("@firebase/database-compat"),TB=function(n){pK.warn("FIREBASE WARNING: "+n)};class _K{constructor(e){this._delegate=e}cancel(e){(0,X.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,X.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,X.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,X.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,X.Dv)("OnDisconnect.set",1,2,arguments.length),(0,X.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,X.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,X.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,X.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,TB("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,X.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class yK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,X.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,X.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,X.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,X.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,X.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,X.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vp("DataSnapshot.child","path",e,!1),new Hp(this._database,this._delegate.child(e))}hasChild(e){return(0,X.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Vp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,X.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,X.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,X.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Hp(this._database,t)))}hasChildren(){return(0,X.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,X.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,X.Dv)("DataSnapshot.ref",0,0,arguments.length),new il(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ma{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,X.Dv)("Query.on",2,4,arguments.length),(0,X.Wj)("Query.on","callback",t,!1);const o=ma.getCancelAndContextArgs_("Query.on",r,i),l=(h,g)=>{t.call(o.context,new Hp(this.database,h),g)};l.userCallback=t,l.context=o.context;const d=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return JP(this._delegate,l,d),t;case"child_added":return _B(this._delegate,l,d),t;case"child_removed":return bB(this._delegate,l,d),t;case"child_changed":return yB(this._delegate,l,d),t;case"child_moved":return vB(this._delegate,l,d),t;default:throw new Error((0,X.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,X.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,X.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,X.Wj)("Query.off","callback",t,!0),(0,X.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,wB(this._delegate,e,i)}else wB(this._delegate,e)}get(){return CG(this._delegate).then(e=>new Hp(this.database,e))}once(e,t,r,i){(0,X.Dv)("Query.once",1,4,arguments.length),(0,X.Wj)("Query.once","callback",t,!0);const s=ma.getCancelAndContextArgs_("Query.once",r,i),o=new X.BH,l=(h,g)=>{const v=new Hp(this.database,h);t&&t.call(s.context,v,g),o.resolve(v)};l.userCallback=t,l.context=s.context;const d=h=>{s.cancel&&s.cancel.call(s.context,h),o.reject(h)};switch(e){case"value":JP(this._delegate,l,d,{onlyOnce:!0});break;case"child_added":_B(this._delegate,l,d,{onlyOnce:!0});break;case"child_removed":bB(this._delegate,l,d,{onlyOnce:!0});break;case"child_changed":yB(this._delegate,l,d,{onlyOnce:!0});break;case"child_moved":vB(this._delegate,l,d,{onlyOnce:!0});break;default:throw new Error((0,X.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,X.Dv)("Query.limitToFirst",1,1,arguments.length),new ma(this.database,_u(this._delegate,function OG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new RG(n)}(e)))}limitToLast(e){return(0,X.Dv)("Query.limitToLast",1,1,arguments.length),new ma(this.database,_u(this._delegate,function FG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new LG(n)}(e)))}orderByChild(e){return(0,X.Dv)("Query.orderByChild",1,1,arguments.length),new ma(this.database,_u(this._delegate,function UG(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vp("orderByChild","path",n,!1),new BG(n)}(e)))}orderByKey(){return(0,X.Dv)("Query.orderByKey",0,0,arguments.length),new ma(this.database,_u(this._delegate,function VG(){return new jG}()))}orderByPriority(){return(0,X.Dv)("Query.orderByPriority",0,0,arguments.length),new ma(this.database,_u(this._delegate,function HG(){return new zG}()))}orderByValue(){return(0,X.Dv)("Query.orderByValue",0,0,arguments.length),new ma(this.database,_u(this._delegate,function $G(){return new WG}()))}startAt(e=null,t){return(0,X.Dv)("Query.startAt",0,2,arguments.length),new ma(this.database,_u(this._delegate,function NG(n=null,e){return S_("startAt","key",e,!0),new EB(n,e)}(e,t)))}startAfter(e=null,t){return(0,X.Dv)("Query.startAfter",0,2,arguments.length),new ma(this.database,_u(this._delegate,function PG(n,e){return S_("startAfter","key",e,!0),new kG(n,e)}(e,t)))}endAt(e=null,t){return(0,X.Dv)("Query.endAt",0,2,arguments.length),new ma(this.database,_u(this._delegate,function TG(n,e){return S_("endAt","key",e,!0),new IB(n,e)}(e,t)))}endBefore(e=null,t){return(0,X.Dv)("Query.endBefore",0,2,arguments.length),new ma(this.database,_u(this._delegate,function MG(n,e){return S_("endBefore","key",e,!0),new DG(n,e)}(e,t)))}equalTo(e,t){return(0,X.Dv)("Query.equalTo",1,2,arguments.length),new ma(this.database,_u(this._delegate,function GG(n,e){return S_("equalTo","key",e,!0),new qG(n,e)}(e,t)))}toString(){return(0,X.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,X.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,X.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ma))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,X.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,X.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,X.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new il(this.database,new Nl(this._delegate._repo,this._delegate._path))}}class il extends ma{constructor(e,t){super(e,new Ac(t._repo,t._path,new mv,!1)),this.database=e,this._delegate=t}getKey(){return(0,X.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,X.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new il(this.database,C_(this._delegate,e))}getParent(){(0,X.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new il(this.database,e):null}getRoot(){return(0,X.Dv)("Reference.root",0,0,arguments.length),new il(this.database,this._delegate.root)}set(e,t){(0,X.Dv)("Reference.set",1,2,arguments.length),(0,X.Wj)("Reference.set","onComplete",t,!0);const r=XP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,X.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,TB("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rl("Reference.update",this._delegate._path),(0,X.Wj)("Reference.update","onComplete",t,!0);const r=AG(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,X.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,X.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function SG(n,e,t){if(rl("setWithPriority",n._path),Ml("setWithPriority",e,n._path,!1),F2("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new X.BH;return tT(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,X.Dv)("Reference.remove",0,1,arguments.length),(0,X.Wj)("Reference.remove","onComplete",e,!0);const t=function EG(n){return rl("remove",n._path),XP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,X.Dv)("Reference.transaction",1,3,arguments.length),(0,X.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,X.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,X.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function dK(n,e,t){var r;if(n=(0,X.m9)(n),rl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new X.BH,l=JP(n,()=>{});return function ce(n,e,t,r,i,s){B(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:Jm(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=De(n,e,void 0);o.currentInputSnapshot=l;const d=o.update(l.val());if(void 0===d)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{jp("transaction failed: Data returned ",d,o.path),o.status=0;const h=Dv(n.transactionQueueTree_,e),g=_d(h)||[];let v;g.push(o),gu(h,g),"object"==typeof d&&null!==d&&(0,X.r3)(d,".priority")?(v=(0,X.DV)(d,".priority"),(0,X.hu)(x_(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):v=(Lp(n.serverSyncTree_,e)||Cr.EMPTY_NODE).getPriority().val();const E=Nv(n),w=ms(d,v),D=N2(w,l,E);o.currentOutputSnapshotRaw=w,o.currentOutputSnapshotResolved=D,o.currentWriteId=V2(n);const P=jC(n.serverSyncTree_,e,D,o.currentWriteId,o.applyLocally);Sc(n.eventQueue_,e,P),$e(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(d,h,g)=>{let v=null;d?s.reject(d):(v=new A_(g,new Nl(n._repo,n._path),li),s.resolve(new uK(h,v)))},l,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new yK(s.committed,new Hp(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,X.Dv)("Reference.setPriority",1,2,arguments.length),(0,X.Wj)("Reference.setPriority","onComplete",t,!0);const r=function xG(n,e){n=(0,X.m9)(n),rl("setPriority",n._path),F2("setPriority",e,!1);const t=new X.BH;return tT(n._repo,ds(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,X.Dv)("Reference.push",0,2,arguments.length),(0,X.Wj)("Reference.push","onComplete",t,!0);const r=function IG(n,e){n=(0,X.m9)(n),rl("push",n._path),Ml("push",e,n._path,!0);const t=KP(n._repo),r=wG(t),i=C_(n,r),s=C_(n,r);let o;return o=null!=e?XP(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new il(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new il(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return rl("Reference.onDisconnect",this._delegate._path),new _K(new pB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class W2{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:eK,forceLongPolling:tK}}useEmulator(e,t,r={}){CB(this._delegate,e,t,r)}ref(e){if((0,X.Dv)("database.ref",0,1,arguments.length),e instanceof il){const t=mB(this._delegate,e.toString());return new il(this,t)}{const t=gB(this._delegate,e);return new il(this,t)}}refFromURL(e){(0,X.Dv)("database.refFromURL",1,1,arguments.length);const r=mB(this._delegate,e);return new il(this,r)}goOffline(){return(0,X.Dv)("database.goOffline",0,0,arguments.length),function rK(n){(n=(0,X.m9)(n))._checkNotDeleted("goOffline"),M(n._repo)}(this._delegate)}goOnline(){return(0,X.Dv)("database.goOnline",0,0,arguments.length),function iK(n){(n=(0,X.m9)(n))._checkNotDeleted("goOnline"),function R(n){n.persistentConnection_&&n.persistentConnection_.resume(XC)}(n._repo)}(this._delegate)}}W2.ServerValue={TIMESTAMP:function cK(){return aK}(),increment:n=>function lK(n){return{".sv":{increment:n}}}(n)};var bK=Object.freeze({__proto__:null,initStandalone:function vK({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){ar(t);const o=new Ga.zt("auth-internal",new Ga.H0("database-standalone"));return o.setComponent(new Ga.wA("auth-internal",()=>r,"PRIVATE")),{instance:new W2(SB(n,o,void 0,e,s),n),namespace:i}}});const wK=W2.ServerValue;!function IK(n){n.INTERNAL.registerComponent(new Ga.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new W2(i,r)},"PUBLIC").setServiceProps({Reference:il,Query:ma,Database:W2,DataSnapshot:Hp,enableLogging:sK,INTERNAL:bK,ServerValue:wK}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.0")}(Ow.Z);var sT=Q(5363),EK=Q(6063);class xK extends lh.x{constructor(e=1/0,t=1/0,r=EK.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let l=0;for(let d=1;d<r.length&&r[d]<=o;d+=2)l=d;l&&r.splice(0,l+1)}}}function DB(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Pw.B)({connector:()=>new xK(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const MB=(0,Q(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function AK(n){return(0,Ca.e)((e,t)=>{let r=!1;e.subscribe((0,Zo.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function CK(n=TK){return(0,Ca.e)((e,t)=>{let r=!1;e.subscribe((0,Zo.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function TK(){return new MB}var MK=Q(576);function NB(n,e){return(0,MK.m)(e)?bc(()=>n,e):bc(()=>n)}var tR=Q(9468),Cc=Q(259);class kl{constructor(e){return e}}class jh{constructor(){return(0,Cc.C6)()}}const nR=new m.OlP("angularfire2._apps"),kK={provide:kl,useFactory:function NK(n){return n&&1===n.length?n[0]:new kl((0,Cc.Mq)())},deps:[[new m.FiY,nR]]},PK={provide:jh,deps:[[new m.FiY,nR]]};function RK(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new kl(r)}}let OK=(()=>{class n{constructor(t){(0,Cc.KN)("angularfire",ln.q4.full,"core"),(0,Cc.KN)("angularfire",ln.q4.full,"app"),(0,Cc.KN)("angular",m.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.Lbi))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[kK,PK]}),n})();function LK(n,...e){return{ngModule:OK,providers:[{provide:nR,useFactory:RK(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,...e]}]}}const FK=(0,ln.u3)(Cc.ZF,!0),rR=new Map,kB={activated:!1,tokenObservers:[]},BK={initialized:!1,enabled:!1};function _a(n){return rR.get(n)||Object.assign({},kB)}function oT(){return BK}class WK{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,mt.Z)(function*(){t.stop();try{t.pending=new X.BH,yield function $K(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new X.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ka=new X.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RB(n){if(!_a(n).activated)throw Ka.create("use-before-activation",{appName:n.name})}function oR(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,mt.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const v=yield i.getHeartbeatsHeader();v&&(r["X-Firebase-Client"]=v)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,l;try{o=yield fetch(n,s)}catch(v){throw Ka.create("fetch-network-error",{originalErrorMessage:v?.message})}if(200!==o.status)throw Ka.create("fetch-status-error",{httpStatus:o.status});try{l=yield o.json()}catch(v){throw Ka.create("fetch-parse-error",{originalErrorMessage:v?.message})}const d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ka.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const h=1e3*Number(d[1]),g=Date.now();return{token:l.token,expireTimeMillis:g+h,issuedAtTimeMillis:g}}),aR.apply(this,arguments)}function ZK(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const $2="firebase-app-check-store";let lT=null;function LB(){return lT||(lT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ka.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($2,{keyPath:"compositeKey"})}}catch(t){e(Ka.create("storage-open",{originalErrorMessage:t?.message}))}}),lT)}function cR(){return cR=(0,mt.Z)(function*(n,e){const r=(yield LB()).transaction($2,"readwrite"),s=r.objectStore($2).put({compositeKey:n,value:e});return new Promise((o,l)=>{s.onsuccess=d=>{o()},r.onerror=d=>{var h;l(Ka.create("storage-set",{originalErrorMessage:null===(h=d.target.error)||void 0===h?void 0:h.message}))}})}),cR.apply(this,arguments)}const q2=new wc.Yd("@firebase/app-check");function dR(n,e){return(0,X.hl)()?function JK(n,e){return function FB(n,e){return cR.apply(this,arguments)}(function UB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{q2.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jB(){return oT().enabled}function VB(){return fR.apply(this,arguments)}function fR(){return fR=(0,mt.Z)(function*(){const n=oT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),fR.apply(this,arguments)}const sZ={error:"UNKNOWN_ERROR"};function oZ(n){return X.US.encodeString(JSON.stringify(n),!1)}function uT(n){return pR.apply(this,arguments)}function pR(){return pR=(0,mt.Z)(function*(n,e=!1){const t=n.app;RB(t);const r=_a(t);let s,i=r.token;if(i&&!kv(i)&&(r.token=void 0,i=void 0),!i){const d=yield r.cachedTokenPromise;d&&(kv(d)?i=d:yield dR(t,void 0))}if(!e&&i&&kv(i))return{token:i.token};let l,o=!1;if(jB()){r.exchangeTokenPromise||(r.exchangeTokenPromise=oR(ZK(t,yield VB()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const d=yield r.exchangeTokenPromise;return yield dR(t,d),r.token=d,{token:d.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield _a(t).exchangeTokenPromise}catch(d){"appCheck/throttled"===d.code?q2.warn(d.message):q2.error(d),s=d}return i?s?l=kv(i)?{token:i.token,internalError:s}:WB(s):(l={token:i.token},r.token=i,yield dR(t,i)):l=WB(s),o&&HB(t,l),l}),pR.apply(this,arguments)}function mR(n,e){const t=_a(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function zB(n){const{app:e}=n,t=_a(e);let r=t.tokenRefresher;r||(r=function aZ(n){const{app:e}=n;return new WK((0,mt.Z)(function*(){let r;if(r=_a(e).token?yield uT(n,!0):yield uT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=_a(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function HB(n,e){const t=_a(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function kv(n){return n.expireTimeMillis-Date.now()>0}function WB(n){return{token:oZ(sZ),error:n}}class cZ{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_a(this.app);for(const t of e)mR(this.app,t.next);return Promise.resolve()}}const XB="app-check-internal";!function IZ(){(0,Ni._registerComponent)(new Ga.wA("app-check",n=>function lZ(n,e){return new cZ(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XB).initialize()})),(0,Ni._registerComponent)(new Ga.wA(XB,n=>function uZ(n){return{getToken:e=>uT(n,e),addTokenListener:e=>function gR(n,e,t,r){const{app:i}=n,s=_a(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&kv(s.token)){const l=s.token;Promise.resolve().then(()=>{t({token:l.token}),zB(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>zB(n))}(n,"INTERNAL",e),removeTokenListener:e=>mR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ni.registerVersion)("@firebase/app-check","0.6.0")}();class yd{constructor(){return(0,ln.vb)("app-check")}}typeof window<"u"&&window;var hT=Q(9260);const wR=new m.OlP("angularfire2.auth.use-emulator"),IR=new m.OlP("angularfire2.auth.settings"),ER=new m.OlP("angularfire2.auth.tenant-id"),xR=new m.OlP("angularfire2.auth.langugage-code"),SR=new m.OlP("angularfire2.auth.use-device-language"),AR=new m.OlP("angularfire.auth.persistence"),CR=(n,e,t,r,i,s,o,l)=>(0,Qs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const d=e.runOutsideAngular(()=>n.auth());if(t&&d.useEmulator(...t),r&&(d.tenantId=r),d.languageCode=i,s&&d.useDeviceLanguage(),o)for(const[h,g]of Object.entries(o))d.settings[h]=g;return l&&d.setPersistence(l),d},[t,r,i,s,o,l]);let fT=(()=>{class n{constructor(t,r,i,s,o,l,d,h,g,v,E,w){const D=new lh.x,P=au(void 0).pipe((0,sT.Q)(o.outsideAngular),bc(()=>s.runOutsideAngular(()=>Promise.resolve().then(Q.bind(Q,9568)))),(0,Si.U)(()=>(0,Qs.on)(t,s,r)),(0,Si.U)(L=>CR(L,s,l,h,g,v,d,E)),DB({bufferSize:1,refCount:!1}));if(Wd(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=au(null);else{P.pipe(function DK(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Am((i,s)=>n(i,s,r)):uh.y,_0(1),t?AK(e):CK(()=>new MB))}()).subscribe();const F=P.pipe(bc(J=>J.getRedirectResult().then(ie=>ie,()=>null)),ln.iC,DB({bufferSize:1,refCount:!1})),U=P.pipe(bc(J=>new Ku.y(ie=>({unsubscribe:s.runOutsideAngular(()=>J.onAuthStateChanged(_e=>ie.next(_e),_e=>ie.error(_e),()=>ie.complete()))})))),K=P.pipe(bc(J=>new Ku.y(ie=>({unsubscribe:s.runOutsideAngular(()=>J.onIdTokenChanged(_e=>ie.next(_e),_e=>ie.error(_e),()=>ie.complete()))}))));this.authState=F.pipe(NB(U),(0,tR.R)(o.outsideAngular),(0,sT.Q)(o.insideAngular)),this.user=F.pipe(NB(K),(0,tR.R)(o.outsideAngular),(0,sT.Q)(o.insideAngular)),this.idToken=this.user.pipe(bc(J=>J?(0,Mo.D)(J.getIdToken()):au(null))),this.idTokenResult=this.user.pipe(bc(J=>J?(0,Mo.D)(J.getIdTokenResult()):au(null))),this.credential=(0,Z0.T)(F,D,this.authState.pipe(Am(J=>!J))).pipe((0,Si.U)(J=>J?.user?J:null),(0,tR.R)(o.outsideAngular),(0,sT.Q)(o.insideAngular))}return(0,Qs.pX)(this,P,s,{spy:{apply:(L,F,U)=>{(L.startsWith("signIn")||L.startsWith("createUser"))&&U.then(K=>D.next(K))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qs.Dh),m.LFG(Qs.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(wR,8),m.LFG(IR,8),m.LFG(ER,8),m.LFG(xR,8),m.LFG(SR,8),m.LFG(AR,8),m.LFG(yd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TZ=(()=>{class n{constructor(){hT.Z.registerVersion("angularfire",ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[fT]}),n})();function e7(n){return null==n}function t7(n){return"function"==typeof n.set}function n7(n,e){return t7(e)?e:n.ref(e)}function r7(n,e){if(function DZ(n){return"string"==typeof n}(n))return e.stringCase();if(t7(n))return e.firebaseCase();if(function MZ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function G2(n,e,t="on",r=fc.z){return new Ku.y(i=>{let s=null;return s=n[t](e,(o,l)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:l})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Si.U)(i=>{const{snapshot:s,prevKey:o}=i;let l=null;return s.exists()&&(l=s.key),{type:e,payload:s,prevKey:o,key:l}}),(0,Pw.B)())}function i7(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function PZ(n,e){const{payload:t,prevKey:r,key:i}=e,s=i7(n,i),o=function kZ(n,e){if(e7(e))return 0;{const t=i7(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let l=null;e.payload.forEach(d=>{const h={payload:d,type:"value",prevKey:l,key:d.key};return l=d.key,n=[...n,h],!1})}return n;case"child_added":if(s>-1){const l=n[s-1];(l&&l.key||null)!==r&&(n=n.filter(d=>d.payload.key!==t.key)).splice(o,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(l=>l.payload.key!==t.key);case"child_changed":return n.map(l=>l.payload.key===i?e:l);case"child_moved":if(s>-1){const l=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,l),n}return n;default:return n}}function s7(n){return(e7(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function o7(n,e,t){return function NZ(n,e,t){return G2(n,"value","once",t).pipe(bc(r=>{const i=[au(r)];return e.forEach(s=>i.push(G2(n,s,"on",t))),(0,Z0.T)(...i).pipe(Ip(PZ,[]))}),Rw())}(n,e=s7(e),t)}function a7(n,e,t){const r=(e=s7(e)).map(i=>G2(n,i,"on",t));return(0,Z0.T)(...r)}function c7(n,e){return function(r,i){return r7(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function FZ(n){return function(t){return t?r7(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function l7(n,e){return function(){return G2(n,"value","on",e)}}const jZ=new m.OlP("angularfire2.realtimeDatabaseURL"),VZ=new m.OlP("angularfire2.database.use-emulator");let u7=(()=>{class n{constructor(t,r,i,s,o,l,d,h,g,v,E,w,D,P,L){this.schedulers=l;const F=d,U=(0,Qs.on)(t,o,r);h&&CR(U,o,g,E,w,D,v,P),this.database=(0,Qs.cc)(`${U.name}.database.${i}`,"AngularFireDatabase",U.name,()=>{const K=o.runOutsideAngular(()=>U.database(i||void 0));return F&&K.useEmulator(...F),K},[F])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>n7(this.database,t));let s=i;return r&&(s=r(i)),function BZ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:c7(r,"update"),set:c7(r,"set"),push:i=>r.push(i),remove:FZ(r),snapshotChanges:i=>o7(n,i,t).pipe(ln.iC),stateChanges:i=>a7(n,i,t).pipe(ln.iC),auditTrail:i=>function RZ(n,e,t){return function LZ(n,e,t){return function OZ(n,e){return G2(n,"value","on",e).pipe((0,Si.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function SA(...n){const e=(0,Zf.jO)(n);return(0,Ca.e)((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),l=!1;for(let d=0;d<i;d++)(0,lS.Xf)(n[d]).subscribe((0,Zo.x)(r,h=>{s[d]=h,!l&&!o[d]&&(o[d]=!0,(l=o.every(uh.y))&&(o=null))},uS.Z));t.subscribe((0,Zo.x)(r,d=>{if(l){const h=[d,...s];r.next(e?e(...h):h)}}))})}(e),(0,Si.U)(([i,s])=>{const o=i.lastKeyToLoad,l=s.map(d=>d.key);return{actions:s,lastKeyToLoad:o,loadedKeys:l}}),function AA(n){return(0,Ca.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Zo.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Si.U)(i=>i.actions))}(n,a7(n,e).pipe(Ip((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(ln.iC),valueChanges:(i,s)=>o7(n,i,t).pipe((0,Si.U)(l=>l.map(d=>s&&s.idField?Object.assign(Object.assign({},d.payload.val()),{[s.idField]:d.key}):d.payload.val())),ln.iC)}}(s,this)}object(t){return function UZ(n,e){return{query:n,snapshotChanges:()=>l7(n,e.schedulers.outsideAngular)().pipe(ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>l7(n,e.schedulers.outsideAngular)().pipe(ln.iC,(0,Si.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>n7(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qs.Dh),m.LFG(Qs.xv,8),m.LFG(jZ,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(VZ,8),m.LFG(fT,8),m.LFG(wR,8),m.LFG(IR,8),m.LFG(ER,8),m.LFG(xR,8),m.LFG(SR,8),m.LFG(AR,8),m.LFG(yd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zZ=(()=>{class n{constructor(){hT.Z.registerVersion("angularfire",ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[u7]}),n})();class Pv{constructor(e){this.db=e,this.studentsRef=this.db.list("/visits")}AddVisit(e){return console.log(e),this.studentsRef.push({date:e.date,bowserLanguage:e.bowserLanguage,deviceHeight:e.deviceHeight,deviceWidth:e.deviceWidth,deviceID:e.deviceID,visitHome:e.visitHome,visitProfile:e.visitProfile})}GetStudent(e){return this.studentRef=this.db.object("visits-list/"+e),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("visits-list"),this.studentsRef}UpdateStudent(e){this.studentRef.update({date:e.date,bowserLanguage:e.bowserLanguage,deviceHeight:e.deviceHeight,deviceWidth:e.deviceWidth,deviceID:e.deviceID,visitHome:e.visitHome,visitProfile:e.visitProfile})}DeleteStudent(e){this.studentRef=this.db.object("visits-list/"+e),this.studentRef.remove()}generateUUIDV4(){let e=localStorage.getItem("deviceId");return e||(e=Dk(),localStorage.setItem("deviceId",e)),e}static#e=this.\u0275fac=function(t){return new(t||Pv)(m.LFG(u7))};static#t=this.\u0275prov=m.Yz7({token:Pv,factory:Pv.\u0275fac,providedIn:"root"})}var $Z=Q(5577);function d7(n,e){return e?t=>Sm(e.pipe(_0(1),function HZ(){return(0,Ca.e)((n,e)=>{n.subscribe((0,Zo.x)(e,uS.Z))})}()),t.pipe(d7(n))):(0,$Z.z)((t,r)=>n(t,r).pipe(_0(1),function WZ(n){return(0,Si.U)(()=>n)}(t)))}var qZ=Q(3532);const YZ=["softSkills"];class K2{constructor(){this.color="primary",this.mode="determinate",this.mode2="determinate",this.bufferValue=100}ngAfterViewInit(){const t=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&(this.uploadPercentage$=this.progressBar?.animationEnd.pipe(Cm(0),function ZZ(n,e=fc.z){const t=function KZ(n=0,e,t=fc.P){let r=-1;return null!=e&&((0,qZ.K)(e)?t=e:r=e),new Ku.y(i=>{let s=function GZ(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return d7(()=>t)}(1500),(0,Si.U)(()=>this.progressValue)),t.disconnect())})},{threshold:.2});t.observe(this.yourElement.nativeElement)}static#e=this.\u0275fac=function(t){return new(t||K2)};static#t=this.\u0275cmp=m.Xpm({type:K2,selectors:[["app-progress-bar"]],viewQuery:function(t,r){if(1&t&&(m.Gf(YZ,5),m.Gf(ew,5)),2&t){let i;m.iGM(i=m.CRH())&&(r.yourElement=i.first),m.iGM(i=m.CRH())&&(r.progressBar=i.first)}},inputs:{progressValue:"progressValue"},decls:4,vars:6,consts:[["softSkills",""],[1,"example-margin",3,"color","mode","value","bufferValue"]],template:function(t,r){1&t&&(m.TgZ(0,"div",null,0),m._UZ(2,"mat-progress-bar",1),m.ALo(3,"async"),m.qZA()),2&t&&(m.xp6(2),m.Q6J("color",r.color)("mode",r.mode)("value",m.lcZ(3,4,r.uploadPercentage$))("bufferValue",r.bufferValue))},dependencies:[ew,So],styles:[".example-h2[_ngcontent-%COMP%]{margin:10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.example-margin[_ngcontent-%COMP%]{margin:0 10px}.example-card[_ngcontent-%COMP%]{margin-bottom:10px}"]})}const QZ=["profile"];class pT{constructor(e){this.appService=e,this.value1=78,this.value2=80,this.value3=90,this.langueFR=85,this.langueEn=25}ngOnInit(){}ngAfterViewInit(){const t=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&(this.appVisit={id$:"",date:new Date,deviceWidth:window.innerWidth,deviceHeight:window.innerHeight,bowserLanguage:navigator.language||window.navigator.language,deviceID:this.appService.generateUUIDV4(),visitHome:!0,visitProfile:!0},this.appService.AddVisit(this.appVisit),t.disconnect())})},{threshold:.2});t.observe(this.yourElement.nativeElement)}static#e=this.\u0275fac=function(t){return new(t||pT)(m.Y36(Pv))};static#t=this.\u0275cmp=m.Xpm({type:pT,selectors:[["app-personal-details"]],viewQuery:function(t,r){if(1&t&&m.Gf(QZ,5),2&t){let i;m.iGM(i=m.CRH())&&(r.yourElement=i.first)}},decls:137,vars:17,consts:[[1,"personnalDetails"],["profile",""],[1,"detailsTitle"],[1,"title"],[1,"hr1"],[1,"datails"],[1,"detailItems",2,"display","none"],[1,"detailIcon"],[1,"bi","bi-person-fill"],[1,"detailValue"],[1,"detailItems"],[1,"bi","bi-envelope-fill"],["href","mailto:borientm@gmail.com",1,"text-white"],[1,"bi","bi-telephone-fill"],[1,"bi","bi-house-fill"],[1,"bi","bi-calendar3"],[1,"bi","bi-geo-alt-fill"],[1,"bi","bi-taxi-front-fill"],[1,"bi","bi-gender-male"],[1,"bi","bi-flag-fill"],[1,"bi","bi-people-fill"],[1,"bi","bi-linkedin"],[1,"softSkills"],[1,""],[3,"progressValue"],[1,"w-100","d-flex"],[1,"CInteret","h-40","w-50"],[1,"h-70"],[1,"bi","bi-bus-front"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3),m._uU(4),m.ALo(5,"uppercase"),m.qZA(),m.TgZ(6,"div",4),m._UZ(7,"hr"),m.qZA()(),m.TgZ(8,"div",5)(9,"div",6)(10,"div",7),m._UZ(11,"i",8),m.qZA(),m.TgZ(12,"div",9),m._uU(13," MANFOUO KENFOUO Borient "),m.qZA()(),m.TgZ(14,"div",10)(15,"div",7),m._UZ(16,"i",11),m.qZA(),m.TgZ(17,"div",9)(18,"a",12),m._uU(19,"borientm@gmail.com"),m.qZA()()(),m.TgZ(20,"div",10)(21,"div",7),m._UZ(22,"i",13),m.qZA(),m.TgZ(23,"div",9)(24,"span"),m._uU(25,"(+237) 655 393 119"),m.qZA(),m._UZ(26,"br"),m.TgZ(27,"span"),m._uU(28,"(+237) 651 070 418"),m.qZA(),m._UZ(29,"br"),m.TgZ(30,"span"),m._uU(31,"(+237) 620 357 133"),m.qZA(),m._UZ(32,"br"),m.qZA()(),m.TgZ(33,"div",6)(34,"div",7),m._UZ(35,"i",14),m.qZA(),m.TgZ(36,"div",9),m._uU(37," Bafoussam "),m.qZA()(),m.TgZ(38,"div",10)(39,"div",7),m._UZ(40,"i",15),m.qZA(),m.TgZ(41,"div",9),m._uU(42," O4 Juin 1997 "),m.qZA()(),m.TgZ(43,"div",10)(44,"div",7),m._UZ(45,"i",16),m.qZA(),m.TgZ(46,"div",9),m._uU(47," Bafoussam Cameroun "),m.qZA()(),m.TgZ(48,"div",10)(49,"div",7),m._UZ(50,"i",17),m.qZA(),m.TgZ(51,"div",9),m._uU(52," Categorie B "),m.qZA()(),m.TgZ(53,"div",10)(54,"div",7),m._UZ(55,"i",18),m.qZA(),m.TgZ(56,"div",9),m._uU(57," Homme "),m.qZA()(),m.TgZ(58,"div",10)(59,"div",7),m._UZ(60,"i",19),m.qZA(),m.TgZ(61,"div",9),m._uU(62," Cameroun "),m.qZA()(),m.TgZ(63,"div",10)(64,"div",7),m._UZ(65,"i",20),m.qZA(),m.TgZ(66,"div",9),m._uU(67," C\xe9libataire "),m.qZA()(),m.TgZ(68,"div",10)(69,"div",7),m._UZ(70,"i",21),m.qZA(),m.TgZ(71,"div",9),m._uU(72," Borientm "),m.qZA()(),m._UZ(73,"br")(74,"br"),m.TgZ(75,"div")(76,"div",2)(77,"div",3),m._uU(78),m.ALo(79,"uppercase"),m.qZA(),m.TgZ(80,"div",4),m._UZ(81,"hr"),m.qZA()(),m.TgZ(82,"div",22)(83,"div",23),m._uU(84," Dynamique"),m.qZA(),m.TgZ(85,"div",23),m._UZ(86,"app-progress-bar",24),m.qZA()(),m.TgZ(87,"div",22)(88,"div",23),m._uU(89," Rigoureux"),m.qZA(),m.TgZ(90,"div",23),m._UZ(91,"app-progress-bar",24),m.qZA()(),m.TgZ(92,"div",22)(93,"div",23),m._uU(94,"Espris d'equipe"),m.qZA(),m.TgZ(95,"div",23),m._UZ(96,"app-progress-bar",24),m.qZA()()(),m._UZ(97,"br")(98,"br"),m.TgZ(99,"div")(100,"div",2)(101,"div",3),m._uU(102),m.ALo(103,"uppercase"),m.qZA(),m.TgZ(104,"div",4),m._UZ(105,"hr"),m.qZA()(),m.TgZ(106,"div",22)(107,"div",23),m._uU(108," Fan\xe7ais"),m.qZA(),m.TgZ(109,"div",23),m._UZ(110,"app-progress-bar",24),m.qZA()(),m.TgZ(111,"div",22)(112,"div",23),m._uU(113," Anglais"),m.qZA(),m.TgZ(114,"div",23),m._UZ(115,"app-progress-bar",24),m.qZA()()(),m._UZ(116,"br")(117,"br"),m.TgZ(118,"div")(119,"div",2)(120,"div",3),m._uU(121),m.ALo(122,"uppercase"),m.qZA(),m.TgZ(123,"div",4),m._UZ(124,"hr"),m.qZA()(),m._UZ(125,"br"),m.TgZ(126,"div",25)(127,"div",26)(128,"div",27),m._UZ(129,"i",28),m.qZA(),m.TgZ(130,"div",23),m._uU(131,"Les voyages"),m.qZA()(),m.TgZ(132,"div",26)(133,"div",27),m._UZ(134,"i",8),m.qZA(),m.TgZ(135,"div",23),m._uU(136,"Marche sportive"),m.qZA()()()()()()),2&t&&(m.xp6(4),m.hij(" ",m.lcZ(5,9,"// Profil")," "),m.xp6(74),m.hij(" ",m.lcZ(79,11,"// Competences G\xe9n\xe9rales")," "),m.xp6(8),m.Q6J("progressValue",r.value1),m.xp6(5),m.Q6J("progressValue",r.value2),m.xp6(5),m.Q6J("progressValue",r.value3),m.xp6(6),m.hij(" ",m.lcZ(103,13,"// Langues")," "),m.xp6(8),m.Q6J("progressValue",r.langueFR),m.xp6(5),m.Q6J("progressValue",r.langueEn),m.xp6(6),m.hij(" ",m.lcZ(122,15,"// Centres d`int\xe9r\xeat")," "))},dependencies:[K2,Bg],styles:[".personnalDetails[_ngcontent-%COMP%]{width:100%;padding-left:15px}.detailsTitle[_ngcontent-%COMP%]{width:100%;display:flex;color:var(--white)}.detailsTitle[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:var(--generalFont);font-weight:700;display:flex;flex:none;justify-content:center;align-items:center}.detailsTitle[_ngcontent-%COMP%]   .hr1[_ngcontent-%COMP%]{width:-webkit-fill-available;display:flex;justify-content:end}.detailsTitle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{width:90%}.datails[_ngcontent-%COMP%]{margin-top:15px;width:90%}.detailItems[_ngcontent-%COMP%]{width:90%;display:flex;align-items:center;margin-top:3px}.detailIcon[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}.detailIcon[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:20px;color:var(--white)}.detailValue[_ngcontent-%COMP%]{width:auto;height:auto;font-size:var(--titleFont);padding-left:10px;color:var(--white)}.softSkills[_ngcontent-%COMP%]{width:100%;color:var(--white);margin-top:10px;font-size:var(--titleFont)}.softSkills[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}.presentation[_ngcontent-%COMP%]{display:contents;width:max-content;display:table-cell;text-align:justify}.CInteret[_ngcontent-%COMP%]{height:100px;display:flex;align-items:center;color:var(--white);flex-direction:column}.CInteret[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.CInteret[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:30px}.CInteret[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{font-size:var(--titleFont)}@media screen and (max-width: 600px){.cv[_ngcontent-%COMP%]{width:100%;display:block}.presonalInfos[_ngcontent-%COMP%]{width:100%;height:auto}.profile[_ngcontent-%COMP%]{width:100%}}"]})}function XZ(n,e){if(1&n&&(m.TgZ(0,"div",5),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.xp6(1),m.Oqu(null==t.periodItem?null:t.periodItem.period)}}function JZ(n,e){if(1&n&&(m.TgZ(0,"div",6),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.xp6(1),m.Oqu(null==t.periodItem?null:t.periodItem.libellet)}}function eY(n,e){if(1&n&&(m.TgZ(0,"div",6),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.xp6(1),m.Oqu(null==t.periodItem?null:t.periodItem.structure)}}function tY(n,e){if(1&n&&m._UZ(0,"app-progress-bar",11),2&n){const t=m.oxw().$implicit;m.Q6J("progressValue",t.valueInt)}}function nY(n,e){if(1&n&&(m.TgZ(0,"li",9)(1,"span"),m._uU(2),m.ALo(3,"titlecase"),m.qZA(),m.YNc(4,tY,1,1,"app-progress-bar",10),m.qZA()),2&n){const t=e.$implicit;m.xp6(2),m.Oqu(m.lcZ(3,2,t.description)),m.xp6(2),m.Q6J("ngIf",t.valueInt)}}function rY(n,e){if(1&n&&(m.TgZ(0,"ul",7),m.YNc(1,nY,5,4,"li",8),m.qZA()),2&n){const t=m.oxw();m.Q6J("ngClass",t.periodItemType===t.PeriodModelTypeEnum.COMPETENCES?"DisplayCmpetences":""),m.xp6(1),m.Q6J("ngForOf",null==t.periodItem?null:t.periodItem.description)}}class gT{constructor(){this.PeriodModelTypeEnum=Rm}static#e=this.\u0275fac=function(t){return new(t||gT)};static#t=this.\u0275cmp=m.Xpm({type:gT,selectors:[["app-item-by-period"]],inputs:{periodItem:"periodItem",periodItemType:"periodItemType"},decls:6,vars:4,consts:[[1,"w-100","d-flex","itemPeriod"],["class","period fontBold",4,"ngIf"],[1,"w-100"],["class","fontBold",4,"ngIf"],["class","","style"," width: 100%;",3,"ngClass",4,"ngIf"],[1,"period","fontBold"],[1,"fontBold"],[1,"",2,"width","100%",3,"ngClass"],["class","mt-2 me-4",4,"ngFor","ngForOf"],[1,"mt-2","me-4"],["style","display: contents;",3,"progressValue",4,"ngIf"],[2,"display","contents",3,"progressValue"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m.YNc(1,XZ,2,1,"div",1),m.TgZ(2,"div",2),m.YNc(3,JZ,2,1,"div",3),m.YNc(4,eY,2,1,"div",3),m.YNc(5,rY,2,2,"ul",4),m.qZA()()),2&t&&(m.xp6(1),m.Q6J("ngIf",null==r.periodItem?null:r.periodItem.period),m.xp6(2),m.Q6J("ngIf",null==r.periodItem?null:r.periodItem.libellet),m.xp6(1),m.Q6J("ngIf",null==r.periodItem?null:r.periodItem.structure),m.xp6(1),m.Q6J("ngIf",null==r.periodItem?null:r.periodItem.description))},dependencies:[_o,Wo,Li,K2,Fi],styles:[".itemPeriod[_ngcontent-%COMP%]{font-size:var(--generalFont)}.period[_ngcontent-%COMP%]{margin-right:10px;max-width:30%;text-align:center}.DisplayCmpetences[_ngcontent-%COMP%]{columns:2}"]})}class mT{static#e=this.\u0275fac=function(t){return new(t||mT)};static#t=this.\u0275cmp=m.Xpm({type:mT,selectors:[["app-footer"]],decls:21,vars:0,consts:[[1,"bg-dark","text-center","text-white"],[1,"container","p-4"],[1,"mb-4"],["href","https://m.facebook.com/borient.manfouo.3?mibextid=ZbWKwL","role","button",1,"btn","btn-outline-light","btn-floating","m-1"],[1,"bi","bi-facebook"],["href","https://api.whatsapp.com/send/?phone=+237655393119&text=","role","button",1,"btn","btn-outline-light","btn-floating","m-1"],[1,"bi","bi-whatsapp"],["href","www.linkedin.com/in/borientm","role","button",1,"btn","btn-outline-light","btn-floating","m-1"],[1,"bi","bi-linkedin"],["href","https://github.com/kenfouo","role","button",1,"btn","btn-outline-light","btn-floating","m-1"],[1,"bi","bi-github"],[1,""],["action",""],[1,"row","d-flex","justify-content-center"],[1,"col-auto"],["data-bs-toggle","offcanvas","aria-expanded","false","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"btn","btn-outline-light","mb-4","btnMyProfile"],[1,"text-center","p-3",2,"background-color","rgba(0, 0, 0, 0.2)"],["href","mailto:borientm@gmail.com",1,"text-white"]],template:function(t,r){1&t&&(m.TgZ(0,"footer",0)(1,"div",1)(2,"section",2)(3,"a",3),m._UZ(4,"i",4),m.qZA(),m.TgZ(5,"a",5),m._UZ(6,"i",6),m.qZA(),m.TgZ(7,"a",7),m._UZ(8,"i",8),m.qZA(),m.TgZ(9,"a",9),m._UZ(10,"i",10),m.qZA()(),m.TgZ(11,"section",11)(12,"form",12)(13,"div",13)(14,"div",14)(15,"div",15),m._uU(16," Voir mon profil "),m.qZA()()()()()(),m.TgZ(17,"div",16),m._uU(18," \xa9 2022 Copyright: "),m.TgZ(19,"a",17),m._uU(20,"borientm@gmail.com"),m.qZA()()())},styles:[".btnMyProfile[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 600px){.btnMyProfile[_ngcontent-%COMP%]{display:block}}"]})}const iY=["pdfTable"],sY=["CVMain"];function oY(n,e){1&n&&m._UZ(0,"app-personal-details")}function aY(n,e){1&n&&m._UZ(0,"app-personal-details")}function cY(n,e){1&n&&m._UZ(0,"app-item-by-period",27),2&n&&m.Q6J("periodItem",e.$implicit)}function lY(n,e){1&n&&m._UZ(0,"app-item-by-period",27),2&n&&m.Q6J("periodItem",e.$implicit)}function uY(n,e){if(1&n&&m._UZ(0,"app-item-by-period",28),2&n){const t=e.$implicit,r=m.oxw();m.Q6J("periodItem",t)("periodItemType",r.competences.PeriodModelTypeEnum)}}function dY(n,e){1&n&&m._UZ(0,"app-item-by-period",27),2&n&&m.Q6J("periodItem",e.$implicit)}class _T{constructor(e){this.appService=e,this.title="MyCV_01",this.IsValidScreen=!1,this.formations=[{period:"2015-2016",libellet:"Baccalaur\xe9at TI",structure:"Lyc\xe9e Bilingue de MBOUDA",description:[{description:"Approche Fondamentale Sur Les Technologies Et M\xe9tiers Informatique"}]},{period:"2016-2018",libellet:"Brevet de technicien superieur (BTS)",structure:"Instut Catholique de Bafoussam",description:[{description:"Option: Informatique de gestion"}]},{period:"2018-2019",libellet:"Licence Professionnele",structure:"Institut Catholique de Bafoussam",description:[{description:"Option: Concepteur, D\xe9veloppeur R\xe9seau Et Internet"}]}],this.experiences=[{period:"2019-Aujour'hui",libellet:"Technicien developpeur",structure:"Further Market",description:[{description:"Participation Aux D\xe9f\xe9rentes R\xe9unions Avec Le Directeur G\xe9n\xe9ral Pour La Prise De D\xe9cision, La Conception, La Synchronisation..."},{description:"D\xe9veloppement Web (Html CSS JS JQ Bootstrap)"},{description:"Recherche Sur La R\xe9partition Des Charges De La Base De Donn\xe9es MySQL."},{description:"Support Technique et Assistance des utilisateurs"},{description:"Assistance Support Technique"},{description:"Traduction technique des besoins fonctionnells"},{description:"R\xe9daction De La Documentation Pour Les Utilisateurs De L'application"},{description:"R\xe9aliser Les Tests"},{description:"Assistances Aux Utilisateurs Des Services De La Soci\xe9t\xe9"}]}],this.competences={PeriodModelArray:[{description:[{description:"back end (Spring boot)",valueInt:60},{description:"back end Nodejs (Expressjs)",valueInt:50},{description:"Front end Angular",valueInt:60},{description:"mysql",valueInt:60},{description:"No sql",valueInt:40},{description:"mogodb",valueInt:40},{description:"ionic",valueInt:30},{description:"flutter",valueInt:20},{description:"JS",valueInt:80},{description:"PHP",valueInt:30},{description:"Html,css",valueInt:80},{description:"bootstrap",valueInt:70}]}],PeriodModelTypeEnum:Rm.COMPETENCES},this.projets=[{period:"",structure:"Project Further Market",description:[{description:"Mise en place de la s\xe9curit\xe9 des fichiers JS"},{description:"Mise en place du chiffrement de bout en bout"},{description:"D\xe9ploiement du sous-syst\xe8me linux pour Windows"},{description:"Mise en place d'un load balancer pour la r\xe9partition des charges"},{description:"Mise en place d'un serveur WebSocket pour les \xe9changes temps r\xe9elles"},{description:"Gestion de la plateforme Cordova pour les builds Android"}]},{period:"",structure:"Application web de gestion des produits",description:[{description:"back end Java (Spring boot)"}]}],this.student={$key:"0",firstName:"Manfouo Kenfouo",lastName:"Borient",email:"borientm@gmail.com",mobileNumber:655393119}}ngOnInit(){this.displayMode(window.innerWidth)}onResize(){this.displayMode(window.innerWidth)}displayMode(e){this.IsValidScreen=e<600}downloadAsPDF(){new Sk("p","pt","a3").html(this.el.nativeElement,{callback:t=>{t.save("demo.pdf")}})}ngAfterViewInit(){const t=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&(this.appVisit={id$:"",date:new Date,deviceWidth:window.innerWidth,deviceHeight:window.innerHeight,bowserLanguage:navigator.language||window.navigator.language,deviceID:this.appService.generateUUIDV4(),visitHome:!0,visitProfile:!1},this.appService.AddVisit(this.appVisit),t.disconnect())})},{threshold:.2});t.observe(this.yourElement.nativeElement)}static#e=this.\u0275fac=function(t){return new(t||_T)(m.Y36(Pv))};static#t=this.\u0275cmp=m.Xpm({type:_T,selectors:[["app-root"]],viewQuery:function(t,r){if(1&t&&(m.Gf(iY,5),m.Gf(sY,5)),2&t){let i;m.iGM(i=m.CRH())&&(r.el=i.first),m.iGM(i=m.CRH())&&(r.yourElement=i.first)}},hostBindings:function(t,r){1&t&&m.NdJ("resize",function(s){return r.onResize(s)},!1,m.Jf7)},decls:75,vars:21,consts:[[1,"cvContainer"],[1,"main"],["pdfTable","","CVMain",""],[1,"navbar","navbar-dark","navbar-expand-lg","bg-dark"],[1,"container-fluid"],["type","button","data-bs-toggle","offcanvas","aria-expanded","false","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[4,"ngIf"],[1,"cv"],[1,"presonalInfos","bg-dark"],[1,"perentprofilephoto"],[1,"profilePhoto"],["src","https://avatars.githubusercontent.com/u/37112508?v=4","alt","profile Image",1,""],[1,"profoleName"],[1,"profile"],[1,"ProfileTitle"],[1,"title"],[1,"hr2"],[1,"presentation"],[1,"bi","bi-quote"],["style","display: contents;",3,"periodItem",4,"ngFor","ngForOf"],[1,"title","fontBold"],["style","display: contents;",3,"periodItem","periodItemType",4,"ngFor","ngForOf"],[2,"display","contents",3,"periodItem"],[2,"display","contents",3,"periodItem","periodItemType"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1,2)(4,"nav",3)(5,"div",4)(6,"button",5),m._UZ(7,"span",6),m.qZA(),m.TgZ(8,"div",7)(9,"div",8),m._UZ(10,"button",9),m.qZA(),m.TgZ(11,"div",10),m.YNc(12,oY,1,0,"app-personal-details",11),m.qZA()()()(),m.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"div",15),m._UZ(17,"img",16),m.qZA(),m.TgZ(18,"div",17),m._uU(19," MANFOUO KENFOUO Borient "),m.qZA()(),m._UZ(20,"br"),m.YNc(21,aY,1,0,"app-personal-details",11),m.qZA(),m.TgZ(22,"div",18),m._UZ(23,"br"),m.TgZ(24,"div")(25,"div",19)(26,"div",20),m._uU(27),m.ALo(28,"uppercase"),m.qZA(),m.TgZ(29,"div",21),m._UZ(30,"hr"),m.qZA()(),m.TgZ(31,"div",22),m._UZ(32,"i",23),m._uU(33," En quelques lignes : je suis d\xe9veloppeur web et mobile depuis plus de 3 ans. Je poss\xe8de une exp\xe9rience dans la mise en place des solutions informatiques pour les entreprises et les particuliers. "),m.qZA()(),m._UZ(34,"br"),m.TgZ(35,"div")(36,"div",19)(37,"div",20),m._uU(38),m.ALo(39,"uppercase"),m.qZA(),m.TgZ(40,"div",21),m._UZ(41,"hr"),m.qZA()(),m.TgZ(42,"div",22),m.YNc(43,cY,1,1,"app-item-by-period",24),m.qZA()(),m._UZ(44,"br"),m.TgZ(45,"div")(46,"div",19)(47,"div",25),m._uU(48),m.ALo(49,"uppercase"),m.qZA(),m.TgZ(50,"div",21),m._UZ(51,"hr"),m.qZA()(),m.TgZ(52,"div",22),m.YNc(53,lY,1,1,"app-item-by-period",24),m.qZA()(),m._UZ(54,"br"),m.TgZ(55,"div")(56,"div",19)(57,"div",20),m._uU(58),m.ALo(59,"uppercase"),m.qZA(),m.TgZ(60,"div",21),m._UZ(61,"hr"),m.qZA()(),m.TgZ(62,"div",22),m.YNc(63,uY,1,2,"app-item-by-period",26),m.qZA()(),m._UZ(64,"br"),m.TgZ(65,"div")(66,"div",19)(67,"div",20),m._uU(68),m.ALo(69,"uppercase"),m.qZA(),m.TgZ(70,"div",21),m._UZ(71,"hr"),m.qZA()(),m.TgZ(72,"div",22),m.YNc(73,dY,1,1,"app-item-by-period",24),m.qZA()()()(),m._UZ(74,"app-footer"),m.qZA()()),2&t&&(m.xp6(12),m.Q6J("ngIf",r.IsValidScreen),m.xp6(9),m.Q6J("ngIf",!r.IsValidScreen),m.xp6(6),m.hij(" ",m.lcZ(28,11,"// ")," "),m.xp6(11),m.hij(" ",m.lcZ(39,13,"// formations")," "),m.xp6(5),m.Q6J("ngForOf",r.formations),m.xp6(5),m.hij(" ",m.lcZ(49,15,"// experience")," "),m.xp6(5),m.Q6J("ngForOf",r.experiences),m.xp6(5),m.hij(" ",m.lcZ(59,17,"// competences")," "),m.xp6(5),m.Q6J("ngForOf",r.competences.PeriodModelArray),m.xp6(5),m.hij(" ",m.lcZ(69,19,"// Projets")," "),m.xp6(5),m.Q6J("ngForOf",r.projets))},dependencies:[Wo,Li,pT,gT,mT,Bg],styles:[".cvContainer[_ngcontent-%COMP%]{width:100%;margin:0%;display:flex;justify-content:center}.main[_ngcontent-%COMP%]{width:850px;display:flex;flex-direction:column}.cv[_ngcontent-%COMP%]{width:850px;height:auto;display:flex}.presonalInfos[_ngcontent-%COMP%]{width:250px;height:100%}.profile[_ngcontent-%COMP%]{width:600px;height:auto;padding-left:15px;padding-right:25px}.perentprofilephoto[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.profilePhoto[_ngcontent-%COMP%]{width:100%;height:220px;display:flex;justify-content:center;align-items:center}.profilePhoto[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:50%}.profoleName[_ngcontent-%COMP%]{height:auto;width:180px;text-align:center;color:var(--white)}@media screen and (max-width: 600px){.cv[_ngcontent-%COMP%]{width:100%;display:block}.presonalInfos[_ngcontent-%COMP%]{width:100%;height:auto}.profile[_ngcontent-%COMP%]{width:100%}.btnMyProfile[_ngcontent-%COMP%]{display:block}}"]})}function Vh(){}const hY=function(){let n=0;return function(){return n++}}();function Ai(n){return null===n||typeof n>"u"}function _s(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function di(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}const lo=n=>("number"==typeof n||n instanceof Number)&&isFinite(+n);function Pl(n,e){return lo(n)?n:e}function Qr(n,e){return typeof n>"u"?e:n}const h7=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ys(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function Yi(n,e,t,r){let i,s,o;if(_s(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(di(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function yT(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function vT(n){if(_s(n))return n.map(vT);if(di(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=vT(n[t[i]]);return e}return n}function f7(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function pY(n,e,t,r){if(!f7(n))return;const i=e[n],s=t[n];di(i)&&di(s)?Z2(i,s,r):e[n]=vT(s)}function Z2(n,e,t){const r=_s(e)?e:[e],i=r.length;if(!di(n))return n;const s=(t=t||{}).merger||pY;for(let o=0;o<i;++o){if(!di(e=r[o]))continue;const l=Object.keys(e);for(let d=0,h=l.length;d<h;++d)s(l[d],n,e,t)}return n}function Y2(n,e){return Z2(n,e,{merger:gY})}function gY(n,e,t){if(!f7(n))return;const r=e[n],i=t[n];di(r)&&di(i)?Y2(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=vT(i))}const p7={"":n=>n,x:n=>n.x,y:n=>n.y};function Wp(n,e){return(p7[e]||(p7[e]=function mY(n){const e=function _Y(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(n);return t=>{for(const r of e){if(""===r)break;t=t&&t[r]}return t}}(e)))(n)}function TR(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Rl=n=>typeof n<"u",$p=n=>"function"==typeof n,g7=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},Fs=Math.PI,is=2*Fs,vY=is+Fs,bT=Number.POSITIVE_INFINITY,bY=Fs/180,Xs=Fs/2,Q2=Fs/4,m7=2*Fs/3,Ol=Math.log10,vd=Math.sign;function _7(n){const e=Math.round(n);n=X2(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Ol(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function Rv(n){return!isNaN(parseFloat(n))&&isFinite(n)}function X2(n,e,t){return Math.abs(n-e)<t}function y7(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function yu(n){return n*(Fs/180)}function DR(n){return n*(180/Fs)}function v7(n){if(!lo(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function b7(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Fs&&(s+=is),{angle:s,distance:i}}function MR(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function EY(n,e){return(n-e+vY)%is-Fs}function sl(n){return(n%is+is)%is}function J2(n,e,t,r){const i=sl(n),s=sl(e),o=sl(t),l=sl(s-i),d=sl(o-i),h=sl(i-s),g=sl(i-o);return i===s||i===o||r&&s===o||l>d&&h<g}function Jo(n,e,t){return Math.max(e,Math.min(t,n))}function zh(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function NR(n,e,t){t=t||(o=>n[o]<e);let s,r=n.length-1,i=0;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const Hh=(n,e,t,r)=>NR(n,t,r?i=>n[i][e]<=t:i=>n[i][e]<t),SY=(n,e,t)=>NR(n,t,r=>n[r][e]>=t),w7=["push","pop","shift","splice","unshift"];function I7(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),!(r.length>0)&&(w7.forEach(s=>{delete n[s]}),delete n._chartjs)}function E7(n){const e=new Set;let t,r;for(t=0,r=n.length;t<r;++t)e.add(n[t]);return e.size===r?n:Array.from(e)}const x7=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function S7(n,e,t){const r=t||(o=>Array.prototype.slice.call(o));let i=!1,s=[];return function(...o){s=r(o),i||(i=!0,x7.call(window,()=>{i=!1,n.apply(e,s)}))}}const kR=n=>"start"===n?"left":"end"===n?"right":"center",Ma=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function A7(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:l}=n,d=o.axis,{min:h,max:g,minDefined:v,maxDefined:E}=o.getUserBounds();v&&(i=Jo(Math.min(Hh(l,o.axis,h).lo,t?r:Hh(e,d,o.getPixelForValue(h)).lo),0,r-1)),s=E?Jo(Math.max(Hh(l,o.axis,g,!0).hi+1,t?0:Hh(e,d,o.getPixelForValue(g),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function C7(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const wT=n=>0===n||1===n,T7=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*is/t),D7=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*is/t)+1,eI={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*Xs),easeOutSine:n=>Math.sin(n*Xs),easeInOutSine:n=>-.5*(Math.cos(Fs*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>wT(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>wT(n)?n:T7(n,.075,.3),easeOutElastic:n=>wT(n)?n:D7(n,.075,.3),easeInOutElastic:n=>wT(n)?n:n<.5?.5*T7(2*n,.1125,.45):.5+.5*D7(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-eI.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*eI.easeInBounce(2*n):.5*eI.easeOutBounce(2*n-1)+.5};function tI(n){return n+.5|0}const qp=(n,e,t)=>Math.max(Math.min(n,t),e);function nI(n){return qp(tI(2.55*n),0,255)}function Gp(n){return qp(tI(255*n),0,255)}function Wh(n){return qp(tI(n/2.55)/100,0,1)}function M7(n){return qp(tI(100*n),0,100)}const Ll={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},PR=[..."0123456789ABCDEF"],MY=n=>PR[15&n],NY=n=>PR[(240&n)>>4]+PR[15&n],IT=n=>(240&n)>>4==(15&n);const LY=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function N7(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function FY(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function BY(n,e,t){const r=N7(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function RR(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),l=(s+o)/2;let d,h,g;return s!==o&&(g=s-o,h=l>.5?g/(2-s-o):g/(s+o),d=function UY(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}(t,r,i,g,s),d=60*d+.5),[0|d,h||0,l]}function OR(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Gp)}function LR(n,e,t){return OR(N7,n,e,t)}function k7(n){return(n%360+360)%360}const P7={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},R7={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ET;const GY=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,FR=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,Ov=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function xT(n,e,t){if(n){let r=RR(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,0===e?360:1)),r=LR(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function O7(n,e){return n&&Object.assign(e||{},n)}function L7(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Gp(n[3]))):(e=O7(n,{r:0,g:0,b:0,a:1})).a=Gp(e.a),e}function QY(n){return"r"===n.charAt(0)?function KY(n){const e=GY.exec(n);let r,i,s,t=255;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?nI(o):qp(255*o,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?nI(r):qp(r,0,255)),i=255&(e[4]?nI(i):qp(i,0,255)),s=255&(e[6]?nI(s):qp(s,0,255)),{r,g:i,b:s,a:t}}}(n):function zY(n){const e=LY.exec(n);let r,t=255;if(!e)return;e[5]!==r&&(t=e[6]?nI(+e[5]):Gp(+e[5]));const i=k7(+e[2]),s=+e[3]/100,o=+e[4]/100;return r="hwb"===e[1]?function jY(n,e,t){return OR(BY,n,e,t)}(i,s,o):"hsv"===e[1]?function VY(n,e,t){return OR(FY,n,e,t)}(i,s,o):LR(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}(n)}class ST{constructor(e){if(e instanceof ST)return e;const t=typeof e;let r;"object"===t?r=L7(e):"string"===t&&(r=function PY(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*Ll[n[1]],g:255&17*Ll[n[2]],b:255&17*Ll[n[3]],a:5===e?17*Ll[n[4]]:255}:(7===e||9===e)&&(t={r:Ll[n[1]]<<4|Ll[n[2]],g:Ll[n[3]]<<4|Ll[n[4]],b:Ll[n[5]]<<4|Ll[n[6]],a:9===e?Ll[n[7]]<<4|Ll[n[8]]:255})),t}(e)||function qY(n){ET||(ET=function $Y(){const n={},e=Object.keys(R7),t=Object.keys(P7);let r,i,s,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],i=0;i<t.length;i++)s=t[i],l=l.replace(s,P7[s]);s=parseInt(R7[o],16),n[l]=[s>>16&255,s>>8&255,255&s]}return n}(),ET.transparent=[0,0,0,0]);const e=ET[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||QY(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=O7(this._rgb);return e&&(e.a=Wh(e.a)),e}set rgb(e){this._rgb=L7(e)}rgbString(){return this._valid?function ZY(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Wh(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function OY(n){var e=(n=>IT(n.r)&&IT(n.g)&&IT(n.b)&&IT(n.a))(n)?MY:NY;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function WY(n){if(!n)return;const e=RR(n),t=e[0],r=M7(e[1]),i=M7(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Wh(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,l=2*o-1,d=r.a-i.a,h=((l*d==-1?l:(l+d)/(1+l*d))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function YY(n,e,t){const r=Ov(Wh(n.r)),i=Ov(Wh(n.g)),s=Ov(Wh(n.b));return{r:Gp(FR(r+t*(Ov(Wh(e.r))-r))),g:Gp(FR(i+t*(Ov(Wh(e.g))-i))),b:Gp(FR(s+t*(Ov(Wh(e.b))-s))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new ST(this.rgb)}alpha(e){return this._rgb.a=Gp(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=tI(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return xT(this._rgb,2,e),this}darken(e){return xT(this._rgb,2,-e),this}saturate(e){return xT(this._rgb,1,e),this}desaturate(e){return xT(this._rgb,1,-e),this}rotate(e){return function HY(n,e){var t=RR(n);t[0]=k7(t[0]+e),t=LR(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function F7(n){return new ST(n)}function B7(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function U7(n){return B7(n)?n:F7(n)}function BR(n){return B7(n)?n:F7(n).saturate(.5).darken(.1).hexString()}const T_=Object.create(null),UR=Object.create(null);function rI(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function jR(n,e,t){return"string"==typeof e?Z2(rI(n,e),t):Z2(rI(n,""),e)}var hi=new class XY{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,r)=>BR(r.backgroundColor),this.hoverBorderColor=(t,r)=>BR(r.borderColor),this.hoverColor=(t,r)=>BR(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return jR(this,e,t)}get(e){return rI(this,e)}describe(e,t){return jR(UR,e,t)}override(e,t){return jR(T_,e,t)}route(e,t,r,i){const s=rI(this,e),o=rI(this,r),l="_"+t;Object.defineProperties(s,{[l]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[l],h=o[i];return di(d)?Object.assign({},h,d):Qr(d,h)},set(d){this[l]=d}}})}}({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function AT(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function eQ(n,e,t,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const l=t.length;let d,h,g,v,E;for(d=0;d<l;d++)if(v=t[d],null!=v&&!0!==_s(v))o=AT(n,i,s,o,v);else if(_s(v))for(h=0,g=v.length;h<g;h++)E=v[h],null!=E&&!_s(E)&&(o=AT(n,i,s,o,E));n.restore();const w=s.length/2;if(w>t.length){for(d=0;d<w;d++)delete i[s[d]];s.splice(0,w)}return o}function D_(n,e,t){const r=n.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function j7(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function VR(n,e,t,r){V7(n,e,t,r,null)}function V7(n,e,t,r,i){let s,o,l,d,h,g;const v=e.pointStyle,E=e.rotation,w=e.radius;let D=(E||0)*bY;if(v&&"object"==typeof v&&(s=v.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(t,r),n.rotate(D),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),void n.restore();if(!(isNaN(w)||w<=0)){switch(n.beginPath(),v){default:i?n.ellipse(t,r,i/2,w,0,0,is):n.arc(t,r,w,0,is),n.closePath();break;case"triangle":n.moveTo(t+Math.sin(D)*w,r-Math.cos(D)*w),D+=m7,n.lineTo(t+Math.sin(D)*w,r-Math.cos(D)*w),D+=m7,n.lineTo(t+Math.sin(D)*w,r-Math.cos(D)*w),n.closePath();break;case"rectRounded":h=.516*w,d=w-h,o=Math.cos(D+Q2)*d,l=Math.sin(D+Q2)*d,n.arc(t-o,r-l,h,D-Fs,D-Xs),n.arc(t+l,r-o,h,D-Xs,D),n.arc(t+o,r+l,h,D,D+Xs),n.arc(t-l,r+o,h,D+Xs,D+Fs),n.closePath();break;case"rect":if(!E){d=Math.SQRT1_2*w,g=i?i/2:d,n.rect(t-g,r-d,2*g,2*d);break}D+=Q2;case"rectRot":o=Math.cos(D)*w,l=Math.sin(D)*w,n.moveTo(t-o,r-l),n.lineTo(t+l,r-o),n.lineTo(t+o,r+l),n.lineTo(t-l,r+o),n.closePath();break;case"crossRot":D+=Q2;case"cross":o=Math.cos(D)*w,l=Math.sin(D)*w,n.moveTo(t-o,r-l),n.lineTo(t+o,r+l),n.moveTo(t+l,r-o),n.lineTo(t-l,r+o);break;case"star":o=Math.cos(D)*w,l=Math.sin(D)*w,n.moveTo(t-o,r-l),n.lineTo(t+o,r+l),n.moveTo(t+l,r-o),n.lineTo(t-l,r+o),D+=Q2,o=Math.cos(D)*w,l=Math.sin(D)*w,n.moveTo(t-o,r-l),n.lineTo(t+o,r+l),n.moveTo(t+l,r-o),n.lineTo(t-l,r+o);break;case"line":o=i?i/2:Math.cos(D)*w,l=Math.sin(D)*w,n.moveTo(t-o,r-l),n.lineTo(t+o,r+l);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(D)*w,r+Math.sin(D)*w)}n.fill(),e.borderWidth>0&&n.stroke()}}function iI(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function CT(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function TT(n){n.restore()}function tQ(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if("middle"===i){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else"after"===i!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function nQ(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function M_(n,e,t,r,i,s={}){const o=_s(e)?e:[e],l=s.strokeWidth>0&&""!==s.strokeColor;let d,h;for(n.save(),n.font=i.string,function rQ(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ai(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,s),d=0;d<o.length;++d)h=o[d],l&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ai(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(h,t,r,s.maxWidth)),n.fillText(h,t,r,s.maxWidth),iQ(n,t,r,h,s),r+=i.lineHeight;n.restore()}function iQ(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,d=t-s.actualBoundingBoxAscent,h=t+s.actualBoundingBoxDescent,g=i.strikethrough?(d+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,g),n.lineTo(l,g),n.stroke()}}function sI(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,-Xs,Fs,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Fs,Xs,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Xs,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Xs,!0),n.lineTo(t+o.topLeft,r)}const sQ=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),oQ=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function aQ(n,e){const t=(""+n).match(sQ);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const cQ=n=>+n||0;function zR(n,e){const t={},r=di(e),i=r?Object.keys(e):e,s=di(n)?r?o=>Qr(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=cQ(s(o));return t}function z7(n){return zR(n,{top:"y",right:"x",bottom:"y",left:"x"})}function N_(n){return zR(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Na(n){const e=z7(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Uo(n,e){let t=Qr((n=n||{}).size,(e=e||hi.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=Qr(n.style,e.style);r&&!(""+r).match(oQ)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const i={family:Qr(n.family,e.family),lineHeight:aQ(Qr(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Qr(n.weight,e.weight),string:""};return i.string=function JY(n){return!n||Ai(n.size)||Ai(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(i),i}function oI(n,e,t,r){let s,o,l,i=!0;for(s=0,o=n.length;s<o;++s)if(l=n[s],void 0!==l&&(void 0!==e&&"function"==typeof l&&(l=l(e),i=!1),void 0!==t&&_s(l)&&(l=l[t%l.length],i=!1),void 0!==l))return r&&!i&&(r.cacheable=!1),l}function Kp(n,e){return Object.assign(Object.create(n),e)}function HR(n,e=[""],t=n,r,i=(()=>n[0])){Rl(r)||(r=G7("_fallback",n));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:t,_fallback:r,_getTarget:i,override:o=>HR([o,...n],e,t,r)};return new Proxy(s,{deleteProperty:(o,l)=>(delete o[l],delete o._keys,delete n[0][l],!0),get:(o,l)=>W7(o,l,()=>function _Q(n,e,t,r){let i;for(const s of e)if(i=G7(uQ(s,n),t),Rl(i))return WR(n,i)?$R(t,r,n,i):i}(l,e,n,o)),getOwnPropertyDescriptor:(o,l)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(o,l)=>K7(o).includes(l),ownKeys:o=>K7(o),set(o,l,d){const h=o._storage||(o._storage=i());return o[l]=h[l]=d,delete o._keys,!0}})}function Lv(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:H7(n,r),setContext:s=>Lv(n,s,t,r),override:s=>Lv(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty:(s,o)=>(delete s[o],delete n[o],!0),get:(s,o,l)=>W7(s,o,()=>function dQ(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let l=r[e];return $p(l)&&o.isScriptable(e)&&(l=function hQ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);return l.add(n),e=e(s,o||r),l.delete(n),WR(n,e)&&(e=$R(i._scopes,i,n,e)),e}(e,l,n,t)),_s(l)&&l.length&&(l=function fQ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:l}=t;if(Rl(s.index)&&r(n))e=e[s.index%e.length];else if(di(e[0])){const d=e,h=i._scopes.filter(g=>g!==d);e=[];for(const g of d){const v=$R(h,i,n,g);e.push(Lv(v,s,o&&o[n],l))}}return e}(e,l,n,o.isIndexable)),WR(e,l)&&(l=Lv(l,i,s&&s[e],o)),l}(s,o,l)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(s,o,l)=>(n[o]=l,delete s[o],!0)})}function H7(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:$p(t)?t:()=>t,isIndexable:$p(r)?r:()=>r}}const uQ=(n,e)=>n?n+TR(e):e,WR=(n,e)=>di(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function W7(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const r=t();return n[e]=r,r}function $7(n,e,t){return $p(n)?n(e,t):n}const pQ=(n,e)=>!0===n?e:"string"==typeof n?Wp(e,n):void 0;function gQ(n,e,t,r,i){for(const s of e){const o=pQ(t,s);if(o){n.add(o);const l=$7(o._fallback,t,i);if(Rl(l)&&l!==t&&l!==r)return l}else if(!1===o&&Rl(r)&&t!==r)return null}return!1}function $R(n,e,t,r){const i=e._rootScopes,s=$7(e._fallback,t,r),o=[...n,...i],l=new Set;l.add(r);let d=q7(l,o,t,s||t,r);return!(null===d||Rl(s)&&s!==t&&(d=q7(l,o,s,d,r),null===d))&&HR(Array.from(l),[""],i,s,()=>function mQ(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return _s(i)&&di(t)?t:i}(e,t,r))}function q7(n,e,t,r,i){for(;t;)t=gQ(n,e,t,r,i);return t}function G7(n,e){for(const t of e){if(!t)continue;const r=t[n];if(Rl(r))return r}}function K7(n){let e=n._keys;return e||(e=n._keys=function yQ(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}(n._scopes)),e}function Z7(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let l,d,h,g;for(l=0,d=r;l<d;++l)h=l+t,g=e[h],o[l]={r:i.parse(Wp(g,s),h)};return o}const vQ=Number.EPSILON||1e-14,Fv=(n,e)=>e<n.length&&!n[e].skip&&n[e],Y7=n=>"x"===n?"y":"x";function bQ(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,l=MR(s,i),d=MR(o,s);let h=l/(l+d),g=d/(l+d);h=isNaN(h)?0:h,g=isNaN(g)?0:g;const v=r*h,E=r*g;return{previous:{x:s.x-v*(o.x-i.x),y:s.y-v*(o.y-i.y)},next:{x:s.x+E*(o.x-i.x),y:s.y+E*(o.y-i.y)}}}function DT(n,e,t){return Math.max(Math.min(n,t),e)}function SQ(n,e,t,r,i){let s,o,l,d;if(e.spanGaps&&(n=n.filter(h=>!h.skip)),"monotone"===e.cubicInterpolationMode)!function EQ(n,e="x"){const t=Y7(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,l,d,h=Fv(n,0);for(o=0;o<r;++o)if(l=d,d=h,h=Fv(n,o+1),d){if(h){const g=h[e]-d[e];i[o]=0!==g?(h[t]-d[t])/g:0}s[o]=l?h?vd(i[o-1])!==vd(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}(function wQ(n,e,t){const r=n.length;let i,s,o,l,d,h=Fv(n,0);for(let g=0;g<r-1;++g)if(d=h,h=Fv(n,g+1),d&&h){if(X2(e[g],0,vQ)){t[g]=t[g+1]=0;continue}i=t[g]/e[g],s=t[g+1]/e[g],l=Math.pow(i,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),t[g]=i*o*e[g],t[g+1]=s*o*e[g])}})(n,i,s),function IQ(n,e,t="x"){const r=Y7(t),i=n.length;let s,o,l,d=Fv(n,0);for(let h=0;h<i;++h){if(o=l,l=d,d=Fv(n,h+1),!l)continue;const g=l[t],v=l[r];o&&(s=(g-o[t])/3,l[`cp1${t}`]=g-s,l[`cp1${r}`]=v-s*e[h]),d&&(s=(d[t]-g)/3,l[`cp2${t}`]=g+s,l[`cp2${r}`]=v+s*e[h])}}(n,s,e)}(n,i);else{let h=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)l=n[s],d=bQ(h,l,n[Math.min(s+1,o-(r?0:1))%o],e.tension),l.cp1x=d.previous.x,l.cp1y=d.previous.y,l.cp2x=d.next.x,l.cp2y=d.next.y,h=l}e.capBezierPoints&&function xQ(n,e){let t,r,i,s,o,l=iI(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=l,l=t<r-1&&iI(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=DT(i.cp1x,e.left,e.right),i.cp1y=DT(i.cp1y,e.top,e.bottom)),l&&(i.cp2x=DT(i.cp2x,e.left,e.right),i.cp2y=DT(i.cp2y,e.top,e.bottom)))}(n,t)}function Q7(){return typeof window<"u"&&typeof document<"u"}function qR(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function MT(n,e,t){let r;return"string"==typeof n?(r=parseInt(n,10),-1!==n.indexOf("%")&&(r=r/100*e.parentNode[t])):r=n,r}const NT=n=>window.getComputedStyle(n,null),CQ=["top","right","bottom","left"];function k_(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=CQ[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function P_(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=NT(t),s="border-box"===i.boxSizing,o=k_(i,"padding"),l=k_(i,"border","width"),{x:d,y:h,box:g}=function DQ(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let l,d,o=!1;if(((n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot))(i,s,n.target))l=i,d=s;else{const h=e.getBoundingClientRect();l=r.clientX-h.left,d=r.clientY-h.top,o=!0}return{x:l,y:d,box:o}}(n,t),v=o.left+(g&&l.left),E=o.top+(g&&l.top);let{width:w,height:D}=e;return s&&(w-=o.width+l.width,D-=o.height+l.height),{x:Math.round((d-v)/w*t.width/r),y:Math.round((h-E)/D*t.height/r)}}const GR=n=>Math.round(10*n)/10;function X7(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=i/r,n.width=s/r;const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0)}const kQ=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function J7(n,e){const t=function AQ(n,e){return NT(n).getPropertyValue(e)}(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function R_(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function PQ(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:"middle"===r?t<.5?n.y:e.y:"after"===r?t<1?n.y:e.y:t>0?e.y:n.y}}function RQ(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=R_(n,i,t),l=R_(i,s,t),d=R_(s,e,t),h=R_(o,l,t),g=R_(l,d,t);return R_(h,g,t)}const eU=new Map;function aI(n,e,t){return function OQ(n,e){e=e||{};const t=n+JSON.stringify(e);let r=eU.get(t);return r||(r=new Intl.NumberFormat(n,e),eU.set(t,r)),r}(e,t).format(n)}function Bv(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function tU(n,e){let t,r;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function nU(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function rU(n){return"angle"===n?{between:J2,compare:EY,normalize:sl}:{between:zh,compare:(e,t)=>e-t,normalize:e=>e}}function iU({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t==0,style:i}}function sU(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:l,between:d,normalize:h}=rU(r),{start:g,end:v,loop:E,style:w}=function BQ(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:l}=rU(r),d=e.length;let E,w,{start:h,end:g,loop:v}=n;if(v){for(h+=d,g+=d,E=0,w=d;E<w&&o(l(e[h%d][r]),i,s);++E)h--,g--;h%=d,g%=d}return g<h&&(g+=d),{start:h,end:g,loop:v,style:n.style}}(n,e,t),D=[];let F,U,K,P=!1,L=null;for(let oe=g,Be=g;oe<=v;++oe)U=e[oe%o],!U.skip&&(F=h(U[r]),F!==K&&(P=d(F,i,s),null===L&&(P||d(i,K,F)&&0!==l(i,K))&&(L=0===l(F,i)?oe:Be),null!==L&&(!P||0===l(s,F)||d(s,K,F))&&(D.push(iU({start:L,end:oe,loop:E,count:o,style:w})),L=null),Be=oe,K=F));return null!==L&&D.push(iU({start:L,end:v,loop:E,count:o,style:w})),D}function oU(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=sU(r[i],n.points,e);s.length&&t.push(...s)}return t}function cU(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function HQ(n,e){return e&&JSON.stringify(n)!==JSON.stringify(e)}var $h=new class WQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.duration;t.listeners[i].forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=x7.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let d,o=s.length-1,l=!1;for(;o>=0;--o)d=s[o],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);!t||(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const lU="transparent",$Q={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const r=U7(n||lU),i=r.valid&&U7(e||lU);return i&&i.valid?i.mix(r,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class qQ{constructor(e,t,r,i){const s=t[r];i=oI([e.to,i,s,e.from]);const o=oI([e.from,s,i]);this._active=!0,this._fn=e.fn||$Q[e.type||typeof o],this._easing=eI[e.easing]||eI.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=oI([e.to,t,i,e.from]),this._from=oI([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,l=this._to;let d;if(this._active=s!==l&&(o||t<r),!this._active)return this._target[i]=l,void this._notify(!0);t<0?this._target[i]=s:(d=t/r%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[i]=this._fn(s,l,d))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}hi.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const ZQ=Object.keys(hi.animation);hi.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>"onProgress"!==n&&"onComplete"!==n&&"fn"!==n}),hi.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),hi.describe("animations",{_fallback:"animation"}),hi.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>0|n}}}});class uU{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!di(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!di(i))return;const s={};for(const o of ZQ)s[o]=i[o];(_s(i.properties)&&i.properties||[r]).forEach(o=>{(o===r||!t.has(o))&&t.set(o,s)})})}_animateOptions(e,t){const r=t.options,i=function QQ(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&function YQ(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let d;for(d=o.length-1;d>=0;--d){const h=o[d];if("$"===h.charAt(0))continue;if("options"===h){i.push(...this._animateOptions(e,t));continue}const g=t[h];let v=s[h];const E=r.get(h);if(v){if(E&&v.active()){v.update(E,g,l);continue}v.cancel()}E&&E.duration?(s[h]=v=new qQ(E,e,h,g),i.push(v)):e[h]=g}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?($h.add(this._chart,r),!0):void 0}}function dU(n,e){const t=n&&n.options||{},r=t.reverse,i=void 0===t.min?e:0,s=void 0===t.max?e:0;return{start:r?s:i,end:r?i:s}}function hU(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function fU(n,e,t,r={}){const i=n.keys,s="single"===r.mode;let o,l,d,h;if(null!==e){for(o=0,l=i.length;o<l;++o){if(d=+i[o],d===t){if(r.all)continue;break}h=n.values[d],lo(h)&&(s||0===e||vd(e)===vd(h))&&(e+=h)}return e}}function pU(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function rX(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function gU(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function mU(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:l}=r,d=s.axis,h=o.axis,g=function tX(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(s,o,r),v=e.length;let E;for(let w=0;w<v;++w){const D=e[w],{[d]:P,[h]:L}=D;E=(D._stacks||(D._stacks={}))[h]=rX(i,g,P),E[l]=L,E._top=gU(E,o,!0,r.type),E._bottom=gU(E,o,!1,r.type)}}function KR(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function cI(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||void 0===s[r]||void 0===s[r][t])return;delete s[r][t]}}}const ZR=n=>"reset"===n||"none"===n,_U=(n,e)=>e?n:Object.assign({},n);let bd=(()=>{class n{constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=pU(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&cI(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(E,w,D,P)=>"x"===E?w:"r"===E?P:D,o=r.xAxisID=Qr(i.xAxisID,KR(t,"x")),l=r.yAxisID=Qr(i.yAxisID,KR(t,"y")),d=r.rAxisID=Qr(i.rAxisID,KR(t,"r")),h=r.indexAxis,g=r.iAxisID=s(h,o,l,d),v=r.vAxisID=s(h,l,o,d);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(l),r.rScale=this.getScaleForId(d),r.iScale=this.getScaleForId(g),r.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&I7(this._data,this),t._stacked&&cI(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(di(r))this._data=function eX(n){const e=Object.keys(n),t=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],t[r]={x:s,y:n[s]};return t}(r);else if(i!==r){if(i){I7(i,this);const s=this._cachedMeta;cI(s),s._parsed=[]}r&&Object.isExtensible(r)&&function CY(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),w7.forEach(t=>{const r="_onData"+TR(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(l=>{"function"==typeof l[r]&&l[r](...s)}),o}})}))}(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=r._stacked;r._stacked=pU(r.vScale,r),r.stack!==i.stack&&(s=!0,cI(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&mU(this,r._parsed)}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:l}=i,d=o.axis;let v,E,w,h=0===t&&r===s.length||i._sorted,g=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,w=s;else{w=_s(s[t])?this.parseArrayData(i,s,t,r):di(s[t])?this.parseObjectData(i,s,t,r):this.parsePrimitiveData(i,s,t,r);const D=()=>null===E[d]||g&&E[d]<g[d];for(v=0;v<r;++v)i._parsed[v+t]=E=w[v],h&&(D()&&(h=!1),g=E);i._sorted=h}l&&mU(this,w)}parsePrimitiveData(t,r,i,s){const{iScale:o,vScale:l}=t,d=o.axis,h=l.axis,g=o.getLabels(),v=o===l,E=new Array(s);let w,D,P;for(w=0,D=s;w<D;++w)P=w+i,E[w]={[d]:v||o.parse(g[P],P),[h]:l.parse(r[P],P)};return E}parseArrayData(t,r,i,s){const{xScale:o,yScale:l}=t,d=new Array(s);let h,g,v,E;for(h=0,g=s;h<g;++h)v=h+i,E=r[v],d[h]={x:o.parse(E[0],v),y:l.parse(E[1],v)};return d}parseObjectData(t,r,i,s){const{xScale:o,yScale:l}=t,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,g=new Array(s);let v,E,w,D;for(v=0,E=s;v<E;++v)w=v+i,D=r[w],g[v]={x:o.parse(Wp(D,d),w),y:l.parse(Wp(D,h),w)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){const o=this._cachedMeta,l=r[t.axis];return fU({keys:hU(this.chart,!0),values:r._stacks[t.axis]},l,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){const o=i[r.axis];let l=null===o?NaN:o;const d=s&&i._stacks[r.axis];s&&d&&(s.values=d,l=fU(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,r){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,l=s.length,d=this._getOtherScale(t),h=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:hU(this.chart,!0),values:null})(r,i),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:E}=function nX(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(d);let w,D;function P(){D=s[w];const L=D[d.axis];return!lo(D[t.axis])||v>L||E<L}for(w=0;w<l&&(P()||(this.updateRangeFromParsed(g,t,D,h),!o));++w);if(o)for(w=l-1;w>=0;--w)if(!P()){this.updateRangeFromParsed(g,t,D,h);break}return g}getAllParsedValues(t){const r=this._cachedMeta._parsed,i=[];let s,o,l;for(s=0,o=r.length;s<o;++s)l=r[s][t.axis],lo(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=function JQ(n){let e,t,r,i;return di(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:!1===n}}(Qr(this.options.clip,function XQ(n,e,t){if(!1===t)return!1;const r=dU(n,t),i=dU(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this._cachedMeta,s=i.data||[],o=this.chart.chartArea,l=[],d=this._drawStart||0,h=this._drawCount||s.length-d,g=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,o,d,h),v=d;v<d+h;++v){const E=s[v];E.hidden||(E.active&&g?l.push(E):E.draw(t,o))}for(v=0;v<l.length;++v)l[v].draw(t,o)}getStyle(t,r){const i=r?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];o=l.$context||(l.$context=function sX(n,e,t){return Kp(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),t,l)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function iX(n,e){return Kp(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){const s="active"===r,o=this._cachedDataOpts,l=t+"-"+r,d=o[l],h=this.enableOptionSharing&&Rl(i);if(d)return _U(d,h);const g=this.chart.config,v=g.datasetElementScopeKeys(this._type,t),E=s?[`${t}Hover`,"hover",t,""]:[t,""],w=g.getOptionScopes(this.getDataset(),v),D=Object.keys(hi.elements[t]),L=g.resolveNamedOptions(w,D,()=>this.getContext(i,s),E);return L.$shared&&(L.$shared=h,o[l]=Object.freeze(_U(L,h))),L}_resolveAnimations(t,r,i){const s=this.chart,o=this._cachedDataOpts,l=`animation-${r}`,d=o[l];if(d)return d;let h;if(!1!==s.options.animation){const v=this.chart.config,E=v.datasetAnimationScopeKeys(this._type,r),w=v.getOptionScopes(this.getDataset(),E);h=v.createResolver(w,this.getContext(t,i,r))}const g=new uU(s,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||ZR(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:l}}updateElement(t,r,i,s){ZR(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!ZR(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;const o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,i=this._cachedMeta.data;for(const[d,h,g]of this._syncList)this[d](h,g);this._syncList=[];const s=i.length,o=r.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){const s=this._cachedMeta,o=s.data,l=t+r;let d;const h=g=>{for(g.length+=r,d=g.length-1;d>=l;d--)g[d]=g[d-r]};for(h(o),d=t;d<l;++d)o[d]=new this.dataElementType;this._parsing&&h(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,r);i._stacked&&cI(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n.defaults={},n})();function cX(n){const e=n.iScale,t=function aX(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=E7(r.sort((i,s)=>i-s))}return n._cache.$bar}(e,n.type);let i,s,o,l,r=e._length;const d=()=>{32767===o||-32768===o||(Rl(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),d();for(l=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),d();return r}function yU(n,e,t,r){return _s(n)?function dX(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),l=Math.max(i,s);let d=o,h=l;Math.abs(o)>Math.abs(l)&&(d=l,h=o),e[t.axis]=h,e._custom={barStart:d,barEnd:h,start:i,end:s,min:o,max:l}}(n,e,t,r):e[t.axis]=t.parse(n,r),e}function vU(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),l=i===s,d=[];let h,g,v,E;for(h=t,g=t+r;h<g;++h)E=e[h],v={},v[i.axis]=l||i.parse(o[h],h),d.push(yU(E,v,s,h));return d}function YR(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function pX(n,e,t,r){let i=e.borderSkipped;const s={};if(!i)return void(n.borderSkipped=s);if(!0===i)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:l,reverse:d,top:h,bottom:g}=function fX(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}(n);"middle"===i&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=h:(t._bottom||0)===r?i=g:(s[bU(g,o,l,d)]=!0,i=h)),s[bU(i,o,l,d)]=!0,n.borderSkipped=s}function bU(n,e,t,r){return r?(n=function gX(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=wU(n,t,e)):n=wU(n,e,t),n}function wU(n,e,t){return"start"===n?e:"end"===n?t:n}function mX(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}bd.prototype.datasetElementType=null,bd.prototype.dataElementType=null;let _X=(()=>{class n extends bd{parsePrimitiveData(t,r,i,s){return vU(t,r,i,s)}parseArrayData(t,r,i,s){return vU(t,r,i,s)}parseObjectData(t,r,i,s){const{iScale:o,vScale:l}=t,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,g="x"===o.axis?d:h,v="x"===l.axis?d:h,E=[];let w,D,P,L;for(w=i,D=i+s;w<D;++w)L=r[w],P={},P[o.axis]=o.parse(Wp(L,g),w),E.push(yU(Wp(L,v),P,l,w));return E}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);const o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),l=o._custom,d=YR(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){const o="reset"===s,{index:l,_cachedMeta:{vScale:d}}=this,h=d.getBasePixel(),g=d.isHorizontal(),v=this._getRuler(),{sharedOptions:E,includeOptions:w}=this._getSharedOptions(r,s);for(let D=r;D<r+i;D++){const P=this.getParsed(D),L=o||Ai(P[d.axis])?{base:h,head:h}:this._calculateBarValuePixels(D),F=this._calculateBarIndexPixels(D,v),U=(P._stacks||{})[d.axis],K={horizontal:g,base:L.base,enableBorderRadius:!U||YR(P._custom)||l===U._top||l===U._bottom,x:g?L.head:F.center,y:g?F.center:L.head,height:g?F.size:Math.abs(L.size),width:g?Math.abs(L.size):F.size};w&&(K.options=E||this.resolveDataElementOptions(D,t[D].active?"active":s));const J=K.options||t[D].options;pX(K,J,U,l),mX(K,J,v.ratio),this.updateElement(t[D],D,K,s)}}_getStacks(t,r){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=i.options.stacked,l=[],d=h=>{const g=h.controller.getParsed(r),v=g&&g[h.vScale.axis];if(Ai(v)||isNaN(v))return!0};for(const h of s)if((void 0===r||!d(h))&&((!1===o||-1===l.indexOf(h.stack)||void 0===o&&void 0===h.stack)&&l.push(h.stack),h.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,r,i){const s=this._getStacks(t,i),o=void 0!==r?s.indexOf(r):-1;return-1===o?s.length-1:o}_getRuler(){const t=this.options,r=this._cachedMeta,i=r.iScale,s=[];let o,l;for(o=0,l=r.data.length;o<l;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const d=t.barThickness;return{min:d||cX(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:d?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:i},options:{base:s,minBarLength:o}}=this,l=s||0,d=this.getParsed(t),h=d._custom,g=YR(h);let D,P,v=d[r.axis],E=0,w=i?this.applyStack(r,d,i):v;w!==v&&(E=w-v,w=v),g&&(v=h.barStart,w=h.barEnd-h.barStart,0!==v&&vd(v)!==vd(h.barEnd)&&(E=0),E+=v);const L=Ai(s)||g?E:s;let F=r.getPixelForValue(L);if(D=this.chart.getDataVisibility(t)?r.getPixelForValue(E+w):F,P=D-F,Math.abs(P)<o){P=function hX(n,e,t){return 0!==n?vd(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(P,r,l)*o,v===l&&(F-=P/2);const U=r.getPixelForDecimal(0),K=r.getPixelForDecimal(1),J=Math.min(U,K),ie=Math.max(U,K);F=Math.max(Math.min(F,ie),J),D=F+P}if(F===r.getPixelForValue(l)){const U=vd(P)*r.getLineWidthForValue(l)/2;F+=U,P-=U}return{size:P,base:F,head:D,center:D+P/2}}_calculateBarIndexPixels(t,r){const i=r.scale,s=this.options,o=s.skipNull,l=Qr(s.maxBarThickness,1/0);let d,h;if(r.grouped){const g=o?this._getStackCount(t):r.stackCount,v="flex"===s.barThickness?function uX(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,l=n<i.length-1?i[n+1]:null;const d=t.categoryPercentage;null===o&&(o=s-(null===l?e.end-e.start:l-s)),null===l&&(l=s+s-o);const h=s-(s-Math.min(o,l))/2*d;return{chunk:Math.abs(l-o)/2*d/r,ratio:t.barPercentage,start:h}}(t,r,s,g):function lX(n,e,t,r){const i=t.barThickness;let s,o;return Ai(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}(t,r,s,g),E=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);d=v.start+v.chunk*E+v.chunk/2,h=Math.min(l,v.chunk*v.ratio)}else d=i.getPixelForValue(this.getParsed(t)[i.axis],t),h=Math.min(l,r.min*r.ratio);return{base:d-h/2,head:d+h/2,center:d,size:h}}draw(){const t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[r.axis]&&i[o].draw(this._ctx)}}return n.id="bar",n.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},n.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},n})(),yX=(()=>{class n extends bd{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,s){const o=super.parsePrimitiveData(t,r,i,s);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+i).radius;return o}parseArrayData(t,r,i,s){const o=super.parseArrayData(t,r,i,s);for(let l=0;l<o.length;l++)o[l]._custom=Qr(r[i+l][2],this.resolveDataElementOptions(l+i).radius);return o}parseObjectData(t,r,i,s){const o=super.parseObjectData(t,r,i,s);for(let l=0;l<o.length;l++){const d=r[i+l];o[l]._custom=Qr(d&&d.r&&+d.r,this.resolveDataElementOptions(l+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){const r=this._cachedMeta,{xScale:i,yScale:s}=r,o=this.getParsed(t),l=i.getLabelForValue(o.x),d=s.getLabelForValue(o.y),h=o._custom;return{label:r.label,value:"("+l+", "+d+(h?", "+h:"")+")"}}update(t){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,s){const o="reset"===s,{iScale:l,vScale:d}=this._cachedMeta,{sharedOptions:h,includeOptions:g}=this._getSharedOptions(r,s),v=l.axis,E=d.axis;for(let w=r;w<r+i;w++){const D=t[w],P=!o&&this.getParsed(w),L={},F=L[v]=o?l.getPixelForDecimal(.5):l.getPixelForValue(P[v]),U=L[E]=o?d.getBasePixel():d.getPixelForValue(P[E]);L.skip=isNaN(F)||isNaN(U),g&&(L.options=h||this.resolveDataElementOptions(w,D.active?"active":s),o&&(L.options.radius=0)),this.updateElement(D,w,L,s)}}resolveDataElementOptions(t,r){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==r&&(s.radius=0),s.radius+=Qr(i&&i._custom,o),s}}return n.id="bubble",n.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},n.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},n})(),IU=(()=>{class n extends bd{constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let l,d,o=h=>+i[h];if(di(i[t])){const{key:h="value"}=this._parsing;o=g=>+Wp(i[g],h)}for(l=t,d=t+r;l<d;++l)s._parsed[l]=o(l)}}_getRotation(){return yu(this.options.rotation-90)}_getCircumference(){return yu(this.options.circumference)}_getRotationExtents(){let t=is,r=-is;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),l=s._getCircumference();t=Math.min(t,o),r=Math.max(r,o+l)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,d=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:n/e)(this.options.cutout,d),1),g=this._getRingWeight(this.index),{circumference:v,rotation:E}=this._getRotationExtents(),{ratioX:w,ratioY:D,offsetX:P,offsetY:L}=function vX(n,e,t){let r=1,i=1,s=0,o=0;if(e<is){const l=n,d=l+e,h=Math.cos(l),g=Math.sin(l),v=Math.cos(d),E=Math.sin(d),w=(K,J,ie)=>J2(K,l,d,!0)?1:Math.max(J,J*t,ie,ie*t),D=(K,J,ie)=>J2(K,l,d,!0)?-1:Math.min(J,J*t,ie,ie*t),P=w(0,h,v),L=w(Xs,g,E),F=D(Fs,h,v),U=D(Fs+Xs,g,E);r=(P-F)/2,i=(L-U)/2,s=-(P+F)/2,o=-(L+U)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(E,v,h),K=Math.max(Math.min((i.width-l)/w,(i.height-l)/D)/2,0),J=h7(this.options.radius,K),_e=(J-Math.max(J*h,0))/this._getVisibleDatasetWeightTotal();this.offsetX=P*J,this.offsetY=L*J,s.total=this.calculateTotal(),this.outerRadius=J-_e*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_e*g,0),this.updateElements(o,0,o.length,t)}_circumference(t,r){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/is)}updateElements(t,r,i,s){const o="reset"===s,l=this.chart,d=l.chartArea,v=(d.left+d.right)/2,E=(d.top+d.bottom)/2,w=o&&l.options.animation.animateScale,D=w?0:this.innerRadius,P=w?0:this.outerRadius,{sharedOptions:L,includeOptions:F}=this._getSharedOptions(r,s);let K,U=this._getRotation();for(K=0;K<r;++K)U+=this._circumference(K,o);for(K=r;K<r+i;++K){const J=this._circumference(K,o),ie=t[K],_e={x:v+this.offsetX,y:E+this.offsetY,startAngle:U,endAngle:U+J,circumference:J,outerRadius:P,innerRadius:D};F&&(_e.options=L||this.resolveDataElementOptions(K,ie.active?"active":s)),U+=J,this.updateElement(ie,K,_e,s)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let s,i=0;for(s=0;s<r.length;s++){const o=t._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?is*(Math.abs(t)/r):0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],o=aI(this._cachedMeta._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let r=0;const i=this.chart;let s,o,l,d,h;if(!t)for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){l=i.getDatasetMeta(s),t=l.data,d=l.controller;break}if(!t)return 0;for(s=0,o=t.length;s<o;++s)h=d.resolveDataElementOptions(s),"inner"!==h.borderAlign&&(r=Math.max(r,h.borderWidth||0,h.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,s=t.length;i<s;++i){const o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Qr(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n.id="doughnut",n.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},n.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r}}=e.legend.options;return t.labels.map((i,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const r=": "+e.formattedValue;return _s(t)?(t=t.slice(),t[0]+=r):t+=r,t}}}}},n})(),bX=(()=>{class n extends bd{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,l=this.chart._animationsDisabled;let{start:d,count:h}=A7(r,s,l);this._drawStart=d,this._drawCount=h,C7(r)&&(d=0,h=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:g},t),this.updateElements(s,d,h,t)}updateElements(t,r,i,s){const o="reset"===s,{iScale:l,vScale:d,_stacked:h,_dataset:g}=this._cachedMeta,{sharedOptions:v,includeOptions:E}=this._getSharedOptions(r,s),w=l.axis,D=d.axis,{spanGaps:P,segment:L}=this.options,F=Rv(P)?P:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||o||"none"===s;let K=r>0&&this.getParsed(r-1);for(let J=r;J<r+i;++J){const ie=t[J],_e=this.getParsed(J),fe=U?ie:{},oe=Ai(_e[D]),Be=fe[w]=l.getPixelForValue(_e[w],J),tt=fe[D]=o||oe?d.getBasePixel():d.getPixelForValue(h?this.applyStack(d,_e,h):_e[D],J);fe.skip=isNaN(Be)||isNaN(tt)||oe,fe.stop=J>0&&Math.abs(_e[w]-K[w])>F,L&&(fe.parsed=_e,fe.raw=g.data[J]),E&&(fe.options=v||this.resolveDataElementOptions(J,ie.active?"active":s)),U||this.updateElement(ie,J,fe,s),K=_e}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n.id="line",n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},n})(),wX=(()=>{class n extends bd{constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],o=aI(this._cachedMeta._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,r,i,s){return Z7.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){const r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((i,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){const t=this.chart,r=t.chartArea,i=t.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),d=(o-Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-d*this.index,this.innerRadius=this.outerRadius-d}updateElements(t,r,i,s){const o="reset"===s,l=this.chart,h=l.options.animation,g=this._cachedMeta.rScale,v=g.xCenter,E=g.yCenter,w=g.getIndexAngle(0)-.5*Fs;let P,D=w;const L=360/this.countVisibleElements();for(P=0;P<r;++P)D+=this._computeAngle(P,s,L);for(P=r;P<r+i;P++){const F=t[P];let U=D,K=D+this._computeAngle(P,s,L),J=l.getDataVisibility(P)?g.getDistanceFromCenterForValue(this.getParsed(P).r):0;D=K,o&&(h.animateScale&&(J=0),h.animateRotate&&(U=K=w));const ie={x:v,y:E,innerRadius:0,outerRadius:J,startAngle:U,endAngle:K,options:this.resolveDataElementOptions(P,F.active?"active":s)};this.updateElement(F,P,ie,s)}}countVisibleElements(){let r=0;return this._cachedMeta.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?yu(this.resolveDataElementOptions(t,r).angle||i):0}}return n.id="polarArea",n.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r}}=e.legend.options;return t.labels.map((i,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},n})(),IX=(()=>{class n extends IU{}return n.id="pie",n.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},n})(),EX=(()=>{class n extends bd{getLabelAndValue(t){const r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,s){return Z7.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,"resize"!==t){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),this.updateElement(i,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:l},t)}this.updateElements(s,0,s.length,t)}updateElements(t,r,i,s){const o=this._cachedMeta.rScale,l="reset"===s;for(let d=r;d<r+i;d++){const h=t[d],g=this.resolveDataElementOptions(d,h.active?"active":s),v=o.getPointPositionForValue(d,this.getParsed(d).r),E=l?o.xCenter:v.x,w=l?o.yCenter:v.y,D={x:E,y:w,angle:v.angle,skip:isNaN(E)||isNaN(w),options:g};this.updateElement(h,d,D,s)}}}return n.id="radar",n.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},n.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},n})();class vu{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Rv(this.x)&&Rv(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}vu.defaults={},vu.defaultRoutes=void 0;const EU={values:n=>_s(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),s=function xX(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=Ol(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(d,this.options.ticks.format),aI(n,r,d)},logarithmic(n,e,t){if(0===n)return"0";const r=n/Math.pow(10,Math.floor(Ol(n)));return 1===r||2===r||5===r?EU.numeric.call(this,n,e,t):""}};var kT={formatters:EU};function PT(n,e,t,r,i){const s=Qr(r,0),o=Math.min(Qr(i,n.length),n.length);let d,h,g,l=0;for(t=Math.ceil(t),i&&(d=i-r,t=d/Math.floor(d/t)),g=s;g<0;)l++,g=Math.round(s+l*t);for(h=Math.max(s,0);h<o;h++)h===g&&(e.push(n[h]),l++,g=Math.round(s+l*t))}hi.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,e)=>e.lineWidth,tickColor:(n,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),hi.route("scale.ticks","color","","color"),hi.route("scale.grid","color","","borderColor"),hi.route("scale.grid","borderColor","","borderColor"),hi.route("scale.title","color","","color"),hi.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&"callback"!==n&&"parser"!==n,_indexable:n=>"borderDash"!==n&&"tickBorderDash"!==n}),hi.describe("scales",{_fallback:"scale"}),hi.describe("scale.ticks",{_scriptable:n=>"backdropPadding"!==n&&"callback"!==n,_indexable:n=>"backdropPadding"!==n});const xU=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t;function SU(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function kX(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,l=1e-6;let h,d=n.getPixelForTick(i);if(!(t&&(h=1===r?Math.max(d-s,o-d):0===e?(n.getPixelForTick(1)-d)/2:(d-n.getPixelForTick(i-1))/2,d+=i<e?h:-h,d<s-l||d>o+l)))return d}function lI(n){return n.drawTicks?n.tickLength:0}function AU(n,e){if(!n.display)return 0;const t=Uo(n.font,e),r=Na(n.padding);return(_s(n.text)?n.text.length:1)*t.lineHeight+r.height}function LX(n,e,t){let r=kR(n);return(t&&"right"!==e||!t&&"right"===e)&&(r=(n=>"left"===n?"right":"right"===n?"left":n)(r)),r}class O_ extends vu{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Pl(e,Number.POSITIVE_INFINITY),t=Pl(t,Number.NEGATIVE_INFINITY),r=Pl(r,Number.POSITIVE_INFINITY),i=Pl(i,Number.NEGATIVE_INFINITY),{min:Pl(e,r),max:Pl(t,i),minDefined:lo(e),maxDefined:lo(t)}}getMinMax(e){let o,{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:t,max:r};const l=this.getMatchingVisibleMetas();for(let d=0,h=l.length;d<h;++d)o=l[d].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Pl(t,Pl(r,t)),max:Pl(r,Pl(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ys(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function lQ(n,e,t){const{min:r,max:i}=n,s=h7(e,(i-r)/2),o=(l,d)=>t&&0===l?0:l+d;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=l<this.ticks.length;this._convertTicksToLabels(d?SU(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function SX(n,e){const t=n.options.ticks,r=t.maxTicksLimit||function AX(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),i=t.major.enabled?function TX(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}(e):[],s=i.length,o=i[0],l=i[s-1],d=[];if(s>r)return function DX(n,e,t,r){let o,i=0,s=t[0];for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}(e,d,i,s/r),d;const h=function CX(n,e,t){const r=function MX(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}(n),i=e.length/t;if(!r)return Math.max(i,1);const s=function wY(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r==0&&(e.push(r),e.push(n/r));return t===(0|t)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}(r);for(let o=0,l=s.length-1;o<l;o++){const d=s[o];if(d>i)return d}return Math.max(i,1)}(i,e,r);if(s>0){let g,v;const E=s>1?Math.round((l-o)/(s-1)):null;for(PT(e,d,h,Ai(E)?0:o-E,o),g=0,v=s-1;g<v;g++)PT(e,d,h,i[g],i[g+1]);return PT(e,d,h,l,Ai(E)?e.length:l+E),d}return PT(e,d,h),d}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,e=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ys(this.options.afterUpdate,[this])}beforeSetDimensions(){ys(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ys(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ys(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ys(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ys(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ys(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ys(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=this.ticks.length,i=t.minRotation||0,s=t.maxRotation;let l,d,h,o=i;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const g=this._getLabelSizes(),v=g.widest.width,E=g.highest.height,w=Jo(this.chart.width-v,0,this.maxWidth);l=e.offset?this.maxWidth/r:w/(r-1),v+6>l&&(l=w/(r-(e.offset?.5:1)),d=this.maxHeight-lI(e.grid)-t.padding-AU(e.title,this.chart.options.font),h=Math.sqrt(v*v+E*E),o=DR(Math.min(Math.asin(Jo((g.highest.height+6)/l,-1,1)),Math.asin(Jo(d/h,-1,1))-Math.asin(Jo(E/h,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ys(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ys(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const d=AU(i,t.options.font);if(l?(e.width=this.maxWidth,e.height=lI(s)+d):(e.height=this.maxHeight,e.width=lI(s)+d),r.display&&this.ticks.length){const{first:h,last:g,widest:v,highest:E}=this._getLabelSizes(),w=2*r.padding,D=yu(this.labelRotation),P=Math.cos(D),L=Math.sin(D);l?e.height=Math.min(this.maxHeight,e.height+(r.mirror?0:L*v.width+P*E.height)+w):e.width=Math.min(this.maxWidth,e.width+(r.mirror?0:P*v.width+L*E.height)+w),this._calculatePadding(h,g,L,P)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:l}=this.options,d=0!==this.labelRotation,h="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let E=0,w=0;d?h?(E=i*e.width,w=r*t.height):(E=r*e.height,w=i*t.width):"start"===s?w=t.width:"end"===s?E=e.width:"inner"!==s&&(E=e.width/2,w=t.width/2),this.paddingLeft=Math.max((E-g+o)*this.width/(this.width-g),0),this.paddingRight=Math.max((w-v+o)*this.width/(this.width-v),0)}else{let g=t.height/2,v=e.height/2;"start"===s?(g=0,v=e.height):"end"===s&&(g=t.height,v=0),this.paddingTop=g+o,this.paddingBottom=v+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ys(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)Ai(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=SU(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length)}return e}_computeLabelSizes(e,t){const{ctx:r,_longestTextCache:i}=this,s=[],o=[];let h,g,v,E,w,D,P,L,F,U,K,l=0,d=0;for(h=0;h<t;++h){if(E=e[h].label,w=this._resolveTickFontOptions(h),r.font=D=w.string,P=i[D]=i[D]||{data:{},gc:[]},L=w.lineHeight,F=U=0,Ai(E)||_s(E)){if(_s(E))for(g=0,v=E.length;g<v;++g)K=E[g],!Ai(K)&&!_s(K)&&(F=AT(r,P.data,P.gc,F,K),U+=L)}else F=AT(r,P.data,P.gc,F,E),U=L;s.push(F),o.push(U),l=Math.max(F,l),d=Math.max(U,d)}!function PX(n,e){Yi(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}(i,t);const J=s.indexOf(l),ie=o.indexOf(d),_e=fe=>({width:s[fe]||0,height:o[fe]||0});return{first:_e(0),last:_e(t-1),widest:_e(J),highest:_e(ie),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function xY(n){return Jo(n,-32768,32767)}(this._alignToPixels?D_(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function OX(n,e,t){return Kp(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=function RX(n,e){return Kp(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=yu(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,d=s?s.highest.height+o:0;return this.isHorizontal()?d*r>l*i?l/r:d/i:d*i<l*r?d/r:l/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o}=i,l=s.offset,d=this.isHorizontal(),g=this.ticks.length+(l?1:0),v=lI(s),E=[],w=s.setContext(this.getContext()),D=w.drawBorder?w.borderWidth:0,P=D/2,L=function(Ve){return D_(r,Ve,D)};let F,U,K,J,ie,_e,fe,oe,Be,tt,ne,te;if("top"===o)F=L(this.bottom),_e=this.bottom-v,oe=F-P,tt=L(e.top)+P,te=e.bottom;else if("bottom"===o)F=L(this.top),tt=e.top,te=L(e.bottom)-P,_e=F+P,oe=this.top+v;else if("left"===o)F=L(this.right),ie=this.right-v,fe=F-P,Be=L(e.left)+P,ne=e.right;else if("right"===o)F=L(this.left),Be=e.left,ne=L(e.right)-P,ie=F+P,fe=this.left+v;else if("x"===t){if("center"===o)F=L((e.top+e.bottom)/2+.5);else if(di(o)){const Ve=Object.keys(o)[0];F=L(this.chart.scales[Ve].getPixelForValue(o[Ve]))}tt=e.top,te=e.bottom,_e=F+P,oe=_e+v}else if("y"===t){if("center"===o)F=L((e.left+e.right)/2);else if(di(o)){const Ve=Object.keys(o)[0];F=L(this.chart.scales[Ve].getPixelForValue(o[Ve]))}ie=F-P,fe=ie-v,Be=e.left,ne=e.right}const xe=Qr(i.ticks.maxTicksLimit,g),ve=Math.max(1,Math.ceil(g/xe));for(U=0;U<g;U+=ve){const Ve=s.setContext(this.getContext(U)),Ze=Ve.lineWidth,ut=Ve.color,Ye=Ve.borderDash||[],Tt=Ve.borderDashOffset,It=Ve.tickWidth,wn=Ve.tickColor,$=Ve.tickBorderDash||[],he=Ve.tickBorderDashOffset;K=kX(this,U,l),void 0!==K&&(J=D_(r,K,Ze),d?ie=fe=Be=ne=J:_e=oe=tt=te=J,E.push({tx1:ie,ty1:_e,tx2:fe,ty2:oe,x1:Be,y1:tt,x2:ne,y2:te,width:Ze,color:ut,borderDash:Ye,borderDashOffset:Tt,tickWidth:It,tickColor:wn,tickBorderDash:$,tickBorderDashOffset:he}))}return this._ticksLength=g,this._borderValue=F,E}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),l=this.ticks,{align:d,crossAlign:h,padding:g,mirror:v}=s,E=lI(r.grid),w=E+g,D=v?-g:w,P=-yu(this.labelRotation),L=[];let F,U,K,J,ie,_e,fe,oe,Be,tt,ne,te,xe="middle";if("top"===i)_e=this.bottom-D,fe=this._getXAxisLabelAlignment();else if("bottom"===i)_e=this.top+D,fe=this._getXAxisLabelAlignment();else if("left"===i){const Ve=this._getYAxisLabelAlignment(E);fe=Ve.textAlign,ie=Ve.x}else if("right"===i){const Ve=this._getYAxisLabelAlignment(E);fe=Ve.textAlign,ie=Ve.x}else if("x"===t){if("center"===i)_e=(e.top+e.bottom)/2+w;else if(di(i)){const Ve=Object.keys(i)[0];_e=this.chart.scales[Ve].getPixelForValue(i[Ve])+w}fe=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)ie=(e.left+e.right)/2-w;else if(di(i)){const Ve=Object.keys(i)[0];ie=this.chart.scales[Ve].getPixelForValue(i[Ve])}fe=this._getYAxisLabelAlignment(E).textAlign}"y"===t&&("start"===d?xe="top":"end"===d&&(xe="bottom"));const ve=this._getLabelSizes();for(F=0,U=l.length;F<U;++F){K=l[F],J=K.label;const Ve=s.setContext(this.getContext(F));oe=this.getPixelForTick(F)+s.labelOffset,Be=this._resolveTickFontOptions(F),tt=Be.lineHeight,ne=_s(J)?J.length:1;const Ze=ne/2,ut=Ve.color,Ye=Ve.textStrokeColor,Tt=Ve.textStrokeWidth;let wn,It=fe;if(o?(ie=oe,"inner"===fe&&(It=F===U-1?this.options.reverse?"left":"right":0===F?this.options.reverse?"right":"left":"center"),te="top"===i?"near"===h||0!==P?-ne*tt+tt/2:"center"===h?-ve.highest.height/2-Ze*tt+tt:tt/2-ve.highest.height:"near"===h||0!==P?tt/2:"center"===h?ve.highest.height/2-Ze*tt:ve.highest.height-ne*tt,v&&(te*=-1)):(_e=oe,te=(1-ne)*tt/2),Ve.showLabelBackdrop){const $=Na(Ve.backdropPadding),he=ve.heights[F],me=ve.widths[F];let Me=_e+te-$.top,je=ie-$.left;switch(xe){case"middle":Me-=he/2;break;case"bottom":Me-=he}switch(fe){case"center":je-=me/2;break;case"right":je-=me}wn={left:je,top:Me,width:me+$.width,height:he+$.height,color:Ve.backdropColor}}L.push({rotation:P,label:J,font:Be,color:ut,strokeColor:Ye,strokeWidth:Tt,textOffset:te,textAlign:It,textBaseline:xe,translation:[ie,_e],backdrop:wn})}return L}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-yu(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,l=e+s,d=this._getLabelSizes().widest.width;let h,g;return"left"===t?i?(g=this.right+s,"near"===r?h="left":"center"===r?(h="center",g+=d/2):(h="right",g+=d)):(g=this.right-l,"near"===r?h="right":"center"===r?(h="center",g-=d/2):(h="left",g=this.left)):"right"===t?i?(g=this.left+s,"near"===r?h="right":"center"===r?(h="center",g-=d/2):(h="left",g-=d)):(g=this.left+l,"near"===r?h="left":"center"===r?(h="center",g+=d/2):(h="right",g=this.right)):h="right",{textAlign:h,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(d,h,g)=>{!g.width||!g.color||(r.save(),r.lineWidth=g.width,r.strokeStyle=g.color,r.setLineDash(g.borderDash||[]),r.lineDashOffset=g.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const d=i[s];t.drawOnChartArea&&l({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&l({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:r}}=this,i=r.setContext(this.getContext()),s=r.drawBorder?i.borderWidth:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,h,g,v;this.isHorizontal()?(d=D_(e,this.left,s)-s/2,h=D_(e,this.right,o)+o/2,g=v=l):(g=D_(e,this.top,s)-s/2,v=D_(e,this.bottom,o)+o/2,d=h=l),t.save(),t.lineWidth=i.borderWidth,t.strokeStyle=i.borderColor,t.beginPath(),t.moveTo(d,g),t.lineTo(h,v),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&CT(r,i);const s=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,l;for(o=0,l=s.length;o<l;++o){const d=s[o],h=d.font,g=d.label;d.backdrop&&(r.fillStyle=d.backdrop.color,r.fillRect(d.backdrop.left,d.backdrop.top,d.backdrop.width,d.backdrop.height)),M_(r,g,0,d.textOffset,h,d)}i&&TT(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=Uo(r.font),o=Na(r.padding),l=r.align;let d=s.lineHeight/2;"bottom"===t||"center"===t||di(t)?(d+=o.bottom,_s(r.text)&&(d+=s.lineHeight*(r.text.length-1))):d+=o.top;const{titleX:h,titleY:g,maxWidth:v,rotation:E}=function FX(n,e,t,r){const{top:i,left:s,bottom:o,right:l,chart:d}=n,{chartArea:h,scales:g}=d;let E,w,D,v=0;const P=o-i,L=l-s;if(n.isHorizontal()){if(w=Ma(r,s,l),di(t)){const F=Object.keys(t)[0];D=g[F].getPixelForValue(t[F])+P-e}else D="center"===t?(h.bottom+h.top)/2+P-e:xU(n,t,e);E=l-s}else{if(di(t)){const F=Object.keys(t)[0];w=g[F].getPixelForValue(t[F])-L+e}else w="center"===t?(h.left+h.right)/2-L+e:xU(n,t,e);D=Ma(r,o,i),v="left"===t?-Xs:Xs}return{titleX:w,titleY:D,maxWidth:E,rotation:v}}(this,d,t,l);M_(e,r.text,0,0,s,{color:r.color,maxWidth:v,rotation:E,textAlign:LX(l,t,i),textBaseline:"middle",translation:[h,g]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Qr(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===O_.prototype.draw?[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r+1,draw:()=>{this.drawBorder()}},{z:t,draw:i=>{this.drawLabels(i)}}]:[{z:t,draw:i=>{this.draw(i)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const l=t[s];l[r]===this.id&&(!e||l.type===e)&&i.push(l)}return i}_resolveTickFontOptions(e){return Uo(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class RT{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function jX(n){return"id"in n&&"defaults"in n})(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function BX(n,e,t){const r=Z2(Object.create(null),[t?hi.get(t):{},hi.get(e),n.defaults]);hi.set(e,r),n.defaultRoutes&&function UX(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),l=o.pop(),d=o.join(".");hi.route(s,i,d,l)})}(e,n.defaultRoutes),n.descriptors&&hi.describe(e,n.descriptors)}(e,o,r),this.override&&hi.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in hi[i]&&(delete hi[i][r],this.override&&delete T_[r])}}var wd=new class VX{constructor(){this.controllers=new RT(bd,"datasets",!0),this.elements=new RT(vu,"elements"),this.plugins=new RT(Object,"plugins"),this.scales=new RT(O_,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Yi(i,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,r){const i=TR(e);ys(r["before"+i],[],r),t[e](r),ys(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+r+".");return i}},zX=Object.freeze({__proto__:null,BarController:_X,BubbleController:yX,DoughnutController:IU,LineController:bX,PolarAreaController:wX,PieController:IX,RadarController:EX,ScatterController:(()=>{class n extends bd{update(t){const r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled;let{start:o,count:l}=A7(r,i,s);if(this._drawStart=o,this._drawCount=l,C7(r)&&(o=0,l=i.length),this.options.showLine){const{dataset:d,_dataset:h}=r;d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!h._decimated,d.points=i;const g=this.resolveDatasetElementOptions(t);g.segment=this.options.segment,this.updateElement(d,void 0,{animated:!s,options:g},t)}this.updateElements(i,o,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=wd.getElement("line")),super.addElements()}updateElements(t,r,i,s){const o="reset"===s,{iScale:l,vScale:d,_stacked:h,_dataset:g}=this._cachedMeta,v=this.resolveDataElementOptions(r,s),E=this.getSharedOptions(v),w=this.includeOptions(s,E),D=l.axis,P=d.axis,{spanGaps:L,segment:F}=this.options,U=Rv(L)?L:Number.POSITIVE_INFINITY,K=this.chart._animationsDisabled||o||"none"===s;let J=r>0&&this.getParsed(r-1);for(let ie=r;ie<r+i;++ie){const _e=t[ie],fe=this.getParsed(ie),oe=K?_e:{},Be=Ai(fe[P]),tt=oe[D]=l.getPixelForValue(fe[D],ie),ne=oe[P]=o||Be?d.getBasePixel():d.getPixelForValue(h?this.applyStack(d,fe,h):fe[P],ie);oe.skip=isNaN(tt)||isNaN(ne)||Be,oe.stop=ie>0&&Math.abs(fe[D]-J[D])>U,F&&(oe.parsed=fe,oe.raw=g.data[ie]),w&&(oe.options=E||this.resolveDataElementOptions(ie,_e.active?"active":s)),K||this.updateElement(_e,ie,oe,s),J=fe}this.updateSharedOptions(E,s,v)}getMaxOverflow(){const t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let d=0;for(let h=r.length-1;h>=0;--h)d=Math.max(d,r[h].size(this.resolveDataElementOptions(h))/2);return d>0&&d}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,l)/2}}return n.id="scatter",n.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},n.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},n})()});function L_(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var HX={_date:(()=>{class n{constructor(t){this.options=t||{}}init(t){}formats(){return L_()}parse(t,r){return L_()}format(t,r){return L_()}add(t,r,i){return L_()}diff(t,r,i){return L_()}startOf(t,r,i){return L_()}endOf(t,r){return L_()}}return n.override=function(e){Object.assign(n.prototype,e)},n})()};function WX(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,l=i._cachedMeta.iScale;if(l&&e===l.axis&&"r"!==e&&o&&s.length){const d=l._reversePixels?SY:Hh;if(!r)return d(s,e,t);if(i._sharedOptions){const h=s[0],g="function"==typeof h.getRange&&h.getRange(e);if(g){const v=d(s,e,t-g),E=d(s,e,t+g);return{lo:v.lo,hi:E.hi}}}}return{lo:0,hi:s.length-1}}function uI(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,d=s.length;l<d;++l){const{index:h,data:g}=s[l],{lo:v,hi:E}=WX(s[l],e,o,i);for(let w=v;w<=E;++w){const D=g[w];D.skip||r(D,h,w)}}}function QR(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||uI(n,t,e,function(l,d,h){!i&&!iI(l,n.chartArea,0)||l.inRange(e.x,e.y,r)&&s.push({element:l,datasetIndex:d,index:h})},!0),s}function XR(n,e,t,r,i,s){return s||n.isPointInArea(e)?"r"!==t||r?function GX(n,e,t,r,i,s){let o=[];const l=function $X(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(t);let d=Number.POSITIVE_INFINITY;return uI(n,t,e,function h(g,v,E){const w=g.inRange(e.x,e.y,i);if(r&&!w)return;const D=g.getCenterPoint(i);if(!s&&!n.isPointInArea(D)&&!w)return;const L=l(e,D);L<d?(o=[{element:g,datasetIndex:v,index:E}],d=L):L===d&&o.push({element:g,datasetIndex:v,index:E})}),o}(n,e,t,r,i,s):function qX(n,e,t,r){let i=[];return uI(n,t,e,function s(o,l,d){const{startAngle:h,endAngle:g}=o.getProps(["startAngle","endAngle"],r),{angle:v}=b7(o,{x:e.x,y:e.y});J2(v,h,g)&&i.push({element:o,datasetIndex:l,index:d})}),i}(n,e,t,i):[]}function CU(n,e,t,r,i){const s=[],o="x"===t?"inXRange":"inYRange";let l=!1;return uI(n,t,e,(d,h,g)=>{d[o](e[t],i)&&(s.push({element:d,datasetIndex:h,index:g}),l=l||d.inRange(e.x,e.y,i))}),r&&!l?[]:s}var KX={evaluateInteractionItems:uI,modes:{index(n,e,t,r){const i=P_(e,n),s=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?QR(n,i,s,r,o):XR(n,i,s,!1,r,o),d=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const g=l[0].index,v=h.data[g];v&&!v.skip&&d.push({element:v,datasetIndex:h.index,index:g})}),d):[]},dataset(n,e,t,r){const i=P_(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?QR(n,i,s,r,o):XR(n,i,s,!1,r,o);if(l.length>0){const d=l[0].datasetIndex,h=n.getDatasetMeta(d).data;l=[];for(let g=0;g<h.length;++g)l.push({element:h[g],datasetIndex:d,index:g})}return l},point:(n,e,t,r)=>QR(n,P_(e,n),t.axis||"xy",r,t.includeInvisible||!1),nearest:(n,e,t,r)=>XR(n,P_(e,n),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(n,e,t,r)=>CU(n,P_(e,n),"x",t.intersect,r),y:(n,e,t,r)=>CU(n,P_(e,n),"y",t.intersect,r)}};const TU=["left","top","right","bottom"];function dI(n,e){return n.filter(t=>t.pos===e)}function DU(n,e){return n.filter(t=>-1===TU.indexOf(t.pos)&&t.box.axis===e)}function hI(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function MU(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function NU(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function JX(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!di(i)){t.size&&(n[i]-=t.size);const v=r[t.stack]||{size:0,count:1};v.size=Math.max(v.size,t.horizontal?s.height:s.width),t.size=v.size/v.count,n[i]+=t.size}s.getPadding&&NU(o,s.getPadding());const l=Math.max(0,e.outerWidth-MU(o,n,"left","right")),d=Math.max(0,e.outerHeight-MU(o,n,"top","bottom")),h=l!==n.w,g=d!==n.h;return n.w=l,n.h=d,t.horizontal?{same:h,other:g}:{same:g,other:h}}function tJ(n,e){const t=e.maxPadding;return function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}(n?["left","right"]:["top","bottom"])}function fI(n,e,t,r){const i=[];let s,o,l,d,h,g;for(s=0,o=n.length,h=0;s<o;++s){l=n[s],d=l.box,d.update(l.width||e.w,l.height||e.h,tJ(l.horizontal,e));const{same:v,other:E}=JX(e,t,l,r);h|=v&&i.length,g=g||E,d.fullSize||i.push(l)}return h&&fI(i,e,t,r)||g}function OT(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function kU(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const l of n){const d=l.box,h=r[l.stack]||{count:1,placed:0,weight:1},g=l.stackWeight/h.weight||1;if(l.horizontal){const v=e.w*g,E=h.size||d.height;Rl(h.start)&&(o=h.start),d.fullSize?OT(d,i.left,o,t.outerWidth-i.right-i.left,E):OT(d,e.left+h.placed,o,v,E),h.start=o,h.placed+=v,o=d.bottom}else{const v=e.h*g,E=h.size||d.width;Rl(h.start)&&(s=h.start),d.fullSize?OT(d,s,i.top,E,t.outerHeight-i.bottom-i.top):OT(d,s,e.top+h.placed,E,v),h.start=s,h.placed+=v,s=d.right}}e.x=s,e.y=o}hi.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var ka={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Na(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),l=function XX(n){const e=function ZX(n){const e=[];let t,r,i,s,o,l;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],({position:s,options:{stack:o,stackWeight:l=1}}=i),e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:l});return e}(n),t=hI(e.filter(h=>h.box.fullSize),!0),r=hI(dI(e,"left"),!0),i=hI(dI(e,"right")),s=hI(dI(e,"top"),!0),o=hI(dI(e,"bottom")),l=DU(e,"x"),d=DU(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(d).concat(o).concat(l),chartArea:dI(e,"chartArea"),vertical:r.concat(i).concat(d),horizontal:s.concat(o).concat(l)}}(n.boxes),d=l.vertical,h=l.horizontal;Yi(n.boxes,P=>{"function"==typeof P.beforeLayout&&P.beforeLayout()});const g=d.reduce((P,L)=>L.box.options&&!1===L.box.options.display?P:P+1,0)||1,v=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/g,hBoxMaxHeight:o/2}),E=Object.assign({},i);NU(E,Na(r));const w=Object.assign({maxPadding:E,w:s,h:o,x:i.left,y:i.top},i),D=function QX(n,e){const t=function YX(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!TU.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,l;for(s=0,o=n.length;s<o;++s){l=n[s];const{fullSize:d}=l.box,h=t[l.stack],g=h&&l.stackWeight/h.weight;l.horizontal?(l.width=g?g*r:d&&e.availableWidth,l.height=i):(l.width=r,l.height=g?g*i:d&&e.availableHeight)}return t}(d.concat(h),v);fI(l.fullSize,w,v,D),fI(d,w,v,D),fI(h,w,v,D)&&fI(d,w,v,D),function eJ(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(w),kU(l.leftAndTop,w,v,D),w.x+=w.w,w.y+=w.h,kU(l.rightAndBottom,w,v,D),n.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},Yi(l.chartArea,P=>{const L=P.box;Object.assign(L,n.chartArea),L.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class PU{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class nJ extends PU{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const LT="$chartjs",rJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},RU=n=>null===n||""===n,OU=!!kQ&&{passive:!0};function oJ(n,e,t){n.canvas.removeEventListener(e,t,OU)}function FT(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function cJ(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||FT(l.addedNodes,r),o=o&&!FT(l.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function lJ(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||FT(l.removedNodes,r),o=o&&!FT(l.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const pI=new Map;let LU=0;function FU(){const n=window.devicePixelRatio;n!==LU&&(LU=n,pI.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function hJ(n,e,t){const r=n.canvas,i=r&&qR(r);if(!i)return;const s=S7((l,d)=>{const h=i.clientWidth;t(l,d),h<i.clientWidth&&t()},window),o=new ResizeObserver(l=>{const d=l[0],h=d.contentRect.width,g=d.contentRect.height;0===h&&0===g||s(h,g)});return o.observe(i),function uJ(n,e){pI.size||window.addEventListener("resize",FU),pI.set(n,e)}(n,s),o}function JR(n,e,t){t&&t.disconnect(),"resize"===e&&function dJ(n){pI.delete(n),pI.size||window.removeEventListener("resize",FU)}(n)}function fJ(n,e,t){const r=n.canvas,i=S7(s=>{null!==n.ctx&&t(function aJ(n,e){const t=rJ[n.type]||n.type,{x:r,y:i}=P_(n,e);return{type:t,chart:e,native:n,x:void 0!==r?r:null,y:void 0!==i?i:null}}(s,n))},n,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function sJ(n,e,t){n.addEventListener(e,t,OU)}(r,e,i),i}class pJ extends PU{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function iJ(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[LT]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",RU(i)){const s=J7(n,"width");void 0!==s&&(n.width=s)}if(RU(r))if(""===n.style.height)n.height=n.width/(e||2);else{const s=J7(n,"height");void 0!==s&&(n.height=s)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[LT])return!1;const r=t[LT].initial;["height","width"].forEach(s=>{const o=r[s];Ai(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[LT],!0}addEventListener(e,t,r){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:cJ,detach:lJ,resize:hJ}[t]||fJ)(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];i&&(({attach:JR,detach:JR,resize:JR}[t]||oJ)(e,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return function NQ(n,e,t,r){const i=NT(n),s=k_(i,"margin"),o=MT(i.maxWidth,n,"clientWidth")||bT,l=MT(i.maxHeight,n,"clientHeight")||bT,d=function MQ(n,e,t){let r,i;if(void 0===e||void 0===t){const s=qR(n);if(s){const o=s.getBoundingClientRect(),l=NT(s),d=k_(l,"border","width"),h=k_(l,"padding");e=o.width-h.width-d.width,t=o.height-h.height-d.height,r=MT(l.maxWidth,s,"clientWidth"),i=MT(l.maxHeight,s,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:r||bT,maxHeight:i||bT}}(n,e,t);let{width:h,height:g}=d;if("content-box"===i.boxSizing){const v=k_(i,"border","width"),E=k_(i,"padding");h-=E.width+v.width,g-=E.height+v.height}return h=Math.max(0,h-s.width),g=Math.max(0,r?Math.floor(h/r):g-s.height),h=GR(Math.min(h,o,d.maxWidth)),g=GR(Math.min(g,l,d.maxHeight)),h&&!g&&(g=GR(h/2)),{width:h,height:g}}(e,t,r,i)}isAttached(e){const t=qR(e);return!(!t||!t.isConnected)}}class mJ{constructor(){this._init=[]}notify(e,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin;if(!1===ys(o[r],[t,i,s.options],o)&&i.cancelable)return!1}return!0}invalidate(){Ai(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=Qr(r.options&&r.options.plugins,{}),s=function _J(n){const e={},t=[],r=Object.keys(wd.plugins.items);for(let s=0;s<r.length;s++)t.push(wd.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(r);return!1!==i||t?function vJ(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const l of e){const d=l.id,h=yJ(r[d],i);null!==h&&s.push({plugin:l,options:bJ(n.config,{plugin:l,local:t[d]},h,o)})}return s}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(l=>!o.some(d=>l.plugin.id===d.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function yJ(n,e){return e||!1!==n?!0===n?{}:n:null}function bJ(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eO(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(hi.datasets[n]||{}).indexAxis||"x"}function tO(n,e){return"x"===n||"y"===n?n:e.axis||function EJ(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}(e.position)||n.charAt(0).toLowerCase()}function BU(n){const e=n.options||(n.options={});e.plugins=Qr(e.plugins,{}),e.scales=function xJ(n,e){const t=T_[n.type]||{scales:{}},r=e.scales||{},i=eO(n.type,e),s=Object.create(null),o=Object.create(null);return Object.keys(r).forEach(l=>{const d=r[l];if(!di(d))return console.error(`Invalid scale configuration for scale: ${l}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=tO(l,d),g=function IJ(n,e){return n===e?"_index_":"_value_"}(h,i),v=t.scales||{};s[h]=s[h]||l,o[l]=Y2(Object.create(null),[{axis:h},d,v[h],v[g]])}),n.data.datasets.forEach(l=>{const d=l.type||n.type,h=l.indexAxis||eO(d,e),v=(T_[d]||{}).scales||{};Object.keys(v).forEach(E=>{const w=function wJ(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(E,h),D=l[w+"AxisID"]||s[w]||w;o[D]=o[D]||Object.create(null),Y2(o[D],[{axis:w},r[D],v[E]])})}),Object.keys(o).forEach(l=>{const d=o[l];Y2(d,[hi.scales[d.type],hi.scale])}),o}(n,e)}function UU(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const jU=new Map,VU=new Set;function BT(n,e){let t=jU.get(n);return t||(t=e(),jU.set(n,t),VU.add(t)),t}const gI=(n,e,t)=>{const r=Wp(e,t);void 0!==r&&n.add(r)};class AJ{constructor(e){this._config=function SJ(n){return(n=n||{}).data=UU(n.data),BU(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=UU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),BU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return BT(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return BT(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return BT(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return BT(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),l=o.get(t);if(l)return l;const d=new Set;t.forEach(g=>{e&&(d.add(e),g.forEach(v=>gI(d,e,v))),g.forEach(v=>gI(d,i,v)),g.forEach(v=>gI(d,T_[s]||{},v)),g.forEach(v=>gI(d,hi,v)),g.forEach(v=>gI(d,UR,v))});const h=Array.from(d);return 0===h.length&&h.push(Object.create(null)),VU.has(t)&&o.set(t,h),h}chartOptionScopes(){const{options:e,type:t}=this;return[e,T_[t]||{},hi.datasets[t]||{},{type:t},hi,UR]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=zU(this._resolverCache,e,i);let d=o;(function TJ(n,e){const{isScriptable:t,isIndexable:r}=H7(n);for(const i of e){const s=t(i),o=r(i),l=(o||s)&&n[i];if(s&&($p(l)||CJ(l))||o&&_s(l))return!0}return!1})(o,t)&&(s.$shared=!1,d=Lv(o,r=$p(r)?r():r,this.createResolver(e,r,l)));for(const h of t)s[h]=d[h];return s}createResolver(e,t,r=[""],i){const{resolver:s}=zU(this._resolverCache,e,r);return di(t)?Lv(s,t,void 0,i):s}}function zU(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:HR(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,s)),s}const CJ=n=>di(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||$p(n[t]),!1),MJ=["top","bottom","left","right","chartArea"];function HU(n,e){return"top"===n||"bottom"===n||-1===MJ.indexOf(n)&&"x"===e}function WU(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function $U(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ys(t&&t.onComplete,[n],e)}function NJ(n){const e=n.chart,t=e.options.animation;ys(t&&t.onProgress,[n],e)}function qU(n){return Q7()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const UT={},GU=n=>{const e=qU(n);return Object.values(UT).filter(t=>t.canvas===e).pop()};function kJ(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}class jT{constructor(e,t){const r=this.config=new AJ(t),i=qU(e),s=GU(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function gJ(n){return!Q7()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?nJ:pJ}(i)),this.platform.updateConfig(r);const l=this.platform.acquireContext(i,o.aspectRatio),d=l&&l.canvas,h=d&&d.height,g=d&&d.width;this.id=hY(),this.ctx=l,this.canvas=d,this.width=g,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mJ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function TY(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}(v=>this.update(v),o.resizeDelay||0),this._dataChanges=[],UT[this.id]=this,l&&d?($h.listen(this,"complete",$U),$h.listen(this,"progress",NJ),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return Ai(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():X7(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return j7(this.canvas,this.ctx),this}stop(){return $h.stop(this),this}resize(e,t){$h.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,o=this.platform.getMaximumSize(this.canvas,e,t,r.maintainAspectRatio&&this.aspectRatio),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,X7(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ys(r.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){Yi(this.options.scales||{},(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const l=t[o],d=tO(o,l),h="r"===d,g="x"===d;return{options:l,dposition:h?"chartArea":g?"bottom":"left",dtype:h?"radialLinear":g?"category":"linear"}}))),Yi(s,o=>{const l=o.options,d=l.id,h=tO(d,l),g=Qr(l.type,o.dtype);(void 0===l.position||HU(l.position,h)!==HU(o.dposition))&&(l.position=o.dposition),i[d]=!0;let v=null;d in r&&r[d].type===g?v=r[d]:(v=new(wd.getScale(g))({id:d,type:g,ctx:this.ctx,chart:this}),r[v.id]=v),v.init(l,e)}),Yi(i,(o,l)=>{o||delete r[l]}),Yi(r,o=>{ka.configure(this,o,o.options),ka.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(WU("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{0===t.filter(s=>s===r._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=s.indexAxis||eO(l,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const d=wd.getController(l),{datasetElementType:h,dataElementType:g}=hi.datasets[l];Object.assign(d.prototype,{dataElementType:wd.getElement(g),datasetElementType:h&&wd.getElement(h)}),o.controller=new d(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Yi(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,g=this.data.datasets.length;h<g;h++){const{controller:v}=this.getDatasetMeta(h),E=!i&&-1===s.indexOf(v);v.buildOrUpdateElements(E),o=Math.max(+v.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Yi(s,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(WU("z","_idx"));const{_active:l,_lastEvent:d}=this;d?this._eventHandler(d,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Yi(this.scales,e=>{ka.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!g7(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t)kJ(e,i,"_removeElements"===r?-s:s)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!g7(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ka.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Yi(this.boxes,i=>{r&&"chartArea"===i.position||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,$p(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&($h.has(this)?this.attached&&!$h.running(this)&&$h.start(this):(this.draw(),$U({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,i=!r.disabled,s=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&CT(t,{left:!1===r.left?0:s.left-r.left,right:!1===r.right?this.width:s.right+r.right,top:!1===r.top?0:s.top-r.top,bottom:!1===r.bottom?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&TT(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return iI(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=KX.modes[t];return"function"==typeof s?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Kp(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Rl(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(l=>l.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),$h.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),j7(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete UT[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};Yi(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(d,h)=>{t.addEventListener(this,d,h),e[d]=h},i=(d,h)=>{e[d]&&(t.removeEventListener(this,d,h),delete e[d])},s=(d,h)=>{this.canvas&&this.resize(d,h)};let o;const l=()=>{i("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){Yi(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Yi(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,l,d;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),l=0,d=e.length;l<d;++l){o=e[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!yT(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(d,h)=>d.filter(g=>!h.some(v=>g.datasetIndex===v.datasetIndex&&g.index===v.index)),o=s(t,e),l=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),l.length&&i.mode&&this.updateHoverStyle(l,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,i))return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,l=this._getActiveElements(e,i,r,t),d=function yY(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),h=function PJ(n,e,t,r){return t&&"mouseout"!==n.type?r?e:n:null}(e,this._lastEvent,r,d);r&&(this._lastEvent=null,ys(s.onHover,[e,l,this],this),d&&ys(s.onClick,[e,l,this],this));const g=!yT(l,i);return(g||t)&&(this._active=l,this._updateHoverStyles(l,i,t)),this._lastEvent=h,g}_getActiveElements(e,t,r,i){if("mouseout"===e.type)return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}const KU=()=>Yi(jT.instances,n=>n._plugins.invalidate()),Zp=!0;function ZU(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:l,innerRadius:d}=e;let h=i/l;n.beginPath(),n.arc(s,o,l,r-h,t+h),d>i?(h=i/d,n.arc(s,o,d,t+h,r-h,!0)):n.arc(s,o,i,t+Xs,r-Xs),n.closePath(),n.clip()}function Uv(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function nO(n,e,t,r,i,s){const{x:o,y:l,startAngle:d,pixelMargin:h,innerRadius:g}=e,v=Math.max(e.outerRadius+r+t-h,0),E=g>0?g+r+t+h:0;let w=0;const D=i-d;if(r){const ut=((g>0?g-r:0)+(v>0?v-r:0))/2;w=(D-(0!==ut?D*ut/(ut+r):D))/2}const L=(D-Math.max(.001,D*v-t/Fs)/v)/2,F=d+L+w,U=i-L-w,{outerStart:K,outerEnd:J,innerStart:ie,innerEnd:_e}=function OJ(n,e,t,r){const i=function RJ(n){return zR(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),l=d=>{const h=(t-Math.min(s,d))*r/2;return Jo(d,0,Math.min(s,h))};return{outerStart:l(i.outerStart),outerEnd:l(i.outerEnd),innerStart:Jo(i.innerStart,0,o),innerEnd:Jo(i.innerEnd,0,o)}}(e,E,v,U-F),fe=v-K,oe=v-J,Be=F+K/fe,tt=U-J/oe,ne=E+ie,te=E+_e,xe=F+ie/ne,ve=U-_e/te;if(n.beginPath(),s){if(n.arc(o,l,v,Be,tt),J>0){const ut=Uv(oe,tt,o,l);n.arc(ut.x,ut.y,J,tt,U+Xs)}const Ve=Uv(te,U,o,l);if(n.lineTo(Ve.x,Ve.y),_e>0){const ut=Uv(te,ve,o,l);n.arc(ut.x,ut.y,_e,U+Xs,ve+Math.PI)}if(n.arc(o,l,E,U-_e/E,F+ie/E,!0),ie>0){const ut=Uv(ne,xe,o,l);n.arc(ut.x,ut.y,ie,xe+Math.PI,F-Xs)}const Ze=Uv(fe,F,o,l);if(n.lineTo(Ze.x,Ze.y),K>0){const ut=Uv(fe,Be,o,l);n.arc(ut.x,ut.y,K,F-Xs,Be)}}else{n.moveTo(o,l);const Ve=Math.cos(Be)*v+o,Ze=Math.sin(Be)*v+l;n.lineTo(Ve,Ze);const ut=Math.cos(tt)*v+o,Ye=Math.sin(tt)*v+l;n.lineTo(ut,Ye)}n.closePath()}Object.defineProperties(jT,{defaults:{enumerable:Zp,value:hi},instances:{enumerable:Zp,value:UT},overrides:{enumerable:Zp,value:T_},registry:{enumerable:Zp,value:wd},version:{enumerable:Zp,value:"3.9.1"},getChart:{enumerable:Zp,value:GU},register:{enumerable:Zp,value:(...n)=>{wd.add(...n),KU()}},unregister:{enumerable:Zp,value:(...n)=>{wd.remove(...n),KU()}}});class VT extends vu{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:s,distance:o}=b7(i,{x:e,y:t}),{startAngle:l,endAngle:d,innerRadius:h,outerRadius:g,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),E=this.options.spacing/2,D=Qr(v,d-l)>=is||J2(s,l,d),P=zh(o,h+E,g+E);return D&&P}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:d,spacing:h}=this.options,g=(i+s)/2,v=(o+l+h+d)/2;return{x:t+Math.cos(g)*v,y:r+Math.sin(g)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/2,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>is?Math.floor(r/is):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();let l=0;if(i){l=i/2;const h=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(h)*l,Math.sin(h)*l),this.circumference>=Fs&&(l=i)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const d=function LJ(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:l}=e;let d=e.endAngle;if(s){nO(n,e,t,r,o+is,i);for(let h=0;h<s;++h)n.fill();isNaN(l)||(d=o+l%is,l%is==0&&(d+=is))}return nO(n,e,t,r,d,i),n.fill(),d}(e,this,l,s,o);(function BJ(n,e,t,r,i,s){const{options:o}=e,{borderWidth:l,borderJoinStyle:d}=o,h="inner"===o.borderAlign;!l||(h?(n.lineWidth=2*l,n.lineJoin=d||"round"):(n.lineWidth=l,n.lineJoin=d||"bevel"),e.fullCircles&&function FJ(n,e,t){const{x:r,y:i,startAngle:s,pixelMargin:o,fullCircles:l}=e,d=Math.max(e.outerRadius-o,0),h=e.innerRadius+o;let g;for(t&&ZU(n,e,s+is),n.beginPath(),n.arc(r,i,h,s+is,s,!0),g=0;g<l;++g)n.stroke();for(n.beginPath(),n.arc(r,i,d,s,s+is),g=0;g<l;++g)n.stroke()}(n,e,h),h&&ZU(n,e,i),nO(n,e,t,r,i,s),n.stroke())})(e,this,l,s,d,o),e.restore()}}function YU(n,e,t=e){n.lineCap=Qr(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Qr(t.borderDash,e.borderDash)),n.lineDashOffset=Qr(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Qr(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Qr(t.borderWidth,e.borderWidth),n.strokeStyle=Qr(t.borderColor,e.borderColor)}function UJ(n,e,t){n.lineTo(t.x,t.y)}function QU(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:l}=e,d=Math.max(i,o),h=Math.min(s,l);return{count:r,start:d,loop:e.loop,ilen:h<d&&!(i<o&&s<o||i>l&&s>l)?r+h-d:h-d}}function VJ(n,e,t,r){const{points:i,options:s}=e,{count:o,start:l,loop:d,ilen:h}=QU(i,t,r),g=function jJ(n){return n.stepped?tQ:n.tension||"monotone"===n.cubicInterpolationMode?nQ:UJ}(s);let w,D,P,{move:v=!0,reverse:E}=r||{};for(w=0;w<=h;++w)D=i[(l+(E?h-w:w))%o],!D.skip&&(v?(n.moveTo(D.x,D.y),v=!1):g(n,P,D,E,s.stepped),P=D);return d&&(D=i[(l+(E?h:0))%o],g(n,P,D,E,s.stepped)),!!d}function zJ(n,e,t,r){const i=e.points,{count:s,start:o,ilen:l}=QU(i,t,r),{move:d=!0,reverse:h}=r||{};let E,w,D,P,L,F,g=0,v=0;const U=J=>(o+(h?l-J:J))%s,K=()=>{P!==L&&(n.lineTo(g,L),n.lineTo(g,P),n.lineTo(g,F))};for(d&&(w=i[U(0)],n.moveTo(w.x,w.y)),E=0;E<=l;++E){if(w=i[U(E)],w.skip)continue;const J=w.x,ie=w.y,_e=0|J;_e===D?(ie<P?P=ie:ie>L&&(L=ie),g=(v*g+J)/++v):(K(),n.lineTo(J,ie),D=_e,v=0,P=L=ie),F=ie}K()}function rO(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?VJ:zJ}VT.id="arc",VT.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},VT.defaultRoutes={backgroundColor:"backgroundColor"};const qJ="function"==typeof Path2D;let zT=(()=>{class n extends vu{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const i=this.options;!i.tension&&"monotone"!==i.cubicInterpolationMode||i.stepped||this._pointsUpdated||(SQ(this._points,i,t,i.spanGaps?this._loop:this._fullLoop,r),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function VQ(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:l}=function UQ(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}(t,i,s,r);return function aU(n,e,t,r){return r&&r.setContext&&t?function zQ(n,e,t,r){const i=n._chart.getContext(),s=cU(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,d=t.length,h=[];let g=s,v=e[0].start,E=v;function w(D,P,L,F){const U=l?-1:1;if(D!==P){for(D+=d;t[D%d].skip;)D-=U;for(;t[P%d].skip;)P+=U;D%d!=P%d&&(h.push({start:D%d,end:P%d,loop:L,style:F}),g=F,v=P%d)}}for(const D of e){v=l?v:D.start;let L,P=t[v%d];for(E=v+1;E<=D.end;E++){const F=t[E%d];L=cU(r.setContext(Kp(i,{type:"segment",p0:P,p1:F,p0DataIndex:(E-1)%d,p1DataIndex:E%d,datasetIndex:o}))),HQ(L,g)&&w(v,E-1,D.loop,g),P=F,g=L}v<E-1&&w(v,E-1,D.loop,g)}return h}(n,e,t,r):e}(n,!0===r?[{start:o,end:l,loop:s}]:function jQ(n,e,t,r){const i=n.length,s=[];let d,o=e,l=n[e];for(d=e+1;d<=t;++d){const h=n[d%i];h.skip||h.stop?l.skip||(s.push({start:e%i,end:(d-1)%i,loop:r=!1}),e=o=h.stop?d:null):(o=d,l.skip&&(e=d)),l=h}return null!==o&&s.push({start:e%i,end:o%i,loop:r}),s}(t,o,l<o?l+i:l,!!n._fullLoop&&0===o&&l===i-1),t,e)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,i=t.length;return i&&this.points[t[i-1].end]}interpolate(t,r){const i=this.options,s=t[r],o=this.points,l=oU(this,{property:r,start:s,end:s});if(!l.length)return;const d=[],h=function HJ(n){return n.stepped?PQ:n.tension||"monotone"===n.cubicInterpolationMode?RQ:R_}(i);let g,v;for(g=0,v=l.length;g<v;++g){const{start:E,end:w}=l[g],D=o[E],P=o[w];if(D===P){d.push(D);continue}const F=h(D,P,Math.abs((s-D[r])/(P[r]-D[r])),i.stepped);F[r]=t[r],d.push(F)}return 1===d.length?d[0]:d}pathSegment(t,r,i){return rO(this)(t,this,r,i)}path(t,r,i){const s=this.segments,o=rO(this);let l=this._loop;r=r||0,i=i||this.points.length-r;for(const d of s)l&=o(t,this,d,{start:r,end:r+i-1});return!!l}draw(t,r,i,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function GJ(n,e,t,r){qJ&&!e.options.segment?function WJ(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),YU(n,e.options),n.stroke(i)}(n,e,t,r):function $J(n,e,t,r){const{segments:i,options:s}=e,o=rO(e);for(const l of i)YU(n,s,l.style),n.beginPath(),o(n,e,l,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}(n,e,t,r)}(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n.id="line",n.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e},n})();function XU(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}let KJ=(()=>{class n extends vu{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return XU(this,t,"x",r)}inYRange(t,r){return XU(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){let r=(t=t||this.options||{}).radius||0;return r=Math.max(r,r&&t.hoverRadius||0),2*(r+(r&&t.borderWidth||0))}draw(t,r){const i=this.options;this.skip||i.radius<.1||!iI(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,VR(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}return n.id="point",n.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n})();function JU(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let l,d,h,g,v;return n.horizontal?(v=o/2,l=Math.min(t,i),d=Math.max(t,i),h=r-v,g=r+v):(v=s/2,l=t-v,d=t+v,h=Math.min(r,i),g=Math.max(r,i)),{left:l,top:h,right:d,bottom:g}}function Yp(n,e,t,r){return n?0:Jo(e,t,r)}function iO(n,e,t,r){const i=null===e,s=null===t,l=n&&!(i&&s)&&JU(n,r);return l&&(i||zh(e,l.left,l.right))&&(s||zh(t,l.top,l.bottom))}function JJ(n,e){n.rect(e.x,e.y,e.w,e.h)}function sO(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0;return{x:n.x+r,y:n.y+i,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-r),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-i),radius:n.radius}}class HT extends vu{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=function QJ(n){const e=JU(n),t=e.right-e.left,r=e.bottom-e.top,i=function ZJ(n,e,t){const i=n.borderSkipped,s=z7(n.options.borderWidth);return{t:Yp(i.top,s.top,0,t),r:Yp(i.right,s.right,0,e),b:Yp(i.bottom,s.bottom,0,t),l:Yp(i.left,s.left,0,e)}}(n,t/2,r/2),s=function YJ(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=N_(i),o=Math.min(e,t),l=n.borderSkipped,d=r||di(i);return{topLeft:Yp(!d||l.top||l.left,s.topLeft,0,o),topRight:Yp(!d||l.top||l.right,s.topRight,0,o),bottomLeft:Yp(!d||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:Yp(!d||l.bottom||l.right,s.bottomRight,0,o)}}(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}(this),l=function XJ(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?sI:JJ;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),l(e,sO(o,t,s)),e.clip(),l(e,sO(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),l(e,sO(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return iO(this,e,t,r)}inXRange(e,t){return iO(this,e,null,t)}inYRange(e,t){return iO(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}HT.id="bar",HT.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},HT.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var eee=Object.freeze({__proto__:null,ArcElement:VT,LineElement:zT,PointElement:KJ,BarElement:HT});function ej(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:e})}}function tj(n){n.data.datasets.forEach(e=>{ej(e)})}var iee={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void tj(n);const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:l}=i,d=n.getDatasetMeta(s),h=o||i.data;if("y"===oI([l,n.options.indexAxis])||!d.controller.supportsDecimation)return;const g=n.scales[d.xAxisID];if("linear"!==g.type&&"time"!==g.type||n.options.parsing)return;let D,{start:v,count:E}=function ree(n,e){const t=e.length;let i,r=0;const{iScale:s}=n,{min:o,max:l,minDefined:d,maxDefined:h}=s.getUserBounds();return d&&(r=Jo(Hh(e,s.axis,o).lo,0,t-1)),i=h?Jo(Hh(e,s.axis,l).hi+1,r,t)-r:t-r,{start:r,count:i}}(d,h);if(E<=(t.threshold||4*r))ej(i);else{switch(Ai(o)&&(i._data=h,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(P){this._data=P}})),t.algorithm){case"lttb":D=function tee(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],l=(t-2)/(s-2);let d=0;const h=e+t-1;let v,E,w,D,P,g=e;for(o[d++]=n[g],v=0;v<s-2;v++){let U,L=0,F=0;const K=Math.floor((v+1)*l)+1+e,J=Math.min(Math.floor((v+2)*l)+1,t)+e,ie=J-K;for(U=K;U<J;U++)L+=n[U].x,F+=n[U].y;L/=ie,F/=ie;const _e=Math.floor(v*l)+1+e,fe=Math.min(Math.floor((v+1)*l)+1,t)+e,{x:oe,y:Be}=n[g];for(w=D=-1,U=_e;U<fe;U++)D=.5*Math.abs((oe-L)*(n[U].y-Be)-(oe-n[U].x)*(F-Be)),D>w&&(w=D,E=n[U],P=U);o[d++]=E,g=P}return o[d++]=n[h],o}(h,v,E,r,t);break;case"min-max":D=function nee(n,e,t,r){let o,l,d,h,g,v,E,w,D,P,i=0,s=0;const L=[],U=n[e].x,J=n[e+t-1].x-U;for(o=e;o<e+t;++o){l=n[o],d=(l.x-U)/J*r,h=l.y;const ie=0|d;if(ie===g)h<D?(D=h,v=o):h>P&&(P=h,E=o),i=(s*i+l.x)/++s;else{const _e=o-1;if(!Ai(v)&&!Ai(E)){const fe=Math.min(v,E),oe=Math.max(v,E);fe!==w&&fe!==_e&&L.push({...n[fe],x:i}),oe!==w&&oe!==_e&&L.push({...n[oe],x:i})}o>0&&_e!==w&&L.push(n[_e]),L.push(l),g=ie,s=0,D=P=h,v=E=w=o}}return L}(h,v,E,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=D}})},destroy(n){tj(n)}};function oO(n,e,t,r){if(r)return;let i=e[n],s=t[n];return"angle"===n&&(i=sl(i),s=sl(s)),{property:n,start:i,end:s}}function aO(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function nj(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function rj(n,e){let t=[],r=!1;return _s(n)?(r=!0,t=n):t=function oee(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:l})=>{l=aO(o,l,i);const d=i[o],h=i[l];null!==r?(s.push({x:d.x,y:r}),s.push({x:h.x,y:r})):null!==t&&(s.push({x:t,y:d.y}),s.push({x:t,y:h.y}))}),s}(n,e),t.length?new zT({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function ij(n){return n&&!1!==n.fill}function aee(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!lo(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function cee(n,e,t){const r=function hee(n){const e=n.options,t=e.fill;let r=Qr(t&&t.target,t);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(n);if(di(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return lo(i)&&Math.floor(i)===i?function lee(n,e,t,r){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=r)&&t}(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function gee(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:l,point:d}=mee(s,e,"x");if(!(!d||o&&l))if(o)r.unshift(d);else if(n.push(d),!l)break}n.push(...r)}function mee(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let l=!1,d=!1;for(let h=0;h<s.length;h++){const g=s[h],v=o[g.start][t],E=o[g.end][t];if(zh(i,v,E)){l=i===v,d=i===E;break}}return{first:l,last:d,point:r}}class sj{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return e.arc(i,s,o,(t=t||{start:0,end:is}).end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function cO(n,e,t){const r=function _ee(n){const{chart:e,fill:t,line:r}=n;if(lo(t))return function yee(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function fee(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,l=function pee(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}(e,t);l.push(rj({x:null,y:e.bottom},r));for(let d=0;d<s.length;d++){const h=s[d];for(let g=h.start;g<=h.end;g++)gee(i,o[g],l)}return new zT({points:i,options:{}})}(n);if("shape"===t)return!0;const i=function vee(n){return(n.scale||{}).getPointPositionForValue?function wee(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function dee(n,e,t){let r;return r="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:di(n)?n.value:e.getBaseValue(),r}(t,e,s),l=[];if(r.grid.circular){const d=e.getPointPositionForValue(0,s);return new sj({x:d.x,y:d.y,radius:e.getDistanceFromCenterForValue(o)})}for(let d=0;d<i;++d)l.push(e.getPointPositionForValue(d,o));return l}(n):function bee(n){const{scale:e={},fill:t}=n,r=function uee(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:di(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(lo(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(n)}(n);return i instanceof sj?i:rj(i,r)}(e),{line:i,scale:s,axis:o}=e,l=i.options,d=l.fill,h=l.backgroundColor,{above:g=h,below:v=h}=d||{};r&&i.points.length&&(CT(n,t),function Iee(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:l}=e,d=t._loop?"angle":e.axis;n.save(),"x"===d&&s!==i&&(oj(n,r,o.top),aj(n,{line:t,target:r,color:i,scale:l,property:d}),n.restore(),n.save(),oj(n,r,o.bottom)),aj(n,{line:t,target:r,color:s,scale:l,property:d}),n.restore()}(n,{line:i,target:r,above:g,below:v,area:t,scale:s,axis:o}),TT(n))}function oj(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const l of r){const{start:d,end:h}=l,g=i[d],v=i[aO(d,h,i)];s?(n.moveTo(g.x,g.y),s=!1):(n.lineTo(g.x,t),n.lineTo(g.x,g.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(v.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function aj(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,l=function see(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const l of r){let{start:d,end:h}=l;h=aO(d,h,i);const g=oO(t,i[d],i[h],l.loop);if(!e.segments){o.push({source:l,target:g,start:i[d],end:i[h]});continue}const v=oU(e,g);for(const E of v){const w=oO(t,s[E.start],s[E.end],E.loop),D=sU(l,i,w);for(const P of D)o.push({source:P,target:E,start:{[t]:nj(g,w,"start",Math.max)},end:{[t]:nj(g,w,"end",Math.min)}})}}return o}(t,r,i);for(const{source:d,target:h,start:g,end:v}of l){const{style:{backgroundColor:E=s}={}}=d,w=!0!==r;n.save(),n.fillStyle=E,Eee(n,o,w&&oO(i,g,v)),n.beginPath();const D=!!t.pathSegment(n,d);let P;if(w){D?n.closePath():cj(n,r,v,i);const L=!!r.pathSegment(n,h,{move:D,reverse:!0});P=D&&L,P||cj(n,r,g,i)}n.closePath(),n.fill(P?"evenodd":"nonzero"),n.restore()}}function Eee(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:l}=t||{};"x"===s&&(n.beginPath(),n.rect(o,r,l-o,i-r),n.clip())}function cj(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var xee={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,l,d;for(o=0;o<r;++o)s=n.getDatasetMeta(o),l=s.dataset,d=null,l&&l.options&&l instanceof zT&&(d={visible:n.isDatasetVisible(o),index:o,fill:cee(l,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=d,i.push(d);for(o=0;o<r;++o)d=i[o],d&&!1!==d.fill&&(d.fill=aee(i,o,t.propagate))},beforeDraw(n,e,t){const r="beforeDraw"===t.drawTime,i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const l=i[o].$filler;!l||(l.line.updateControlPoints(s,l.axis),r&&l.fill&&cO(n.ctx,l,s))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;ij(s)&&cO(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!ij(r)||"beforeDatasetDraw"!==t.drawTime||cO(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const lj=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}};class uj extends vu{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ys(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,i=Uo(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:d}=lj(r,s);let h,g;t.font=i.string,this.isHorizontal()?(h=this.maxWidth,g=this._fitRows(o,s,l,d)+10):(g=this.maxHeight,h=this._fitCols(o,s,l,d)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],h=this.lineWidths=[0],g=i+l;let v=e;s.textAlign="left",s.textBaseline="middle";let E=-1,w=-g;return this.legendItems.forEach((D,P)=>{const L=r+t/2+s.measureText(D.text).width;(0===P||h[h.length-1]+L+2*l>o)&&(v+=g,h[h.length-(P>0?0:1)]=0,w+=g,E++),d[P]={left:0,top:w,row:E,width:L,height:i},h[h.length-1]+=L+l}),v}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],h=this.columnSizes=[],g=o-e;let v=l,E=0,w=0,D=0,P=0;return this.legendItems.forEach((L,F)=>{const U=r+t/2+s.measureText(L.text).width;F>0&&w+i+2*l>g&&(v+=E+l,h.push({width:E,height:w}),D+=E+l,P++,E=w=0),d[F]={left:D,top:w,col:P,width:U,height:i},E=Math.max(E,U),w+=i+l}),v+=E,h.push({width:E,height:w}),v}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Bv(s,this.left,this.width);if(this.isHorizontal()){let l=0,d=Ma(r,this.left+i,this.right-this.lineWidths[l]);for(const h of t)l!==h.row&&(l=h.row,d=Ma(r,this.left+i,this.right-this.lineWidths[l])),h.top+=this.top+e+i,h.left=o.leftForLtr(o.x(d),h.width),d+=h.width+i}else{let l=0,d=Ma(r,this.top+e+i,this.bottom-this.columnSizes[l].height);for(const h of t)h.col!==l&&(l=h.col,d=Ma(r,this.top+e+i,this.bottom-this.columnSizes[l].height)),h.top=d,h.left+=this.left+i,h.left=o.leftForLtr(o.x(h.left),h.width),d+=h.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;CT(e,this),this._draw(),TT(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,l=hi.color,d=Bv(e.rtl,this.left,this.width),h=Uo(o.font),{color:g,padding:v}=o,E=h.size,w=E/2;let D;this.drawTitle(),i.textAlign=d.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:P,boxHeight:L,itemHeight:F}=lj(o,E),J=this.isHorizontal(),ie=this._computeTitleHeight();D=J?{x:Ma(s,this.left+v,this.right-r[0]),y:this.top+v+ie,line:0}:{x:this.left+v,y:Ma(s,this.top+ie+v,this.bottom-t[0].height),line:0},tU(this.ctx,e.textDirection);const _e=F+v;this.legendItems.forEach((fe,oe)=>{i.strokeStyle=fe.fontColor||g,i.fillStyle=fe.fontColor||g;const Be=i.measureText(fe.text).width,tt=d.textAlign(fe.textAlign||(fe.textAlign=o.textAlign)),ne=P+w+Be;let te=D.x,xe=D.y;d.setWidth(this.width),J?oe>0&&te+ne+v>this.right&&(xe=D.y+=_e,D.line++,te=D.x=Ma(s,this.left+v,this.right-r[D.line])):oe>0&&xe+_e>this.bottom&&(te=D.x=te+t[D.line].width+v,D.line++,xe=D.y=Ma(s,this.top+ie+v,this.bottom-t[D.line].height)),function(fe,oe,Be){if(isNaN(P)||P<=0||isNaN(L)||L<0)return;i.save();const tt=Qr(Be.lineWidth,1);if(i.fillStyle=Qr(Be.fillStyle,l),i.lineCap=Qr(Be.lineCap,"butt"),i.lineDashOffset=Qr(Be.lineDashOffset,0),i.lineJoin=Qr(Be.lineJoin,"miter"),i.lineWidth=tt,i.strokeStyle=Qr(Be.strokeStyle,l),i.setLineDash(Qr(Be.lineDash,[])),o.usePointStyle){const ne={radius:L*Math.SQRT2/2,pointStyle:Be.pointStyle,rotation:Be.rotation,borderWidth:tt},te=d.xPlus(fe,P/2);V7(i,ne,te,oe+w,o.pointStyleWidth&&P)}else{const ne=oe+Math.max((E-L)/2,0),te=d.leftForLtr(fe,P),xe=N_(Be.borderRadius);i.beginPath(),Object.values(xe).some(ve=>0!==ve)?sI(i,{x:te,y:ne,w:P,h:L,radius:xe}):i.rect(te,ne,P,L),i.fill(),0!==tt&&i.stroke()}i.restore()}(d.x(te),xe,fe),te=((n,e,t,r)=>n===(r?"left":"right")?t:"center"===n?(e+t)/2:e)(tt,te+P+w,J?te+ne:this.right,e.rtl),function(fe,oe,Be){M_(i,Be.text,fe,oe+F/2,h,{strikethrough:Be.hidden,textAlign:d.textAlign(Be.textAlign)})}(d.x(te),xe,fe),J?D.x+=ne+v:D.y+=_e}),nU(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Uo(t.font),i=Na(t.padding);if(!t.display)return;const s=Bv(e.rtl,this.left,this.width),o=this.ctx,l=t.position,h=i.top+r.size/2;let g,v=this.left,E=this.width;if(this.isHorizontal())E=Math.max(...this.lineWidths),g=this.top+h,v=Ma(e.align,v,this.right-E);else{const D=this.columnSizes.reduce((P,L)=>Math.max(P,L.height),0);g=h+Ma(e.align,this.top,this.bottom-D-e.labels.padding-this._computeTitleHeight())}const w=Ma(l,v,v+E);o.textAlign=s.textAlign(kR(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,M_(o,t.text,w,g,r)}_computeTitleHeight(){const e=this.options.title,t=Uo(e.font),r=Na(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(zh(e,this.left,this.right)&&zh(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],zh(e,i.left,i.left+i.width)&&zh(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function Aee(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,s=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(i,r);i&&!s&&ys(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ys(t.onHover,[e,r,this],this)}else r&&ys(t.onClick,[e,r,this],this)}}var Cee={id:"legend",_element:uj,start(n,e,t){const r=n.legend=new uj({ctx:n.ctx,options:t,chart:n});ka.configure(n,r,t),ka.addBox(n,r)},stop(n){ka.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;ka.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s}}=n.legend.options;return n._getSortedDatasetMetas().map(o=>{const l=o.controller.getStyle(t?0:void 0),d=Na(l.borderWidth);return{text:e[o.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class lO extends vu{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=_s(r.text)?r.text.length:1;this._padding=Na(r.padding);const s=i*Uo(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,l=o.align;let h,g,v,d=0;return this.isHorizontal()?(g=Ma(l,r,s),v=t+e,h=s-r):("left"===o.position?(g=r+e,v=Ma(l,i,t),d=-.5*Fs):(g=s-e,v=Ma(l,t,i),d=.5*Fs),h=i-t),{titleX:g,titleY:v,maxWidth:h,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Uo(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:d,rotation:h}=this._drawArgs(s);M_(e,t.text,0,0,r,{color:t.color,maxWidth:d,rotation:h,textAlign:kR(t.align),textBaseline:"middle",translation:[o,l]})}}var Dee={id:"title",_element:lO,start(n,e,t){!function Tee(n,e){const t=new lO({ctx:n.ctx,options:e,chart:n});ka.configure(n,t,e),ka.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){ka.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;ka.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const WT=new WeakMap;var Mee={id:"subtitle",start(n,e,t){const r=new lO({ctx:n.ctx,options:t,chart:n});ka.configure(n,r,t),ka.addBox(n,r),WT.set(n,r)},stop(n){ka.removeBox(n,WT.get(n)),WT.delete(n)},beforeUpdate(n,e,t){const r=WT.get(n);ka.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mI={average(n){if(!n.length)return!1;let e,t,r=0,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r+=l.x,i+=l.y,++s}}return{x:r/s,y:i/s}},nearest(n,e){if(!n.length)return!1;let s,o,l,t=e.x,r=e.y,i=Number.POSITIVE_INFINITY;for(s=0,o=n.length;s<o;++s){const d=n[s].element;if(d&&d.hasValue()){const g=MR(e,d.getCenterPoint());g<i&&(i=g,l=d)}}if(l){const d=l.tooltipPosition();t=d.x,r=d.y}return{x:t,y:r}}};function Id(n,e){return e&&(_s(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function qh(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function Nee(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:l}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:l,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function dj(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:l}=e,d=Uo(e.bodyFont),h=Uo(e.titleFont),g=Uo(e.footerFont),v=s.length,E=i.length,w=r.length,D=Na(e.padding);let P=D.height,L=0,F=r.reduce((J,ie)=>J+ie.before.length+ie.lines.length+ie.after.length,0);F+=n.beforeBody.length+n.afterBody.length,v&&(P+=v*h.lineHeight+(v-1)*e.titleSpacing+e.titleMarginBottom),F&&(P+=w*(e.displayColors?Math.max(l,d.lineHeight):d.lineHeight)+(F-w)*d.lineHeight+(F-1)*e.bodySpacing),E&&(P+=e.footerMarginTop+E*g.lineHeight+(E-1)*e.footerSpacing);let U=0;const K=function(J){L=Math.max(L,t.measureText(J).width+U)};return t.save(),t.font=h.string,Yi(n.title,K),t.font=d.string,Yi(n.beforeBody.concat(n.afterBody),K),U=e.displayColors?o+2+e.boxPadding:0,Yi(r,J=>{Yi(J.before,K),Yi(J.lines,K),Yi(J.after,K)}),U=0,t.font=g.string,Yi(n.footer,K),t.restore(),L+=D.width,{width:L,height:P}}function Ree(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:l,right:d}}=n;let h="center";return"center"===r?h=i<=(l+d)/2?"left":"right":i<=s/2?h="left":i>=o-s/2&&(h="right"),function Pee(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if("left"===n&&i+s+o>e.width||"right"===n&&i-s-o<0)return!0}(h,n,e,t)&&(h="center"),h}function hj(n,e,t){const r=t.yAlign||e.yAlign||function kee(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||Ree(n,e,t,r),yAlign:r}}function fj(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:l,yAlign:d}=t,h=i+s,{topLeft:g,topRight:v,bottomLeft:E,bottomRight:w}=N_(o);let D=function Oee(n,e){let{x:t,width:r}=n;return"right"===e?t-=r:"center"===e&&(t-=r/2),t}(e,l);const P=function Lee(n,e,t){let{y:r,height:i}=n;return"top"===e?r+=t:r-="bottom"===e?i+t:i/2,r}(e,d,h);return"center"===d?"left"===l?D+=h:"right"===l&&(D-=h):"left"===l?D-=Math.max(g,E)+i:"right"===l&&(D+=Math.max(v,w)+i),{x:Jo(D,0,r.width-e.width),y:Jo(P,0,r.height-e.height)}}function $T(n,e,t){const r=Na(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-r.right:n.x+r.left}function pj(n){return Id([],qh(n))}function gj(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}let mj=(()=>{class n extends vu{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new uU(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function Fee(n,e,t){return Kp(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:i}=r,s=i.beforeTitle.apply(this,[t]),o=i.title.apply(this,[t]),l=i.afterTitle.apply(this,[t]);let d=[];return d=Id(d,qh(s)),d=Id(d,qh(o)),d=Id(d,qh(l)),d}getBeforeBody(t,r){return pj(r.callbacks.beforeBody.apply(this,[t]))}getBody(t,r){const{callbacks:i}=r,s=[];return Yi(t,o=>{const l={before:[],lines:[],after:[]},d=gj(i,o);Id(l.before,qh(d.beforeLabel.call(this,o))),Id(l.lines,d.label.call(this,o)),Id(l.after,qh(d.afterLabel.call(this,o))),s.push(l)}),s}getAfterBody(t,r){return pj(r.callbacks.afterBody.apply(this,[t]))}getFooter(t,r){const{callbacks:i}=r,s=i.beforeFooter.apply(this,[t]),o=i.footer.apply(this,[t]),l=i.afterFooter.apply(this,[t]);let d=[];return d=Id(d,qh(s)),d=Id(d,qh(o)),d=Id(d,qh(l)),d}_createItems(t){const r=this._active,i=this.chart.data,s=[],o=[],l=[];let h,g,d=[];for(h=0,g=r.length;h<g;++h)d.push(Nee(this.chart,r[h]));return t.filter&&(d=d.filter((v,E,w)=>t.filter(v,E,w,i))),t.itemSort&&(d=d.sort((v,E)=>t.itemSort(v,E,i))),Yi(d,v=>{const E=gj(t.callbacks,v);s.push(E.labelColor.call(this,v)),o.push(E.labelPointStyle.call(this,v)),l.push(E.labelTextColor.call(this,v))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=d,d}update(t,r){const i=this.options.setContext(this.getContext()),s=this._active;let o,l=[];if(s.length){const d=mI[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=dj(this,i),g=Object.assign({},d,h),v=hj(this.chart,i,g),E=fj(i,g,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,o={opacity:1,x:E.x,y:E.y,width:h.width,height:h.height,caretX:d.x,caretY:d.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){const o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){const{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:d}=i,{topLeft:h,topRight:g,bottomLeft:v,bottomRight:E}=N_(d),{x:w,y:D}=t,{width:P,height:L}=r;let F,U,K,J,ie,_e;return"center"===o?(ie=D+L/2,"left"===s?(F=w,U=F-l,J=ie+l,_e=ie-l):(F=w+P,U=F+l,J=ie-l,_e=ie+l),K=F):(U="left"===s?w+Math.max(h,v)+l:"right"===s?w+P-Math.max(g,E)-l:this.caretX,"top"===o?(J=D,ie=J-l,F=U-l,K=U+l):(J=D+L,ie=J+l,F=U+l,K=U-l),_e=J),{x1:F,x2:U,x3:K,y1:J,y2:ie,y3:_e}}drawTitle(t,r,i){const s=this.title,o=s.length;let l,d,h;if(o){const g=Bv(i.rtl,this.x,this.width);for(t.x=$T(this,i.titleAlign,i),r.textAlign=g.textAlign(i.titleAlign),r.textBaseline="middle",l=Uo(i.titleFont),d=i.titleSpacing,r.fillStyle=i.titleColor,r.font=l.string,h=0;h<o;++h)r.fillText(s[h],g.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+d,h+1===o&&(t.y+=i.titleMarginBottom-d)}}_drawColorBox(t,r,i,s,o){const l=this.labelColors[i],d=this.labelPointStyles[i],{boxHeight:h,boxWidth:g,boxPadding:v}=o,E=Uo(o.bodyFont),w=$T(this,"left",o),D=s.x(w),L=r.y+(h<E.lineHeight?(E.lineHeight-h)/2:0);if(o.usePointStyle){const F={radius:Math.min(g,h)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},U=s.leftForLtr(D,g)+g/2,K=L+h/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,VR(t,F,U,K),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,VR(t,F,U,K)}else{t.lineWidth=di(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const F=s.leftForLtr(D,g-v),U=s.leftForLtr(s.xPlus(D,1),g-v-2),K=N_(l.borderRadius);Object.values(K).some(J=>0!==J)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,sI(t,{x:F,y:L,w:g,h,radius:K}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),sI(t,{x:U,y:L+1,w:g-2,h:h-2,radius:K}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(F,L,g,h),t.strokeRect(F,L,g,h),t.fillStyle=l.backgroundColor,t.fillRect(U,L+1,g-2,h-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){const{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:d,boxHeight:h,boxWidth:g,boxPadding:v}=i,E=Uo(i.bodyFont);let w=E.lineHeight,D=0;const P=Bv(i.rtl,this.x,this.width),L=function(Be){r.fillText(Be,P.x(t.x+D),t.y+w/2),t.y+=w+o},F=P.textAlign(l);let U,K,J,ie,_e,fe,oe;for(r.textAlign=l,r.textBaseline="middle",r.font=E.string,t.x=$T(this,F,i),r.fillStyle=i.bodyColor,Yi(this.beforeBody,L),D=d&&"right"!==F?"center"===l?g/2+v:g+2+v:0,ie=0,fe=s.length;ie<fe;++ie){for(U=s[ie],K=this.labelTextColors[ie],r.fillStyle=K,Yi(U.before,L),J=U.lines,d&&J.length&&(this._drawColorBox(r,t,ie,P,i),w=Math.max(E.lineHeight,h)),_e=0,oe=J.length;_e<oe;++_e)L(J[_e]),w=E.lineHeight;Yi(U.after,L)}D=0,w=E.lineHeight,Yi(this.afterBody,L),t.y-=o}drawFooter(t,r,i){const s=this.footer,o=s.length;let l,d;if(o){const h=Bv(i.rtl,this.x,this.width);for(t.x=$T(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=h.textAlign(i.footerAlign),r.textBaseline="middle",l=Uo(i.footerFont),r.fillStyle=i.footerColor,r.font=l.string,d=0;d<o;++d)r.fillText(s[d],h.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){const{xAlign:o,yAlign:l}=this,{x:d,y:h}=t,{width:g,height:v}=i,{topLeft:E,topRight:w,bottomLeft:D,bottomRight:P}=N_(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(d+E,h),"top"===l&&this.drawCaret(t,r,i,s),r.lineTo(d+g-w,h),r.quadraticCurveTo(d+g,h,d+g,h+w),"center"===l&&"right"===o&&this.drawCaret(t,r,i,s),r.lineTo(d+g,h+v-P),r.quadraticCurveTo(d+g,h+v,d+g-P,h+v),"bottom"===l&&this.drawCaret(t,r,i,s),r.lineTo(d+D,h+v),r.quadraticCurveTo(d,h+v,d,h+v-D),"center"===l&&"left"===o&&this.drawCaret(t,r,i,s),r.lineTo(d,h+E),r.quadraticCurveTo(d,h,d+E,h),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const l=mI[t.position].call(this,this._active,this._eventPosition);if(!l)return;const d=this._size=dj(this,t),h=Object.assign({},l,this._size),g=hj(r,t,h),v=fj(t,h,g,r);(s._to!==v.x||o._to!==v.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=d.width,this.height=d.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Na(r.padding);r.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),tU(t,r.textDirection),o.y+=l.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),nU(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const i=this._active,s=t.map(({datasetIndex:d,index:h})=>{const g=this.chart.getDatasetMeta(d);if(!g)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:g.data[h],index:h}}),o=!yT(i,s),l=this._positionChanged(s,r);(o||l)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],l=this._getActiveElements(t,o,r,i),d=this._positionChanged(l,t),h=r||!yT(l,o)||d;return h&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),h}_getActiveElements(t,r,i,s){const o=this.options;if("mouseout"===t.type)return[];if(!s)return r;const l=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(t,r){const{caretX:i,caretY:s,options:o}=this,l=mI[o.position].call(this,t,r);return!1!==l&&(i!==l.x||s!==l.y)}}return n.positioners=mI,n})();var Bee={id:"tooltip",_element:mj,positioners:mI,afterInit(n,e,t){t&&(n.tooltip=new mj({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",t))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Vh,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Vh,beforeBody:Vh,beforeLabel:Vh,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Ai(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Vh,afterBody:Vh,beforeFooter:Vh,footer:Vh,afterFooter:Vh}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Uee=Object.freeze({__proto__:null,Decimation:iee,Filler:xee,Legend:Cee,SubTitle:Mee,Title:Dee,Tooltip:Bee});class qT extends O_{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Ai(e))return null;const r=this.getLabels();return((n,e)=>null===n?null:Jo(Math.round(n),0,e))(t=isFinite(t)&&r[t]===e?t:function Vee(n,e,t,r){const i=n.indexOf(e);return-1===i?((n,e,t,r)=>("string"==typeof e?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,r):i!==n.lastIndexOf(e)?t:i}(r,e,Qr(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function _j(n,e,{horizontal:t,minRotation:r}){const i=yu(r),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(e/s,.75*e*(""+n).length)}qT.id="category",qT.defaults={ticks:{callback:qT.prototype.getLabelForValue}};class GT extends O_{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ai(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=d=>i=t?i:d,l=d=>s=r?s:d;if(e){const d=vd(i),h=vd(s);d<0&&h<0?l(0):d>0&&h>0&&o(0)}if(i===s){let d=1;(s>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(d=Math.abs(.05*s)),l(s+d),e||o(i-d)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=e;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const o=function Hee(n,e){const t=[],{bounds:i,step:s,min:o,max:l,precision:d,count:h,maxTicks:g,maxDigits:v,includeBounds:E}=n,w=s||1,D=g-1,{min:P,max:L}=e,F=!Ai(o),U=!Ai(l),K=!Ai(h),J=(L-P)/(v+1);let _e,fe,oe,Be,ie=_7((L-P)/D/w)*w;if(ie<1e-14&&!F&&!U)return[{value:P},{value:L}];Be=Math.ceil(L/ie)-Math.floor(P/ie),Be>D&&(ie=_7(Be*ie/D/w)*w),Ai(d)||(_e=Math.pow(10,d),ie=Math.ceil(ie*_e)/_e),"ticks"===i?(fe=Math.floor(P/ie)*ie,oe=Math.ceil(L/ie)*ie):(fe=P,oe=L),F&&U&&s&&function IY(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((l-o)/s,ie/1e3)?(Be=Math.round(Math.min((l-o)/ie,g)),ie=(l-o)/Be,fe=o,oe=l):K?(fe=F?o:fe,oe=U?l:oe,Be=h-1,ie=(oe-fe)/Be):(Be=(oe-fe)/ie,Be=X2(Be,Math.round(Be),ie/1e3)?Math.round(Be):Math.ceil(Be));const tt=Math.max(v7(ie),v7(fe));_e=Math.pow(10,Ai(d)?tt:d),fe=Math.round(fe*_e)/_e,oe=Math.round(oe*_e)/_e;let ne=0;for(F&&(E&&fe!==o?(t.push({value:o}),fe<o&&ne++,X2(Math.round((fe+ne*ie)*_e)/_e,o,_j(o,J,n))&&ne++):fe<o&&ne++);ne<Be;++ne)t.push({value:Math.round((fe+ne*ie)*_e)/_e});return U&&E&&oe!==l?t.length&&X2(t[t.length-1].value,l,_j(l,J,n))?t[t.length-1].value=l:t.push({value:l}):(!U||oe===l)&&t.push({value:oe}),t}({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&y7(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return aI(e,this.chart.options.locale,this.options.ticks.format)}}class uO extends GT{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=lo(e)?e:0,this.max=lo(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=yu(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function yj(n){return n/Math.pow(10,Math.floor(Ol(n)))==1}uO.id="linear",uO.defaults={ticks:{callback:kT.formatters.numeric}};class dO extends O_{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=GT.prototype.parse.apply(this,[e,t]);if(0!==r)return lo(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=lo(e)?Math.max(0,e):null,this.max=lo(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=d=>r=e?r:d,o=d=>i=t?i:d,l=(d,h)=>Math.pow(10,Math.floor(Ol(d))+h);r===i&&(r<=0?(s(1),o(10)):(s(l(r,-1)),o(l(i,1)))),r<=0&&s(l(i,-1)),i<=0&&o(l(r,1)),this._zero&&this.min!==this._suggestedMin&&r===l(this.min,0)&&s(l(r,-1)),this.min=r,this.max=i}buildTicks(){const e=this.options,r=function Wee(n,e){const t=Math.floor(Ol(e.max)),r=Math.ceil(e.max/Math.pow(10,t)),i=[];let s=Pl(n.min,Math.pow(10,Math.floor(Ol(e.min)))),o=Math.floor(Ol(s)),l=Math.floor(s/Math.pow(10,o)),d=o<0?Math.pow(10,Math.abs(o)):1;do{i.push({value:s,major:yj(s)}),++l,10===l&&(l=1,++o,d=o>=0?1:d),s=Math.round(l*Math.pow(10,o)*d)/d}while(o<t||o===t&&l<r);const h=Pl(n.max,s);return i.push({value:h,major:yj(s)}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&y7(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return void 0===e?"0":aI(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ol(e),this._valueRange=Ol(this.max)-Ol(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ol(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function hO(n){const e=n.ticks;if(e.display&&n.display){const t=Na(e.backdropPadding);return Qr(e.font&&e.font.size,hi.font.size)+t.height}return 0}function $ee(n,e,t){return t=_s(t)?t:[t],{w:eQ(n,e.string,t),h:t.length*e.lineHeight}}function vj(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function Gee(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let l=0,d=0;r.start<e.l?(l=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-l)):r.end>e.r&&(l=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+l)),i.start<e.t?(d=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-d)):i.end>e.b&&(d=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+d))}function Zee(n){return 0===n||180===n?"center":n<180?"left":"right"}function Yee(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}function Qee(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}function bj(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,is);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}dO.id="logarithmic",dO.defaults={ticks:{callback:kT.formatters.logarithmic,major:{enabled:!0}}};class _I extends GT{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Na(hO(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=lo(e)&&!isNaN(e)?e:0,this.max=lo(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hO(this.options))}generateTickLabels(e){GT.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=ys(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?function qee(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,l=o.centerPointLabels?Fs/s:0;for(let d=0;d<s;d++){const h=o.setContext(n.getPointLabelContext(d));i[d]=h.padding;const g=n.getPointPosition(d,n.drawingArea+i[d],l),v=Uo(h.font),E=$ee(n.ctx,v,n._pointLabels[d]);r[d]=E;const w=sl(n.getIndexAngle(d)+l),D=Math.round(DR(w));Gee(t,e,w,vj(D,g.x,E.w,0,180),vj(D,g.y,E.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function Kee(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,o=hO(s)/2,l=n.drawingArea,d=s.pointLabels.centerPointLabels?Fs/i:0;for(let h=0;h<i;h++){const g=n.getPointPosition(h,l+o+t[h],d),v=Math.round(DR(sl(g.angle+Xs))),E=e[h],w=Qee(g.y,E.h,v),D=Zee(v),P=Yee(g.x,E.w,D);r.push({x:g.x,y:w,textAlign:D,left:P,top:w,right:P+E.w,bottom:w+E.h})}return r}(n,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){return sl(e*(is/(this._pointLabels.length||1))+yu(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Ai(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ai(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function ete(n,e,t){return Kp(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-Xs+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),bj(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i}=t,s=this._pointLabels.length;let o,l,d;if(t.pointLabels.display&&function Xee(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=r.setContext(n.getPointLabelContext(i)),o=Uo(s.font),{x:l,y:d,textAlign:h,left:g,top:v,right:E,bottom:w}=n._pointLabelItems[i],{backdropColor:D}=s;if(!Ai(D)){const P=N_(s.borderRadius),L=Na(s.backdropPadding);t.fillStyle=D;const F=g-L.left,U=v-L.top,K=E-g+L.width,J=w-v+L.height;Object.values(P).some(ie=>0!==ie)?(t.beginPath(),sI(t,{x:F,y:U,w:K,h:J,radius:P}),t.fill()):t.fillRect(F,U,K,J)}M_(t,n._pointLabels[i],l,d+o.lineHeight/2,o,{color:s.color,textAlign:h,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((h,g)=>{0!==g&&(l=this.getDistanceFromCenterForValue(h.value),function Jee(n,e,t,r){const i=n.ctx,s=e.circular,{color:o,lineWidth:l}=e;!s&&!r||!o||!l||t<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(e.borderDash),i.lineDashOffset=e.borderDashOffset,i.beginPath(),bj(n,t,s,r),i.closePath(),i.stroke(),i.restore())}(this,i.setContext(this.getContext(g-1)),l,s))}),r.display){for(e.save(),o=s-1;o>=0;o--){const h=r.setContext(this.getPointLabelContext(o)),{color:g,lineWidth:v}=h;!v||!g||(e.lineWidth=v,e.strokeStyle=g,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),d=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,d)=>{if(0===d&&!t.reverse)return;const h=r.setContext(this.getContext(d)),g=Uo(h.font);if(s=this.getDistanceFromCenterForValue(this.ticks[d].value),h.showLabelBackdrop){e.font=g.string,o=e.measureText(l.label).width,e.fillStyle=h.backdropColor;const v=Na(h.backdropPadding);e.fillRect(-o/2-v.left,-s-g.size/2-v.top,o+v.width,g.size+v.height)}M_(e,l.label,0,-s,g,{color:h.color})}),e.restore()}drawTitle(){}}_I.id="radialLinear",_I.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:kT.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}},_I.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},_I.descriptors={angleLines:{_fallback:"grid"}};const KT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Tc=Object.keys(KT);function tte(n,e){return n-e}function wj(n,e){if(Ai(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),lo(o)||(o="string"==typeof r?t.parse(o,r):t.parse(o)),null===o?null:(i&&(o="week"!==i||!Rv(s)&&!0!==s?t.startOf(o,i):t.startOf(o,"isoWeek",s)),+o)}function Ij(n,e,t,r){const i=Tc.length;for(let s=Tc.indexOf(n);s<i-1;++s){const o=KT[Tc[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=r)return Tc[s]}return Tc[i-1]}function Ej(n,e,t){if(t){if(t.length){const{lo:r,hi:i}=NR(t,e);n[t[r]>=e?t[r]:t[i]]=!0}}else n[e]=!0}function xj(n,e,t){const r=[],i={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],i[l]=o,r.push({value:l,major:!1});return 0!==s&&t?function ite(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let l,d;for(l=s;l<=o;l=+i.add(l,1,r))d=t[l],d>=0&&(e[d].major=!0);return e}(n,r,i,t):r}let fO=(()=>{class n extends O_{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r){const i=t.time||(t.time={}),s=this._adapter=new HX._date(t.adapters.date);s.init(r),Y2(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return void 0===t?null:wj(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:l,maxDefined:d}=this.getUserBounds();function h(g){!l&&!isNaN(g.min)&&(s=Math.min(s,g.min)),!d&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!l||!d)&&(h(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&h(this.getMinMax(!1))),s=lo(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=lo(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){const t=this.options,r=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,d=function AY(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}(s,o,this.max);return this._unit=r.unit||(i.autoSkip?Ij(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):function nte(n,e,t,r,i){for(let s=Tc.length-1;s>=Tc.indexOf(t);s--){const o=Tc[s];if(KT[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return Tc[t?Tc.indexOf(t):0]}(this,d.length,r.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function rte(n){for(let e=Tc.indexOf(n)+1,t=Tc.length;e<t;++e)if(KT[Tc[e]].common)return Tc[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&d.reverse(),xj(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let s,o,r=0,i=0;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),r=1===t.length?1-s:(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),i=1===t.length?o:(o-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;r=Jo(r,0,l),i=Jo(i,0,l),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,l=o.unit||Ij(o.minUnit,r,i,this._getLabelCapacity(r)),d=Qr(o.stepSize,1),h="week"===l&&o.isoWeekday,g=Rv(h)||!0===h,v={};let w,D,E=r;if(g&&(E=+t.startOf(E,"isoWeek",h)),E=+t.startOf(E,g?"day":l),t.diff(i,r,l)>1e5*d)throw new Error(r+" and "+i+" are too far apart with stepSize of "+d+" "+l);const P="data"===s.ticks.source&&this.getDataTimestamps();for(w=E,D=0;w<i;w=+t.add(w,d,l),D++)Ej(v,w,P);return(w===i||"ticks"===s.bounds||1===D)&&Ej(v,w,P),Object.keys(v).sort((L,F)=>L-F).map(L=>+L)}getLabelForValue(t){const i=this.options.time;return this._adapter.format(t,i.tooltipFormat?i.tooltipFormat:i.displayFormats.datetime)}_tickFormatFunction(t,r,i,s){const o=this.options,l=o.time.displayFormats,d=this._unit,h=this._majorUnit,v=h&&l[h],E=i[r],D=this._adapter.format(t,s||(h&&v&&E&&E.major?v:d&&l[d])),P=o.ticks.callback;return P?ys(P,[D,r,i],this):D}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,i=this.ctx.measureText(t).width,s=yu(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),l=Math.sin(s),d=this._resolveTickFontOptions(0).size;return{w:i*o+d*l,h:i*l+d*o}}_getLabelCapacity(t){const r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,xj(this,[t],this._majorUnit),s),l=this._getLabelSize(o),d=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return d>0?d:1}getDataTimestamps(){let r,i,t=this._cache.data||[];if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,i;if(t.length)return t;const s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(wj(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return E7(t.sort(tte))}}return n.id="time",n.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},n})();function ZT(n,e,t){let s,o,l,d,r=0,i=n.length-1;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Hh(n,"pos",e)),({pos:s,time:l}=n[r]),({pos:o,time:d}=n[i])):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Hh(n,"time",e)),({time:s,pos:l}=n[r]),({time:o,pos:d}=n[i]));const h=o-s;return h?l+(d-l)*(e-s)/h:l}class pO extends fO{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=ZT(t,this.min),this._tableRange=ZT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,l,d,h,g;for(o=0,l=e.length;o<l;++o)h=e[o],h>=t&&h<=r&&i.push(h);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,l=i.length;o<l;++o)g=i[o+1],d=i[o-1],h=i[o],Math.round((g+d)/2)!==h&&s.push({time:h,pos:o/(l-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ZT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return ZT(this._table,r*this._tableRange+this._minPos,!0)}}pO.id="timeseries",pO.defaults=fO.defaults;const ote=[zX,eee,Uee,Object.freeze({__proto__:null,CategoryScale:qT,LinearScale:uO,LogarithmicScale:dO,RadialLinearScale:_I,TimeScale:fO,TimeSeriesScale:pO})],YT=function lte(n,e){return n===e||n!=n&&e!=e},QT=function ute(n,e){for(var t=n.length;t--;)if(YT(n[t][0],e))return t;return-1};var hte=Array.prototype.splice;function jv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}jv.prototype.clear=function ate(){this.__data__=[],this.size=0},jv.prototype.delete=function fte(n){var e=this.__data__,t=QT(e,n);return!(t<0||(t==e.length-1?e.pop():hte.call(e,t,1),--this.size,0))},jv.prototype.get=function gte(n){var e=this.__data__,t=QT(e,n);return t<0?void 0:e[t][1]},jv.prototype.has=function _te(n){return QT(this.__data__,n)>-1},jv.prototype.set=function vte(n,e){var t=this.__data__,r=QT(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const XT=jv,Sj="object"==typeof global&&global&&global.Object===Object&&global;var Mte="object"==typeof self&&self&&self.Object===Object&&self;const Vv=Sj||Mte||Function("return this")();var kte=Vv.Symbol,Aj=Object.prototype,Pte=Aj.hasOwnProperty,Rte=Aj.toString,yI=kte?kte.toStringTag:void 0;var Bte=Object.prototype.toString;var Cj=kte?kte.toStringTag:void 0;const eD=function Hte(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Cj&&Cj in Object(n)?function Ote(n){var e=Pte.call(n,yI),t=n[yI];try{n[yI]=void 0;var r=!0}catch{}var i=Rte.call(n);return r&&(e?n[yI]=t:delete n[yI]),i}(n):function Ute(n){return Bte.call(n)}(n)},F_=function Wte(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},gO=function Zte(n){if(!F_(n))return!1;var e=eD(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},mO=Vv["__core-js_shared__"];var Tj=function(){var n=/[^.]+$/.exec(mO&&mO.keys&&mO.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();var ene=Function.prototype.toString;var ine=/^\[object .+?Constructor\]$/,lne=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const dne=function une(n){return!(!F_(n)||function Qte(n){return!!Tj&&Tj in n}(n))&&(gO(n)?lne:ine).test(function tne(n){if(null!=n){try{return ene.call(n)}catch{}try{return n+""}catch{}}return""}(n))},_O=function pne(n,e){var t=function hne(n,e){return n?.[e]}(n,e);return dne(t)?t:void 0},Dj=_O(Vv,"Map"),vI=_O(Object,"create");var Ene=Object.prototype.hasOwnProperty;var Cne=Object.prototype.hasOwnProperty;function zv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}zv.prototype.clear=function _ne(){this.__data__=vI?vI(null):{},this.size=0},zv.prototype.delete=function vne(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},zv.prototype.get=function xne(n){var e=this.__data__;if(vI){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return Ene.call(e,n)?e[n]:void 0},zv.prototype.has=function Tne(n){var e=this.__data__;return vI?void 0!==e[n]:Cne.call(e,n)},zv.prototype.set=function Nne(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=vI&&void 0===e?"__lodash_hash_undefined__":e,this};const Mj=zv,tD=function Fne(n,e){var t=n.__data__;return function One(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Hv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Hv.prototype.clear=function Pne(){this.size=0,this.__data__={hash:new Mj,map:new(Dj||XT),string:new Mj}},Hv.prototype.delete=function Bne(n){var e=tD(this,n).delete(n);return this.size-=e?1:0,e},Hv.prototype.get=function jne(n){return tD(this,n).get(n)},Hv.prototype.has=function zne(n){return tD(this,n).has(n)},Hv.prototype.set=function Wne(n,e){var t=tD(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const qne=Hv;function Wv(n){var e=this.__data__=new XT(n);this.size=e.size}Wv.prototype.clear=function wte(){this.__data__=new XT,this.size=0},Wv.prototype.delete=function Ete(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},Wv.prototype.get=function Ste(n){return this.__data__.get(n)},Wv.prototype.has=function Cte(n){return this.__data__.has(n)},Wv.prototype.set=function Kne(n,e){var t=this.__data__;if(t instanceof XT){var r=t.__data__;if(!Dj||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new qne(r)}return t.set(n,e),this.size=t.size,this};const Yne=Wv;var Qne=function(){try{var n=_O(Object,"defineProperty");return n({},"",{}),n}catch{}}();const nD=Qne,yO=function Xne(n,e,t){"__proto__"==e&&nD?nD(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t},vO=function Jne(n,e,t){(void 0!==t&&!YT(n[e],t)||void 0===t&&!(e in n))&&yO(n,e,t)};var tre=function ere(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),l=o.length;l--;){var d=o[n?l:++i];if(!1===t(s[d],d,s))break}return e}}();const nre=tre;var Nj="object"==typeof exports&&exports&&!exports.nodeType&&exports,kj=Nj&&"object"==typeof module&&module&&!module.nodeType&&module,Pj=kj&&kj.exports===Nj?Vv.Buffer:void 0,Rj=Pj?Pj.allocUnsafe:void 0;const Oj=Vv.Uint8Array,ure=function lre(n,e){var t=e?function are(n){var e=new n.constructor(n.byteLength);return new Oj(e).set(new Oj(n)),e}(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)};var Lj=Object.create,fre=function(){function n(){}return function(e){if(!F_(e))return{};if(Lj)return Lj(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const pre=fre;var mre=function gre(n,e){return function(t){return n(e(t))}}(Object.getPrototypeOf,Object);const Fj=mre;var _re=Object.prototype;const Bj=function yre(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||_re)},bI=function wre(n){return null!=n&&"object"==typeof n},Uj=function Ere(n){return bI(n)&&"[object Arguments]"==eD(n)};var jj=Object.prototype,xre=jj.hasOwnProperty,Sre=jj.propertyIsEnumerable,Are=Uj(function(){return arguments}())?Uj:function(n){return bI(n)&&xre.call(n,"callee")&&!Sre.call(n,"callee")};const bO=Are,wO=Array.isArray,Vj=function Dre(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991},IO=function Mre(n){return null!=n&&Vj(n.length)&&!gO(n)};var zj="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hj=zj&&"object"==typeof module&&module&&!module.nodeType&&module,Wj=Hj&&Hj.exports===zj?Vv.Buffer:void 0;const $j=(Wj?Wj.isBuffer:void 0)||function Pre(){return!1};var qj=Function.prototype.toString,Vre=Object.prototype.hasOwnProperty,zre=qj.call(Object);var As={};As["[object Float32Array]"]=As["[object Float64Array]"]=As["[object Int8Array]"]=As["[object Int16Array]"]=As["[object Int32Array]"]=As["[object Uint8Array]"]=As["[object Uint8ClampedArray]"]=As["[object Uint16Array]"]=As["[object Uint32Array]"]=!0,As["[object Arguments]"]=As["[object Array]"]=As["[object ArrayBuffer]"]=As["[object Boolean]"]=As["[object DataView]"]=As["[object Date]"]=As["[object Error]"]=As["[object Function]"]=As["[object Map]"]=As["[object Number]"]=As["[object Object]"]=As["[object RegExp]"]=As["[object Set]"]=As["[object String]"]=As["[object WeakMap]"]=!1;var Gj="object"==typeof exports&&exports&&!exports.nodeType&&exports,wI=Gj&&"object"==typeof module&&module&&!module.nodeType&&module,EO=wI&&wI.exports===Gj&&Sj.process,bie=function(){try{return wI&&wI.require&&wI.require("util").types||EO&&EO.binding&&EO.binding("util")}catch{}}(),Zj=bie&&bie.isTypedArray;const Yj=Zj?function _ie(n){return function(e){return n(e)}}(Zj):function gie(n){return bI(n)&&Vj(n.length)&&!!As[eD(n)]},xO=function Iie(n,e){if(("constructor"!==e||"function"!=typeof n[e])&&"__proto__"!=e)return n[e]};var xie=Object.prototype.hasOwnProperty;const Aie=function Sie(n,e,t){var r=n[e];(!xie.call(n,e)||!YT(r,t)||void 0===t&&!(e in n))&&yO(n,e,t)};var kie=/^(?:0|[1-9]\d*)$/;const Qj=function Pie(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&kie.test(n))&&n>-1&&n%1==0&&n<e};var Oie=Object.prototype.hasOwnProperty;const Fie=function Lie(n,e){var t=wO(n),r=!t&&bO(n),i=!t&&!r&&$j(n),s=!t&&!r&&!i&&Yj(n),o=t||r||i||s,l=o?function Die(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],d=l.length;for(var h in n)(e||Oie.call(n,h))&&(!o||!("length"==h||i&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Qj(h,d)))&&l.push(h);return l};var Vie=Object.prototype.hasOwnProperty;const Hie=function zie(n){if(!F_(n))return function Bie(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=Bj(n),t=[];for(var r in n)"constructor"==r&&(e||!Vie.call(n,r))||t.push(r);return t},Xj=function Wie(n){return IO(n)?Fie(n,!0):Hie(n)},qie=function $ie(n){return function Cie(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var l=e[s],d=r?r(t[l],n[l],l,t,n):void 0;void 0===d&&(d=n[l]),i?yO(t,l,d):Aie(t,l,d)}return t}(n,Xj(n))},Kie=function Gie(n,e,t,r,i,s,o){var l=xO(n,t),d=xO(e,t),h=o.get(d);if(h)vO(n,t,h);else{var g=s?s(l,d,t+"",n,e,o):void 0,v=void 0===g;if(v){var E=wO(d),w=!E&&$j(d),D=!E&&!w&&Yj(d);g=d,E||w||D?wO(l)?g=l:function Nre(n){return bI(n)&&IO(n)}(l)?g=function dre(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(l):w?(v=!1,g=function ire(n,e){if(e)return n.slice();var t=n.length,r=Rj?Rj(t):new n.constructor(t);return n.copy(r),r}(d,!0)):D?(v=!1,g=ure(d,!0)):g=[]:function Hre(n){if(!bI(n)||"[object Object]"!=eD(n))return!1;var e=Fj(n);if(null===e)return!0;var t=Vre.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&qj.call(t)==zre}(d)||bO(d)?(g=l,bO(l)?g=qie(l):(!F_(l)||gO(l))&&(g=function vre(n){return"function"!=typeof n.constructor||Bj(n)?{}:pre(Fj(n))}(d))):v=!1}v&&(o.set(d,g),i(g,d,r,s,o),o.delete(d)),vO(n,t,g)}},Zie=function Jj(n,e,t,r,i){n!==e&&nre(e,function(s,o){if(i||(i=new Yne),F_(s))Kie(n,e,o,t,Jj,r,i);else{var l=r?r(xO(n,o),s,o+"",n,e,i):void 0;void 0===l&&(l=s),vO(n,o,l)}},Xj)},eV=function Yie(n){return n},Xie=function Qie(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)};var tV=Math.max;const nse=function tse(n){return function(){return n}};var rse=nD?function(n,e){return nD(n,"toString",{configurable:!0,enumerable:!1,value:nse(e),writable:!0})}:eV,ase=Date.now,lse=function cse(n){var e=0,t=0;return function(){var r=ase(),i=16-(r-t);if(t=r,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}(rse);const use=lse,hse=function dse(n,e){return use(function Jie(n,e,t){return e=tV(void 0===e?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=tV(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=t(o),Xie(n,this,l)}}(n,e,eV),n+"")};var mse=function gse(n){return hse(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&"function"==typeof s?(i--,s):void 0,o&&function fse(n,e,t){if(!F_(t))return!1;var r=typeof e;return!!("number"==r?IO(t)&&Qj(e,t.length):"string"==r&&e in t)&&YT(t[e],n)}(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=t[r];l&&n(e,l,r,s)}return e})}(function(n,e,t){Zie(n,e,t)});const _se=mse,yse=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],vse={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:n=>Qp(Xp(n.datasetIndex),.4),borderColor:n=>Qp(Xp(n.datasetIndex),1),pointBackgroundColor:n=>Qp(Xp(n.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:n=>Qp(Xp(n.datasetIndex),.6),borderColor:n=>Qp(Xp(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>Qp(Xp(n.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>Qp(Xp(n.dataIndex),.6),borderColor:n=>Qp(Xp(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Qp(n,e){return"rgba("+n.concat(e).join(",")+")"}function SO(n,e){return Math.floor(Math.random()*(e-n+1))+n}function Xp(n=0){return yse[n]||function bse(){return[SO(0,255),SO(0,255),SO(0,255)]}()}let nV=(()=>{class n{constructor(){this.generateColors=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();jT.register(...ote);let wse=(()=>{class n{constructor(t){t?.plugins&&jT.register(...t?.plugins);const r=_se(t?.generateColors?vse:{},t?.defaults||{});hi.set(r)}static forRoot(t){return{ngModule:n,providers:[{provide:nV,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(nV,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const rV_firebase={projectId:"mon-cv-14d49",appId:"1:776380076786:web:d90a7f7bd2de02a9e6766b",databaseURL:"https://mon-cv-14d49-default-rtdb.firebaseio.com",storageBucket:"mon-cv-14d49.appspot.com",apiKey:"AIzaSyANYFZqS5YREPi6Uu8IRbLlAq4oTlXi28w",authDomain:"mon-cv-14d49.firebaseapp.com",messagingSenderId:"776380076786"},iV="firebasestorage.googleapis.com",sV="storageBucket";class Ws extends X.ZR{constructor(e,t,r=0){super(AO(e),`Firebase Storage: ${t} (${AO(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ws.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return AO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function AO(n){return"storage/"+n}function CO(){return new Ws("unknown","An unknown error occurred, please check the error payload for server response.")}function oV(){return new Ws("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function aV(){return new Ws("canceled","User canceled the upload/download.")}function cV(){return new Ws("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $v(n){return new Ws("invalid-argument",n)}function lV(){return new Ws("app-deleted","The Firebase app was deleted.")}function uV(n){return new Ws("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function II(n,e){return new Ws("invalid-format","String does not match format '"+n+"': "+e)}function EI(n){throw new Ws("internal-error","Internal error: "+n)}class Pa{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Pa.makeFromUrl(e,t)}catch{return new Pa(e,"")}if(""===r.path)return r;throw function Nse(n){return new Ws("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",l=new RegExp("^gs://"+i+"(/(.*))?$","i");function h(J){J.path_=decodeURIComponent(J.path)}const v=t.replace(/[.]/g,"\\."),K=[{regex:l,indices:{bucket:1,path:3},postModify:function s(J){"/"===J.path.charAt(J.path.length-1)&&(J.path_=J.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${v}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:h},{regex:new RegExp(`^https?://${t===iV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:h}];for(let J=0;J<K.length;J++){const ie=K[J],_e=ie.regex.exec(e);if(_e){let oe=_e[ie.indices.path];oe||(oe=""),r=new Pa(_e[ie.indices.bucket],oe),ie.postModify(r);break}}if(null==r)throw function Mse(n){return new Ws("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Lse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function rD(n){return"string"==typeof n||n instanceof String}function dV(n){return TO()&&n instanceof Blob}function TO(){return typeof Blob<"u"&&!(0,X.UG)()}function DO(n,e,t,r){if(r<e)throw $v(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw $v(`Invalid value for '${n}'. Expected ${t} or less.`)}function Gh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function hV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Jp||(Jp={})),Jp))();function fV(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class zse{constructor(e,t,r,i,s,o,l,d,h,g,v,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=v,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,D)=>{this.resolve_=w,this.reject_=D,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(l,l.getResponse());!function Use(n){return void 0!==n}(d)?s():s(d)}catch(d){o(d)}else if(null!==l){const d=CO();d.serverResponse=l.getErrorText(),o(this.errorCallback_?this.errorCallback_(l,d):d)}else o(i.canceled?this.appDelete_?lV():aV():oV())};this.canceled_?t(0,new iD(!1,null,!0)):this.backoffId_=function Fse(n,e,t){let r=1,i=null,s=null,o=!1,l=0;function d(){return 2===l}let h=!1;function g(...L){h||(h=!0,e.apply(null,L))}function v(L){i=setTimeout(()=>{i=null,n(w,d())},L)}function E(){s&&clearTimeout(s)}function w(L,...F){if(h)return void E();if(L)return E(),void g.call(null,L,...F);if(d()||o)return E(),void g.call(null,L,...F);let K;r<64&&(r*=2),1===l?(l=2,K=0):K=1e3*(r+Math.random()),v(K)}let D=!1;function P(L){D||(D=!0,E(),!h&&(null!==i?(L||(l=2),clearTimeout(i),v(0)):L||(l=1)))}return v(0),s=setTimeout(()=>{o=!0,P(!0)},t),P}((r,i)=>{if(i)return void r(!1,new iD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{null!==this.progressCallback_&&this.progressCallback_(l.loaded,l.lengthComputable?l.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Jp.NO_ERROR,d=s.getStatus();if((!l||fV(d,this.additionalRetryCodes_))&&this.retry){const g=s.getErrorCode()===Jp.ABORT;return void r(!1,new iD(!1,null,g))}const h=-1!==this.successCodes_.indexOf(d);r(!0,new iD(h,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Bse(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class iD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Zse(...n){const e=function Kse(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(TO())return new Blob(n);throw new Ws("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ol={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class MO{constructor(e,t){this.data=e,this.contentType=t||null}}function NO(n,e){switch(n){case ol.RAW:return new MO(pV(e));case ol.BASE64:case ol.BASE64URL:return new MO(gV(n,e));case ol.DATA_URL:return new MO(function Jse(n){const e=new mV(n);return e.base64?gV(ol.BASE64,e.rest):function Xse(n){let e;try{e=decodeURIComponent(n)}catch{throw II(ol.DATA_URL,"Malformed data URL.")}return pV(e)}(e.rest)}(e),function eoe(n){return new mV(n).contentType}(e))}throw CO()}function pV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function gV(n,e){switch(n){case ol.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw II(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ol.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw II(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Qse(n){if(typeof atob>"u")throw function Ose(n){return new Ws("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:II(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class mV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw II(ol.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function toe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ed{constructor(e,t){let r=0,i="";dV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(dV(this.data_)){const i=function Yse(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ed(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ed(r,!0)}}static getBlob(...e){if(TO()){const t=e.map(r=>r instanceof Ed?r.data_:r);return new Ed(Zse.apply(null,t))}{const t=e.map(o=>rD(o)?NO(ol.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new Ed(i,!0)}}uploadData(){return this.data_}}function kO(n){let e;try{e=JSON.parse(n)}catch{return null}return function Vse(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function _V(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ioe(n,e){return e}class Za{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ioe}}let sD=null;function xI(){if(sD)return sD;const n=[];n.push(new Za("bucket")),n.push(new Za("generation")),n.push(new Za("metageneration")),n.push(new Za("name","fullPath",!0));const t=new Za("name");t.xform=function e(s,o){return function soe(n){return!rD(n)||n.length<2?n:_V(n)}(o)},n.push(t);const i=new Za("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Za("timeCreated")),n.push(new Za("updated")),n.push(new Za("md5Hash",null,!0)),n.push(new Za("cacheControl",null,!0)),n.push(new Za("contentDisposition",null,!0)),n.push(new Za("contentEncoding",null,!0)),n.push(new Za("contentLanguage",null,!0)),n.push(new Za("contentType",null,!0)),n.push(new Za("metadata","customMetadata",!0)),sD=n,sD}function yV(n,e,t){const r=kO(e);return null===r?null:function aoe(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function ooe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Pa(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function PO(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const vV="prefixes";class xd{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Sd(n){if(!n)throw CO()}function oD(n,e){return function t(r,i){const s=yV(n,i,e);return Sd(null!==s),s}}function qv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Tse(){return new Ws("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Cse(){return new Ws("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Ase(n){return new Ws("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Dse(n){return new Ws("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function SI(n){const e=qv(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Sse(n){return new Ws("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function wV(n,e,t){const i=Gh(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,l=new xd(i,"GET",oD(n,t),o);return l.errorHandler=SI(e),l}function foe(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const l=Gh(e.bucketOnlyServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,g=new xd(l,"GET",function doe(n,e){return function t(r,i){const s=function uoe(n,e,t){const r=kO(t);return null===r?null:function loe(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[vV])for(const i of t[vV]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Pa(e,s));r.prefixes.push(o)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Pa(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Sd(null!==s),s}}(n,e.bucket),h);return g.urlParams=s,g.errorHandler=qv(e),g}function EV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function _oe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class aD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function RO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Sd(!1)}return Sd(!!t&&-1!==(e||["active"]).indexOf(t)),t}const woe={STATE_CHANGED:"state_changed"},Ya={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function OO(n){switch(n){case"running":case"pausing":case"canceling":return Ya.RUNNING;case"paused":return Ya.PAUSED;case"success":return Ya.SUCCESS;case"canceled":return Ya.CANCELED;default:return Ya.ERROR}}class Ioe{constructor(e,t,r){if(function jse(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Gv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Eoe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw EI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw EI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw EI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw EI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw EI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class xoe extends Eoe{initXhr(){this.xhr_.responseType="text"}}function bu(){return new xoe}class CV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=xI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(fV(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=oV()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function yoe(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=EV(e,r,i),l={name:o.fullPath},d=Gh(s,n.host,n._protocol),g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},v=PO(o,t),D=new xd(d,"POST",function w(P){let L;RO(P);try{L=P.getResponseHeader("X-Goog-Upload-URL")}catch{Sd(!1)}return Sd(rD(L)),L},n.maxUploadRetryTime);return D.urlParams=l,D.headers=g,D.body=v,D.errorHandler=qv(e),D}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function voe(n,e,t,r){const d=new xd(t,"POST",function s(h){const g=RO(h,["active","final"]);let v=null;try{v=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Sd(!1)}v||Sd(!1);const E=Number(v);return Sd(!isNaN(E)),new aD(E,r.size(),"final"===g)},n.maxUploadRetryTime);return d.headers={"X-Goog-Upload-Command":"query"},d.errorHandler=qv(e),d}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,bu,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new aD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function boe(n,e,t,r,i,s,o,l){const d=new aD(0,0);if(o?(d.current=o.current,d.total=o.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw function Pse(){return new Ws("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const h=d.total-d.current;let g=h;i>0&&(g=Math.min(g,i));const v=d.current;let w="";w=0===g?"finalize":h===g?"upload, finalize":"upload";const D={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${d.current}`},P=r.slice(v,v+g);if(null===P)throw cV();const K=new xd(t,"POST",function L(J,ie){const _e=RO(J,["active","final"]),fe=d.current+g,oe=r.size();let Be;return Be="final"===_e?oD(e,s)(J,ie):null,new aD(fe,oe,"final"===_e,Be)},e.maxUploadRetryTime);return K.headers=D,K.body=P.uploadData(),K.progressCallback=l||null,K.errorHandler=qv(n),K}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(d){return this._error=d,void this._transition("error")}const l=this._ref.storage._makeRequest(o,bu,i,s,!1);this._request=l,l.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=wV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,bu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function xV(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},d=function l(){let K="";for(let J=0;J<2;J++)K+=Math.random().toString().slice(2);return K}();o["Content-Type"]="multipart/related; boundary="+d;const h=EV(e,r,i),g=PO(h,t),w=Ed.getBlob("--"+d+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+g+"\r\n--"+d+"\r\nContent-Type: "+h.contentType+"\r\n\r\n",r,"\r\n--"+d+"--");if(null===w)throw cV();const D={name:h.fullPath},P=Gh(s,n.host,n._protocol),F=n.maxUploadRetryTime,U=new xd(P,"POST",oD(n,t),F);return U.urlParams=D,U.headers=o,U.body=w.uploadData(),U.errorHandler=qv(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=aV(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=OO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Ioe(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(OO(this._state)){case Ya.SUCCESS:Gv(this._resolve.bind(null,this.snapshot))();break;case Ya.CANCELED:case Ya.ERROR:Gv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(OO(this._state)){case Ya.RUNNING:case Ya.PAUSED:e.next&&Gv(e.next.bind(e,this.snapshot))();break;case Ya.SUCCESS:e.complete&&Gv(e.complete.bind(e))();break;default:e.error&&Gv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class B_{constructor(e,t){this._service=e,this._location=t instanceof Pa?t:Pa.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new B_(e,t)}get root(){const e=new Pa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _V(this._location.path)}get storage(){return this._service}get parent(){const e=function noe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Pa(this._location.bucket,e);return new B_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw uV(e)}}function DV(n,e,t){return LO.apply(this,arguments)}function LO(){return LO=(0,mt.Z)(function*(n,e,t){const i=yield MV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield DV(n,e,i.nextPageToken))}),LO.apply(this,arguments)}function MV(n,e){null!=e&&"number"==typeof e.maxResults&&DO("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=foe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,bu)}function Loe(n){n._throwIfRoot("getDownloadURL");const e=function poe(n,e,t){const i=Gh(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,l=new xd(i,"GET",function hoe(n,e){return function t(r,i){const s=yV(n,i,e);return Sd(null!==s),function coe(n,e,t,r){const i=kO(e);if(null===i||!rD(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const v=n.fullPath;return Gh("/b/"+o(n.bucket)+"/o/"+o(v),t,r)+hV({alt:"media",token:h})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return l.errorHandler=SI(e),l}(n.storage,n._location,xI());return n.storage.makeRequestWithTokens(e,bu).then(t=>{if(null===t)throw function Rse(){return new Ws("no-download-url","The given file does not have any download URLs.")}();return t})}function NV(n,e){const t=function roe(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Pa(n._location.bucket,t);return new B_(n.storage,r)}function kV(n,e){if(n instanceof FO){const t=n;if(null==t._bucket)throw function kse(){return new Ws("no-default-bucket","No default bucket found. Did you set the '"+sV+"' property when initializing the app?")}();const r=new B_(t,t._bucket);return null!=e?kV(r,e):r}return void 0!==e?NV(n,e):n}function joe(n,e){if(e&&function Boe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof FO)return function Uoe(n,e){return new B_(n,e)}(n,e);throw $v("To use ref(service, url), the first argument must be a Storage instance.")}return kV(n,e)}function PV(n,e){const t=e?.[sV];return null==t?null:Pa.makeFromBucketSpec(t,n)}class FO{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=iV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Pa.makeFromBucketSpec(i,this._host):PV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Pa.makeFromBucketSpec(this._url,e):PV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,mt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,mt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new B_(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Lse(lV());{const o=function Gse(n,e,t,r,i,s,o=!0){const l=hV(n.urlParams),d=n.url+l,h=Object.assign({},n.headers);return function $se(n,e){e&&(n["X-Firebase-GMPID"]=e)}(h,e),function Hse(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(h,t),function Wse(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(h,s),function qse(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(h,r),new zse(d,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,mt.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const RV="@firebase/storage",LV="storage";function FV(n,e){return joe(n=(0,X.m9)(n),e)}function Yoe(n=(0,Ni.getApp)(),e){n=(0,X.m9)(n);const r=(0,Ni._getProvider)(n,LV).getImmediate({identifier:e}),i=(0,X.P0)("storage");return i&&BV(r,...i),r}function BV(n,e,t,r={}){!function Voe(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,X.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function Qoe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new FO(t,r,i,e,Ni.SDK_VERSION)}!function Xoe(){(0,Ni._registerComponent)(new Ga.wA(LV,Qoe,"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(RV,"0.10.0",""),(0,Ni.registerVersion)(RV,"0.10.0","esm2017")}();class cD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class UV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new cD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new cD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new cD(o,this,this._ref)):{next:t.next?o=>t.next(new cD(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class jV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Kh(e,this._service))}get items(){return this._delegate.items.map(e=>new Kh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Kh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Zoe(n,e){return NV(n,e)}(this._delegate,e);return new Kh(t,this.storage)}get root(){return new Kh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Kh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new UV(function zoe(n,e,t){return function Noe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new CV(n,new Ed(e),t)}(n=(0,X.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ol.RAW,r){this._throwIfRoot("putString");const i=NO(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new UV(new CV(this._delegate,new Ed(i.data,!0),s),this)}listAll(){return function qoe(n){return function Poe(n){const e={prefixes:[],items:[]};return DV(n,e).then(()=>e)}(n=(0,X.m9)(n))}(this._delegate).then(e=>new jV(e,this.storage))}list(e){return function $oe(n,e){return MV(n=(0,X.m9)(n),e)}(this._delegate,e||void 0).then(t=>new jV(t,this.storage))}getMetadata(){return function Hoe(n){return function Roe(n){n._throwIfRoot("getMetadata");const e=wV(n.storage,n._location,xI());return n.storage.makeRequestWithTokens(e,bu)}(n=(0,X.m9)(n))}(this._delegate)}updateMetadata(e){return function Woe(n,e){return function Ooe(n,e){n._throwIfRoot("updateMetadata");const t=function goe(n,e,t,r){const s=Gh(e.fullServerUrl(),n.host,n._protocol),l=PO(t,r),h=n.maxOperationRetryTime,g=new xd(s,"PATCH",oD(n,r),h);return g.headers={"Content-Type":"application/json; charset=utf-8"},g.body=l,g.errorHandler=SI(e),g}(n.storage,n._location,e,xI());return n.storage.makeRequestWithTokens(t,bu)}(n=(0,X.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Goe(n){return Loe(n=(0,X.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Koe(n){return function Foe(n){n._throwIfRoot("deleteObject");const e=function moe(n,e){const r=Gh(e.fullServerUrl(),n.host,n._protocol),l=new xd(r,"DELETE",function o(d,h){},n.maxOperationRetryTime);return l.successCodes=[200,204],l.errorHandler=SI(e),l}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,bu)}(n=(0,X.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw uV(e)}}class VV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(zV(e))throw $v("ref() expected a child path but got a URL, use refFromURL instead.");return new Kh(FV(this._delegate,e),this)}refFromURL(e){if(!zV(e))throw $v("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Pa.makeFromUrl(e,this._delegate.host)}catch{throw $v("refFromUrl() expected a valid full URL but got an invalid one.")}return new Kh(FV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){BV(this._delegate,e,t,r)}}function zV(n){return/^[A-Za-z]+:\/\//.test(n)}function nae(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new VV(t,r)}function HV(n){const e=function iae(n){return new Ku.y(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(Yf(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Si.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function lD(n){return{getDownloadURL:()=>au(void 0).pipe(ln.fc,bc(()=>n.getDownloadURL()),ln.iC),getMetadata:()=>au(void 0).pipe(ln.fc,bc(()=>n.getMetadata()),ln.iC),delete:()=>(0,Mo.D)(n.delete()),child:e=>lD(n.child(e)),updateMetadata:e=>(0,Mo.D)(n.updateMetadata(e)),put:(e,t)=>HV(n.put(e,t)),putString:(e,t,r)=>HV(n.putString(e,t,r)),list:e=>(0,Mo.D)(n.list(e)),listAll:()=>(0,Mo.D)(n.listAll())}}!function rae(n){const e={TaskState:Ya,TaskEvent:woe,StringFormat:ol,Storage:VV,Reference:Kh};n.INTERNAL.registerComponent(new Ga.wA("storage-compat",nae,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.0")}(Ow.Z);const sae=new m.OlP("angularfire2.storageBucket"),oae=new m.OlP("angularfire2.storage.maxUploadRetryTime"),aae=new m.OlP("angularfire2.storage.maxOperationRetryTime"),cae=new m.OlP("angularfire2.storage.use-emulator");let lae=(()=>{class n{constructor(t,r,i,s,o,l,d,h,g,v){const E=(0,Qs.on)(t,o,r);this.storage=(0,Qs.cc)(`${E.name}.storage.${i}`,"AngularFireStorage",E.name,()=>{const w=o.runOutsideAngular(()=>E.storage(i||void 0)),D=g;return D&&w.useEmulator(...D),d&&w.setMaxUploadRetryTime(d),h&&w.setMaxOperationRetryTime(h),w},[d,h])}ref(t){return lD(this.storage.ref(t))}refFromURL(t){return lD(this.storage.refFromURL(t))}upload(t,r,i){return lD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qs.Dh),m.LFG(Qs.xv,8),m.LFG(sae,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(oae,8),m.LFG(aae,8),m.LFG(cae,8),m.LFG(yd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),dae=(()=>{class n{constructor(){hT.Z.registerVersion("angularfire",ln.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[lae],imports:[uae]}),n})();function BO(){return(0,Ca.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zo.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var tr,hae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zh={},UO=UO||{},Pr=hae||self;function uD(){}function dD(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function AI(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jO="closure_uid_"+(1e9*Math.random()>>>0),pae=0;function gae(n,e,t){return n.call.apply(n.bind,arguments)}function mae(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ra(n,e,t){return(Ra=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gae:mae).apply(null,arguments)}function hD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ya(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[i].apply(r,o)}}function eg(){this.s=this.s,this.o=this.o}eg.prototype.s=!1,eg.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function fae(n){Object.prototype.hasOwnProperty.call(n,jO)&&n[jO]||(n[jO]=++pae)}(this)},eg.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const WV=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function VO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $V(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(dD(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Oa(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Oa.prototype.h=function(){this.defaultPrevented=!0};var yae=function(){if(!Pr.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pr.addEventListener("test",uD,e),Pr.removeEventListener("test",uD,e)}catch{}return n}();function fD(n){return/^[\s\xa0]*$/.test(n)}var qV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zO(n,e){return n<e?-1:n>e?1:0}function pD(){var n=Pr.navigator;return n&&(n=n.userAgent)?n:""}function Ad(n){return-1!=pD().indexOf(n)}function HO(n){return HO[" "](n),n}HO[" "]=uD;var gD,bae=Ad("Opera"),Kv=Ad("Trident")||Ad("MSIE"),GV=Ad("Edge"),WO=GV||Kv,KV=Ad("Gecko")&&!(-1!=pD().toLowerCase().indexOf("webkit")&&!Ad("Edge"))&&!(Ad("Trident")||Ad("MSIE"))&&!Ad("Edge"),wae=-1!=pD().toLowerCase().indexOf("webkit")&&!Ad("Edge");function ZV(){var n=Pr.document;return n?n.documentMode:void 0}e:{var $O="",qO=function(){var n=pD();return KV?/rv:([^\);]+)(\)|;)/.exec(n):GV?/Edge\/([\d\.]+)/.exec(n):Kv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):wae?/WebKit\/(\S+)/.exec(n):bae?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(qO&&($O=qO?qO[1]:""),Kv){var GO=ZV();if(null!=GO&&GO>parseFloat($O)){gD=String(GO);break e}}gD=$O}var Iae={};var xae=Pr.document&&Kv&&(ZV()||parseInt(gD,10))||void 0;function CI(n,e){if(Oa.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(KV){e:{try{HO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Sae[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&CI.X.h.call(this)}}ya(CI,Oa);var Sae={2:"touch",3:"pen",4:"mouse"};CI.prototype.h=function(){CI.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var TI="closure_listenable_"+(1e6*Math.random()|0),Aae=0;function Cae(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Aae,this.ba=this.ea=!1}function mD(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function ZO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QV(n){const e={};for(const t in n)e[t]=n[t];return e}const XV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function JV(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<XV.length;s++)t=XV[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _D(n){this.src=n,this.g={},this.h=0}function YO(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=WV(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(mD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function QO(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}_D.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=QO(n,e,r,i);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new Cae(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var XO="closure_lm_"+(1e6*Math.random()|0),JO={};function ez(n,e,t,r,i){if(r&&r.once)return nz(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ez(n,e[s],t,r,i);return null}return t=rL(t),n&&n[TI]?n.N(e,t,AI(r)?!!r.capture:!!r,i):tz(n,e,t,!1,r,i)}function tz(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=AI(i)?!!i.capture:!!i,l=tL(n);if(l||(n[XO]=l=new _D(n)),(t=l.add(e,t,r,o,s)).proxy)return t;if(r=function Tae(){const e=Dae;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yae||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(iz(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function nz(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)nz(n,e[s],t,r,i);return null}return t=rL(t),n&&n[TI]?n.O(e,t,AI(r)?!!r.capture:!!r,i):tz(n,e,t,!0,r,i)}function rz(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)rz(n,e[s],t,r,i);else r=AI(r)?!!r.capture:!!r,t=rL(t),n&&n[TI]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=QO(s=n.g[e],t,r,i))&&(mD(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=tL(n))&&(e=n.g[e.toString()],n=-1,e&&(n=QO(e,t,r,i)),(t=-1<n?e[n]:null)&&eL(t))}function eL(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[TI])YO(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(iz(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=tL(e))?(YO(t,n),0==t.h&&(t.src=null,e[XO]=null)):mD(n)}}}function iz(n){return n in JO?JO[n]:JO[n]="on"+n}function Dae(n,e){if(n.ba)n=!0;else{e=new CI(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&eL(n),n=t.call(r,e)}return n}function tL(n){return(n=n[XO])instanceof _D?n:null}var nL="__closure_events_fn_"+(1e9*Math.random()>>>0);function rL(n){return"function"==typeof n?n:(n[nL]||(n[nL]=function(e){return n.handleEvent(e)}),n[nL])}function ea(){eg.call(this),this.i=new _D(this),this.P=this,this.I=null}function va(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Oa(e,n);else if(e instanceof Oa)e.target=e.target||n;else{var i=e;JV(e=new Oa(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=yD(o,r,!0,e)&&i}if(i=yD(o=e.g=n,r,!0,e)&&i,i=yD(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=yD(o=e.g=t[s],r,!1,e)&&i}function yD(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var l=o.listener,d=o.ha||o.src;o.ea&&YO(n.i,o),i=!1!==l.call(d,r)&&i}}return i&&!r.defaultPrevented}ya(ea,eg),ea.prototype[TI]=!0,ea.prototype.removeEventListener=function(n,e,t,r){rz(this,n,e,t,r)},ea.prototype.M=function(){if(ea.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)mD(t[r]);delete n.g[e],n.h--}}this.I=null},ea.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ea.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var iL=Pr.JSON.stringify;function Mae(){var n=az;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sL,sz=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kae,n=>n.reset());class kae{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Pae(n){Pr.setTimeout(()=>{throw n},0)}function oz(n,e){sL||function Rae(){var n=Pr.Promise.resolve(void 0);sL=function(){n.then(Oae)}}(),oL||(sL(),oL=!0),az.add(n,e)}var oL=!1,az=new class Nae{constructor(){this.h=this.g=null}add(e,t){const r=sz.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Oae(){for(var n;n=Mae();){try{n.h.call(n.g)}catch(t){Pae(t)}var e=sz;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}oL=!1}function vD(n,e){ea.call(this),this.h=n||1,this.g=e||Pr,this.j=Ra(this.lb,this),this.l=Date.now()}function aL(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function cL(n,e,t){if("function"==typeof n)t&&(n=Ra(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ra(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pr.setTimeout(n,e||0)}function cz(n){n.g=cL(()=>{n.g=null,n.i&&(n.i=!1,cz(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ya(vD,ea),(tr=vD.prototype).ca=!1,tr.R=null,tr.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),va(this,"tick"),this.ca&&(aL(this),this.start()))}},tr.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tr.M=function(){vD.X.M.call(this),aL(this),delete this.g};class Lae extends eg{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cz(this)}M(){super.M(),this.g&&(Pr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function DI(n){eg.call(this),this.h=n,this.g={}}ya(DI,eg);var lz=[];function uz(n,e,t,r){Array.isArray(t)||(t&&(lz[0]=t.toString()),t=lz);for(var i=0;i<t.length;i++){var s=ez(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function dz(n){ZO(n.g,function(e,t){this.g.hasOwnProperty(t)&&eL(e)},n),n.g={}}function bD(){this.g=!0}function Zv(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jae(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return iL(t)}catch{return e}}(n,t)+(r?" "+r:"")})}DI.prototype.M=function(){DI.X.M.call(this),dz(this)},DI.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bD.prototype.Aa=function(){this.g=!1},bD.prototype.info=function(){};var U_={},hz=null;function wD(){return hz=hz||new ea}function fz(n){Oa.call(this,U_.Pa,n)}function MI(n){const e=wD();va(e,new fz(e))}function pz(n,e){Oa.call(this,U_.STAT_EVENT,n),this.stat=e}function Qa(n){const e=wD();va(e,new pz(e,n))}function gz(n,e){Oa.call(this,U_.Qa,n),this.size=e}function NI(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pr.setTimeout(function(){n()},e)}U_.Pa="serverreachability",ya(fz,Oa),U_.STAT_EVENT="statevent",ya(pz,Oa),U_.Qa="timingevent",ya(gz,Oa);var ID={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},mz={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function lL(){}function yz(){}lL.prototype.h=null;var hL,kI={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function uL(){Oa.call(this,"d")}function dL(){Oa.call(this,"c")}function ED(){}function PI(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new DI(this),this.O=Vae,this.T=new vD(n=WO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new vz}function vz(){this.i=null,this.g="",this.h=!1}ya(uL,Oa),ya(dL,Oa),ya(ED,lL),ED.prototype.g=function(){return new XMLHttpRequest},ED.prototype.i=function(){return{}},hL=new ED;var Vae=45e3,fL={},xD={};function pL(n,e,t){n.K=1,n.v=TD(Yh(e)),n.s=t,n.P=!0,bz(n,null)}function bz(n,e){n.F=Date.now(),RI(n),n.A=Yh(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Mz(t.i,"t",r),n.C=0,t=n.l.H,n.h=new vz,n.g=e9(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Lae(Ra(n.La,n,n.g),n.N)),uz(n.S,n.g,"readystatechange",n.ib),e=n.H?QV(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),MI(),function Fae(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",l=s.split("&"),d=0;d<l.length;d++){var h=l[d].split("=");if(1<h.length){var g=h[0];h=h[1];var v=g.split("_");o=2<=v.length&&"type"==v[1]?o+(g+"=")+h+"&":o+(g+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function wz(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Iz(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=zae(n,t),i==xD){4==e&&(n.o=4,Qa(14),r=!1),Zv(n.j,n.m,null,"[Incomplete Response]");break}if(i==fL){n.o=4,Qa(15),Zv(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zv(n.j,n.m,i,null),gL(n,i)}wz(n)&&i!=xD&&i!=fL&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qa(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),EL(e),e.K=!0,Qa(11))):(Zv(n.j,n.m,t,"[Invalid Chunked Response]"),j_(n),OI(n))}function zae(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xD:(t=Number(e.substring(t,r)),isNaN(t)?fL:(r+=1)+t>e.length?xD:(e=e.substr(r,t),n.C=r+t,e))}function RI(n){n.V=Date.now()+n.O,Ez(n,n.O)}function Ez(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=NI(Ra(n.gb,n),e)}function SD(n){n.B&&(Pr.clearTimeout(n.B),n.B=null)}function OI(n){0==n.l.G||n.I||Yz(n.l,n)}function j_(n){SD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,aL(n.T),dz(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function gL(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||mL(t.h,n)))if(!n.J&&mL(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;RD(t),kD(t)}IL(t),Qa(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=NI(Ra(t.cb,t),6e3));if(1>=Pz(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else z_(t,11)}else if((n.J||t.g==n)&&RD(t),!fD(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let h=i[e];if(t.T=h[0],h=h[1],2==t.G)if("c"==h[0]){t.I=h[1],t.ka=h[2];const g=h[3];null!=g&&(t.ma=g,t.j.info("VER="+t.ma));const v=h[4];null!=v&&(t.Ca=v,t.j.info("SVER="+t.Ca));const E=h[5];null!=E&&"number"==typeof E&&0<E&&(t.J=r=1.5*E,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const w=n.g;if(w){const D=w.g?w.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(D){var s=r.h;s.g||-1==D.indexOf("spdy")&&-1==D.indexOf("quic")&&-1==D.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(_L(s,s.h),s.h=null))}if(r.D){const P=w.g?w.g.getResponseHeader("X-HTTP-Session-Id"):null;P&&(r.za=P,Bs(r.F,r.D,P))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((r=t).sa=Jz(r,r.H?r.ka:null,r.V),o.J){Rz(r.h,o);var l=o,d=r.J;d&&l.setTimeout(d),l.B&&(SD(l),RI(l)),r.g=o}else Kz(r);0<t.i.length&&PD(t)}else"stop"!=h[0]&&"close"!=h[0]||z_(t,7);else 3==t.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?z_(t,7):wL(t):"noop"!=h[0]&&t.l&&t.l.wa(h),t.A=0)}MI()}catch{}}function xz(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dD(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Wae(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(dD(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Hae(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(dD(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(tr=PI.prototype).setTimeout=function(n){this.O=n},tr.ib=function(n){n=n.target;const e=this.L;e&&3==Qh(n)?e.l():this.La(n)},tr.La=function(n){try{if(n==this.g)e:{const g=Qh(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>g)&&(3!=g||WO||this.g&&(this.h.h||this.g.fa()||zz(this.g)))){this.I||4!=g||7==e||MI(),SD(this);var t=this.g.aa();this.Y=t;t:if(wz(this)){var r=zz(this.g);n="";var i=r.length,s=4==Qh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){j_(this),OI(this);var o="";break t}this.h.i=new Pr.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function Bae(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,g,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,d=this.g;if((l=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fD(l)){var h=l;break t}}h=null}if(!(t=h)){this.i=!1,this.o=3,Qa(12),j_(this),OI(this);break e}Zv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gL(this,t)}this.P?(Iz(this,g,o),WO&&this.i&&3==g&&(uz(this.S,this.T,"tick",this.hb),this.T.start())):(Zv(this.j,this.m,o,null),gL(this,o)),4==g&&j_(this),this.i&&!this.I&&(4==g?Yz(this.l,this):(this.i=!1,RI(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Qa(12)):(this.o=0,Qa(13)),j_(this),OI(this)}}}catch{}},tr.hb=function(){if(this.g){var n=Qh(this.g),e=this.g.fa();this.C<e.length&&(SD(this),Iz(this,n,e),this.i&&4!=n&&RI(this))}},tr.cancel=function(){this.I=!0,j_(this)},tr.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Uae(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(MI(),Qa(17)),j_(this),this.o=2,OI(this)):Ez(this,this.V-n)};var Sz=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function V_(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof V_){this.h=void 0!==e?e:n.h,AD(this,n.j),this.s=n.s,this.g=n.g,CD(this,n.m),this.l=n.l,e=n.i;var t=new BI;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Az(this,t),this.o=n.o}else n&&(t=String(n).match(Sz))?(this.h=!!e,AD(this,t[1]||"",!0),this.s=LI(t[2]||""),this.g=LI(t[3]||"",!0),CD(this,t[4]),this.l=LI(t[5]||"",!0),Az(this,t[6]||"",!0),this.o=LI(t[7]||"")):(this.h=!!e,this.i=new BI(null,this.h))}function Yh(n){return new V_(n)}function AD(n,e,t){n.j=t?LI(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function CD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Az(n,e,t){e instanceof BI?(n.i=e,function Qae(n,e){e&&!n.j&&(tg(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Tz(this,r),Mz(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=FI(e,Zae)),n.i=new BI(e,n.h))}function Bs(n,e,t){n.i.set(e,t)}function TD(n){return Bs(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function LI(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function FI(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qae),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qae(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}V_.prototype.toString=function(){var n=[],e=this.j;e&&n.push(FI(e,Cz,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(FI(e,Cz,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(FI(t,"/"==t.charAt(0)?Kae:Gae,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",FI(t,Yae)),n.join("")};var Cz=/[#\/\?@]/g,Gae=/[#\?:]/g,Kae=/[#\?]/g,Zae=/[#\?@]/g,Yae=/#/g;function BI(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function tg(n){n.g||(n.g=new Map,n.h=0,n.i&&function $ae(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Tz(n,e){tg(n),e=Yv(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Dz(n,e){return tg(n),e=Yv(n,e),n.g.has(e)}function Mz(n,e,t){Tz(n,e),0<t.length&&(n.i=null,n.g.set(Yv(n,e),VO(t)),n.h+=t.length)}function Yv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Nz(n){this.l=n||Jae,n=Pr.PerformanceNavigationTiming?0<(n=Pr.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pr.g&&Pr.g.Ga&&Pr.g.Ga()&&Pr.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tr=BI.prototype).add=function(n,e){tg(this),this.i=null,n=Yv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tr.forEach=function(n,e){tg(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},tr.oa=function(){tg(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},tr.W=function(n){tg(this);let e=[];if("string"==typeof n)Dz(this,n)&&(e=e.concat(this.g.get(Yv(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},tr.set=function(n,e){return tg(this),this.i=null,Dz(this,n=Yv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tr.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},tr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var Jae=10;function kz(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pz(n){return n.h?1:n.g?n.g.size:0}function mL(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function _L(n,e){n.g?n.g.add(e):n.h=e}function Rz(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Oz(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return VO(n.i)}function yL(){}function ece(){this.g=new yL}function tce(n,e,t){const r=t||"";try{xz(n,function(i,s){let o=i;AI(i)&&(o=iL(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function DD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function UI(n){this.l=n.ac||null,this.j=n.jb||!1}function MD(n,e){ea.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=vL,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nz.prototype.cancel=function(){if(this.i=Oz(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yL.prototype.stringify=function(n){return Pr.JSON.stringify(n,void 0)},yL.prototype.parse=function(n){return Pr.JSON.parse(n,void 0)},ya(UI,lL),UI.prototype.g=function(){return new MD(this.l,this.j)},UI.prototype.i=function(n){return function(){return n}}({}),ya(MD,ea);var vL=0;function Lz(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function jI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,VI(n)}function VI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tr=MD.prototype).open=function(n,e){if(this.readyState!=vL)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,VI(this)},tr.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pr).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},tr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jI(this)),this.readyState=vL},tr.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,VI(this)),this.g&&(this.readyState=3,VI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Pr.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lz(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},tr.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jI(this):VI(this),3==this.readyState&&Lz(this)}},tr.Va=function(n){this.g&&(this.response=this.responseText=n,jI(this))},tr.Ua=function(n){this.g&&(this.response=n,jI(this))},tr.ga=function(){this.g&&jI(this)},tr.setRequestHeader=function(n,e){this.v.append(n,e)},tr.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tr.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(MD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rce=Pr.JSON.parse;function Js(n){ea.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fz,this.K=this.L=!1}ya(Js,ea);var Fz="",ice=/^https?$/i,sce=["POST","PUT"];function Bz(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Uz(n),ND(n)}function Uz(n){n.D||(n.D=!0,va(n,"complete"),va(n,"error"))}function jz(n){if(n.h&&typeof UO<"u"&&(!n.C[1]||4!=Qh(n)||2!=n.aa()))if(n.v&&4==Qh(n))cL(n.Ha,0,n);else if(va(n,"readystatechange"),4==Qh(n)){n.h=!1;try{const l=n.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.H).match(Sz)[1]||null;if(!i&&Pr.self&&Pr.self.location){var s=Pr.self.location.protocol;i=s.substr(0,s.length-1)}r=!ice.test(i?i.toLowerCase():"")}t=r}if(t)va(n,"complete"),va(n,"success");else{n.m=6;try{var o=2<Qh(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.aa()+"]",Uz(n)}}finally{ND(n)}}}function ND(n,e){if(n.g){Vz(n);const t=n.g,r=n.C[0]?uD:null;n.g=null,n.C=null,e||va(n,"ready");try{t.onreadystatechange=r}catch{}}}function Vz(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pr.clearTimeout(n.A),n.A=null)}function Qh(n){return n.g?n.g.readyState:0}function zz(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Fz:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Hz(n){let e="";return ZO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function bL(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Hz(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bs(n,e,t))}function zI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Wz(n){this.Ca=0,this.i=[],this.j=new bD,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=zI("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=zI("baseRetryDelayMs",5e3,n),this.bb=zI("retryDelaySeedMs",1e4,n),this.$a=zI("forwardChannelMaxRetries",2,n),this.ta=zI("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Nz(n&&n.concurrentRequestLimit),this.Fa=new ece,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function wL(n){if($z(n),3==n.G){var e=n.U++,t=Yh(n.F);Bs(t,"SID",n.I),Bs(t,"RID",e),Bs(t,"TYPE","terminate"),HI(n,t),(e=new PI(n,n.j,e,void 0)).K=2,e.v=TD(Yh(t)),t=!1,Pr.navigator&&Pr.navigator.sendBeacon&&(t=Pr.navigator.sendBeacon(e.v.toString(),"")),!t&&Pr.Image&&((new Image).src=e.v,t=!0),t||(e.g=e9(e.l,null),e.g.da(e.v)),e.F=Date.now(),RI(e)}Xz(n)}function kD(n){n.g&&(EL(n),n.g.cancel(),n.g=null)}function $z(n){kD(n),n.u&&(Pr.clearTimeout(n.u),n.u=null),RD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Pr.clearTimeout(n.m),n.m=null)}function PD(n){kz(n.h)||n.m||(n.m=!0,oz(n.Ja,n),n.C=0)}function qz(n,e){var t;t=e?e.m:n.U++;const r=Yh(n.F);Bs(r,"SID",n.I),Bs(r,"RID",t),Bs(r,"AID",n.T),HI(n,r),n.o&&n.s&&bL(r,n.o,n.s),t=new PI(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Gz(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),_L(n.h,t),pL(t,r,e)}function HI(n,e){n.ia&&ZO(n.ia,function(t,r){Bs(e,r,t)}),n.l&&xz({},function(t,r){Bs(e,r,t)})}function Gz(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ra(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let l=!0;for(let d=0;d<t;d++){let h=i[d].h;const g=i[d].g;if(h-=s,0>h)s=Math.max(0,i[d].h-100),l=!1;else try{tce(g,o,"req"+h+"_")}catch{r&&r(g)}}if(l){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Kz(n){n.g||n.u||(n.Z=1,oz(n.Ia,n),n.A=0)}function IL(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=NI(Ra(n.Ia,n),Qz(n,n.A)),n.A++,0))}function EL(n){null!=n.B&&(Pr.clearTimeout(n.B),n.B=null)}function Zz(n){n.g=new PI(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Yh(n.sa);Bs(e,"RID","rpc"),Bs(e,"SID",n.I),Bs(e,"CI",n.L?"0":"1"),Bs(e,"AID",n.T),Bs(e,"TYPE","xmlhttp"),HI(n,e),n.o&&n.s&&bL(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=TD(Yh(e)),t.s=null,t.P=!0,bz(t,n)}function RD(n){null!=n.v&&(Pr.clearTimeout(n.v),n.v=null)}function Yz(n,e){var t=null;if(n.g==e){RD(n),EL(n),n.g=null;var r=2}else{if(!mL(n.h,e))return;t=e.D,Rz(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;va(r=wD(),new gz(r,t)),PD(n)}else Kz(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function ace(n,e){return!(Pz(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=NI(Ra(n.Ja,n,e),Qz(n,n.C)),n.C++,0)))}(n,e)||2==r&&IL(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:z_(n,5);break;case 4:z_(n,10);break;case 3:z_(n,6);break;default:z_(n,2)}}function Qz(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function z_(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ra(n.kb,n);t||(t=new V_("//www.google.com/images/cleardot.gif"),Pr.location&&"http"==Pr.location.protocol||AD(t,"https"),TD(t)),function nce(n,e){const t=new bD;if(Pr.Image){const r=new Image;r.onload=hD(DD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hD(DD,t,r,"TestLoadImage: error",!1,e),r.onabort=hD(DD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hD(DD,t,r,"TestLoadImage: timeout",!1,e),Pr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qa(2);n.G=0,n.l&&n.l.va(e),Xz(n),$z(n)}function Xz(n){if(n.G=0,n.la=[],n.l){const e=Oz(n.h);(0!=e.length||0!=n.i.length)&&($V(n.la,e),$V(n.la,n.i),n.h.i.length=0,VO(n.i),n.i.length=0),n.l.ua()}}function Jz(n,e,t){var r=t instanceof V_?Yh(t):new V_(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),CD(r,r.m);else{var i=Pr.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new V_(null,void 0);r&&AD(s,r),e&&(s.g=e),i&&CD(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Bs(r,t,e),Bs(r,"VER",n.ma),HI(n,r),r}function e9(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Js(t&&n.Da&&!n.ra?new UI({jb:!0}):n.ra)).Ka(n.H),e}function t9(){}function OD(){if(Kv&&!(10<=Number(xae)))throw Error("Environmental error: no available transport.")}function al(n,e){ea.call(this),this.g=new Wz(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!fD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Qv(this)}function n9(n){uL.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function r9(){dL.call(this),this.status=1}function Qv(n){this.g=n}(tr=Js.prototype).Ka=function(n){this.L=n},tr.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hL.g(),this.C=function _z(n){return n.h||(n.h=n.i())}(this.u?this.u:hL),this.g.onreadystatechange=Ra(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Bz(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Pr.FormData&&n instanceof Pr.FormData,!(0<=WV(sce,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Vz(this),0<this.B&&((this.K=function oce(n){return Kv&&function Eae(){return function vae(n){var e=Iae;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=qV(String(gD)).split("."),t=qV("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=zO(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||zO(0==i[2].length,0==s[2].length)||zO(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ra(this.qa,this)):this.A=cL(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Bz(this,s)}},tr.qa=function(){typeof UO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,va(this,"timeout"),this.abort(8))},tr.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,va(this,"complete"),va(this,"abort"),ND(this))},tr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ND(this,!0)),Js.X.M.call(this)},tr.Ha=function(){this.s||(this.F||this.v||this.l?jz(this):this.fb())},tr.fb=function(){jz(this)},tr.aa=function(){try{return 2<Qh(this)?this.g.status:-1}catch{return-1}},tr.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},tr.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rce(e)}},tr.Ea=function(){return this.m},tr.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(tr=Wz.prototype).ma=8,tr.G=1,tr.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new PI(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=QV(s),JV(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Gz(this,i,e),Bs(t=Yh(this.F),"RID",n),Bs(t,"CVER",22),this.D&&Bs(t,"X-HTTP-Session-Id",this.D),HI(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(Hz(s)))+"&"+e:this.o&&bL(t,this.o,s)),_L(this.h,i),this.Ya&&Bs(t,"TYPE","init"),this.O?(Bs(t,"$req",e),Bs(t,"SID","null"),i.Z=!0,pL(i,t,null)):pL(i,t,e),this.G=2}}else 3==this.G&&(n?qz(this,n):0==this.i.length||kz(this.h)||qz(this))},tr.Ia=function(){if(this.u=null,Zz(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=NI(Ra(this.eb,this),n)}},tr.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Qa(10),kD(this),Zz(this))},tr.cb=function(){null!=this.v&&(this.v=null,kD(this),IL(this),Qa(19))},tr.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Qa(2)):(this.j.info("Failed to ping google.com"),Qa(1))},(tr=t9.prototype).xa=function(){},tr.wa=function(){},tr.va=function(){},tr.ua=function(){},tr.Ra=function(){},OD.prototype.g=function(n,e){return new al(n,e)},ya(al,ea),al.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Qa(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Jz(n,null,n.V),PD(n)},al.prototype.close=function(){wL(this.g)},al.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=iL(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&PD(e)},al.prototype.M=function(){this.g.l=null,delete this.j,wL(this.g),delete this.g,al.X.M.call(this)},ya(n9,uL),ya(r9,dL),ya(Qv,t9),Qv.prototype.xa=function(){va(this.g,"a")},Qv.prototype.wa=function(n){va(this.g,new n9(n))},Qv.prototype.va=function(n){va(this.g,new r9)},Qv.prototype.ua=function(){va(this.g,"b")},OD.prototype.createWebChannel=OD.prototype.g,al.prototype.send=al.prototype.u,al.prototype.open=al.prototype.m,al.prototype.close=al.prototype.close,ID.NO_ERROR=0,ID.TIMEOUT=8,ID.HTTP_ERROR=6,mz.COMPLETE="complete",yz.EventType=kI,kI.OPEN="a",kI.CLOSE="b",kI.ERROR="c",kI.MESSAGE="d",ea.prototype.listen=ea.prototype.N,Js.prototype.listenOnce=Js.prototype.O,Js.prototype.getLastError=Js.prototype.Oa,Js.prototype.getLastErrorCode=Js.prototype.Ea,Js.prototype.getStatus=Js.prototype.aa,Js.prototype.getResponseJson=Js.prototype.Sa,Js.prototype.getResponseText=Js.prototype.fa,Js.prototype.send=Js.prototype.da,Js.prototype.setWithCredentials=Js.prototype.Ka;var cce=Zh.createWebChannelTransport=function(){return new OD},lce=Zh.getStatEventTarget=function(){return wD()},xL=Zh.ErrorCode=ID,uce=Zh.EventType=mz,dce=Zh.Event=U_,i9=Zh.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},hce=Zh.FetchXmlHttpFactory=UI,LD=Zh.WebChannel=yz,fce=Zh.XhrIo=Js;const s9="@firebase/firestore";class ta{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ta.UNAUTHENTICATED=new ta(null),ta.GOOGLE_CREDENTIALS=new ta("google-credentials-uid"),ta.FIRST_PARTY=new ta("first-party-uid"),ta.MOCK_USER=new ta("mock-user");let Xv="9.15.0";const ng=new wc.Yd("@firebase/firestore");function SL(){return ng.logLevel}function tn(n,...e){if(ng.logLevel<=wc.in.DEBUG){const t=e.map(AL);ng.debug(`Firestore (${Xv}): ${n}`,...t)}}function uo(n,...e){if(ng.logLevel<=wc.in.ERROR){const t=e.map(AL);ng.error(`Firestore (${Xv}): ${n}`,...t)}}function H_(n,...e){if(ng.logLevel<=wc.in.WARN){const t=e.map(AL);ng.warn(`Firestore (${Xv}): ${n}`,...t)}}function AL(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function $n(n="Unexpected state"){const e=`FIRESTORE (${Xv}) INTERNAL ASSERTION FAILED: `+n;throw uo(e),new Error(e)}function Jn(n,e){n||$n()}function In(n,e){return n}const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gt extends X.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class o9{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ta.UNAUTHENTICATED))}shutdown(){}}class _ce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yce{constructor(e){this.t=e,this.currentUser=ta.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let o=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new jo,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable((0,mt.Z)(function*(){yield h.promise,yield s(r.currentUser)}))},d=h=>{tn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(h=>d(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(tn("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new jo)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(tn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jn("string"==typeof r.accessToken),new o9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jn(null===e||"string"==typeof e),new ta(e)}}class vce{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ta.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Jn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class bce{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new vce(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ta.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wce{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&tn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,tn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{tn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):tn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn("string"==typeof t.token),this.A=t.token,new a9(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ice(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class c9{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ice(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Rr(n,e){return n<e?-1:n>e?1:0}function Jv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function l9(n){return n+"\0"}class Us{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Gt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Gt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Gt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Gt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Us.fromMillis(Date.now())}static fromDate(e){return Us.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Us(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rr(this.nanoseconds,e.nanoseconds):Rr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sr(e)}static min(){return new sr(new Us(0,0))}static max(){return new sr(new Us(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class WI{constructor(e,t,r){void 0===t?t=0:t>e.length&&$n(),void 0===r?r=e.length-t:r>e.length-t&&$n(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===WI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof WI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bi extends WI{construct(e,t,r){return new bi(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Gt(pt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bi(t)}static emptyPath(){return new bi([])}}const Ece=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class eo extends WI{construct(e,t,r){return new eo(e,t,r)}static isValidIdentifier(e){return Ece.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),eo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new eo(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Gt(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if("\\"===l){if(i+1===e.length)throw new Gt(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if("\\"!==d&&"."!==d&&"`"!==d)throw new Gt(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else"`"===l?(o=!o,i++):"."!==l||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Gt(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new eo(t)}static emptyPath(){return new eo([])}}class yn{constructor(e){this.path=e}static fromPath(e){return new yn(bi.fromString(e))}static fromName(e){return new yn(bi.fromString(e).popFirst(5))}static empty(){return new yn(bi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yn(new bi(e.slice()))}}class FD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function CL(n){return n.fields.find(e=>2===e.kind)}function W_(n){return n.fields.filter(e=>2!==e.kind)}FD.UNKNOWN_ID=-1;class BD{constructor(e,t){this.fieldPath=e,this.kind=t}}class $I{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $I(0,cl.min())}}function u9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=sr.fromTimestamp(1e9===r?new Us(t+1,0):new Us(t,r));return new cl(i,yn.empty(),e)}function d9(n){return new cl(n.readTime,n.key,-1)}class cl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cl(sr.min(),yn.empty(),-1)}static max(){return new cl(sr.max(),yn.empty(),-1)}}function TL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=yn.comparator(n.documentKey,e.documentKey),0!==t?t:Rr(n.largestBatchId,e.largestBatchId))}const h9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rg(n){return DL.apply(this,arguments)}function DL(){return DL=(0,mt.Z)(function*(n){if(n.code!==pt.FAILED_PRECONDITION||n.message!==h9)throw n;tn("LocalStore","Unexpectedly lost primary lease")}),DL.apply(this,arguments)}class at{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$n(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new at((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof at?t:at.resolve(t)}catch(t){return at.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):at.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):at.reject(t)}static resolve(e){return new at((t,r)=>{t(e)})}static reject(e){return new at((t,r)=>{r(e)})}static waitFor(e){return new at((t,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&t()},d=>r(d))}),o=!0,s===i&&t()})}static or(e){let t=at.resolve(!1);for(const r of e)t=t.next(i=>i?at.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new at((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next(g=>{o[h]=g,++l,l===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new at((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class UD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new jo,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new qI(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=ML(r.target.error);this.P.reject(new qI(e,i))}}static open(e,t,r,i){try{return new UD(t,e.transaction(i,r))}catch(s){throw new qI(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(tn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cce(t)}}class wu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===wu.D((0,X.z$)())&&uo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tn("SimpleDb","Removing database:",e),$_(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,X.hl)())return!1;if(wu.N())return!0;const e=(0,X.z$)(),t=wu.D(e),r=0<t&&t<10,i=wu.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,mt.Z)(function*(){return t.db||(tn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new qI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const l=o.target.error;i("VersionError"===l.name?new Gt(pt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===l.name?new Gt(pt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l):new qI(e,l))},s.onupgradeneeded=o=>{tn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.S.$(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{tn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,mt.Z)(function*(){const o="readonly"===t;let l=0;for(;;){++l;try{s.db=yield s.F(e);const d=UD.open(s.db,e,o?"readonly":"readwrite",r),h=i(d).next(g=>(d.V(),g)).catch(g=>(d.abort(g),at.reject(g))).toPromise();return h.catch(()=>{}),yield d.v,h}catch(d){const h=d,g="FirebaseError"!==h.name&&l<3;if(tn("SimpleDb","Transaction failed with error:",h.message,"Retrying:",g),s.close(),!g)return Promise.reject(h)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ace{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return $_(this.q.delete())}}class qI extends Gt{constructor(e,t){super(pt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ig(n){return"IndexedDbTransactionError"===n.name}class Cce{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(tn("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(tn("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$_(r)}add(e){return tn("SimpleDb","ADD",this.store.name,e,e),$_(this.store.add(e))}get(e){return $_(this.store.get(e)).next(t=>(void 0===t&&(t=null),tn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return tn("SimpleDb","DELETE",this.store.name,e),$_(this.store.delete(e))}count(){return tn("SimpleDb","COUNT",this.store.name),$_(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(o,l)=>{s.push(l)}).next(()=>s)}{const i=this.store.getAll(r.range);return new at((s,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{s(l.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new at((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,t){tn("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,l)=>l.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new at((r,i)=>{t.onerror=s=>{const o=ML(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}H(e,t){const r=[];return new at((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const d=new Ace(l),h=t(l.primaryKey,l.value,d);if(h instanceof at){const g=h.catch(v=>(d.done(),at.reject(v)));r.push(g)}d.isDone?i():null===d.G?l.continue():l.continue(d.G)}}).next(()=>at.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $_(n){return new at((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ML(r.target.error);t(i)}})}let p9=!1;function ML(n){const e=wu.D((0,X.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p9||(p9=!0,setTimeout(()=>{throw r},0)),r}}return n}class Tce{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;tn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,mt.Z)(function*(){t.task=null;try{tn("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){ig(r)?tn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield rg(r)}yield t.nt(6e4)}))}}class Dce{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,mt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return at.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return tn("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(l=>{i-=l,r.add(o)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(l=>(tn("IndexBackiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l))).next(()=>o.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=d9(s);TL(o,r)>0&&(r=o)}),new cl(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ll=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Mce{constructor(e,t,r,i,s,o,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.useFetchStreams=d}}class sg{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sg("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sg&&e.projectId===this.projectId&&e.database===this.database}}function g9(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function q_(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function m9(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function GI(n){return null==n}function KI(n){return 0===n&&1/n==-1/0}function _9(n){return"number"==typeof n&&Number.isInteger(n)&&!KI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Vo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vo(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Vo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vo.EMPTY_BYTE_STRING=new Vo("");const kce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function og(n){if(Jn(!!n),"string"==typeof n){let e=0;const t=kce.exec(n);if(Jn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:to(n.seconds),nanos:to(n.nanos)}}function to(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function G_(n){return"string"==typeof n?Vo.fromBase64String(n):Vo.fromUint8Array(n)}function NL(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function y9(n){const e=n.mapValue.fields.__previous_value__;return NL(e)?y9(e):e}function ZI(n){const e=og(n.mapValue.fields.__local_write_time__.timestampValue);return new Us(e.seconds,e.nanos)}const ag={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jD={nullValue:"NULL_VALUE"};function K_(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?NL(n)?4:I9(n)?9007199254740991:10:$n()}function Cd(n,e){if(n===e)return!0;const t=K_(n);if(t!==K_(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ZI(n).isEqual(ZI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=og(r.timestampValue),o=og(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,G_(n.bytesValue).isEqual(G_(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return to(r.geoPointValue.latitude)===to(i.geoPointValue.latitude)&&to(r.geoPointValue.longitude)===to(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return to(r.integerValue)===to(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=to(r.doubleValue),o=to(i.doubleValue);return s===o?KI(s)===KI(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Jv(n.arrayValue.values||[],e.arrayValue.values||[],Cd);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(g9(s)!==g9(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===o[l]||!Cd(s[l],o[l])))return!1;return!0}(n,e);default:return $n()}var i}function YI(n,e){return void 0!==(n.values||[]).find(t=>Cd(t,e))}function cg(n,e){if(n===e)return 0;const t=K_(n),r=K_(e);if(t!==r)return Rr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rr(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=to(i.integerValue||i.doubleValue),l=to(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,e);case 3:return v9(n.timestampValue,e.timestampValue);case 4:return v9(ZI(n),ZI(e));case 5:return Rr(n.stringValue,e.stringValue);case 6:return function(i,s){const o=G_(i),l=G_(s);return o.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),l=s.split("/");for(let d=0;d<o.length&&d<l.length;d++){const h=Rr(o[d],l[d]);if(0!==h)return h}return Rr(o.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Rr(to(i.latitude),to(s.latitude));return 0!==o?o:Rr(to(i.longitude),to(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],l=s.values||[];for(let d=0;d<o.length&&d<l.length;++d){const h=cg(o[d],l[d]);if(h)return h}return Rr(o.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===ag.mapValue&&s===ag.mapValue)return 0;if(i===ag.mapValue)return 1;if(s===ag.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),d=s.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){const v=Rr(l[g],h[g]);if(0!==v)return v;const E=cg(o[l[g]],d[h[g]]);if(0!==E)return E}return Rr(l.length,h.length)}(n.mapValue,e.mapValue);default:throw $n()}}function v9(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rr(n,e);const t=og(n),r=og(e),i=Rr(t.seconds,r.seconds);return 0!==i?i:Rr(t.nanos,r.nanos)}function eb(n){return kL(n)}function kL(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=og(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?G_(n.bytesValue).toBase64():"referenceValue"in n?yn.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=kL(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${kL(r.fields[l])}`;return s+"}"}(n.mapValue):$n();var e}function Z_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function PL(n){return!!n&&"integerValue"in n}function QI(n){return!!n&&"arrayValue"in n}function b9(n){return!!n&&"nullValue"in n}function w9(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function VD(n){return!!n&&"mapValue"in n}function XI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return q_(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=XI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=XI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function I9(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pce(n){return"nullValue"in n?jD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Z_(sg.empty(),yn.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:$n()}function Rce(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Z_(sg.empty(),yn.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ag:$n()}function E9(n,e){const t=cg(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function x9(n,e){const t=cg(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class lg{constructor(e,t){this.position=e,this.inclusive=t}}function S9(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?yn.comparator(yn.fromName(o.referenceValue),t.key):cg(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function A9(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Cd(n.position[t],e.position[t]))return!1;return!0}class C9{}class fi extends C9{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Oce(e,t,r):"array-contains"===t?new Bce(e,r):"in"===t?new O9(e,r):"not-in"===t?new Uce(e,r):"array-contains-any"===t?new jce(e,r):new fi(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Lce(e,r):new Fce(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cg(t,this.value)):null!==t&&K_(this.value)===K_(t)&&this.matchesComparison(cg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $n()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Qi extends C9{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Qi(e,t)}matches(e){return tb(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tb(n){return"and"===n.op}function RL(n){return"or"===n.op}function T9(n){return D9(n)&&tb(n)}function D9(n){for(const e of n.filters)if(e instanceof Qi)return!1;return!0}function M9(n){if(n instanceof fi)return n.field.canonicalString()+n.op.toString()+eb(n.value);{const e=n.filters.map(t=>M9(t)).join(",");return`${n.op}(${e})`}}function N9(n,e){return n instanceof fi?(t=n,(r=e)instanceof fi&&t.op===r.op&&t.field.isEqual(r.field)&&Cd(t.value,r.value)):n instanceof Qi?function(t,r){return r instanceof Qi&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&N9(s,r.filters[o]),!0)}(n,e):void $n();var t,r}function k9(n,e){const t=n.filters.concat(e);return Qi.create(t,n.op)}function P9(n){return n instanceof fi?function(e){return`${e.field.canonicalString()} ${e.op} ${eb(e.value)}`}(n):n instanceof Qi?function(e){return e.op.toString()+" {"+e.getFilters().map(P9).join(" ,")+"}"}(n):"Filter"}class Oce extends fi{constructor(e,t,r){super(e,t,r),this.key=yn.fromName(r.referenceValue)}matches(e){const t=yn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Lce extends fi{constructor(e,t){super(e,"in",t),this.keys=R9(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fce extends fi{constructor(e,t){super(e,"not-in",t),this.keys=R9(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function R9(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>yn.fromName(r.referenceValue))}class Bce extends fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return QI(t)&&YI(t.arrayValue,this.value)}}class O9 extends fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&YI(this.value.arrayValue,t)}}class Uce extends fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(YI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!YI(this.value.arrayValue,t)}}class jce extends fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!QI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>YI(this.value.arrayValue,r))}}class nb{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class no{constructor(e,t){this.comparator=e,this.root=t||ba.EMPTY}insert(e,t){return new no(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ba.BLACK,null,null))}remove(e){return new no(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ba.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zD(this.root,e,this.comparator,!1)}getReverseIterator(){return new zD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zD(this.root,e,this.comparator,!0)}}class zD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ba{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ba.RED,this.left=i??ba.EMPTY,this.right=s??ba.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ba(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ba.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ba.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ba.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ba.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $n();const e=this.left.check();if(e!==this.right.check())throw $n();return e+(this.isRed()?0:1)}}ba.EMPTY=null,ba.RED=!0,ba.BLACK=!1,ba.EMPTY=new class{constructor(){this.size=0}get key(){throw $n()}get value(){throw $n()}get color(){throw $n()}get left(){throw $n()}get right(){throw $n()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ba(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ss{constructor(e){this.comparator=e,this.data=new no(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new L9(this.data.getIterator())}getIteratorFrom(e){return new L9(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ss)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ss(this.comparator);return t.data=e,t}}class L9{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rb(n){return n.hasNext()?n.getNext():void 0}class ul{constructor(e){this.fields=e,e.sort(eo.comparator)}static empty(){return new ul([])}unionWith(e){let t=new ss(eo.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ul(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wa{constructor(e){this.value=e}static empty(){return new wa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!VD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=XI(t)}setAll(e){let t=eo.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=l.popLast()}o?r[l.lastSegment()]=XI(o):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());VD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];VD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){q_(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wa(XI(this.value))}}function F9(n){const e=[];return q_(n.fields,(t,r)=>{const i=new eo([t]);if(VD(r)){const s=F9(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ul(e)}class Cs{constructor(e,t,r,i,s,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Cs(e,0,sr.min(),sr.min(),sr.min(),wa.empty(),0)}static newFoundDocument(e,t,r,i){return new Cs(e,1,t,sr.min(),r,i,0)}static newNoDocument(e,t){return new Cs(e,2,t,sr.min(),sr.min(),wa.empty(),0)}static newUnknownDocument(e,t){return new Cs(e,3,t,sr.min(),sr.min(),wa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zce{constructor(e,t=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ft=null}}function OL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new zce(n,e,t,r,i,s,o)}function Y_(n){const e=In(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>M9(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),GI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eb(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eb(r)).join(",")),e.ft=t}return e.ft}function JI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Vce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!N9(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!A9(n.startAt,e.startAt)&&A9(n.endAt,e.endAt)}function HD(n){return yn.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function WD(n,e){return n.filters.filter(t=>t instanceof fi&&t.field.isEqual(e))}function B9(n,e,t){let r=jD,i=!0;for(const s of WD(n,e)){let o=jD,l=!0;switch(s.op){case"<":case"<=":o=Pce(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=jD}E9({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];E9({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function U9(n,e,t){let r=ag,i=!0;for(const s of WD(n,e)){let o=ag,l=!0;switch(s.op){case">=":case">":o=Rce(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=ag}x9({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];x9({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Xh{constructor(e,t=null,r=[],i=[],s=null,o="F",l=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=d,this.dt=null,this._t=null}}function j9(n,e,t,r,i,s,o,l){return new Xh(n,e,t,r,i,s,o,l)}function ib(n){return new Xh(n)}function V9(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function LL(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $D(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function FL(n){return null!==n.collectionGroup}function Q_(n){const e=In(n);if(null===e.dt){e.dt=[];const t=$D(e),r=LL(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new nb(t)),e.dt.push(new nb(eo.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new nb(eo.keyField(),s))}}}return e.dt}function Xa(n){const e=In(n);if(!e._t)if("F"===e.limitType)e._t=OL(e.path,e.collectionGroup,Q_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Q_(e))t.push(new nb(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new lg(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new lg(e.startAt.position,e.startAt.inclusive):null;e._t=OL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function BL(n,e){e.getFirstInequalityField(),$D(n);const t=n.filters.concat([e]);return new Xh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qD(n,e,t){return new Xh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eE(n,e){return JI(Xa(n),Xa(e))&&n.limitType===e.limitType}function z9(n){return`${Y_(Xa(n))}|lt:${n.limitType}`}function UL(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>P9(r)).join(", ")}]`),GI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eb(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eb(r)).join(",")),`Target(${t})`}(Xa(n))}; limitType=${n.limitType})`}function jL(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):yn.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Q_(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const l=S9(i,s,o);return i.inclusive?l<=0:l<0}(t.startAt,Q_(t),r)||t.endAt&&!function(i,s,o){const l=S9(i,s,o);return i.inclusive?l>=0:l>0}(t.endAt,Q_(t),r)));var t,r}function H9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function W9(n){return(e,t)=>{let r=!1;for(const i of Q_(n)){const s=Hce(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Hce(n,e,t){const r=n.field.isKeyField()?yn.comparator(e.key,t.key):function(i,s,o){const l=s.data.field(i),d=o.data.field(i);return null!==l&&null!==d?cg(l,d):$n()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $n()}}function $9(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:KI(e)?"-0":e}}function q9(n){return{integerValue:""+n}}function G9(n,e){return _9(e)?q9(e):$9(n,e)}class GD{constructor(){this._=void 0}}function Wce(n,e,t){return n instanceof sb?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof X_?Z9(n,e):n instanceof J_?Y9(n,e):function(r,i){const s=K9(r,i),o=Q9(s)+Q9(r.gt);return PL(s)&&PL(r.gt)?q9(o):$9(r.yt,o)}(n,e)}function $ce(n,e,t){return n instanceof X_?Z9(n,e):n instanceof J_?Y9(n,e):t}function K9(n,e){return n instanceof ob?PL(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class sb extends GD{}class X_ extends GD{constructor(e){super(),this.elements=e}}function Z9(n,e){const t=X9(e);for(const r of n.elements)t.some(i=>Cd(i,r))||t.push(r);return{arrayValue:{values:t}}}class J_ extends GD{constructor(e){super(),this.elements=e}}function Y9(n,e){let t=X9(e);for(const r of n.elements)t=t.filter(i=>!Cd(i,r));return{arrayValue:{values:t}}}class ob extends GD{constructor(e,t){super(),this.yt=e,this.gt=t}}function Q9(n){return to(n.integerValue||n.doubleValue)}function X9(n){return QI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class tE{constructor(e,t){this.field=e,this.transform=t}}class Gce{constructor(e,t){this.version=e,this.transformResults=t}}class js{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new js}static exists(e){return new js(void 0,e)}static updateTime(e){return new js(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function KD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ZD{}function J9(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new cb(n.key,js.none()):new ab(n.key,n.data,js.none());{const t=n.data,r=wa.empty();let i=new ss(eo.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Jh(n.key,r,new ul(i.toArray()),js.none())}}function Kce(n,e,t){n instanceof ab?function(r,i,s){const o=r.value.clone(),l=nH(r.fieldTransforms,i,s.transformResults);o.setAll(l),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Jh?function(r,i,s){if(!KD(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=nH(r.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(tH(r)),l.setAll(o),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nE(n,e,t,r){return n instanceof ab?function(i,s,o,l){if(!KD(i.precondition,s))return o;const d=i.value.clone(),h=rH(i.fieldTransforms,l,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jh?function(i,s,o,l){if(!KD(i.precondition,s))return o;const d=rH(i.fieldTransforms,l,s),h=s.data;return h.setAll(tH(i)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(n,e,t,r):(o=t,KD(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Zce(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=K9(r.transform,i||null);null!=s&&(null===t&&(t=wa.empty()),t.set(r.field,s))}return t||null}function eH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Jv(t,r,(i,s)=>function qce(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof X_&&r instanceof X_||t instanceof J_&&r instanceof J_?Jv(t.elements,r.elements,Cd):t instanceof ob&&r instanceof ob?Cd(t.gt,r.gt):t instanceof sb&&r instanceof sb);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ab extends ZD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jh extends ZD{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nH(n,e,t){const r=new Map;Jn(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,$ce(o,l,t[i]))}return r}function rH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Wce(s,o,e))}return r}class cb extends ZD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VL extends ZD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yce{constructor(e){this.count=e}}var bo,wi;function iH(n){switch(n){default:return $n();case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0}}function sH(n){if(void 0===n)return uo("GRPC error has no .code"),pt.UNKNOWN;switch(n){case bo.OK:return pt.OK;case bo.CANCELLED:return pt.CANCELLED;case bo.UNKNOWN:return pt.UNKNOWN;case bo.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case bo.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case bo.INTERNAL:return pt.INTERNAL;case bo.UNAVAILABLE:return pt.UNAVAILABLE;case bo.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case bo.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case bo.NOT_FOUND:return pt.NOT_FOUND;case bo.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case bo.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case bo.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case bo.ABORTED:return pt.ABORTED;case bo.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case bo.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case bo.DATA_LOSS:return pt.DATA_LOSS;default:return $n()}}(wi=bo||(bo={}))[wi.OK=0]="OK",wi[wi.CANCELLED=1]="CANCELLED",wi[wi.UNKNOWN=2]="UNKNOWN",wi[wi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wi[wi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wi[wi.NOT_FOUND=5]="NOT_FOUND",wi[wi.ALREADY_EXISTS=6]="ALREADY_EXISTS",wi[wi.PERMISSION_DENIED=7]="PERMISSION_DENIED",wi[wi.UNAUTHENTICATED=16]="UNAUTHENTICATED",wi[wi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wi[wi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wi[wi.ABORTED=10]="ABORTED",wi[wi.OUT_OF_RANGE=11]="OUT_OF_RANGE",wi[wi.UNIMPLEMENTED=12]="UNIMPLEMENTED",wi[wi.INTERNAL=13]="INTERNAL",wi[wi.UNAVAILABLE=14]="UNAVAILABLE",wi[wi.DATA_LOSS=15]="DATA_LOSS";class ug{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){q_(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return m9(this.inner)}size(){return this.innerSize}}const Qce=new no(yn.comparator);function Dc(){return Qce}const oH=new no(yn.comparator);function rE(...n){let e=oH;for(const t of n)e=e.insert(t.key,t);return e}function aH(n){let e=oH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Td(){return iE()}function cH(){return iE()}function iE(){return new ug(n=>n.toString(),(n,e)=>n.isEqual(e))}const Xce=new no(yn.comparator),Jce=new ss(yn.comparator);function Zr(...n){let e=Jce;for(const t of n)e=e.add(t);return e}const ele=new ss(Rr);function YD(){return ele}class sE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,oE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sE(sr.min(),i,YD(),Dc(),Zr())}}class oE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new oE(r,t,Zr(),Zr(),Zr())}}class QD{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class lH{constructor(e,t){this.targetId=e,this.Et=t}}class uH{constructor(e,t,r=Vo.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class dH{constructor(){this.At=0,this.Rt=fH(),this.bt=Vo.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Zr(),t=Zr(),r=Zr();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$n()}}),new oE(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=fH()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class tle{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Dc(),this.qt=hH(),this.Ut=new ss(Rr)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:$n()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(HD(s))if(0===r){const o=new yn(s.path);this.Qt(t,o,Cs.newNoDocument(o,sr.min()))}else Jn(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,o)=>{const l=this.Yt(o);if(l){if(s.current&&HD(l.target)){const d=new yn(l.target.path);null!==this.Lt.get(d)||this.te(o,d)||this.Qt(o,d,Cs.newNoDocument(d,e))}s.St&&(t.set(o,s.Ct()),s.xt())}});let r=Zr();this.qt.forEach((s,o)=>{let l=!0;o.forEachWhile(d=>{const h=this.Yt(d);return!h||2===h.purpose||(l=!1,!1)}),l&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new sE(e,t,this.Ut,this.Lt,r);return this.Lt=Dc(),this.qt=hH(),this.Ut=new ss(Rr),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new dH,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ss(Rr),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||tn("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new dH),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function hH(){return new no(yn.comparator)}function fH(){return new no(yn.comparator)}const nle={asc:"ASCENDING",desc:"DESCENDING"},rle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ile={and:"AND",or:"OR"};class sle{constructor(e,t){this.databaseId=e,this.wt=t}}function lb(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pH(n,e){return n.wt?e.toBase64():e.toUint8Array()}function ole(n,e){return lb(n,e.toTimestamp())}function ho(n){return Jn(!!n),sr.fromTimestamp(function(e){const t=og(e);return new Us(t.seconds,t.nanos)}(n))}function zL(n,e){return(t=n,new bi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gH(n){const e=bi.fromString(n);return Jn(xH(e)),e}function aE(n,e){return zL(n.databaseId,e.path)}function Dd(n,e){const t=gH(e);if(t.get(1)!==n.databaseId.projectId)throw new Gt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Gt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new yn(_H(t))}function HL(n,e){return zL(n.databaseId,e)}function mH(n){const e=gH(n);return 4===e.length?bi.emptyPath():_H(e)}function cE(n){return new bi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _H(n){return Jn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yH(n,e,t){return{name:aE(n,e),fields:t.value.mapValue.fields}}function vH(n,e,t){const r=Dd(n,e.name),i=ho(e.updateTime),s=e.createTime?ho(e.createTime):sr.min(),o=new wa({mapValue:{fields:e.fields}}),l=Cs.newFoundDocument(r,i,s,o);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function lE(n,e){let t;if(e instanceof ab)t={update:yH(n,e.key,e.value)};else if(e instanceof cb)t={delete:aE(n,e.key)};else if(e instanceof Jh)t={update:yH(n,e.key,e.data),updateMask:ple(e.fieldMask)};else{if(!(e instanceof VL))return $n();t={verify:aE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof sb)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof X_)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof J_)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ob)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw $n()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ole(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:$n()),t;var i}function WL(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?js.updateTime(ho(i.updateTime)):void 0!==i.exists?js.exists(i.exists):js.none():js.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let l=null;"setToServerValue"in o?(Jn("REQUEST_TIME"===o.setToServerValue),l=new sb):"appendMissingElements"in o?l=new X_(o.appendMissingElements.values||[]):"removeAllFromArray"in o?l=new J_(o.removeAllFromArray.values||[]):"increment"in o?l=new ob(s,o.increment):$n();const d=eo.fromServerFormat(o.fieldPath);return new tE(d,l)}(n,i)):[];var i;if(e.update){const i=Dd(n,e.update.name),s=new wa({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ul((e.updateMask.fieldPaths||[]).map(h=>eo.fromServerFormat(h)));return new Jh(i,s,o,t,r)}return new ab(i,s,t,r)}if(e.delete){const i=Dd(n,e.delete);return new cb(i,t)}if(e.verify){const i=Dd(n,e.verify);return new VL(i,t)}return $n()}function bH(n,e){return{documents:[HL(n,e.path)]}}function $L(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=HL(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=HL(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(d){if(0!==d.length)return EH(Qi.create(d,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(d){if(0!==d.length)return d.map(h=>{return{field:ub((g=h).field),direction:dle(g.dir)};var g})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(h=e.limit,n.wt||GI(h)?h:{value:h});var h,l,d;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt={before:!(d=e.endAt).inclusive,values:d.position}),t}function wH(n){let e=mH(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Jn(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(g){const v=IH(g);return v instanceof Qi&&T9(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(g=>{return new nb(db((v=g).field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let l=null;t.limit&&(l=function(g){let v;return v="object"==typeof g?g.value:g,GI(v)?null:v}(t.limit));let d=null;var g;t.startAt&&(d=new lg((g=t.startAt).values||[],!!g.before));let h=null;return t.endAt&&(h=function(g){return new lg(g.values||[],!g.before)}(t.endAt)),j9(e,i,o,s,l,"F",d,h)}function IH(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=db(e.unaryFilter.field);return fi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=db(e.unaryFilter.field);return fi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=db(e.unaryFilter.field);return fi.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=db(e.unaryFilter.field);return fi.create(s,"!=",{nullValue:"NULL_VALUE"});default:return $n()}}(n):void 0!==n.fieldFilter?function(e){return fi.create(db(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $n()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):void 0!==n.compositeFilter?function(e){return Qi.create(e.compositeFilter.filters.map(t=>IH(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return $n()}}(e.compositeFilter.op))}(n):$n()}function dle(n){return nle[n]}function hle(n){return rle[n]}function fle(n){return ile[n]}function ub(n){return{fieldPath:n.canonicalString()}}function db(n){return eo.fromServerFormat(n.fieldPath)}function EH(n){return n instanceof fi?function(e){if("=="===e.op){if(w9(e.value))return{unaryFilter:{field:ub(e.field),op:"IS_NAN"}};if(b9(e.value))return{unaryFilter:{field:ub(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(w9(e.value))return{unaryFilter:{field:ub(e.field),op:"IS_NOT_NAN"}};if(b9(e.value))return{unaryFilter:{field:ub(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ub(e.field),op:hle(e.op),value:e.value}}}(n):n instanceof Qi?function(e){const t=e.getFilters().map(r=>EH(r));return 1===t.length?t[0]:{compositeFilter:{op:fle(e.op),filters:t}}}(n):$n()}function ple(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ja(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SH(e)),e=gle(n.get(t),e);return SH(e)}function gle(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function SH(n){return n+"\x01\x01"}function Md(n){const e=n.length;if(Jn(e>=2),2===e)return Jn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),bi.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&$n(),n.charAt(o+1)){case"\x01":const l=n.substring(s,o);let d;0===i.length?d=l:(i+=l,d=i,i=""),r.push(d);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:$n()}s=o+2}return new bi(r)}const AH=["userId","batchId"];function XD(n,e){return[n,Ja(e)]}function CH(n,e,t){return[n,Ja(e),t]}const mle={},_le=["prefixPath","collectionGroup","readTime","documentId"],yle=["prefixPath","collectionGroup","documentId"],vle=["collectionGroup","readTime","prefixPath","documentId"],ble=["canonicalId","targetId"],wle=["targetId","path"],Ile=["path","targetId"],Ele=["collectionId","parent"],xle=["indexId","uid"],Sle=["uid","sequenceNumber"],Ale=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cle=["indexId","uid","orderedDocumentKey"],Tle=["userId","collectionPath","documentId"],Dle=["userId","collectionPath","largestBatchId"],Mle=["userId","collectionGroup","largestBatchId"],TH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nle=[...TH,"documentOverlays"],DH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MH=DH,kle=[...MH,"indexConfiguration","indexState","indexEntries"];class qL extends f9{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function na(n,e){const t=In(n);return wu.M(t.se,e)}class GL{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Kce(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=t.has(i.key)?null:l;const d=J9(o,l);null!==d&&r.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(sr.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zr())}isEqual(e){return this.batchId===e.batchId&&Jv(this.mutations,e.mutations,(t,r)=>eH(t,r))&&Jv(this.baseMutations,e.baseMutations,(t,r)=>eH(t,r))}}class KL{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Jn(e.mutations.length===r.length);let i=Xce;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new KL(e,t,r,i)}}class ZL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dg{constructor(e,t,r,i,s=sr.min(),o=sr.min(),l=Vo.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l}withSequenceNumber(e){return new dg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new dg(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new dg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class NH{constructor(e){this.ie=e}}function kH(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:JD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:aE(i=n.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:lb(i,s.version.toTimestamp()),createTime:lb(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ey(e.version)};else{if(!e.isUnknownDocument())return $n();r.unknownDocument={path:t.path.toArray(),version:ey(e.version)}}var i,s;return r}function JD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ey(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ty(n){const e=new Us(n.seconds,n.nanoseconds);return sr.fromTimestamp(e)}function ny(n,e){const t=(e.baseMutations||[]).map(s=>WL(n.ie,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>WL(n.ie,s)),i=Us.fromMillis(e.localWriteTimeMs);return new GL(e.batchId,i,t,r)}function uE(n){const e=ty(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ty(n.lastLimboFreeSnapshotVersion):sr.min();let r;var i;return void 0!==n.query.documents?(Jn(1===(i=n.query).documents.length),r=Xa(ib(mH(i.documents[0])))):r=Xa(wH(n.query)),new dg(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Vo.fromBase64String(n.resumeToken))}function PH(n,e){const t=ey(e.snapshotVersion),r=ey(e.lastLimboFreeSnapshotVersion);let i;i=HD(e.target)?bH(n.ie,e.target):$L(n.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Y_(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function YL(n){const e=wH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qD(e,e.limit,"L"):e}function QL(n,e){return new ZL(e.largestBatchId,WL(n.ie,e.overlayMutation))}function RH(n,e){const t=e.path.lastSegment();return[n,Ja(e.path.popLast()),t]}function OH(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ey(r.readTime),documentKey:Ja(r.documentKey.path),largestBatchId:r.largestBatchId}}class Rle{getBundleMetadata(e,t){return LH(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ty(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return LH(e).put({bundleId:(r=t).id,createTime:ey(ho(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return FH(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:YL(i.bundledQuery),readTime:ty(i.readTime)};var i})}saveNamedQuery(e,t){return FH(e).put({name:(r=t).name,readTime:ey(ho(r.readTime)),bundledQuery:r.bundledQuery});var r}}function LH(n){return na(n,"bundles")}function FH(n){return na(n,"namedQueries")}class e5{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new e5(e,t.uid||"")}getOverlay(e,t){return dE(e).get(RH(this.userId,t)).next(r=>r?QL(this.yt,r):null)}getOverlays(e,t){const r=Td();return at.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const l=new ZL(t,o);i.push(this.oe(e,l))}),at.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ja(o.getCollectionPath())));const s=[];return i.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(dE(e).Y("collectionPathOverlayIndex",l))}),at.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Td(),s=Ja(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return dE(e).W("collectionPathOverlayIndex",o).next(l=>{for(const d of l){const h=QL(this.yt,d);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Td();let o;const l=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dE(e).Z({index:"collectionGroupOverlayIndex",range:l},(d,h,g)=>{const v=QL(this.yt,h);s.size()<i||v.largestBatchId===o?(s.set(v.getKey(),v),o=v.largestBatchId):g.done()}).next(()=>s)}oe(e,t){return dE(e).put(function(r,i,s){const[o,l,d]=RH(i,s.mutation.key);return{userId:i,collectionPath:l,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:lE(r.ie,s.mutation)}}(this.yt,this.userId,t))}}function dE(n){return na(n,"documentOverlays")}class ry{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(to(e.integerValue));else if("doubleValue"in e){const r=to(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),KI(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(G_(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?I9(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):$n()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),yn.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Ole(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function BH(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=Ole(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}ry.Ie=new ry;class Lle{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=BH(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=BH(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Fle{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Ble{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class hE{constructor(){this.$e=new Lle,this.Be=new Fle(this.$e),this.Le=new Ble(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class iy{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new iy(this.indexId,this.documentKey,this.arrayValue,r)}}function hg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=UH(n.arrayValue,e.arrayValue),0!==t?t:(t=UH(n.directionalValue,e.directionalValue),0!==t?t:yn.comparator(n.documentKey,e.documentKey)))}function UH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ule{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Jn(e.collectionGroup===this.collectionId);const t=CL(e);if(void 0!==t&&!this.We(t))return!1;const r=W_(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const o=r[i];if(!this.ze(this.Qe,o)||!this.He(this.Ke[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],o))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function jH(n){var e,t;if(Jn(n instanceof fi||n instanceof Qi),n instanceof fi){if(n instanceof O9){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>fi.create(n.field,"==",s)))||[];return Qi.create(i,"or")}return n}const r=n.filters.map(i=>jH(i));return Qi.create(r,n.op)}function jle(n){if(0===n.getFilters().length)return[];const e=eF(jH(n));return Jn(VH(e)),XL(e)||JL(e)?[e]:e.getFilters()}function XL(n){return n instanceof fi}function JL(n){return n instanceof Qi&&T9(n)}function VH(n){return XL(n)||JL(n)||function(e){if(e instanceof Qi&&RL(e)){for(const t of e.getFilters())if(!XL(t)&&!JL(t))return!1;return!0}return!1}(n)}function eF(n){if(Jn(n instanceof fi||n instanceof Qi),n instanceof fi)return n;if(1===n.filters.length)return eF(n.filters[0]);const e=n.filters.map(r=>eF(r));let t=Qi.create(e,n.op);return t=t5(t),VH(t)?t:(Jn(t instanceof Qi),Jn(tb(t)),Jn(t.filters.length>1),t.filters.reduce((r,i)=>tF(r,i)))}function tF(n,e){let t;return Jn(n instanceof fi||n instanceof Qi),Jn(e instanceof fi||e instanceof Qi),t=n instanceof fi?e instanceof fi?Qi.create([n,e],"and"):zH(n,e):e instanceof fi?zH(e,n):function(r,i){if(Jn(r.filters.length>0&&i.filters.length>0),tb(r)&&tb(i))return k9(r,i.getFilters());const s=RL(r)?r:i,o=RL(r)?i:r,l=s.filters.map(d=>tF(d,o));return Qi.create(l,"or")}(n,e),t5(t)}function zH(n,e){if(tb(e))return k9(e,n.getFilters());{const t=e.filters.map(r=>tF(n,r));return Qi.create(t,"or")}}function t5(n){if(Jn(n instanceof fi||n instanceof Qi),n instanceof fi)return n;const e=n.getFilters();if(1===e.length)return t5(e[0]);if(D9(n))return n;const t=e.map(i=>t5(i)),r=[];return t.forEach(i=>{i instanceof fi?r.push(i):i instanceof Qi&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Qi.create(r,n.op)}class Vle{constructor(){this.Je=new nF}addToCollectionParentIndex(e,t){return this.Je.add(t),at.resolve()}getCollectionParents(e,t){return at.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return at.resolve()}deleteFieldIndex(e,t){return at.resolve()}getDocumentsMatchingTarget(e,t){return at.resolve(null)}getIndexType(e,t){return at.resolve(0)}getFieldIndexes(e,t){return at.resolve([])}getNextCollectionGroupToUpdate(e){return at.resolve(null)}getMinOffset(e,t){return at.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,t){return at.resolve(cl.min())}updateCollectionGroup(e,t,r){return at.resolve()}updateIndexEntries(e,t){return at.resolve()}}class nF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ss(bi.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ss(bi.comparator)).toArray()}}const n5=new Uint8Array(0);class zle{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new nF,this.Xe=new ug(r=>Y_(r),(r,i)=>JI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const s={collectionId:r,parent:Ja(i)};return HH(e).put(s)}return at.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[l9(t),""],!1,!0);return HH(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Md(o.parent))}return r})}addFieldIndex(e,t){const r=r5(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var o;delete i.indexId;const s=r.add(i);if(t.indexState){const o=pE(e);return s.next(l=>{o.put(OH(l,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=r5(e),i=pE(e),s=fE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=fE(e);let i=!0;const s=new Map;return at.forEach(this.Ze(t),o=>this.tn(e,o).next(l=>{i&&(i=!!l),s.set(o,l)})).next(()=>{if(i){let o=Zr();const l=[];return at.forEach(s,(d,h)=>{var g;tn("IndexedDbIndexManager",`Using index ${g=d,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`} to execute ${Y_(t)}`);const v=function(K,J){const ie=CL(J);if(void 0===ie)return null;for(const _e of WD(K,ie.fieldPath))switch(_e.op){case"array-contains-any":return _e.value.arrayValue.values||[];case"array-contains":return[_e.value]}return null}(h,d),E=function(K,J){const ie=new Map;for(const _e of W_(J))for(const fe of WD(K,_e.fieldPath))switch(fe.op){case"==":case"in":ie.set(_e.fieldPath.canonicalString(),fe.value);break;case"not-in":case"!=":return ie.set(_e.fieldPath.canonicalString(),fe.value),Array.from(ie.values())}return null}(h,d),w=function(K,J){const ie=[];let _e=!0;for(const fe of W_(J)){const oe=0===fe.kind?B9(K,fe.fieldPath,K.startAt):U9(K,fe.fieldPath,K.startAt);ie.push(oe.value),_e&&(_e=oe.inclusive)}return new lg(ie,_e)}(h,d),D=function(K,J){const ie=[];let _e=!0;for(const fe of W_(J)){const oe=0===fe.kind?U9(K,fe.fieldPath,K.endAt):B9(K,fe.fieldPath,K.endAt);ie.push(oe.value),_e&&(_e=oe.inclusive)}return new lg(ie,_e)}(h,d),P=this.en(d,h,w),L=this.en(d,h,D),F=this.nn(d,h,E),U=this.sn(d.indexId,v,P,w.inclusive,L,D.inclusive,F);return at.forEach(U,K=>r.J(K,t.limit).next(J=>{J.forEach(ie=>{const _e=yn.fromSegments(ie.documentKey);o.has(_e)||(o=o.add(_e),l.push(_e))})}))}).next(()=>l)}return at.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:jle(Qi.create(e.filters,"and")).map(r=>OL(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,s,o,l){const d=(null!=t?t.length:1)*Math.max(r.length,s.length),h=d/(null!=t?t.length:1),g=[];for(let v=0;v<d;++v){const E=t?this.rn(t[v/h]):n5,w=this.on(e,E,r[v%h],i),D=this.un(e,E,s[v%h],o),P=l.map(L=>this.on(e,E,L,!0));g.push(...this.createRange(w,D,P))}return g}on(e,t,r,i){const s=new iy(e,yn.empty(),t,r);return i?s:s.Ue()}un(e,t,r,i){const s=new iy(e,yn.empty(),t,r);return i?s.Ue():s}tn(e,t){const r=new Ule(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const l of s)r.je(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,t){let r=2;const i=this.Ze(t);return at.forEach(i,s=>this.tn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let d=new ss(eo.comparator),h=!1;for(const g of l.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?h=!0:d=d.add(v.field));for(const g of l.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new hE;for(const i of W_(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.qe(i.kind);ry.Ie.ue(s,o)}return r.Fe()}rn(e){const t=new hE;return ry.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new hE;return ry.Ie.ue(Z_(this.databaseId,t),r.qe(function(i){const s=W_(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new hE);let s=0;for(const o of W_(e)){const l=r[s++];for(const d of i)if(this.hn(t,o.fieldPath)&&QI(l))i=this.ln(i,o,l);else{const h=d.qe(o.kind);ry.Ie.ue(l,h)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const l of i){const d=new hE;d.seed(l.Fe()),ry.Ie.ue(o,d.qe(t.kind)),s.push(d)}return s}hn(e,t){return!!e.filters.find(r=>r instanceof fi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=r5(e),i=pE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return at.forEach(s,l=>i.get([l.indexId,this.uid]).next(d=>{o.push(function(h,g){const v=g?new $I(g.sequenceNumber,new cl(ty(g.readTime),new yn(Md(g.documentKey)),g.largestBatchId)):$I.empty(),E=h.fields.map(([w,D])=>new BD(eo.fromServerFormat(w),D));return new FD(h.indexId,h.collectionGroup,E,v)}(l,d))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Rr(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=r5(e),s=pE(e);return this.dn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(l=>at.forEach(l,d=>s.put(OH(d.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return at.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?at.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),at.forEach(l,d=>this._n(e,i,d).next(h=>{const g=this.wn(s,d);return h.isEqual(g)?at.resolve():this.mn(e,s,d,h,g)}))))})}gn(e,t,r,i){return fE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return fE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=fE(e);let s=new ss(hg);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(o,l)=>{s=s.add(new iy(r.indexId,t,l.arrayValue,l.directionalValue))}).next(()=>s)}wn(e,t){let r=new ss(hg);const i=this.cn(t,e);if(null==i)return r;const s=CL(t);if(null!=s){const o=e.data.field(s.fieldPath);if(QI(o))for(const l of o.arrayValue.values||[])r=r.add(new iy(t.indexId,e.key,this.rn(l),i))}else r=r.add(new iy(t.indexId,e.key,n5,i));return r}mn(e,t,r,i,s){tn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,d,h,g,v){const E=l.getIterator(),w=d.getIterator();let D=rb(E),P=rb(w);for(;D||P;){let L=!1,F=!1;if(D&&P){const U=h(D,P);U<0?F=!0:U>0&&(L=!0)}else null!=D?F=!0:L=!0;L?(g(P),P=rb(w)):F?(v(D),D=rb(E)):(D=rb(E),P=rb(w))}}(i,s,hg,l=>{o.push(this.gn(e,t,r,l))},l=>{o.push(this.yn(e,t,r,l))}),at.waitFor(o)}dn(e){let t=1;return pE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,l)=>hg(o,l)).filter((o,l,d)=>!l||0!==hg(o,d[l-1]));const i=[];i.push(e);for(const o of r){const l=hg(o,e),d=hg(o,t);if(0===l)i[0]=e.Ue();else if(l>0&&d<0)i.push(o),i.push(o.Ue());else if(d>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.pn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,n5,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,n5,[]]))}return s}pn(e,t){return hg(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(WH)}getMinOffset(e,t){return at.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||$n())).next(WH)}}function HH(n){return na(n,"collectionParents")}function fE(n){return na(n,"indexEntries")}function r5(n){return na(n,"indexConfiguration")}function pE(n){return na(n,"indexState")}function WH(n){Jn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;TL(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new cl(e.readTime,e.documentKey,t)}const $H={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mc{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mc(e,Mc.DEFAULT_COLLECTION_PERCENTILE,Mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let l=0;const d=r.Z({range:o},(g,v,E)=>(l++,E.delete()));s.push(d.next(()=>{Jn(1===l)}));const h=[];for(const g of t.mutations){const v=CH(e,g.key.path,t.batchId);s.push(i.delete(v)),h.push(g.key)}return at.waitFor(s).next(()=>h)}function i5(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $n();e=n.noDocument}return JSON.stringify(e).length}Mc.DEFAULT_COLLECTION_PERCENTILE=10,Mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mc.DEFAULT=new Mc(41943040,Mc.DEFAULT_COLLECTION_PERCENTILE,Mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mc.DISABLED=new Mc(-1,0,0);class s5{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){Jn(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new s5(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fg(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=hb(e),o=fg(e);return o.add({}).next(l=>{Jn("number"==typeof l);const d=new GL(l,t,r,i),h=function(E,w,D){const P=D.baseMutations.map(F=>lE(E.ie,F)),L=D.mutations.map(F=>lE(E.ie,F));return{userId:w,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:P,mutations:L}}(this.yt,this.userId,d),g=[];let v=new ss((E,w)=>Rr(E.canonicalString(),w.canonicalString()));for(const E of i){const w=CH(this.userId,E.key.path,l);v=v.add(E.key.path.popLast()),g.push(o.put(h)),g.push(s.put(w,mle))}return v.forEach(E=>{g.push(this.indexManager.addToCollectionParentIndex(e,E))}),e.addOnCommittedListener(()=>{this.In[l]=d.keys()}),at.waitFor(g).next(()=>d)})}lookupMutationBatch(e,t){return fg(e).get(t).next(r=>r?(Jn(r.userId===this.userId),ny(this.yt,r)):null)}Tn(e,t){return this.In[t]?at.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return fg(e).Z({index:"userMutationsIndex",range:i},(o,l,d)=>{l.userId===this.userId&&(Jn(l.batchId>=r),s=ny(this.yt,l)),d.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return fg(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fg(e).W("userMutationsIndex",t).next(r=>r.map(i=>ny(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=XD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return hb(e).Z({range:i},(o,l,d)=>{const[h,g,v]=o,E=Md(g);if(h===this.userId&&t.path.isEqual(E))return fg(e).get(v).next(w=>{if(!w)throw $n();Jn(w.userId===this.userId),s.push(ny(this.yt,w))});d.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ss(Rr);const i=[];return t.forEach(s=>{const o=XD(this.userId,s.path),l=IDBKeyRange.lowerBound(o),d=hb(e).Z({range:l},(h,g,v)=>{const[E,w,D]=h,P=Md(w);E===this.userId&&s.path.isEqual(P)?r=r.add(D):v.done()});i.push(d)}),at.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=XD(this.userId,r),o=IDBKeyRange.lowerBound(s);let l=new ss(Rr);return hb(e).Z({range:o},(d,h,g)=>{const[v,E,w]=d,D=Md(E);v===this.userId&&r.isPrefixOf(D)?D.length===i&&(l=l.add(w)):g.done()}).next(()=>this.En(e,l))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(fg(e).get(s).next(o=>{if(null===o)throw $n();Jn(o.userId===this.userId),r.push(ny(this.yt,o))}))}),at.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return qH(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),at.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return at.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return hb(e).Z({range:r},(s,o,l)=>{if(s[0]===this.userId){const d=Md(s[1]);i.push(d)}else l.done()}).next(()=>{Jn(0===i.length)})})}containsKey(e,t){return GH(e,this.userId,t)}Rn(e){return KH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GH(n,e,t){const r=XD(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return hb(n).Z({range:s,X:!0},(l,d,h)=>{const[g,v,E]=l;g===e&&v===i&&(o=!0),h.done()}).next(()=>o)}function fg(n){return na(n,"mutations")}function hb(n){return na(n,"documentMutations")}function KH(n){return na(n,"mutationQueues")}class sy{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new sy(0)}static vn(){return new sy(-1)}}class Hle{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new sy(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>sr.fromTimestamp(new Us(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fb(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Jn(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return fb(e).Z((o,l)=>{const d=uE(l);d.sequenceNumber<=t&&null===r.get(d.targetId)&&(i++,s.push(this.removeTargetData(e,d)))}).next(()=>at.waitFor(s)).next(()=>i)}forEachTarget(e,t){return fb(e).Z((r,i)=>{const s=uE(i);t(s)})}Vn(e){return ZH(e).get("targetGlobalKey").next(t=>(Jn(null!==t),t))}Sn(e,t){return ZH(e).put("targetGlobalKey",t)}Dn(e,t){return fb(e).put(PH(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Y_(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return fb(e).Z({range:i,index:"queryTargetsIndex"},(o,l,d)=>{const h=uE(l);JI(t,h.target)&&(s=h,d.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=pg(e);return t.forEach(o=>{const l=Ja(o.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,o))}),at.waitFor(i)}removeMatchingKeys(e,t,r){const i=pg(e);return at.forEach(t,s=>{const o=Ja(s.path);return at.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=pg(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=pg(e);let s=Zr();return i.Z({range:r,X:!0},(o,l,d)=>{const h=Md(o[1]),g=new yn(h);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=Ja(t.path),i=IDBKeyRange.bound([r],[l9(r)],!1,!0);let s=0;return pg(e).Z({index:"documentTargetsIndex",X:!0,range:i},([o,l],d,h)=>{0!==o&&(s++,h.done())}).next(()=>s>0)}ne(e,t){return fb(e).get(t).next(r=>r?uE(r):null)}}function fb(n){return na(n,"targets")}function ZH(n){return na(n,"targetGlobal")}function pg(n){return na(n,"targetDocuments")}function YH([n,e],[t,r]){const i=Rr(n,t);return 0===i?Rr(e,r):i}class Wle{constructor(e){this.xn=e,this.buffer=new ss(YH),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();YH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $le{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;tn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,mt.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ig(r)?tn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield rg(r)}yield t.Fn(3e5)}))}}class qle{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return at.resolve(ll.at);const r=new Wle(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tn("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve($H)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$H):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,s,o,l,d,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(tn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,t))).next(v=>(s=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),SL()<=wc.in.DEBUG&&tn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${i} in `+(l-o)+`ms\n\tRemoved ${s} targets in `+(d-l)+`ms\n\tRemoved ${v} documents in `+(h-d)+`ms\nTotal Duration: ${h-g}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}class Gle{constructor(e,t){this.db=e,this.garbageCollector=new qle(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return o5(e,r)}removeReference(e,t,r){return o5(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return o5(e,t)}Gn(e,t){return function(r,i){let s=!1;return KH(r).tt(o=>GH(r,o,i).next(l=>(l&&(s=!0),at.resolve(!l)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(o,l)=>{if(l<=t){const d=this.Gn(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,sr.min()),pg(e).delete([0,Ja(o.path)])))});i.push(d)}}).next(()=>at.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return o5(e,t)}Kn(e,t){const r=pg(e);let i,s=ll.at;return r.Z({index:"documentTargetsIndex"},([o,l],{path:d,sequenceNumber:h})=>{0===o?(s!==ll.at&&t(new yn(Md(i)),s),s=h,i=d):s=ll.at}).next(()=>{s!==ll.at&&t(new yn(Md(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function o5(n,e){return pg(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ja(e.path),sequenceNumber:r}));var r}class QH{constructor(){this.changes=new ug(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?at.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kle{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oy(e).put(r)}removeEntry(e,t,r){return oy(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],JD(s),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cs.newInvalidDocument(t);return oy(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gE(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cs.newInvalidDocument(t)};return oy(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gE(t))},(i,s)=>{r={document:this.jn(t,s),size:i5(s)}}).next(()=>r)}getEntries(e,t){let r=Dc();return this.zn(e,t,(i,s)=>{const o=this.jn(i,s);r=r.insert(i,o)}).next(()=>r)}Hn(e,t){let r=Dc(),i=new no(yn.comparator);return this.zn(e,t,(s,o)=>{const l=this.jn(s,o);r=r.insert(s,l),i=i.insert(s,i5(o))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return at.resolve();let i=new ss(tW);t.forEach(d=>i=i.add(d));const s=IDBKeyRange.bound(gE(i.first()),gE(i.last())),o=i.getIterator();let l=o.getNext();return oy(e).Z({index:"documentKeyIndex",range:s},(d,h,g)=>{const v=yn.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&tW(l,v)<0;)r(l,null),l=o.getNext();l&&l.isEqual(v)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?g.j(gE(l)):g.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),JD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oy(e).W(IDBKeyRange.bound(i,s,!0)).next(o=>{let l=Dc();for(const d of o){const h=this.jn(yn.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);l=l.insert(h.key,h)}return l})}getAllFromCollectionGroup(e,t,r,i){let s=Dc();const o=eW(t,r),l=eW(t,cl.max());return oy(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(d,h,g)=>{const v=this.jn(yn.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(v.key,v),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new Zle(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return JH(e).get("remoteDocumentGlobalKey").next(t=>(Jn(!!t),t))}Qn(e,t){return JH(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Ple(n,e){let t;if(e.document)t=vH(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=yn.fromSegments(e.noDocument.path),i=ty(e.noDocument.readTime);t=Cs.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $n();{const r=yn.fromSegments(e.unknownDocument.path),i=ty(e.unknownDocument.version);t=Cs.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Us(r[0],r[1]);return sr.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(sr.min()))return r}return Cs.newInvalidDocument(e)}}function XH(n){return new Kle(n)}class Zle extends QH{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ug(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ss((s,o)=>Rr(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,l.readTime)),o.isValidDocument()){const d=kH(this.Yn.yt,o);i=i.add(s.path.popLast());const h=i5(d);r+=h-l.size,t.push(this.Yn.addEntry(e,s,d))}else if(r-=l.size,this.trackRemovals){const d=kH(this.Yn.yt,o.convertToNoDocument(sr.min()));t.push(this.Yn.addEntry(e,s,d))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),at.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function JH(n){return na(n,"remoteDocumentGlobal")}function oy(n){return na(n,"remoteDocumentsV14")}function gE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eW(n,e){const t=e.documentKey.path.toArray();return[n,JD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tW(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Rr(t[s],r[s]),i)return i;return i=Rr(t.length,r.length),i||(i=Rr(t[t.length-2],r[r.length-2]),i||Rr(t[t.length-1],r[r.length-1]))}class Yle{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nW{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&nE(r.mutation,i,ul.empty(),Us.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zr()){const i=Td();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=rE();return s.forEach((l,d)=>{o=o.insert(l,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Td();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zr()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,i){let s=Dc();const o=iE(),l=iE();return t.forEach((d,h)=>{const g=r.get(h.key);i.has(h.key)&&(void 0===g||g.mutation instanceof Jh)?s=s.insert(h.key,h):void 0!==g&&(o.set(h.key,g.mutation.getFieldMask()),nE(g.mutation,h,g.mutation.getFieldMask(),Us.now()))}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((h,g)=>o.set(h,g)),t.forEach((h,g)=>{var v;return l.set(h,new Yle(g,null!==(v=o.get(h))&&void 0!==v?v:null))}),l))}recalculateAndSaveOverlays(e,t){const r=iE();let i=new no((o,l)=>o-l),s=Zr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(d=>{const h=t.get(d);if(null===h)return;let g=r.get(d)||ul.empty();g=l.applyToLocalView(h,g),r.set(d,g);const v=(i.get(l.batchId)||Zr()).add(d);i=i.insert(l.batchId,v)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const d=l.getNext(),h=d.key,g=d.value,v=cH();g.forEach(E=>{if(!s.has(E)){const w=J9(t.get(E),r.get(E));null!==w&&v.set(E,w),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,v))}return at.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return yn.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):at.resolve(Td());let l=-1,d=s;return o.next(h=>at.forEach(h,(g,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),s.get(g)?at.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,d,h,Zr())).next(g=>({batchId:l,changes:aH(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yn(t)).next(r=>{let i=rE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=rE();return this.indexManager.getCollectionParents(e,i).next(o=>at.forEach(o,l=>{const d=(h=t,g=l.child(i),new Xh(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,g;return this.getDocumentsMatchingCollectionQuery(e,d,r).next(h=>{h.forEach((g,v)=>{s=s.insert(g,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((l,d)=>{const h=d.getKey();null===i.get(h)&&(i=i.insert(h,Cs.newInvalidDocument(h)))});let o=rE();return i.forEach((l,d)=>{const h=s.get(l);void 0!==h&&nE(h.mutation,d,ul.empty(),Us.now()),jL(t,d)&&(o=o.insert(l,d))}),o})}}class Qle{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return at.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ho(r.createTime)}),at.resolve()}getNamedQuery(e,t){return at.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:YL(r.bundledQuery),readTime:ho(r.readTime)}),at.resolve();var r}}class Xle{constructor(){this.overlays=new no(yn.comparator),this.es=new Map}getOverlay(e,t){return at.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Td();return at.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),at.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),at.resolve()}getOverlaysForCollection(e,t,r){const i=Td(),s=t.length+1,o=new yn(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const d=l.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return at.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new no((h,g)=>h-g);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let g=s.get(h.largestBatchId);null===g&&(g=Td(),s=s.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const l=Td(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,g)=>l.set(h,g)),!(l.size()>=i)););return at.resolve(l)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZL(t,r));let s=this.es.get(t);void 0===s&&(s=Zr(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class rF{constructor(){this.ns=new ss(ra.ss),this.rs=new ss(ra.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ra(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ra(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new yn(new bi([])),r=new ra(t,e),i=new ra(t,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new yn(new bi([])),r=new ra(t,e),i=new ra(t,e+1);let s=Zr();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ra(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ra{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return yn.comparator(e.key,t.key)||Rr(e._s,t._s)}static os(e,t){return Rr(e._s,t._s)||yn.comparator(e.key,t.key)}}class Jle{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ss(ra.ss)}checkEmpty(e){return at.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const o=new GL(s,t,r,i);this.mutationQueue.push(o);for(const l of i)this.gs=this.gs.add(new ra(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return at.resolve(o)}lookupMutationBatch(e,t){return at.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return at.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ra(t,0),i=new ra(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const l=this.ys(o._s);s.push(l)}),at.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ss(Rr);return t.forEach(i=>{const s=new ra(i,0),o=new ra(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],l=>{r=r.add(l._s)})}),at.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;yn.isDocumentKey(s)||(s=s.child(""));const o=new ra(new yn(s),0);let l=new ss(Rr);return this.gs.forEachWhile(d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(d._s)),!0)},o),at.resolve(this.Is(l))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Jn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return at.forEach(t.mutations,i=>{const s=new ra(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ra(t,0),i=this.gs.firstAfterOrEqual(r);return at.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return at.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eue{constructor(e){this.Es=e,this.docs=new no(yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return at.resolve(r?r.document.mutableCopy():Cs.newInvalidDocument(t))}getEntries(e,t){let r=Dc();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cs.newInvalidDocument(i))}),at.resolve(r)}getAllFromCollection(e,t,r){let i=Dc();const s=new yn(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:l,value:{document:d}}=o.getNext();if(!t.isPrefixOf(l.path))break;l.path.length>t.length+1||TL(d9(d),r)<=0||(i=i.insert(d.key,d.mutableCopy()))}return at.resolve(i)}getAllFromCollectionGroup(e,t,r,i){$n()}As(e,t){return at.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tue(this)}getSize(e){return at.resolve(this.size)}}class tue extends QH{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),at.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class nue{constructor(e){this.persistence=e,this.Rs=new ug(t=>Y_(t),JI),this.lastRemoteSnapshotVersion=sr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new rF,this.targetCount=0,this.vs=sy.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),at.resolve()}getLastRemoteSnapshotVersion(e){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return at.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),at.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new sy(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,at.resolve()}updateTargetData(e,t){return this.Dn(t),at.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,at.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((o,l)=>{l.sequenceNumber<=t&&null===r.get(l.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),at.waitFor(s).next(()=>i)}getTargetCount(e){return at.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return at.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),at.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),at.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),at.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return at.resolve(r)}containsKey(e,t){return at.resolve(this.Ps.containsKey(t))}}class rW{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ll(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new nue(this),this.indexManager=new Vle,this.remoteDocumentCache=new eue(r=>this.referenceDelegate.xs(r)),this.yt=new NH(t),this.Ns=new Qle(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xle,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Jle(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){tn("MemoryPersistence","Starting transaction:",e);const i=new rue(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return at.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class rue extends f9{constructor(e){super(),this.currentSequenceNumber=e}}class a5{constructor(e){this.persistence=e,this.Fs=new rF,this.$s=null}static Bs(e){return new a5(e)}get Ls(){if(this.$s)return this.$s;throw $n()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),at.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),at.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),at.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.Ls,r=>{const i=yn.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,sr.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return at.or([()=>at.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class iue{constructor(e){this.yt=e}$(e,t,r,i){const s=new UD("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AH,{unique:!0}),l.createObjectStore("documentMutations"),iW(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=at.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),iW(e)),o=o.next(()=>function(l){const d=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sr.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,d){return d.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AH,{unique:!0});const g=d.store("mutations"),v=h.map(E=>g.put(E));return at.waitFor(v)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Us(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(o=o.next(()=>this.Gs(s))),r<8&&i>=8&&(o=o.next(()=>this.Qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.js(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const d=l.createObjectStore("documentOverlays",{keyPath:Tle});d.createIndex("collectionPathOverlayIndex",Dle,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",Mle,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const d=l.createObjectStore("remoteDocumentsV14",{keyPath:_le});d.createIndex("documentKeyIndex",yle),d.createIndex("collectionGroupIndex",vle)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.zs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:xle}).createIndex("sequenceNumberIndex",Sle,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Ale}).createIndex("documentKeyIndex",Cle,{unique:!1})}(e))),o}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=i5(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>at.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(l=>at.forEach(l,d=>{Jn(d.userId===s.userId);const h=ny(this.yt,d);return qH(e,s.userId,h).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,l)=>{const d=new bi(o),h=[0,Ja(d)];s.push(t.get(h).next(g=>g?at.resolve():t.put({targetId:0,path:Ja(d),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>at.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Ele});const r=t.store("collectionParents"),i=new nF,s=o=>{if(i.add(o)){const l=o.lastSegment(),d=o.popLast();return r.put({collectionId:l,parent:Ja(d)})}};return t.store("remoteDocuments").Z({X:!0},(o,l)=>{const d=new bi(o);return s(d.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([o,l,d],h)=>{const g=Md(l);return s(g.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=uE(i),o=PH(this.yt,s);return t.put(o)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const l=t.store("remoteDocumentsV14"),d=(h=o,h.document?new yn(bi.fromString(h.document.name).popFirst(5)):h.noDocument?yn.fromSegments(h.noDocument.path):h.unknownDocument?yn.fromSegments(h.unknownDocument.path):$n()).path.toArray();var h;const g={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(g))}).next(()=>at.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=XH(this.yt),s=new rW(a5.Bs,this.yt.ie);return r.W().next(o=>{const l=new Map;return o.forEach(d=>{var h;let g=null!==(h=l.get(d.userId))&&void 0!==h?h:Zr();ny(this.yt,d).keys().forEach(v=>g=g.add(v)),l.set(d.userId,g)}),at.forEach(l,(d,h)=>{const g=new ta(h),v=e5.re(this.yt,g),E=s.getIndexManager(g),w=s5.re(g,this.yt,E,s.referenceDelegate);return new nW(i,w,v,E).recalculateAndSaveOverlaysForDocumentKeys(new qL(t,ll.at),d).next()})})}}function iW(n){n.createObjectStore("targetDocuments",{keyPath:wle}).createIndex("documentTargetsIndex",Ile,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ble,{unique:!0}),n.createObjectStore("targetGlobal")}const iF="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sF{constructor(e,t,r,i,s,o,l,d,h,g,v=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=o,this.document=l,this.Js=h,this.Ys=g,this.Xs=v,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=E=>Promise.resolve(),!sF.C())throw new Gt(pt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gle(this,i),this.ii=t+"main",this.yt=new NH(d),this.ri=new wu(this.ii,this.Xs,new iue(this.yt)),this.Cs=new Hle(this.referenceDelegate,this.yt),this.remoteDocumentCache=XH(this.yt),this.Ns=new Rle,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===g&&uo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Gt(pt.FAILED_PRECONDITION,iF);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ll(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,mt.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,mt.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,mt.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>c5(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ig(e))return tn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return mE(e).get("owner").next(t=>at.resolve(this.mi(t)))}gi(e){return c5(e).delete(this.clientId)}yi(){var e=this;return(0,mt.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=na(r,"clientMetadata");return i.W().next(s=>{const o=e.Ii(s,18e5),l=s.filter(d=>-1===o.indexOf(d));return at.forEach(l,d=>i.delete(d.clientId)).next(()=>l)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?at.resolve(!0):mE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Gt(pt.FAILED_PRECONDITION,iF);return!1}}return!(!this.networkEnabled||!this.inForeground)||c5(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||o&&l)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&tn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,mt.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new qL(t,ll.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>c5(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return s5.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zle(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return e5.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){tn("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(o=this.Xs)?kle:14===o?MH:13===o?DH:12===o?Nle:11===o?TH:void $n();var o;let l;return this.ri.runTransaction(e,i,s,d=>(l=new qL(d,this.Ss?this.Ss.next():ll.at),"readwrite-primary"===t?this.fi(l).next(h=>!!h||this.di(l)).next(h=>{if(!h)throw uo(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Gt(pt.FAILED_PRECONDITION,h9);return r(l)}).next(h=>this.wi(l).next(()=>h)):this.Vi(l).next(()=>r(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}Vi(e){return mE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Gt(pt.FAILED_PRECONDITION,iF)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mE(e).put("owner",t)}static C(){return wu.C()}_i(e){const t=mE(e);return t.get("owner").next(r=>this.mi(r)?(tn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):at.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(uo(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,X.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return tn("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return uo("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){uo("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mE(n){return na(n,"owner")}function c5(n){return na(n,"clientMetadata")}function oF(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class aF{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Zr(),i=Zr();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new aF(e,t.fromCache,r,i)}}class sW{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(V9(t))return at.resolve(null);let r=Xa(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=qD(t,null,"F"),r=Xa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Zr(...s);return this.Ni.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(d=>{const h=this.Fi(t,l);return this.$i(t,h,o,d.readTime)?this.ki(e,qD(t,null,"F")):this.Bi(e,h,t,d)}))})))}Oi(e,t,r,i){return V9(t)||i.isEqual(sr.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,r,i)?this.Mi(e,t):(SL()<=wc.in.DEBUG&&tn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),UL(t)),this.Bi(e,o,t,u9(i,-1)))})}Fi(e,t){let r=new ss(W9(e));return t.forEach((i,s)=>{jL(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return SL()<=wc.in.DEBUG&&tn("QueryEngine","Using full collection scan to execute query:",UL(t)),this.Ni.getDocumentsMatchingQuery(e,t,cl.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class sue{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new no(Rr),this.Ui=new ug(s=>Y_(s),JI),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nW(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function oW(n,e,t,r){return new sue(n,e,t,r)}function aW(n,e){return cF.apply(this,arguments)}function cF(){return cF=(0,mt.Z)(function*(n,e){const t=In(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let d=Zr();for(const h of i){o.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of s){l.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next(h=>({ji:h,removedBatchIds:o,addedBatchIds:l}))})})}),cF.apply(this,arguments)}function oue(n,e){const t=In(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,l,d,h){const g=d.batch,v=g.keys();let E=at.resolve();return v.forEach(w=>{E=E.next(()=>h.getEntry(l,w)).next(D=>{const P=d.docVersions.get(w);Jn(null!==P),D.version.compareTo(P)<0&&(g.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),h.addEntry(D)))})}),E.next(()=>o.mutationQueue.removeMutationBatch(l,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Zr();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(l=l.add(o.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cW(n){const e=In(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function aue(n,e){const t=In(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const l=[];e.targetChanges.forEach((g,v)=>{const E=i.get(v);if(!E)return;l.push(t.Cs.removeMatchingKeys(s,g.removedDocuments,v).next(()=>t.Cs.addMatchingKeys(s,g.addedDocuments,v)));let w=E.withSequenceNumber(s.currentSequenceNumber);var D,P,L;e.targetMismatches.has(v)?w=w.withResumeToken(Vo.EMPTY_BYTE_STRING,sr.min()).withLastLimboFreeSnapshotVersion(sr.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(v,w),P=w,L=g,(0===(D=E).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0)&&l.push(t.Cs.updateTargetData(s,w))});let d=Dc(),h=Zr();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),l.push(lW(s,o,e.documentUpdates).next(g=>{d=g.Wi,h=g.zi})),!r.isEqual(sr.min())){const g=t.Cs.getLastRemoteSnapshotVersion(s).next(v=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(g)}return at.waitFor(l).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,h)).next(()=>d)}).then(s=>(t.qi=i,s))}function lW(n,e,t){let r=Zr(),i=Zr();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Dc();return t.forEach((l,d)=>{const h=s.get(l);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),d.isNoDocument()&&d.version.isEqual(sr.min())?(e.removeEntry(l,d.readTime),o=o.insert(l,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||0===d.version.compareTo(h.version)&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(l,d)):tn("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",d.version)}),{Wi:o,zi:i}})}function cue(n,e){const t=In(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pb(n,e){const t=In(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,at.resolve(i)):t.Cs.allocateTargetId(r).next(o=>(i=new dg(e,o,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function gb(n,e,t){return lF.apply(this,arguments)}function lF(){return lF=(0,mt.Z)(function*(n,e,t){const r=In(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ig(o))throw o;tn("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),lF.apply(this,arguments)}function l5(n,e,t){const r=In(n);let i=sr.min(),s=Zr();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,d,h){const g=In(l),v=g.Ui.get(h);return void 0!==v?at.resolve(g.qi.get(v)):g.Cs.getTargetData(d,h)}(r,o,Xa(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,l.targetId).next(d=>{s=d})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,t?i:sr.min(),t?s:Zr())).next(l=>(hW(r,H9(e),l),{documents:l,Hi:s})))}function uW(n,e){const t=In(n),r=In(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(o=>o?o.target:null))}function dW(n,e){const t=In(n),r=t.Ki.get(e)||sr.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,u9(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hW(t,e,i),i))}function hW(n,e,t){let r=n.Ki.get(e)||sr.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function uF(){return uF=(0,mt.Z)(function*(n,e,t,r){const i=In(n);let s=Zr(),o=Dc();for(const h of t){const g=e.Ji(h.metadata.name);h.document&&(s=s.add(g));const v=e.Yi(h);v.setReadTime(e.Xi(h.metadata.readTime)),o=o.insert(g,v)}const l=i.Gi.newChangeBuffer({trackRemovals:!0}),d=yield pb(i,(h=r,Xa(ib(bi.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>lW(h,l,o).next(g=>(l.apply(h),g)).next(g=>i.Cs.removeMatchingKeysForTargetId(h,d.targetId).next(()=>i.Cs.addMatchingKeys(h,s,d.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,g.Wi,g.zi)).next(()=>g.Wi)))}),uF.apply(this,arguments)}function uue(n,e){return dF.apply(this,arguments)}function dF(){return dF=(0,mt.Z)(function*(n,e,t=Zr()){const r=yield pb(n,Xa(YL(e.bundledQuery))),i=In(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ho(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ns.saveNamedQuery(s,e);const l=r.withResumeToken(Vo.EMPTY_BYTE_STRING,o);return i.qi=i.qi.insert(l.targetId,l),i.Cs.updateTargetData(s,l).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),dF.apply(this,arguments)}function fW(n,e){return`firestore_clients_${n}_${e}`}function pW(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hF(n,e){return`firestore_targets_${n}_${e}`}class u5{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Gt(i.error.code,i.error.message))),o?new u5(e,t,i.state,s):(uo("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _E{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Gt(r.error.code,r.error.message))),s?new _E(e,r.state,i):(uo("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class d5{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=YD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=_9(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new d5(e,s):(uo("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fF{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fF(t.clientId,t.onlineState):(uo("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pF{constructor(){this.activeTargetIds=YD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gF{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new no(Rr),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=fW(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new pF),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,mt.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(fW(e.persistenceKey,i));if(s){const o=d5.Zi(i,s);o&&(e.ur=e.ur.insert(o.clientId,o))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hF(this.persistenceKey,e));if(r){const i=_E.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hF(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return tn("SharedClientState","READ",e,t),t}setItem(e,t){tn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){tn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(tn("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void uo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,mt.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let o=ll.at;if(null!=s)try{const l=JSON.parse(s);Jn("number"==typeof l),o=l}catch(l){uo("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(r.newValue);i!==ll.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new u5(this.currentUser,e,t,r),s=pW(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=pW(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=hF(this.persistenceKey,e),s=new _E(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return d5.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return u5.Zi(new ta(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return _E.Zi(i,t)}yr(e){return fF.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,mt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);tn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),o=[],l=[];return s.forEach(d=>{i.has(d)||o.push(d)}),i.forEach(d=>{s.has(d)||l.push(d)}),this.syncEngine.Br(o,l).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=YD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class gW{constructor(){this.Lr=new pF,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new pF,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class due{Ur(e){}shutdown(){}}class mW{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){tn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){tn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const hue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fue{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class pue extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const o=this.ho(e,t);tn("RestConnection","Sending: ",o,r);const l={};return this.lo(l,i,s),this.fo(e,o,l,r).then(d=>(tn("RestConnection","Received: ",d),d),d=>{throw H_("RestConnection",`${e} failed with error: `,d,"url: ",o,"request:",r),d})}_o(e,t,r,i,s,o){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${hue[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,o)=>{const l=new fce;l.setWithCredentials(!0),l.listenOnce(uce.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xL.NO_ERROR:const h=l.getResponseJson();tn("Connection","XHR received:",JSON.stringify(h)),s(h);break;case xL.TIMEOUT:tn("Connection",'RPC "'+e+'" timed out'),o(new Gt(pt.DEADLINE_EXCEEDED,"Request time out"));break;case xL.HTTP_ERROR:const g=l.getStatus();if(tn("Connection",'RPC "'+e+'" failed with status:',g,"response text:",l.getResponseText()),g>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v?.error;if(E&&E.status&&E.message){const w=function(D){const P=D.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(P)>=0?P:pt.UNKNOWN}(E.status);o(new Gt(w,E.message))}else o(new Gt(pt.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Gt(pt.UNAVAILABLE,"Connection failed."));break;default:$n()}}finally{tn("Connection",'RPC "'+e+'" completed.')}});const d=JSON.stringify(i);l.send(t,"POST",d,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cce(),o=lce(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new hce({})),this.lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=i.join("");tn("Connection","Creating WebChannel: "+d,l);const h=s.createWebChannel(d,l);let g=!1,v=!1;const E=new fue({Hr:D=>{v?tn("Connection","Not sending because WebChannel is closed:",D):(g||(tn("Connection","Opening WebChannel transport."),h.open(),g=!0),tn("Connection","WebChannel sending:",D),h.send(D))},Jr:()=>h.close()}),w=(D,P,L)=>{D.listen(P,F=>{try{L(F)}catch(U){setTimeout(()=>{throw U},0)}})};return w(h,LD.EventType.OPEN,()=>{v||tn("Connection","WebChannel transport opened.")}),w(h,LD.EventType.CLOSE,()=>{v||(v=!0,tn("Connection","WebChannel transport closed"),E.io())}),w(h,LD.EventType.ERROR,D=>{v||(v=!0,H_("Connection","WebChannel transport errored:",D),E.io(new Gt(pt.UNAVAILABLE,"The operation could not be completed")))}),w(h,LD.EventType.MESSAGE,D=>{var P;if(!v){const L=D.data[0];Jn(!!L);const F=L,U=F.error||(null===(P=F[0])||void 0===P?void 0:P.error);if(U){tn("Connection","WebChannel received error:",U);const K=U.status;let J=function(_e){const fe=bo[_e];if(void 0!==fe)return sH(fe)}(K),ie=U.message;void 0===J&&(J=pt.INTERNAL,ie="Unknown error status: "+K+" with message "+U.message),v=!0,E.io(new Gt(J,ie)),h.close()}else tn("Connection","WebChannel received:",L),E.ro(L)}}),w(o,dce.STAT_EVENT,D=>{D.stat===i9.PROXY?tn("Connection","Detected buffering proxy"):D.stat===i9.NOPROXY&&tn("Connection","Detected no buffering proxy")}),setTimeout(()=>{E.so()},0),E}}function _W(){return typeof window<"u"?window:null}function h5(){return typeof document<"u"?document:null}function yE(n){return new sle(n,!0)}class mF{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&tn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yW{constructor(e,t,r,i,s,o,l,d){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new mF(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,mt.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,mt.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,mt.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pt.RESOURCE_EXHAUSTED?(uo(t.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===pt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Gt(pt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,mt.Z)(function*(){e.state=0,e.start()}))}Qo(e){return tn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(tn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gue extends yW{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function cle(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:$n(),i=e.targetChange.targetIds||[],s=function(d,h){return d.wt?(Jn(void 0===h||"string"==typeof h),Vo.fromBase64String(h||"")):(Jn(void 0===h||h instanceof Uint8Array),Vo.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=void 0===d.code?pt.UNKNOWN:sH(d.code);return new Gt(h,d.message||"")}(o);t=new uH(r,i,s,l||null)}else if("documentChange"in e){const r=e.documentChange,i=Dd(n,r.document.name),s=ho(r.document.updateTime),o=r.document.createTime?ho(r.document.createTime):sr.min(),l=new wa({mapValue:{fields:r.document.fields}}),d=Cs.newFoundDocument(i,s,o,l);t=new QD(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Dd(n,r.document),s=r.readTime?ho(r.readTime):sr.min(),o=Cs.newNoDocument(i,s);t=new QD([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Dd(n,r.document);t=new QD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return $n();{const r=e.filter,s=new Yce(r.count||0);t=new lH(r.targetId,s)}}var d;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return sr.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?sr.min():s.readTime?ho(s.readTime):sr.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=cE(this.yt),t.addTarget=function(i,s){let o;const l=s.target;return o=HD(l)?{documents:bH(i,l)}:{query:$L(i,l)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=pH(i,s.resumeToken):s.snapshotVersion.compareTo(sr.min())>0&&(o.readTime=lb(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=function ule(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $n()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=cE(this.yt),t.removeTarget=e,this.Bo(t)}}class mue extends yW{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Jn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function lle(n,e){return n&&n.length>0?(Jn(void 0!==e),n.map(t=>function(r,i){let s=ho(r.updateTime?r.updateTime:i);return s.isEqual(sr.min())&&(s=ho(i)),new Gce(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ho(e.commitTime);return this.listener.Zo(r,t)}return Jn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=cE(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lE(this.yt,r))};this.Bo(t)}}class _ue extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Gt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Gt(pt.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Gt(pt.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class vue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(uo(t),this.ou=!1):tn("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class bue{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(l=>{r.enqueueAndForget((0,mt.Z)(function*(){var d;ef(o)&&(tn("RemoteStore","Restarting streams for network reachability change."),yield(d=(0,mt.Z)(function*(h){const g=In(h);g._u.add(4),yield mb(g),g.gu.set("Unknown"),g._u.delete(4),yield vE(g)}),function(h){return d.apply(this,arguments)})(o))}))}),this.gu=new vue(r,i)}}function vE(n){return yF.apply(this,arguments)}function yF(){return yF=(0,mt.Z)(function*(n){if(ef(n))for(const e of n.wu)yield e(!0)}),yF.apply(this,arguments)}function mb(n){return vF.apply(this,arguments)}function vF(){return vF=(0,mt.Z)(function*(n){for(const e of n.wu)yield e(!1)}),vF.apply(this,arguments)}function f5(n,e){const t=In(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),IF(t)?wF(t):yb(t).ko()&&bF(t,e))}function bE(n,e){const t=In(n),r=yb(t);t.du.delete(e),r.ko()&&vW(t,e),0===t.du.size&&(r.ko()?r.Fo():ef(t)&&t.gu.set("Unknown"))}function bF(n,e){n.yu.Ot(e.targetId),yb(n).zo(e)}function vW(n,e){n.yu.Ot(e),yb(n).Ho(e)}function wF(n){n.yu=new tle({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),yb(n).start(),n.gu.uu()}function IF(n){return ef(n)&&!yb(n).No()&&n.du.size>0}function ef(n){return 0===In(n)._u.size}function bW(n){n.yu=void 0}function wue(n){return EF.apply(this,arguments)}function EF(){return EF=(0,mt.Z)(function*(n){n.du.forEach((e,t)=>{bF(n,e)})}),EF.apply(this,arguments)}function Iue(n,e){return xF.apply(this,arguments)}function xF(){return xF=(0,mt.Z)(function*(n,e){bW(n),IF(n)?(n.gu.hu(e),wF(n)):n.gu.set("Unknown")}),xF.apply(this,arguments)}function Eue(n,e,t){return SF.apply(this,arguments)}function SF(){return SF=(0,mt.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof uH&&2===e.state&&e.cause)try{yield(r=(0,mt.Z)(function*(i,s){const o=s.cause;for(const l of s.targetIds)i.du.has(l)&&(yield i.remoteSyncer.rejectListen(l,o),i.du.delete(l),i.yu.removeTarget(l))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){tn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield p5(n,r)}else if(e instanceof QD?n.yu.Kt(e):e instanceof lH?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(sr.min()))try{const r=yield cW(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.du.get(d);h&&i.du.set(d,h.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach(l=>{const d=i.du.get(l);if(!d)return;i.du.set(l,d.withResumeToken(Vo.EMPTY_BYTE_STRING,d.snapshotVersion)),vW(i,l);const h=new dg(d.target,l,1,d.sequenceNumber);bF(i,h)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){tn("RemoteStore","Failed to raise snapshot:",r),yield p5(n,r)}var r}),SF.apply(this,arguments)}function p5(n,e,t){return AF.apply(this,arguments)}function AF(){return AF=(0,mt.Z)(function*(n,e,t){if(!ig(e))throw e;n._u.add(1),yield mb(n),n.gu.set("Offline"),t||(t=()=>cW(n.localStore)),n.asyncQueue.enqueueRetryable((0,mt.Z)(function*(){tn("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield vE(n)}))}),AF.apply(this,arguments)}function wW(n,e){return e().catch(t=>p5(n,t,e))}function _b(n){return CF.apply(this,arguments)}function CF(){return CF=(0,mt.Z)(function*(n){const e=In(n),t=gg(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;xue(e);)try{const i=yield cue(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,Sue(e,i)}catch(i){yield p5(e,i)}IW(e)&&EW(e)}),CF.apply(this,arguments)}function xue(n){return ef(n)&&n.fu.length<10}function Sue(n,e){n.fu.push(e);const t=gg(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function IW(n){return ef(n)&&!gg(n).No()&&n.fu.length>0}function EW(n){gg(n).start()}function Aue(n){return TF.apply(this,arguments)}function TF(){return TF=(0,mt.Z)(function*(n){gg(n).eu()}),TF.apply(this,arguments)}function Cue(n){return DF.apply(this,arguments)}function DF(){return DF=(0,mt.Z)(function*(n){const e=gg(n);for(const t of n.fu)e.Xo(t.mutations)}),DF.apply(this,arguments)}function Tue(n,e,t){return MF.apply(this,arguments)}function MF(){return MF=(0,mt.Z)(function*(n,e,t){const r=n.fu.shift(),i=KL.from(r,e,t);yield wW(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _b(n)}),MF.apply(this,arguments)}function Due(n,e){return NF.apply(this,arguments)}function NF(){return NF=(0,mt.Z)(function*(n,e){var t;e&&gg(n).Yo&&(yield(t=(0,mt.Z)(function*(r,i){if(iH(s=i.code)&&s!==pt.ABORTED){const o=r.fu.shift();gg(r).Mo(),yield wW(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _b(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),IW(n)&&EW(n)}),NF.apply(this,arguments)}function xW(n,e){return kF.apply(this,arguments)}function kF(){return kF=(0,mt.Z)(function*(n,e){const t=In(n);t.asyncQueue.verifyOperationInProgress(),tn("RemoteStore","RemoteStore received new credentials");const r=ef(t);t._u.add(3),yield mb(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield vE(t)}),kF.apply(this,arguments)}function PF(n,e){return RF.apply(this,arguments)}function RF(){return RF=(0,mt.Z)(function*(n,e){const t=In(n);e?(t._u.delete(2),yield vE(t)):e||(t._u.add(2),yield mb(t),t.gu.set("Unknown"))}),RF.apply(this,arguments)}function yb(n){return n.pu||(n.pu=function(e,t,r){const i=In(e);return i.su(),new gue(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:wue.bind(null,n),Zr:Iue.bind(null,n),Wo:Eue.bind(null,n)}),n.wu.push(function(){var e=(0,mt.Z)(function*(t){t?(n.pu.Mo(),IF(n)?wF(n):n.gu.set("Unknown")):(yield n.pu.stop(),bW(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function gg(n){return n.Iu||(n.Iu=function(e,t,r){const i=In(e);return i.su(),new mue(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:Aue.bind(null,n),Zr:Due.bind(null,n),tu:Cue.bind(null,n),Zo:Tue.bind(null,n)}),n.wu.push(function(){var e=(0,mt.Z)(function*(t){t?(n.Iu.Mo(),yield _b(n)):(yield n.Iu.stop(),n.fu.length>0&&(tn("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class OF{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,l=new OF(e,t,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vb(n,e){if(uo("AsyncQueue",`${e}: ${n}`),ig(n))return new Gt(pt.UNAVAILABLE,`${e}: ${n}`);throw n}class bb{constructor(e){this.comparator=e?(t,r)=>e(t,r)||yn.comparator(t.key,r.key):(t,r)=>yn.comparator(t.key,r.key),this.keyedMap=rE(),this.sortedSet=new no(this.comparator)}static emptySet(e){return new bb(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bb)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new bb;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class SW{constructor(){this.Tu=new no(yn.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):$n():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wb{constructor(e,t,r,i,s,o,l,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new wb(e,t,bb.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Mue{constructor(){this.Au=void 0,this.listeners=[]}}class Nue{constructor(){this.queries=new ug(e=>z9(e),eE),this.onlineState="Unknown",this.Ru=new Set}}function LF(n,e){return FF.apply(this,arguments)}function FF(){return FF=(0,mt.Z)(function*(n,e){const t=In(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Mue),i)try{s.Au=yield t.onListen(r)}catch(o){const l=vb(o,`Initialization of query '${UL(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&jF(t)}),FF.apply(this,arguments)}function BF(n,e){return UF.apply(this,arguments)}function UF(){return UF=(0,mt.Z)(function*(n,e){const t=In(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),UF.apply(this,arguments)}function kue(n,e){const t=In(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const l of o.listeners)l.Pu(i)&&(r=!0);o.Au=i}}r&&jF(t)}function Pue(n,e,t){const r=In(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function jF(n){n.Ru.forEach(e=>{e.next()})}class VF{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wb(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=wb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Rue{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class AW{constructor(e){this.yt=e}Ji(e){return Dd(this.yt,e)}Yi(e){return e.metadata.exists?vH(this.yt,e.document,!1):Cs.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ho(e)}}class Oue{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CW(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=bi.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new AW(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const o of i.metadata.queries){const l=(t.get(o)||Zr()).add(s);t.set(o,l)}}return t}complete(){var e=this;return(0,mt.Z)(function*(){const t=yield function lue(n,e,t,r){return uF.apply(this,arguments)}(e.localStore,new AW(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield uue(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function CW(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class TW{constructor(e){this.key=e}}class DW{constructor(e){this.key=e}}class MW{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Zr(),this.mutatedKeys=Zr(),this.Gu=W9(e),this.Qu=new bb(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new SW,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,l=!1;const d="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,h="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,v)=>{const E=i.get(g),w=jL(this.query,v)?v:null,D=!!E&&this.mutatedKeys.has(E.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let L=!1;E&&w?E.data.isEqual(w.data)?D!==P&&(r.track({type:3,doc:w}),L=!0):this.Hu(E,w)||(r.track({type:2,doc:w}),L=!0,(d&&this.Gu(w,d)>0||h&&this.Gu(w,h)<0)&&(l=!0)):!E&&w?(r.track({type:0,doc:w}),L=!0):E&&!w&&(r.track({type:1,doc:E}),L=!0,(d||h)&&(l=!0)),L&&(w?(o=o.add(w),s=P?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Qu:o,zu:r,$i:l,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((h,g)=>function(v,E){const w=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $n()}};return w(v)-w(E)}(h.type,g.type)||this.Gu(h.doc,g.doc)),this.Ju(r);const o=t?this.Yu():[],l=0===this.Ku.size&&this.current?1:0,d=l!==this.Uu;return this.Uu=l,0!==s.length||d?{snapshot:new wb(this.query,e.Qu,i,s,e.mutatedKeys,0===l,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new SW,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Zr(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new DW(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new TW(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Zr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return wb.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Lue{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Fue{constructor(e){this.key=e,this.nc=!1}}class Bue{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new ug(l=>z9(l),eE),this.rc=new Map,this.oc=new Set,this.uc=new no(yn.comparator),this.cc=new Map,this.ac=new rF,this.hc={},this.lc=new Map,this.fc=sy.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Uue(n,e){return zF.apply(this,arguments)}function zF(){return zF=(0,mt.Z)(function*(n,e){const t=h3(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=yield pb(t.localStore,Xa(e));t.isPrimaryClient&&f5(t.remoteStore,o);const l=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield HF(t,e,r,"current"===l,o.resumeToken)}return i}),zF.apply(this,arguments)}function HF(n,e,t,r,i){return WF.apply(this,arguments)}function WF(){return WF=(0,mt.Z)(function*(n,e,t,r,i){n._c=(v,E,w)=>{return(D=(0,mt.Z)(function*(P,L,F,U){let K=L.view.Wu(F);K.$i&&(K=yield l5(P.localStore,L.query,!1).then(({documents:_e})=>L.view.Wu(_e,K)));const J=U&&U.targetChanges.get(L.targetId),ie=L.view.applyChanges(K,P.isPrimaryClient,J);return e3(P,L.targetId,ie.Xu),ie.snapshot}),function(P,L,F,U){return D.apply(this,arguments)})(n,v,E,w);var D};const s=yield l5(n.localStore,e,!0),o=new MW(e,s.Hi),l=o.Wu(s.documents),d=oE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),h=o.applyChanges(l,n.isPrimaryClient,d);e3(n,t,h.Xu);const g=new Lue(e,t,o);return n.ic.set(e,g),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),h.snapshot}),WF.apply(this,arguments)}function jue(n,e){return $F.apply(this,arguments)}function $F(){return $F=(0,mt.Z)(function*(n,e){const t=In(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!eE(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gb(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bE(t.remoteStore,r.targetId),Ib(t,r.targetId)}).catch(rg))):(Ib(t,r.targetId),yield gb(t.localStore,r.targetId,!0))}),$F.apply(this,arguments)}function qF(){return qF=(0,mt.Z)(function*(n,e,t){const r=f3(n);try{const i=yield function(s,o){const l=In(s),d=Us.now(),h=o.reduce((E,w)=>E.add(w.key),Zr());let g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let w=Dc(),D=Zr();return l.Gi.getEntries(E,h).next(P=>{w=P,w.forEach((L,F)=>{F.isValidDocument()||(D=D.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,w)).next(P=>{g=P;const L=[];for(const F of o){const U=Zce(F,g.get(F.key).overlayedDocument);null!=U&&L.push(new Jh(F.key,U,F9(U.value.mapValue),js.exists(!0)))}return l.mutationQueue.addMutationBatch(E,d,L,o)}).next(P=>{v=P;const L=P.applyToLocalDocumentSet(g,D);return l.documentOverlayCache.saveOverlays(E,P.batchId,L)})}).then(()=>({batchId:v.batchId,changes:aH(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let d=s.hc[s.currentUser.toKey()];d||(d=new no(Rr)),d=d.insert(o,l),s.hc[s.currentUser.toKey()]=d}(r,i.batchId,t),yield tf(r,i.changes),yield _b(r.remoteStore)}catch(i){const s=vb(i,"Failed to persist write");t.reject(s)}}),qF.apply(this,arguments)}function NW(n,e){return GF.apply(this,arguments)}function GF(){return GF=(0,mt.Z)(function*(n,e){const t=In(n);try{const r=yield aue(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.cc.get(s);o&&(Jn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?Jn(o.nc):i.removedDocuments.size>0&&(Jn(o.nc),o.nc=!1))}),yield tf(t,r,e)}catch(r){yield rg(r)}}),GF.apply(this,arguments)}function kW(n,e,t){const r=In(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,o)=>{const l=o.view.bu(e);l.snapshot&&i.push(l.snapshot)}),function(s,o){const l=In(s);l.onlineState=o;let d=!1;l.queries.forEach((h,g)=>{for(const v of g.listeners)v.bu(o)&&(d=!0)}),d&&jF(l)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zue(n,e,t){return KF.apply(this,arguments)}function KF(){return KF=(0,mt.Z)(function*(n,e,t){const r=In(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new no(yn.comparator);o=o.insert(s,Cs.newNoDocument(s,sr.min()));const l=Zr().add(s),d=new sE(sr.min(),new Map,new ss(Rr),o,l);yield NW(r,d),r.uc=r.uc.remove(s),r.cc.delete(e),t3(r)}else yield gb(r.localStore,e,!1).then(()=>Ib(r,e,t)).catch(rg)}),KF.apply(this,arguments)}function Hue(n,e){return ZF.apply(this,arguments)}function ZF(){return ZF=(0,mt.Z)(function*(n,e){const t=In(n),r=e.batch.batchId;try{const i=yield oue(t.localStore,e);JF(t,r,null),XF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tf(t,i)}catch(i){yield rg(i)}}),ZF.apply(this,arguments)}function Wue(n,e,t){return YF.apply(this,arguments)}function YF(){return YF=(0,mt.Z)(function*(n,e,t){const r=In(n);try{const i=yield function(s,o){const l=In(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,o).next(g=>(Jn(null!==g),h=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(r.localStore,e);JF(r,e,t),XF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tf(r,i)}catch(i){yield rg(i)}}),YF.apply(this,arguments)}function QF(){return QF=(0,mt.Z)(function*(n,e){const t=In(n);ef(t.remoteStore)||tn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const o=In(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=vb(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),QF.apply(this,arguments)}function XF(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function JF(n,e,t){const r=In(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Ib(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||PW(n,r)})}function PW(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(bE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),t3(n))}function e3(n,e,t){for(const r of t)r instanceof TW?(n.ac.addReference(r.key,e),que(n,r)):r instanceof DW?(tn("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||PW(n,r.key)):$n()}function que(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(tn("SyncEngine","New document in limbo: "+t),n.oc.add(r),t3(n))}function t3(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new yn(bi.fromString(e)),r=n.fc.next();n.cc.set(r,new Fue(t)),n.uc=n.uc.insert(t,r),f5(n.remoteStore,new dg(Xa(ib(t.path)),r,2,ll.at))}}function tf(n,e,t){return n3.apply(this,arguments)}function n3(){return n3=(0,mt.Z)(function*(n,e,t){const r=In(n),i=[],s=[],o=[];var l;r.ic.isEmpty()||(r.ic.forEach((l,d)=>{o.push(r._c(d,e,t).then(h=>{if((h||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(d.targetId,h?.fromCache?"not-current":"current"),h){i.push(h);const g=aF.Ci(d.targetId,h);s.push(g)}}))}),yield Promise.all(o),r.sc.Wo(i),yield(l=(0,mt.Z)(function*(d,h){const g=In(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>at.forEach(h,E=>at.forEach(E.Si,w=>g.persistence.referenceDelegate.addReference(v,E.targetId,w)).next(()=>at.forEach(E.Di,w=>g.persistence.referenceDelegate.removeReference(v,E.targetId,w)))))}catch(v){if(!ig(v))throw v;tn("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const E=v.targetId;if(!v.fromCache){const w=g.qi.get(E),P=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);g.qi=g.qi.insert(E,P)}}}),function(d,h){return l.apply(this,arguments)})(r.localStore,s))}),n3.apply(this,arguments)}function Gue(n,e){return r3.apply(this,arguments)}function r3(){return r3=(0,mt.Z)(function*(n,e){const t=In(n);if(!t.currentUser.isEqual(e)){tn("SyncEngine","User change. New user:",e.toKey());const r=yield aW(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(o=>{o.forEach(l=>{l.reject(new Gt(pt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tf(t,r.ji)}var i}),r3.apply(this,arguments)}function Kue(n,e){const t=In(n),r=t.cc.get(e);if(r&&r.nc)return Zr().add(r.key);{let i=Zr();const s=t.rc.get(e);if(!s)return i;for(const o of s){const l=t.ic.get(o);i=i.unionWith(l.view.ju)}return i}}function Zue(n,e){return s3.apply(this,arguments)}function s3(){return s3=(0,mt.Z)(function*(n,e){const t=In(n),r=yield l5(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&e3(t,e.targetId,i.Xu),i}),s3.apply(this,arguments)}function Yue(n,e){return o3.apply(this,arguments)}function o3(){return o3=(0,mt.Z)(function*(n,e){const t=In(n);return dW(t.localStore,e).then(r=>tf(t,r))}),o3.apply(this,arguments)}function Que(n,e,t,r){return a3.apply(this,arguments)}function a3(){return a3=(0,mt.Z)(function*(n,e,t,r){const i=In(n),s=yield function(o,l){const d=In(o),h=In(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Tn(g,l).next(v=>v?d.localDocuments.getDocuments(g,v):at.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield _b(i.remoteStore):"acknowledged"===t||"rejected"===t?(JF(i,e,r||null),XF(i,e),l=e,In(In(i.localStore).mutationQueue).An(l)):$n(),yield tf(i,s)):tn("SyncEngine","Cannot apply mutation batch with id: "+e)}),a3.apply(this,arguments)}function c3(){return c3=(0,mt.Z)(function*(n,e){const t=In(n);if(h3(t),f3(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield RW(t,r.toArray());t.dc=!0,yield PF(t.remoteStore,!0);for(const s of i)f5(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ib(t,o),gb(t.localStore,o,!0))),bE(t.remoteStore,o)}),yield i,yield RW(t,r),function(s){const o=In(s);o.cc.forEach((l,d)=>{bE(o.remoteStore,d)}),o.ac.fs(),o.cc=new Map,o.uc=new no(yn.comparator)}(t),t.dc=!1,yield PF(t.remoteStore,!1)}}),c3.apply(this,arguments)}function RW(n,e,t){return l3.apply(this,arguments)}function l3(){return l3=(0,mt.Z)(function*(n,e,t){const r=In(n),i=[],s=[];for(const o of e){let l;const d=r.rc.get(o);if(d&&0!==d.length){l=yield pb(r.localStore,Xa(d[0]));for(const h of d){const g=r.ic.get(h),v=yield Zue(r,g);v.snapshot&&s.push(v.snapshot)}}else{const h=yield uW(r.localStore,o);l=yield pb(r.localStore,h),yield HF(r,OW(h),o,!1,l.resumeToken)}i.push(l)}return r.sc.Wo(s),i}),l3.apply(this,arguments)}function OW(n){return j9(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Jue(n){const e=In(n);return In(In(e.localStore).persistence).vi()}function ede(n,e,t,r){return u3.apply(this,arguments)}function u3(){return u3=(0,mt.Z)(function*(n,e,t,r){const i=In(n);if(i.dc)return void tn("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield dW(i.localStore,H9(s[0])),l=sE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vo.EMPTY_BYTE_STRING);yield tf(i,o,l);break}case"rejected":yield gb(i.localStore,e,!0),Ib(i,e,r);break;default:$n()}}),u3.apply(this,arguments)}function tde(n,e,t){return d3.apply(this,arguments)}function d3(){return d3=(0,mt.Z)(function*(n,e,t){const r=h3(n);if(r.dc){for(const i of e){if(r.rc.has(i)){tn("SyncEngine","Adding an already active target "+i);continue}const s=yield uW(r.localStore,i),o=yield pb(r.localStore,s);yield HF(r,OW(s),o.targetId,!1,o.resumeToken),f5(r.remoteStore,o)}for(const i of t)r.rc.has(i)&&(yield gb(r.localStore,i,!1).then(()=>{bE(r.remoteStore,i),Ib(r,i)}).catch(rg))}}),d3.apply(this,arguments)}function h3(n){const e=In(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zue.bind(null,e),e.sc.Wo=kue.bind(null,e.eventManager),e.sc.wc=Pue.bind(null,e.eventManager),e}function f3(n){const e=In(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wue.bind(null,e),e}class LW{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,mt.Z)(function*(){t.yt=yE(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return oW(this.persistence,new sW,e.initialUser,this.yt)}yc(e){return new rW(a5.Bs,this.yt)}gc(e){return new gW}terminate(){var e=this;return(0,mt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FW extends LW{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,mt.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield f3(r.Ac.syncEngine),yield _b(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return oW(this.persistence,new sW,e.initialUser,this.yt)}Tc(e,t){return new $le(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Dce(t,this.persistence);return new Tce(e.asyncQueue,r)}yc(e){const t=oF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Mc.withCacheSize(this.cacheSizeBytes):Mc.DEFAULT;return new sF(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_W(),h5(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gW}}class rde extends FW{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,mt.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof gF&&(r.sharedClientState.syncEngine={Fr:Que.bind(null,i),$r:ede.bind(null,i),Br:tde.bind(null,i),vi:Jue.bind(null,i),Mr:Yue.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,mt.Z)(function*(o){yield function Xue(n,e){return c3.apply(this,arguments)}(r.Ac.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}gc(e){const t=_W();if(!gF.C(t))throw new Gt(pt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gF(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class p3{initialize(e,t){var r=this;return(0,mt.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kW(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Gue.bind(null,r.syncEngine),yield PF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Nue}createDatastore(e){const t=yE(e.databaseInfo.databaseId),r=new pue(e.databaseInfo);return new _ue(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=l=>kW(this.syncEngine,l,0),o=mW.C()?new mW:new due,new bue(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,l,d,h){const g=new Bue(r,i,s,o,l,d);return h&&(g.dc=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(){var e=(0,mt.Z)(function*(t){const r=In(t);tn("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield mb(r),r.mu.shutdown(),r.gu.set("Unknown")});return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}function g3(n,e,t){if(!t)throw new Gt(pt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BW(n,e,t,r){if(!0===e&&!0===r)throw new Gt(pt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UW(n){if(!yn.isDocumentKey(n))throw new Gt(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jW(n){if(yn.isDocumentKey(n))throw new Gt(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function g5(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":$n()}function pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Gt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=g5(n);throw new Gt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VW(n,e){if(e<=0)throw new Gt(pt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const zW=new Map;class HW{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Gt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Gt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,BW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HW({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Gt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Gt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HW(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mce;switch(t.type){case"gapi":return new bce(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Gt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zW.get(e);t&&(tn("ComponentProvider","Removing Datastore"),zW.delete(e),t.terminate())}(this),Promise.resolve()}}function WW(n,e,t,r={}){var i;const s=(n=pi(n,wE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&H_("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,l;if("string"==typeof r.mockUserToken)o=r.mockUserToken,l=ta.MOCK_USER;else{o=(0,X.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Gt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ta(d)}n._authCredentials=new _ce(new o9(o,l))}}class Ts{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ts(this.firestore,e,this._key)}}class Ia{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class Nd extends Ia{constructor(e,t,r){super(e,t,ib(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ts(this.firestore,null,new yn(e))}withConverter(e){return new Nd(this.firestore,e,this._path)}}function $W(n,e,...t){if(n=(0,X.m9)(n),g3("collection","path",e),n instanceof wE){const r=bi.fromString(e,...t);return jW(r),new Nd(n,null,r)}{if(!(n instanceof Ts||n instanceof Nd))throw new Gt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bi.fromString(e,...t));return jW(r),new Nd(n.firestore,null,r)}}function m5(n,e,...t){if(n=(0,X.m9)(n),1===arguments.length&&(e=c9.R()),g3("doc","path",e),n instanceof wE){const r=bi.fromString(e,...t);return UW(r),new Ts(n,null,new yn(r))}{if(!(n instanceof Ts||n instanceof Nd))throw new Gt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bi.fromString(e,...t));return UW(r),new Ts(n.firestore,n instanceof Nd?n.converter:null,new yn(r))}}function qW(n,e){return n=(0,X.m9)(n),e=(0,X.m9)(e),(n instanceof Ts||n instanceof Nd)&&(e instanceof Ts||e instanceof Nd)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function m3(n,e){return n=(0,X.m9)(n),e=(0,X.m9)(e),n instanceof Ia&&e instanceof Ia&&n.firestore===e.firestore&&eE(n._query,e._query)&&n.converter===e.converter}function GW(n,e=10240){let t=0;return{read:()=>(0,mt.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,mt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _5{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):uo("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sde{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new jo,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,mt.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,mt.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,mt.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new Rue(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,mt.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,mt.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,mt.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class cde{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,mt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Gt(pt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,mt.Z)(function*(s,o){const l=In(s),d=cE(l.yt)+"/documents",h={documents:o.map(w=>aE(l.yt,w))},g=yield l._o("BatchGetDocuments",d,h,o.length),v=new Map;g.forEach(w=>{const D=function ale(n,e){return"found"in e?function(t,r){Jn(!!r.found);const i=Dd(t,r.found.name),s=ho(r.found.updateTime),o=r.found.createTime?ho(r.found.createTime):sr.min(),l=new wa({mapValue:{fields:r.found.fields}});return Cs.newFoundDocument(i,s,o,l)}(n,e):"missing"in e?function(t,r){Jn(!!r.missing),Jn(!!r.readTime);const i=Dd(t,r.missing),s=ho(r.readTime);return Cs.newNoDocument(i,s)}(n,e):$n()}(l.yt,w);v.set(D.key.toString(),D)});const E=[];return o.forEach(w=>{const D=v.get(w.toString());Jn(!!D),E.push(D)}),E}),function(s,o){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new cb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,mt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=yn.fromPath(i);e.mutations.push(new VL(s,e.precondition(s)))}),yield(r=(0,mt.Z)(function*(i,s){const o=In(i),l=cE(o.yt)+"/documents",d={writes:s.map(h=>lE(o.yt,h))};yield o.ao("Commit",l,d)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $n();t=sr.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Gt(pt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(sr.min())?js.exists(!1):js.updateTime(t):js.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sr.min()))throw new Gt(pt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return js.updateTime(t)}return js.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lde{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new mF(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,mt.Z)(function*(){const t=new cde(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!GI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!iH(t)}return!1}}class ude{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ta.UNAUTHENTICATED,this.clientId=c9.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,mt.Z)(function*(l){tn("FirestoreClient","Received user=",l.uid),yield s.authCredentialListener(l),s.user=l});return function(l){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(tn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,mt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Gt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,mt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=vb(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function KW(n,e){return _3.apply(this,arguments)}function _3(){return _3=(0,mt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),tn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,mt.Z)(function*(s){r.isEqual(s)||(yield aW(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),_3.apply(this,arguments)}function ZW(n,e){return y3.apply(this,arguments)}function y3(){return y3=(0,mt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield v3(n);tn("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>xW(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>xW(e.remoteStore,s)),n.onlineComponents=e}),y3.apply(this,arguments)}function v3(n){return b3.apply(this,arguments)}function b3(){return b3=(0,mt.Z)(function*(n){return n.offlineComponents||(tn("FirestoreClient","Using default OfflineComponentProvider"),yield KW(n,new LW)),n.offlineComponents}),b3.apply(this,arguments)}function y5(n){return w3.apply(this,arguments)}function w3(){return w3=(0,mt.Z)(function*(n){return n.onlineComponents||(tn("FirestoreClient","Using default OnlineComponentProvider"),yield ZW(n,new p3)),n.onlineComponents}),w3.apply(this,arguments)}function YW(n){return v3(n).then(e=>e.persistence)}function v5(n){return v3(n).then(e=>e.localStore)}function I3(n){return y5(n).then(e=>e.remoteStore)}function E3(n){return y5(n).then(e=>e.syncEngine)}function Eb(n){return x3.apply(this,arguments)}function x3(){return x3=(0,mt.Z)(function*(n){const e=yield y5(n),t=e.eventManager;return t.onListen=Uue.bind(null,e.syncEngine),t.onUnlisten=jue.bind(null,e.syncEngine),t}),x3.apply(this,arguments)}function XW(n,e,t={}){const r=new jo;return n.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return function(i,s,o,l,d){const h=new _5({next:v=>{s.enqueueAndForget(()=>BF(i,g));const E=v.docs.has(o);!E&&v.fromCache?d.reject(new Gt(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&l&&"server"===l.source?d.reject(new Gt(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new VF(ib(o.path),h,{includeMetadataChanges:!0,Nu:!0});return LF(i,g)}(yield Eb(n),n.asyncQueue,e,t,r)})),r.promise}function JW(n,e,t={}){const r=new jo;return n.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return function(i,s,o,l,d){const h=new _5({next:v=>{s.enqueueAndForget(()=>BF(i,g)),v.fromCache&&"server"===l.source?d.reject(new Gt(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new VF(o,h,{includeMetadataChanges:!0,Nu:!0});return LF(i,g)}(yield Eb(n),n.asyncQueue,e,t,r)})),r.promise}class yde{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new mF(this,"async_queue_retry"),this.Wc=()=>{const t=h5();t&&tn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=h5();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=h5();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new jo;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,mt.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ig(t))throw t;tn("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,uo("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=OF.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&$n()}verifyOperationInProgress(){}Xc(){var e=this;return(0,mt.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function S3(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class vde{constructor(){this._progressObserver={},this._taskCompletionResolver=new jo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ds extends wE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yde,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||e$(this),this._firestoreClient.terminate()}}function wde(n,e){const t="object"==typeof n?n:(0,Ni.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Ni._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,X.P0)("firestore");s&&WW(i,...s)}return i}function fo(n){return n._firestoreClient||e$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function e$(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Mce(n._databaseId,s,n._persistenceKey,(l=t).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams));var s,l;n._firestoreClient=new ude(n._authCredentials,n._appCheckCredentials,n._queue,r)}function t$(n,e,t){const r=new jo;return n.asyncQueue.enqueue((0,mt.Z)(function*(){try{yield KW(n,t),yield ZW(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(o=s).name?o.code===pt.FAILED_PRECONDITION||o.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;H_("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var o})).then(()=>r.promise)}function n$(n){if(n._initialized||n._terminated)throw new Gt(pt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kd(Vo.fromBase64String(e))}catch(t){throw new Gt(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kd(Vo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Gt(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ay{constructor(e){this._methodName=e}}class b5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Gt(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Gt(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rr(this._lat,e._lat)||Rr(this._long,e._long)}}const Mde=/^__.*__$/;class Nde{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jh(e,this.data,this.fieldMask,t,this.fieldTransforms):new ab(e,this.data,t,this.fieldTransforms)}}class r${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function i$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $n()}}class w5{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new w5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return x5(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(i$(this.sa)&&Mde.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class kde{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||yE(e)}da(e,t,r,i=!1){return new w5({sa:e,methodName:t,fa:r,path:eo.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function cy(n){const e=n._freezeSettings(),t=yE(n._databaseId);return new kde(n._databaseId,!!e.ignoreUndefinedProperties,t)}function I5(n,e,t,r,i,s={}){const o=n.da(s.merge||s.mergeFields?2:0,e,t,i);D3("Data must be an object, but it was:",o,r);const l=a$(r,o);let d,h;if(s.merge)d=new ul(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const v of s.mergeFields){const E=M3(e,v,t);if(!o.contains(E))throw new Gt(pt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);l$(g,E)||g.push(E)}d=new ul(g),h=o.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,h=o.fieldTransforms;return new Nde(new wa(l),d,h)}class IE extends ay{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof IE}}function s$(n,e,t){return new w5({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class A3 extends ay{_toFieldTransform(e){return new tE(e.path,new sb)}isEqual(e){return e instanceof A3}}class Pde extends ay{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=s$(this,e,!0),r=this._a.map(s=>ly(s,t)),i=new X_(r);return new tE(e.path,i)}isEqual(e){return this===e}}class Rde extends ay{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=s$(this,e,!0),r=this._a.map(s=>ly(s,t)),i=new J_(r);return new tE(e.path,i)}isEqual(e){return this===e}}class Ode extends ay{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new ob(e.yt,G9(e.yt,this.wa));return new tE(e.path,t)}isEqual(e){return this===e}}function C3(n,e,t,r){const i=n.da(1,e,t);D3("Data must be an object, but it was:",i,r);const s=[],o=wa.empty();q_(r,(d,h)=>{const g=E5(e,d,t);h=(0,X.m9)(h);const v=i.ca(g);if(h instanceof IE)s.push(g);else{const E=ly(h,v);null!=E&&(s.push(g),o.set(g,E))}});const l=new ul(s);return new r$(o,l,i.fieldTransforms)}function T3(n,e,t,r,i,s){const o=n.da(1,e,t),l=[M3(e,r,t)],d=[i];if(s.length%2!=0)throw new Gt(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<s.length;E+=2)l.push(M3(e,s[E])),d.push(s[E+1]);const h=[],g=wa.empty();for(let E=l.length-1;E>=0;--E)if(!l$(h,l[E])){const w=l[E];let D=d[E];D=(0,X.m9)(D);const P=o.ca(w);if(D instanceof IE)h.push(w);else{const L=ly(D,P);null!=L&&(h.push(w),g.set(w,L))}}const v=new ul(h);return new r$(g,v,o.fieldTransforms)}function o$(n,e,t,r=!1){return ly(t,n.da(r?4:3,e))}function ly(n,e){if(c$(n=(0,X.m9)(n)))return D3("Unsupported field value:",e,n),a$(n,e);if(n instanceof ay)return function(t,r){if(!i$(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let l=ly(o,r.aa(s));null==l&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,X.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return G9(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Us.fromDate(t);return{timestampValue:lb(r.yt,i)}}if(t instanceof Us){const i=new Us(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:lb(r.yt,i)}}if(t instanceof b5)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kd)return{bytesValue:pH(r.yt,t._byteString)};if(t instanceof Ts){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zL(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${g5(t)}`)}(n,e)}function a$(n,e){const t={};return m9(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):q_(n,(r,i)=>{const s=ly(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function c$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Us||n instanceof b5||n instanceof kd||n instanceof Ts||n instanceof ay)}function D3(n,e,t){if(!c$(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=g5(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function M3(n,e,t){if((e=(0,X.m9)(e))instanceof nf)return e._internalPath;if("string"==typeof e)return E5(n,e);throw x5("Field path arguments must be of type string or ",n,!1,void 0,t)}const Lde=new RegExp("[~\\*/\\[\\]]");function E5(n,e,t){if(e.search(Lde)>=0)throw x5(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nf(...e.split("."))._internalPath}catch{throw x5(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function x5(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(s||o)&&(d+=" (found",s&&(d+=` in field ${r}`),o&&(d+=` in document ${i}`),d+=")"),new Gt(pt.INVALID_ARGUMENT,l+n+d)}function l$(n,e){return n.some(t=>t.isEqual(e))}class EE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ts(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(S5("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fde extends EE{data(){return super.data()}}function S5(n,e){return"string"==typeof e?E5(n,e):e instanceof nf?e._internalPath:e._delegate._internalPath}function u$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Gt(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N3{}class xE extends N3{}function mg(n,e,...t){let r=[];e instanceof N3&&r.push(e),r=r.concat(t),function(i){const s=i.filter(l=>l instanceof xb).length,o=i.filter(l=>l instanceof SE).length;if(s>1||s>0&&o>0)throw new Gt(pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class SE extends xE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new SE(e,t,r)}_apply(e){const t=this._parse(e);return p$(e._query,t),new Ia(e.firestore,e.converter,BL(e._query,t))}_parse(e){const t=cy(e.firestore);return function(i,s,o,l,d,h,g){let v;if(d.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Gt(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){f$(g,h);const E=[];for(const w of g)E.push(h$(l,i,w));v={arrayValue:{values:E}}}else v=h$(l,i,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||f$(g,h),v=o$(o,"where",g,"in"===h||"not-in"===h);return fi.create(d,h,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class xb extends N3{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xb(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Qi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const l of o)p$(s,l),s=BL(s,l)}(e._query,t),new Ia(e.firestore,e.converter,BL(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class k3 extends xE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new k3(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Gt(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Gt(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new nb(i,s);return function(l,d){if(null===LL(l)){const h=$D(l);null!==h&&g$(0,h,d.field)}}(r,o),o}(e._query,this._field,this._direction);return new Ia(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Xh(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class A5 extends xE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new A5(e,t,r)}_apply(e){return new Ia(e.firestore,e.converter,qD(e._query,this._limit,this._limitType))}}class C5 extends xE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new C5(e,t,r)}_apply(e){const t=d$(e,this.type,this._docOrFields,this._inclusive);return new Ia(e.firestore,e.converter,(i=t,new Xh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class T5 extends xE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new T5(e,t,r)}_apply(e){const t=d$(e,this.type,this._docOrFields,this._inclusive);return new Ia(e.firestore,e.converter,(i=t,new Xh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function d$(n,e,t,r){if(t[0]=(0,X.m9)(t[0]),t[0]instanceof EE)return function(i,s,o,l,d){if(!l)throw new Gt(pt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const g of Q_(i))if(g.field.isKeyField())h.push(Z_(s,l.key));else{const v=l.data.field(g.field);if(NL(v))throw new Gt(pt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const E=g.field.canonicalString();throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(v)}return new lg(h,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=cy(n.firestore);return function(s,o,l,d,h,g){const v=s.explicitOrderBy;if(h.length>v.length)throw new Gt(pt.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let w=0;w<h.length;w++){const D=h[w];if(v[w].field.isKeyField()){if("string"!=typeof D)throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof D}`);if(!FL(s)&&-1!==D.indexOf("/"))throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${D}' contains a slash.`);const P=s.path.child(bi.fromString(D));if(!yn.isDocumentKey(P))throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const L=new yn(P);E.push(Z_(o,L))}else{const P=o$(l,d,D);E.push(P)}}return new lg(E,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function h$(n,e,t){if("string"==typeof(t=(0,X.m9)(t))){if(""===t)throw new Gt(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FL(e)&&-1!==t.indexOf("/"))throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bi.fromString(t));if(!yn.isDocumentKey(r))throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z_(n,new yn(r))}if(t instanceof Ts)return Z_(n,t._key);throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${g5(t)}.`)}function f$(n,e){if(!Array.isArray(n)||0===n.length)throw new Gt(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Gt(pt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function p$(n,e){if(e.isInequality()){const r=$D(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=LL(n);null!==s&&g$(0,i,s)}const t=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Gt(pt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function g$(n,e,t){if(!t.isEqual(e))throw new Gt(pt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class P3{convertValue(e,t="none"){switch(K_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return to(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(G_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $n()}}convertObject(e,t){const r={};return q_(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new b5(to(e.latitude),to(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=y9(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ZI(e));default:return null}}convertTimestamp(e){const t=og(e);return new Us(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bi.fromString(e);Jn(xH(r));const i=new sg(r.get(1),r.get(3)),s=new yn(r.popFirst(5));return i.isEqual(t)||uo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function D5(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qde extends P3{constructor(e){super(),this.firestore=e}convertBytes(e){return new kd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ts(this.firestore,null,t)}}class uy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rf extends EE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new AE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(S5("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class AE extends rf{data(e={}){return super.data(e)}}class _g{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new uy(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new AE(this._firestore,this._userDataWriter,r.key,r,new uy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Gt(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new AE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new uy(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const l=new AE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new uy(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,h=-1;return 0!==o.type&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:Gde(o.type),doc:l,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Gde(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $n()}}function _$(n,e){return n instanceof rf&&e instanceof rf?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _g&&e instanceof _g&&n._firestore===e._firestore&&m3(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class yg extends P3{constructor(e){super(),this.firestore=e}convertBytes(e){return new kd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ts(this.firestore,null,t)}}function y$(n,e,t){n=pi(n,Ts);const r=pi(n.firestore,Ds),i=D5(n.converter,e,t);return Sb(r,[I5(cy(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,js.none())])}function v$(n,e,t,...r){n=pi(n,Ts);const i=pi(n.firestore,Ds),s=cy(i);let o;return o="string"==typeof(e=(0,X.m9)(e))||e instanceof nf?T3(s,"updateDoc",n._key,e,t,r):C3(s,"updateDoc",n._key,e),Sb(i,[o.toMutation(n._key,js.exists(!0))])}function b$(n,...e){var t,r,i;n=(0,X.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||S3(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges};if(S3(e[o])){const v=e[o];e[o]=null===(t=v.next)||void 0===t?void 0:t.bind(v),e[o+1]=null===(r=v.error)||void 0===r?void 0:r.bind(v),e[o+2]=null===(i=v.complete)||void 0===i?void 0:i.bind(v)}let d,h,g;if(n instanceof Ts)h=pi(n.firestore,Ds),g=ib(n._key.path),d={next:v=>{e[o]&&e[o](R3(h,n,v))},error:e[o+1],complete:e[o+2]};else{const v=pi(n,Ia);h=pi(v.firestore,Ds),g=v._query;const E=new yg(h);d={next:w=>{e[o]&&e[o](new _g(h,E,v,w))},error:e[o+1],complete:e[o+2]},u$(n._query)}return function(v,E,w,D){const P=new _5(D),L=new VF(E,P,w);return v.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return LF(yield Eb(v),L)})),()=>{P.bc(),v.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return BF(yield Eb(v),L)}))}}(fo(h),g,l,d)}function Sb(n,e){return function(t,r){const i=new jo;return t.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return function Vue(n,e,t){return qF.apply(this,arguments)}(yield E3(t),r,i)})),i.promise}(fo(n),e)}function R3(n,e,t){const r=t.docs.get(e._key),i=new yg(n);return new rf(n,i,e._key,r,new uy(t.hasPendingWrites,t.fromCache),e.converter)}const rhe={maxAttempts:5};class w${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cy(e)}set(e,t,r){this._verifyNotCommitted();const i=vg(e,this._firestore),s=D5(i.converter,t,r),o=I5(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,js.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=vg(e,this._firestore);let o;return o="string"==typeof(t=(0,X.m9)(t))||t instanceof nf?T3(this._dataReader,"WriteBatch.update",s._key,t,r,i):C3(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,js.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vg(e,this._firestore);return this._mutations=this._mutations.concat(new cb(t._key,js.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Gt(pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vg(n,e){if((n=(0,X.m9)(n)).firestore!==e)throw new Gt(pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ihe extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cy(e)}get(e){const t=vg(e,this._firestore),r=new qde(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return $n();const s=i[0];if(s.isFoundDocument())return new EE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new EE(this._firestore,r,t._key,null,t.converter);throw $n()})}set(e,t,r){const i=vg(e,this._firestore),s=D5(i.converter,t,r),o=I5(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=vg(e,this._firestore);let o;return o="string"==typeof(t=(0,X.m9)(t))||t instanceof nf?T3(this._dataReader,"Transaction.update",s._key,t,r,i):C3(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=vg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vg(e,this._firestore),r=new yg(this._firestore);return super.get(e).then(i=>new rf(this._firestore,r,t._key,i._document,new uy(!1,!1),t.converter))}}function O3(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Gt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function E$(){if(typeof Uint8Array>"u")throw new Gt("unimplemented","Uint8Arrays are not available in this environment.")}function x$(){if(!function Nce(){return typeof atob<"u"}())throw new Gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xv=Ni.SDK_VERSION,(0,Ni._registerComponent)(new Ga.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new Ds(new yce(t.getProvider("auth-internal")),new wce(t.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Gt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sg(l.options.projectId,d)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(s9,"3.8.0",n),(0,Ni.registerVersion)(s9,"3.8.0","esm2017")}();class CE{constructor(e){this._delegate=e}static fromBase64String(e){return x$(),new CE(kd.fromBase64String(e))}static fromUint8Array(e){return E$(),new CE(kd.fromUint8Array(e))}toBase64(){return x$(),this._delegate.toBase64()}toUint8Array(){return E$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function L3(n){return function fhe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class phe{enableIndexedDbPersistence(e,t){return function Ide(n,e){n$(n=pi(n,Ds));const t=fo(n),r=n._freezeSettings(),i=new p3;return t$(t,i,new FW(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ede(n){n$(n=pi(n,Ds));const e=fo(n),t=n._freezeSettings(),r=new p3;return t$(e,r,new rde(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xde(n){if(n._initialized&&!n._terminated)throw new Gt(pt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jo;return n._queue.enqueueAndForgetEvenWhileRestricted((0,mt.Z)(function*(){try{yield(t=(0,mt.Z)(function*(r){if(!wu.C())return Promise.resolve();const i=r+"main";yield wu.delete(i)}),function(r){return t.apply(this,arguments)})(oF(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class S${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof sg||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&H_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){WW(this._delegate,e,t,r)}enableNetwork(){return function Ade(n){return function dde(n){return n.asyncQueue.enqueue((0,mt.Z)(function*(){const e=yield YW(n),t=yield I3(n);return e.setNetworkEnabled(!0),function(r){const i=In(r);return i._u.delete(0),vE(i)}(t)}))}(fo(n=pi(n,Ds)))}(this._delegate)}disableNetwork(){return function Cde(n){return function hde(n){return n.asyncQueue.enqueue((0,mt.Z)(function*(){const e=yield YW(n),t=yield I3(n);return e.setNetworkEnabled(!1),(r=(0,mt.Z)(function*(i){const s=In(i);s._u.add(0),yield mb(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(fo(n=pi(n,Ds)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,BW("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Sde(n){return function(e){const t=new jo;return e.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return function $ue(n,e){return QF.apply(this,arguments)}(yield E3(e),t)})),t.promise}(fo(n=pi(n,Ds)))}(this._delegate)}onSnapshotsInSync(e){return function nhe(n,e){return function gde(n,e){const t=new _5(e);return n.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return r=yield Eb(n),i=t,In(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return r=yield Eb(n),i=t,void In(r).Ru.delete(i);var r,i}))}}(fo(n=pi(n,Ds)),S3(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ab(this,$W(this._delegate,e))}catch(t){throw ec(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fl(this,m5(this._delegate,e))}catch(t){throw ec(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tc(this,function ide(n,e){if(n=pi(n,wE),g3("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Gt(pt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ia(n,null,(t=e,new Xh(bi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ec(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function she(n,e,t){n=pi(n,Ds);const r=Object.assign(Object.assign({},rhe),t);return function(i){if(i.maxAttempts<1)throw new Gt(pt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const l=new jo;return i.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){const d=yield function QW(n){return y5(n).then(e=>e.datastore)}(i);new lde(i.asyncQueue,d,o,s,l).run()})),l.promise}(fo(n),i=>e(new ihe(n,i)),r)}(this._delegate,t=>e(new A$(this,t)))}batch(){return fo(this._delegate),new C$(new w$(this._delegate,e=>Sb(this._delegate,e)))}loadBundle(e){return function Tde(n,e){const t=fo(n=pi(n,Ds)),r=new vde;return function mde(n,e,t,r){const i=function(s,o){let l;return l="string"==typeof s?(new TextEncoder).encode(s):s,d=function(d,h){if(d instanceof Uint8Array)return GW(d,h);if(d instanceof ArrayBuffer)return GW(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new sde(d,o);var d}(t,yE(e));n.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){!function nde(n,e,t){const r=In(n);var i;(i=(0,mt.Z)(function*(s,o,l){try{const d=yield o.getMetadata();if(yield function(E,w){const D=In(E),P=ho(w.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",L=>D.Ns.getBundleMetadata(L,w.id)).then(L=>!!L&&L.createTime.compareTo(P)>=0)}(s.localStore,d))return yield o.close(),l._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);l._updateProgress(CW(d));const h=new Oue(d,s.localStore,o.yt);let g=yield o.mc();for(;g;){const E=yield h.Fu(g);E&&l._updateProgress(E),g=yield o.mc()}const v=yield h.complete();return yield tf(s,v.Lu,void 0),yield function(E,w){const D=In(E);return D.persistence.runTransaction("Save bundle","readwrite",P=>D.Ns.saveBundleMetadata(P,w))}(s.localStore,d),l._completeWith(v.progress),Promise.resolve(v.Bu)}catch(d){return H_("SyncEngine",`Loading bundle failed with ${d}`),l._failWith(d),Promise.resolve(new Set)}var E}),function(s,o,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield E3(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Dde(n,e){return function _de(n,e){return n.asyncQueue.enqueue((0,mt.Z)(function*(){return function(t,r){const i=In(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield v5(n),e)}))}(fo(n=pi(n,Ds)),e).then(t=>t?new Ia(n,null,t.query):null)}(this._delegate,e).then(t=>t?new tc(this,t):null)}}class M5 extends P3{constructor(e){super(),this.firestore=e}convertBytes(e){return new CE(new kd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fl.forKey(t,this.firestore,null)}}class A${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new M5(e)}get(e){const t=hy(e);return this._delegate.get(t).then(r=>new TE(this._firestore,new rf(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=hy(e);return r?(O3("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hy(e);return this._delegate.delete(t),this}}class C${constructor(e){this._delegate=e}set(e,t,r){const i=hy(e);return r?(O3("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hy(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dy{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new AE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new DE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=dy.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new dy(e,new M5(e),t),i.set(t,s)),s}}dy.INSTANCES=new WeakMap;class Fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new M5(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Gt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fl(t,new Ts(t._delegate,r,new yn(e)))}static forKey(e,t,r){return new Fl(t,new Ts(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ab(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ab(this.firestore,$W(this._delegate,e))}catch(t){throw ec(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,X.m9)(e))instanceof Ts&&qW(this._delegate,e)}set(e,t){t=O3("DocumentReference.set",t);try{return t?y$(this._delegate,e,t):y$(this._delegate,e)}catch(r){throw ec(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?v$(this._delegate,e):v$(this._delegate,e,t,...r)}catch(i){throw ec(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ehe(n){return Sb(pi(n.firestore,Ds),[new cb(n._key,js.none())])}(this._delegate)}onSnapshot(...e){const t=T$(e),r=D$(e,i=>new TE(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return b$(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Zde(n){n=pi(n,Ts);const e=pi(n.firestore,Ds),t=fo(e),r=new yg(e);return function fde(n,e){const t=new jo;return n.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return(r=(0,mt.Z)(function*(i,s,o){try{const l=yield function(d,h){const g=In(d);return g.persistence.runTransaction("read document","readonly",v=>g.localDocuments.getDocument(v,h))}(i,s);l.isFoundDocument()?o.resolve(l):l.isNoDocument()?o.resolve(null):o.reject(new Gt(pt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const d=vb(l,`Failed to get document '${s} from cache`);o.reject(d)}}),function(i,s,o){return r.apply(this,arguments)})(yield v5(n),e,t);var r})),t.promise}(t,n._key).then(i=>new rf(e,r,n._key,i,new uy(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Yde(n){n=pi(n,Ts);const e=pi(n.firestore,Ds);return XW(fo(e),n._key,{source:"server"}).then(t=>R3(e,n,t))}(this._delegate):function Kde(n){n=pi(n,Ts);const e=pi(n.firestore,Ds);return XW(fo(e),n._key).then(t=>R3(e,n,t))}(this._delegate),t.then(r=>new TE(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fl(this.firestore,this._delegate.withConverter(e?dy.getInstance(this.firestore,e):null))}}function ec(n,e,t){return n.message=n.message.replace(e,t),n}function T$(n){for(const e of n)if("object"==typeof e&&!L3(e))return e;return{}}function D$(n,e){var t,r;let i;return i=L3(n[0])?n[0]:L3(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class TE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _$(this._delegate,e._delegate)}}class DE extends TE{data(e){const t=this._delegate.data(e);return function gce(n,e){n||$n()}(void 0!==t),t}}class tc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new M5(e)}where(e,t,r){try{return new tc(this.firestore,mg(this._delegate,function Bde(n,e,t){const r=e,i=S5("where",n);return SE._create(i,r,t)}(e,t,r)))}catch(i){throw ec(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new tc(this.firestore,mg(this._delegate,function Ude(n,e="asc"){const t=e,r=S5("orderBy",n);return k3._create(r,t)}(e,t)))}catch(r){throw ec(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tc(this.firestore,mg(this._delegate,function jde(n){return VW("limit",n),A5._create("limit",n,"F")}(e)))}catch(t){throw ec(t,"limit()","Query.limit()")}}limitToLast(e){try{return new tc(this.firestore,mg(this._delegate,function Vde(n){return VW("limitToLast",n),A5._create("limitToLast",n,"L")}(e)))}catch(t){throw ec(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new tc(this.firestore,mg(this._delegate,function zde(...n){return C5._create("startAt",n,!0)}(...e)))}catch(t){throw ec(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new tc(this.firestore,mg(this._delegate,function Hde(...n){return C5._create("startAfter",n,!1)}(...e)))}catch(t){throw ec(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new tc(this.firestore,mg(this._delegate,function Wde(...n){return T5._create("endBefore",n,!1)}(...e)))}catch(t){throw ec(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new tc(this.firestore,mg(this._delegate,function $de(...n){return T5._create("endAt",n,!0)}(...e)))}catch(t){throw ec(t,"endAt()","Query.endAt()")}}isEqual(e){return m3(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Xde(n){n=pi(n,Ia);const e=pi(n.firestore,Ds),t=fo(e),r=new yg(e);return function pde(n,e){const t=new jo;return n.asyncQueue.enqueueAndForget((0,mt.Z)(function*(){return(r=(0,mt.Z)(function*(i,s,o){try{const l=yield l5(i,s,!0),d=new MW(s,l.Hi),h=d.Wu(l.documents),g=d.applyChanges(h,!1);o.resolve(g.snapshot)}catch(l){const d=vb(l,`Failed to execute query '${s} against cache`);o.reject(d)}}),function(i,s,o){return r.apply(this,arguments)})(yield v5(n),e,t);var r})),t.promise}(t,n._query).then(i=>new _g(e,r,n,i))}(this._delegate):"server"===e?.source?function Jde(n){n=pi(n,Ia);const e=pi(n.firestore,Ds),t=fo(e),r=new yg(e);return JW(t,n._query,{source:"server"}).then(i=>new _g(e,r,n,i))}(this._delegate):function Qde(n){n=pi(n,Ia);const e=pi(n.firestore,Ds),t=fo(e),r=new yg(e);return u$(n._query),JW(t,n._query).then(i=>new _g(e,r,n,i))}(this._delegate),t.then(r=>new F3(this.firestore,new _g(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=T$(e),r=D$(e,i=>new F3(this.firestore,new _g(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return b$(this._delegate,t,r)}withConverter(e){return new tc(this.firestore,this._delegate.withConverter(e?dy.getInstance(this.firestore,e):null))}}class mhe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new DE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class F3{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new tc(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new DE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mhe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new DE(this._firestore,r))})}isEqual(e){return _$(this._delegate,e._delegate)}}class Ab extends tc{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fl(this.firestore,e):null}doc(e){try{return new Fl(this.firestore,void 0===e?m5(this._delegate):m5(this._delegate,e))}catch(t){throw ec(t,"doc()","CollectionReference.doc()")}}add(e){return function the(n,e){const t=pi(n.firestore,Ds),r=m5(n),i=D5(n.converter,e);return Sb(t,[I5(cy(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,js.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fl(this.firestore,t))}isEqual(e){return qW(this._delegate,e._delegate)}withConverter(e){return new Ab(this.firestore,this._delegate.withConverter(e?dy.getInstance(this.firestore,e):null))}}function hy(n){return pi(n,Ts)}class B3{constructor(...e){this._delegate=new nf(...e)}static documentId(){return new B3(eo.keyField().canonicalString())}isEqual(e){return(e=(0,X.m9)(e))instanceof nf&&this._delegate._internalPath.isEqual(e._internalPath)}}class fy{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ahe(){return new A3("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fy(e)}static delete(){const e=function ohe(){return new IE("deleteField")}();return e._methodName="FieldValue.delete",new fy(e)}static arrayUnion(...e){const t=function che(...n){return new Pde("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new fy(t)}static arrayRemove(...e){const t=function lhe(...n){return new Rde("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new fy(t)}static increment(e){const t=function uhe(n){return new Ode("increment",n)}(e);return t._methodName="FieldValue.increment",new fy(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _he={Firestore:S$,GeoPoint:b5,Timestamp:Us,Blob:CE,Transaction:A$,WriteBatch:C$,DocumentReference:Fl,DocumentSnapshot:TE,Query:tc,QueryDocumentSnapshot:DE,QuerySnapshot:F3,CollectionReference:Ab,FieldPath:B3,FieldValue:fy,setLogLevel:function ghe(n){!function pce(n){ng.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function M$(n,e){return function bhe(n,e=fc.z){return new Ku.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function U3(n,e){return M$(n,e).pipe((0,Si.U)(t=>({payload:t,type:"query"})))}function N5(n,e){return U3(n,e).pipe(Cm(void 0),BO(),(0,Si.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((o,l)=>{const d=i.find(g=>g.doc.ref.isEqual(o.ref)),h=t?.payload.docs.find(g=>g.ref.isEqual(o.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(o.metadata)||!d&&h&&JSON.stringify(h.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:o}})}),s}))}function N$(n,e,t){return N5(n,t).pipe(Ip((r,i)=>function Ihe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Ehe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return j3(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return j3(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return j3(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Rw(),(0,Si.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function j3(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function k$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function vhe(n){(function yhe(n,e){n.INTERNAL.registerComponent(new Ga.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_he)))})(n,(e,t)=>new S$(e,t,new phe)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(Ow.Z);class P${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=N5(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Si.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Cm(void 0),BO(),Am(([r,i])=>i.length>0||!r),(0,Si.U)(([r,i])=>i),ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ip((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k$(e);return N$(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return U3(this.query,this.afs.schedulers.outsideAngular).pipe((0,Si.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ln.iC)}get(e){return(0,Mo.D)(this.query.get(e)).pipe(ln.iC)}add(e){return this.ref.add(e)}doc(e){return new R$(this.ref.doc(e),this.afs)}}class R${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=F$(r,t);return new P$(i,s,this.afs)}snapshotChanges(){return function whe(n,e){return M$(n,e).pipe(Cm(void 0),BO(),(0,Si.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Si.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Mo.D)(this.ref.get(e)).pipe(ln.iC)}}class xhe{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?N5(this.query,this.afs.schedulers.outsideAngular).pipe((0,Si.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Am(t=>t.length>0),ln.iC):N5(this.query,this.afs.schedulers.outsideAngular).pipe(ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ip((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k$(e);return N$(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return U3(this.query,this.afs.schedulers.outsideAngular).pipe((0,Si.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ln.iC)}get(e){return(0,Mo.D)(this.query.get(e)).pipe(ln.iC)}}const O$=new m.OlP("angularfire2.enableFirestorePersistence"),L$=new m.OlP("angularfire2.firestore.persistenceSettings"),She=new m.OlP("angularfire2.firestore.settings"),Ahe=new m.OlP("angularfire2.firestore.use-emulator");function F$(n,e=(t=>t)){return{query:e(n),ref:n}}let Che=(()=>{class n{constructor(t,r,i,s,o,l,d,h,g,v,E,w,D,P,L,F,U){this.schedulers=d;const K=(0,Qs.on)(t,l,r),J=g;v&&CR(K,l,E,D,P,L,w,F),[this.firestore,this.persistenceEnabled$]=(0,Qs.cc)(`${K.name}.firestore`,"AngularFirestore",K.name,()=>{const ie=l.runOutsideAngular(()=>K.firestore());if(s&&ie.settings(s),J&&ie.useEmulator(...J),i&&!Wd(o)){const _e=()=>{try{return(0,Mo.D)(ie.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(fe){return typeof console<"u"&&console.warn(fe),au(!1)}};return[ie,l.runOutsideAngular(_e)]}return[ie,au(!1)]},[s,J,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=F$(i,r),l=this.schedulers.ngZone.run(()=>s);return new P$(l,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new xhe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new R$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qs.Dh),m.LFG(Qs.xv,8),m.LFG(O$,8),m.LFG(She,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(L$,8),m.LFG(Ahe,8),m.LFG(fT,8),m.LFG(wR,8),m.LFG(IR,8),m.LFG(ER,8),m.LFG(xR,8),m.LFG(SR,8),m.LFG(AR,8),m.LFG(yd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),The=(()=>{class n{constructor(){hT.Z.registerVersion("angularfire",ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:O$,useValue:!0},{provide:L$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Che]}),n})();var Dhe=Q(552);class V3{constructor(e){return e}}class ME{constructor(){return(0,ln.vb)("auth")}}const z3=new m.OlP("angularfire2.auth-instances");function Nhe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new V3(r)}}const khe={provide:ME,deps:[[new m.FiY,z3]]},Phe={provide:V3,useFactory:function Mhe(n,e){const t=(0,ln.JM)("auth",n,e);return t&&new V3(t)},deps:[[new m.FiY,z3],kl]};let Rhe=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Phe,khe]}),n})();function Ohe(n,...e){return{ngModule:Rhe,providers:[{provide:z3,useFactory:Nhe(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,jh,[new m.FiY,yd],...e]}]}}const Lhe=(0,ln.u3)(Dhe.n,!0);class H3{constructor(e){return e}}const U$="database",W3=new m.OlP("angularfire2.database-instances");function Uhe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new H3(r)}}const jhe={provide:class Fhe{constructor(){return(0,ln.vb)(U$)}},deps:[[new m.FiY,W3]]},Vhe={provide:H3,useFactory:function Bhe(n,e){const t=(0,ln.JM)(U$,n,e);return t&&new H3(t)},deps:[[new m.FiY,W3],kl]};let zhe=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Vhe,jhe]}),n})();function Hhe(n,...e){return{ngModule:zhe,providers:[{provide:W3,useFactory:Uhe(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,jh,[new m.FiY,ME],[new m.FiY,yd],...e]}]}}const Whe=(0,ln.u3)(nK,!0);class $3{constructor(e){return e}}const j$="firestore",q3=new m.OlP("angularfire2.firestore-instances");function Ghe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $3(r)}}const Khe={provide:class $he{constructor(){return(0,ln.vb)(j$)}},deps:[[new m.FiY,q3]]},Zhe={provide:$3,useFactory:function qhe(n,e){const t=(0,ln.JM)(j$,n,e);return t&&new $3(t)},deps:[[new m.FiY,q3],kl]};let Yhe=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Zhe,Khe]}),n})();function Qhe(n,...e){return{ngModule:Yhe,providers:[{provide:q3,useFactory:Ghe(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,jh,[new m.FiY,ME],[new m.FiY,yd],...e]}]}}const Xhe=(0,ln.u3)(wde,!0),K3="functions";class rfe{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,mt.Z)(function*(){if(e.auth)try{return(yield e.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,mt.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(){var e=this;return(0,mt.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,mt.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const Z3="us-central1";class sfe{constructor(e,t,r,i,s=Z3,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new rfe(t,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin,this.region=Z3}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const W$="@firebase/functions";function gfe(n=(0,Ni.getApp)(),e=Z3){const r=(0,Ni._getProvider)((0,X.m9)(n),K3).getImmediate({identifier:e}),i=(0,X.P0)("functions");return i&&function mfe(n,e,t){!function ofe(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}((0,X.m9)(n),e,t)}(r,...i),r}!function pfe(n,e){(0,Ni._registerComponent)(new Ga.wA(K3,(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),l=r.getProvider("messaging-internal"),d=r.getProvider("app-check-internal");return new sfe(s,o,l,d,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(W$,"0.9.0",e),(0,Ni.registerVersion)(W$,"0.9.0","esm2017")}(fetch.bind(self));class X3{constructor(e){return e}}const q$="functions",J3=new m.OlP("angularfire2.functions-instances");function vfe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new X3(r)}}const bfe={provide:class _fe{constructor(){return(0,ln.vb)(q$)}},deps:[[new m.FiY,J3]]},wfe={provide:X3,useFactory:function yfe(n,e){const t=(0,ln.JM)(q$,n,e);return t&&new X3(t)},deps:[[new m.FiY,J3],kl]};let Ife=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[wfe,bfe]}),n})();function Efe(n,...e){return{ngModule:Ife,providers:[{provide:J3,useFactory:vfe(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,jh,[new m.FiY,ME],[new m.FiY,yd],...e]}]}}const xfe=(0,ln.u3)(gfe,!0);var Sfe=Q(751);class e4{constructor(e){return e}}const G$="messaging",t4=new m.OlP("angularfire2.messaging-instances");function Tfe(n){return(e,t)=>{if(!ln.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new e4(r)}}const Dfe={provide:class Afe{constructor(){return(0,ln.vb)(G$)}},deps:[[new m.FiY,t4]]},Mfe={provide:e4,useFactory:function Cfe(n,e){if(!ln.n1.sync())return null;const t=(0,ln.JM)(G$,n,e);return t&&new e4(t)},deps:[[new m.FiY,t4],kl]};let Nfe=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Mfe,Dfe,{provide:m.ip1,useValue:ln.n1.async,multi:!0}]}),n})();function kfe(n,...e){return{ngModule:Nfe,providers:[{provide:t4,useFactory:Tfe(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,jh,...e]}]}}const Pfe=(0,ln.u3)(Sfe.KL,!0);Q(2833);const K$="@firebase/performance",n4="0.6.0",r4="FB-PERF-TRACE-MEASURE",eq="@firebase/performance/config",tq="@firebase/performance/configexpire",nq="Performance",Ea=new X.LL("performance",nq,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Pd=new wc.Yd(nq);let i4,rq,iq,o4;Pd.logLevel=wc.in.INFO;class ia{constructor(e){if(this.window=e,!e)throw Ea.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,X.zI)()?!!(0,X.hl)()||(Pd.info("IndexedDB is not supported by current browswer"),!1):(Pd.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const s of i.getEntries())t(s)}).observe({entryTypes:[e]})}static getInstance(){return void 0===i4&&(i4=new ia(rq)),i4}}function s4(){return iq}function sq(n,e){const t=n.length-e.length;if(t<0||t>1)throw Ea.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class dl{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=sq("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=sq("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===o4&&(o4=new dl),o4}}var py=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(py||(py={})),py))();const Vfe=["firebase_","google_","ga_"],zfe=new RegExp("^[a-zA-Z]\\w*$");function $fe(){const n=ia.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function oq(){switch(ia.getInstance().document.visibilityState){case"visible":return py.VISIBLE;case"hidden":return py.HIDDEN;default:return py.UNKNOWN}}function qfe(){const e=ia.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function aq(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Ea.create("no app id");return t}const Iu={loggingEnabled:!0};const npe="Could not fetch config, will use default configs";function cq(n){if(!n)return n;const e=dl.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0!==t.fpr_enabled?"true"===String(t.fpr_enabled):Iu.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Iu.logSource&&(e.logSource=Iu.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Iu.logEndPointUrl&&(e.logEndPointUrl=Iu.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Iu.transportKey&&(e.transportKey=Iu.transportKey),void 0!==t.fpr_vc_network_request_sampling_rate?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):void 0!==Iu.networkRequestsSamplingRate&&(e.networkRequestsSamplingRate=Iu.networkRequestsSamplingRate),void 0!==t.fpr_vc_trace_sampling_rate?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):void 0!==Iu.tracesSamplingRate&&(e.tracesSamplingRate=Iu.tracesSamplingRate),e.logTraceAfterSampling=lq(e.tracesSamplingRate),e.logNetworkAfterSampling=lq(e.networkRequestsSamplingRate),n}function lq(n){return Math.random()<=n}let c4,a4=1;function uq(n){return a4=2,c4=c4||function ope(n){return function ape(){const n=ia.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function Ufe(n){const e=n.getId();return e.then(t=>{iq=t}),e}(n.installations)).then(e=>function Jfe(n,e){const t=function epe(){const n=ia.getInstance().localStorage;if(!n)return;const e=n.getItem(tq);if(!e||!function ipe(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(eq);if(t)try{return JSON.parse(t)}catch{return}}();return t?(cq(t),Promise.resolve()):function rpe(n,e){return function jfe(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function Zfe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Ea.create("no project id");return t}(n.app),i=function Yfe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Ea.create("no api key");return t}(n.app),o=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:aq(n.app),app_version:"0.6.0",sdk_version:"0.0.1"})});return fetch(o).then(l=>{if(l.ok)return l.json();throw Ea.create("RC response not ok")})}).catch(()=>{Pd.info(npe)})}(n,e).then(cq).then(r=>function tpe(n){const e=ia.getInstance().localStorage;!n||!e||(e.setItem(eq,JSON.stringify(n)),e.setItem(tq,String(Date.now()+60*dl.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>dq(),()=>dq())}(n),c4}function dq(){a4=3}let u4,P5=3,bg=[],fq=!1;function R5(n){setTimeout(()=>{if(0!==P5){if(!bg.length)return R5(1e4);!function dpe(){const n=bg.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function hpe(n,e){return function fpe(n){const e=dl.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||Pd.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const s=t.logResponseDetails;Array.isArray(s)&&s.length>0&&"RETRY_REQUEST_LATER"===s[0].responseAction&&(bg=[...e,...bg],Pd.info("Retry transport request later.")),P5=3,R5(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:dl.getInstance().logSource,log_event:e},n).catch(()=>{bg=[...n,...bg],P5--,Pd.info(`Tries left: ${P5}.`),R5(1e4)})}()}},n)}function pq(n,e){u4||(u4=function gpe(n){return(...e)=>{!function ppe(n){if(!n.eventTime||!n.message)throw Ea.create("invalid cc log");bg=[...bg,n]}({message:n(...e),eventTime:Date.now()})}}(_pe)),u4(n,e)}function O5(n){const e=dl.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!ia.getInstance().requiredApisAvailable()||n.isAuto&&oq()!==py.VISIBLE||(function spe(){return 3===a4}()?d4(n):uq(n.performanceController).then(()=>d4(n),()=>d4(n)))}function d4(n){if(!s4())return;const e=dl.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>pq(n,1),0)}function _pe(n,e){return 0===e?function ype(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:gq(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function vpe(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:gq(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function gq(n){return{google_app_id:aq(n),app_instance_id:s4(),web_app_info:{sdk_version:"0.6.0",page_url:ia.getInstance().getUrl(),service_worker_status:$fe(),visibility_state:oq(),effective_connection_type:qfe()},application_process_state:0}}const Ipe=["_fp","_fcp","_fid"];class wg{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=ia.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${r4}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Ea.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Ea.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),O5(this)}record(e,t,r){if(e<=0)throw Ea.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Ea.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));O5(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function Epe(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&Ipe.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Ea.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function xpe(n){const e=Math.floor(n);return e<n&&Pd.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t??0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function Gfe(n){return!(0===n.length||n.length>40||Vfe.some(t=>n.startsWith(t))||!n.match(zfe))}(e),i=function Kfe(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Ea.create("invalid attribute name",{attributeName:e});if(!i)throw Ea.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const s=ia.getInstance().getUrl();if(!s)return;const o=new wg(e,"_wt_"+s,!0),l=Math.floor(1e3*ia.getInstance().getTimeOrigin());if(o.setStartTime(l),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const g=r.find(E=>"first-paint"===E.name);g&&g.startTime&&o.putMetric("_fp",Math.floor(1e3*g.startTime));const v=r.find(E=>"first-contentful-paint"===E.name);v&&v.startTime&&o.putMetric("_fcp",Math.floor(1e3*v.startTime)),i&&o.putMetric("_fid",Math.floor(1e3*i))}O5(o)}static createUserTimingTrace(e,t){O5(new wg(e,t,!1,t))}}function mq(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=ia.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),s=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function mpe(n){const e=dl.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>pq(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}function _q(n){!s4()||(setTimeout(()=>function Cpe(n){const e=ia.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{wg.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),wg.createOobTrace(n,t,r,s))})}else wg.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function Ape(n){const e=ia.getInstance(),t=e.getEntriesByType("resource");for(const r of t)mq(n,r);e.setupObserver("resource",r=>mq(n,r))}(n),0),setTimeout(()=>function Tpe(n){const e=ia.getInstance(),t=e.getEntriesByType("measure");for(const r of t)yq(n,r);e.setupObserver("measure",r=>yq(n,r))}(n),0))}function yq(n,e){const t=e.name;t.substring(0,r4.length)!==r4&&wg.createUserTimingTrace(n,t)}class Dpe{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==e?.dataCollectionEnabled&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==e?.instrumentationEnabled&&(this.instrumentationEnabled=e.instrumentationEnabled),ia.getInstance().requiredApisAvailable()?(0,X.eu)().then(t=>{t&&(function upe(){fq||(R5(5500),fq=!0)}(),uq(this).then(()=>_q(this),()=>_q(this)),this.initialized=!0)}).catch(t=>{Pd.info(`Environment doesn't support IndexedDB: ${t}`)}):Pd.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){dl.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return dl.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){dl.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return dl.getInstance().dataCollectionEnabled}}function Npe(n=(0,Ni.getApp)()){return n=(0,X.m9)(n),(0,Ni._getProvider)(n,"performance").getImmediate()}const kpe=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Ea.create("FB not default");if(typeof window>"u")throw Ea.create("no window");!function Bfe(n){rq=n}(window);const i=new Dpe(t,r);return i._init(e),i};!function Ppe(){(0,Ni._registerComponent)(new Ga.wA("performance",kpe,"PUBLIC")),(0,Ni.registerVersion)(K$,n4),(0,Ni.registerVersion)(K$,n4,"esm2017")}();class h4{constructor(e){return e}}const vq="performance",f4=new m.OlP("angularfire2.performance-instances");function Lpe(n){return(e,t,r)=>{if(!bf(t))return null;const i=e.runOutsideAngular(()=>n(r));return new h4(i)}}const Fpe={provide:class Rpe{constructor(){return(0,ln.vb)(vq)}},deps:[[new m.FiY,f4]]},Bpe={provide:h4,useFactory:function Ope(n,e,t){if(!bf(t))return null;const r=(0,ln.JM)(vq,n,e);return r&&new h4(r)},deps:[[new m.FiY,f4],kl,m.Lbi]};let Upe=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Bpe,Fpe]}),n})();function jpe(n,...e){return{ngModule:Upe,providers:[{provide:f4,useFactory:Lpe(n),multi:!0,deps:[m.R0b,m.Lbi,m.zs3,ln.HU,jh,...e]}]}}const Vpe=(0,ln.u3)(Npe,!0);var zpe=Q(4880);class p4{constructor(e){return e}}const bq="remote-config",g4=new m.OlP("angularfire2.remote-config-instances");function $pe(n){return(e,t)=>{if(!ln._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new p4(r)}}const qpe={provide:class Hpe{constructor(){return(0,ln.vb)(bq)}},deps:[[new m.FiY,g4]]},Gpe={provide:p4,useFactory:function Wpe(n,e){if(!ln._J.sync())return null;const t=(0,ln.JM)(bq,n,e);return t&&new p4(t)},deps:[[new m.FiY,g4],kl]};let Kpe=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Gpe,qpe,{provide:m.ip1,useValue:ln._J.async,multi:!0}]}),n})();function Zpe(n,...e){return{ngModule:Kpe,providers:[{provide:g4,useFactory:$pe(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,jh,...e]}]}}const Ype=(0,ln.u3)(zpe.sN,!0);class m4{constructor(e){return e}}const wq="storage",_4=new m.OlP("angularfire2.storage-instances");function Jpe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new m4(r)}}const ege={provide:class Qpe{constructor(){return(0,ln.vb)(wq)}},deps:[[new m.FiY,_4]]},tge={provide:m4,useFactory:function Xpe(n,e){const t=(0,ln.JM)(wq,n,e);return t&&new m4(t)},deps:[[new m.FiY,_4],kl]};let nge=(()=>{class n{constructor(){(0,Cc.KN)("angularfire",ln.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[tge,ege]}),n})();function rge(n,...e){return{ngModule:nge,providers:[{provide:_4,useFactory:Jpe(n),multi:!0,deps:[m.R0b,m.zs3,ln.HU,jh,[new m.FiY,ME],[new m.FiY,yd],...e]}]}}const ige=(0,ln.u3)(Yoe,!0);class L5{static#e=this.\u0275fac=function(t){return new(t||L5)};static#t=this.\u0275mod=m.oAB({type:L5,bootstrap:[_T]});static#n=this.\u0275inj=m.cJS({imports:[Ff,hh,g8,rp,wse,Qs.hO.initializeApp(rV_firebase),TZ,The,dae,zZ,LK(()=>FK(rV_firebase)),Ohe(()=>Lhe()),Hhe(()=>Whe()),Qhe(()=>Xhe()),Efe(()=>xfe()),kfe(()=>Pfe()),jpe(()=>Vpe()),Zpe(()=>Ype()),rge(()=>ige())]})}Gy().bootstrapModule(L5).catch(n=>console.error(n))},8306:(Gn,Rt,Q)=>{Q.d(Rt,{y:()=>Ie});var m=Q(930),de=Q(727),se=Q(8822),st=Q(4671);var ht=Q(2416),Je=Q(576),Et=Q(2806);let Ie=(()=>{class $t{constructor(Yt){Yt&&(this._subscribe=Yt)}lift(Yt){const ze=new $t;return ze.source=this,ze.operator=Yt,ze}subscribe(Yt,ze,Dt){const At=function sn($t){return $t&&$t instanceof m.Lv||function Fe($t){return $t&&(0,Je.m)($t.next)&&(0,Je.m)($t.error)&&(0,Je.m)($t.complete)}($t)&&(0,de.Nn)($t)}(Yt)?Yt:new m.Hp(Yt,ze,Dt);return(0,Et.x)(()=>{const{operator:Nt,source:kt}=this;At.add(Nt?Nt.call(At,kt):kt?this._subscribe(At):this._trySubscribe(At))}),At}_trySubscribe(Yt){try{return this._subscribe(Yt)}catch(ze){Yt.error(ze)}}forEach(Yt,ze){return new(ze=we(ze))((Dt,At)=>{const Nt=new m.Hp({next:kt=>{try{Yt(kt)}catch(Ot){At(Ot),Nt.unsubscribe()}},error:At,complete:Dt});this.subscribe(Nt)})}_subscribe(Yt){var ze;return null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(Yt)}[se.L](){return this}pipe(...Yt){return function gt($t){return 0===$t.length?st.y:1===$t.length?$t[0]:function(Yt){return $t.reduce((ze,Dt)=>Dt(ze),Yt)}}(Yt)(this)}toPromise(Yt){return new(Yt=we(Yt))((ze,Dt)=>{let At;this.subscribe(Nt=>At=Nt,Nt=>Dt(Nt),()=>ze(At))})}}return $t.create=er=>new $t(er),$t})();function we($t){var er;return null!==(er=$t??ht.v.Promise)&&void 0!==er?er:Promise}},7579:(Gn,Rt,Q)=>{Q.d(Rt,{x:()=>ht});var m=Q(8306),de=Q(727);const st=(0,Q(3888).d)(Et=>function(){Et(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=Q(8737),gt=Q(2806);let ht=(()=>{class Et extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(we){const Fe=new Je(this,this);return Fe.operator=we,Fe}_throwIfClosed(){if(this.closed)throw new st}next(we){(0,gt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Fe of this.currentObservers)Fe.next(we)}})}error(we){(0,gt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=we;const{observers:Fe}=this;for(;Fe.length;)Fe.shift().error(we)}})}complete(){(0,gt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:we}=this;for(;we.length;)we.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var we;return(null===(we=this.observers)||void 0===we?void 0:we.length)>0}_trySubscribe(we){return this._throwIfClosed(),super._trySubscribe(we)}_subscribe(we){return this._throwIfClosed(),this._checkFinalizedStatuses(we),this._innerSubscribe(we)}_innerSubscribe(we){const{hasError:Fe,isStopped:sn,observers:$t}=this;return Fe||sn?de.Lc:(this.currentObservers=null,$t.push(we),new de.w0(()=>{this.currentObservers=null,(0,ct.P)($t,we)}))}_checkFinalizedStatuses(we){const{hasError:Fe,thrownError:sn,isStopped:$t}=this;Fe?we.error(sn):$t&&we.complete()}asObservable(){const we=new m.y;return we.source=this,we}}return Et.create=(Ie,we)=>new Je(Ie,we),Et})();class Je extends ht{constructor(Ie,we){super(),this.destination=Ie,this.source=we}next(Ie){var we,Fe;null===(Fe=null===(we=this.destination)||void 0===we?void 0:we.next)||void 0===Fe||Fe.call(we,Ie)}error(Ie){var we,Fe;null===(Fe=null===(we=this.destination)||void 0===we?void 0:we.error)||void 0===Fe||Fe.call(we,Ie)}complete(){var Ie,we;null===(we=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.complete)||void 0===we||we.call(Ie)}_subscribe(Ie){var we,Fe;return null!==(Fe=null===(we=this.source)||void 0===we?void 0:we.subscribe(Ie))&&void 0!==Fe?Fe:de.Lc}}},930:(Gn,Rt,Q)=>{Q.d(Rt,{Hp:()=>Yt,Lv:()=>Fe});var m=Q(576),de=Q(727),se=Q(2416),st=Q(7849),ct=Q(5032);const gt=Et("C",void 0,void 0);function Et(kt,Ot,Pt){return{kind:kt,value:Ot,error:Pt}}var Ie=Q(3410),we=Q(2806);class Fe extends de.w0{constructor(Ot){super(),this.isStopped=!1,Ot?(this.destination=Ot,(0,de.Nn)(Ot)&&Ot.add(this)):this.destination=Nt}static create(Ot,Pt,Qt){return new Yt(Ot,Pt,Qt)}next(Ot){this.isStopped?At(function Je(kt){return Et("N",kt,void 0)}(Ot),this):this._next(Ot)}error(Ot){this.isStopped?At(function ht(kt){return Et("E",void 0,kt)}(Ot),this):(this.isStopped=!0,this._error(Ot))}complete(){this.isStopped?At(gt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ot){this.destination.next(Ot)}_error(Ot){try{this.destination.error(Ot)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const sn=Function.prototype.bind;function $t(kt,Ot){return sn.call(kt,Ot)}class er{constructor(Ot){this.partialObserver=Ot}next(Ot){const{partialObserver:Pt}=this;if(Pt.next)try{Pt.next(Ot)}catch(Qt){ze(Qt)}}error(Ot){const{partialObserver:Pt}=this;if(Pt.error)try{Pt.error(Ot)}catch(Qt){ze(Qt)}else ze(Ot)}complete(){const{partialObserver:Ot}=this;if(Ot.complete)try{Ot.complete()}catch(Pt){ze(Pt)}}}class Yt extends Fe{constructor(Ot,Pt,Qt){let Le;if(super(),(0,m.m)(Ot)||!Ot)Le={next:Ot??void 0,error:Pt??void 0,complete:Qt??void 0};else{let et;this&&se.v.useDeprecatedNextContext?(et=Object.create(Ot),et.unsubscribe=()=>this.unsubscribe(),Le={next:Ot.next&&$t(Ot.next,et),error:Ot.error&&$t(Ot.error,et),complete:Ot.complete&&$t(Ot.complete,et)}):Le=Ot}this.destination=new er(Le)}}function ze(kt){se.v.useDeprecatedSynchronousErrorHandling?(0,we.O)(kt):(0,st.h)(kt)}function At(kt,Ot){const{onStoppedNotification:Pt}=se.v;Pt&&Ie.z.setTimeout(()=>Pt(kt,Ot))}const Nt={closed:!0,next:ct.Z,error:function Dt(kt){throw kt},complete:ct.Z}},727:(Gn,Rt,Q)=>{Q.d(Rt,{Lc:()=>gt,w0:()=>ct,Nn:()=>ht});var m=Q(576);const se=(0,Q(3888).d)(Et=>function(we){Et(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((Fe,sn)=>`${sn+1}) ${Fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we});var st=Q(8737);class ct{constructor(Ie){this.initialTeardown=Ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ie;if(!this.closed){this.closed=!0;const{_parentage:we}=this;if(we)if(this._parentage=null,Array.isArray(we))for(const $t of we)$t.remove(this);else we.remove(this);const{initialTeardown:Fe}=this;if((0,m.m)(Fe))try{Fe()}catch($t){Ie=$t instanceof se?$t.errors:[$t]}const{_finalizers:sn}=this;if(sn){this._finalizers=null;for(const $t of sn)try{Je($t)}catch(er){Ie=Ie??[],er instanceof se?Ie=[...Ie,...er.errors]:Ie.push(er)}}if(Ie)throw new se(Ie)}}add(Ie){var we;if(Ie&&Ie!==this)if(this.closed)Je(Ie);else{if(Ie instanceof ct){if(Ie.closed||Ie._hasParent(this))return;Ie._addParent(this)}(this._finalizers=null!==(we=this._finalizers)&&void 0!==we?we:[]).push(Ie)}}_hasParent(Ie){const{_parentage:we}=this;return we===Ie||Array.isArray(we)&&we.includes(Ie)}_addParent(Ie){const{_parentage:we}=this;this._parentage=Array.isArray(we)?(we.push(Ie),we):we?[we,Ie]:Ie}_removeParent(Ie){const{_parentage:we}=this;we===Ie?this._parentage=null:Array.isArray(we)&&(0,st.P)(we,Ie)}remove(Ie){const{_finalizers:we}=this;we&&(0,st.P)(we,Ie),Ie instanceof ct&&Ie._removeParent(this)}}ct.EMPTY=(()=>{const Et=new ct;return Et.closed=!0,Et})();const gt=ct.EMPTY;function ht(Et){return Et instanceof ct||Et&&"closed"in Et&&(0,m.m)(Et.remove)&&(0,m.m)(Et.add)&&(0,m.m)(Et.unsubscribe)}function Je(Et){(0,m.m)(Et)?Et():Et.unsubscribe()}},2416:(Gn,Rt,Q)=>{Q.d(Rt,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Gn,Rt,Q)=>{Q.d(Rt,{E:()=>de});const de=new(Q(8306).y)(ct=>ct.complete())},8996:(Gn,Rt,Q)=>{Q.d(Rt,{D:()=>Ot});var m=Q(8421),de=Q(5363),se=Q(9468),gt=Q(8306),Je=Q(2202),Et=Q(576),Ie=Q(9672);function Fe(Pt,Qt){if(!Pt)throw new Error("Iterable cannot be null");return new gt.y(Le=>{(0,Ie.f)(Le,Qt,()=>{const et=Pt[Symbol.asyncIterator]();(0,Ie.f)(Le,Qt,()=>{et.next().then(yt=>{yt.done?Le.complete():Le.next(yt.value)})},0,!0)})})}var sn=Q(3670),$t=Q(8239),er=Q(1144),Yt=Q(6495),ze=Q(2206),Dt=Q(4532),At=Q(3260);function Ot(Pt,Qt){return Qt?function kt(Pt,Qt){if(null!=Pt){if((0,sn.c)(Pt))return function st(Pt,Qt){return(0,m.Xf)(Pt).pipe((0,se.R)(Qt),(0,de.Q)(Qt))}(Pt,Qt);if((0,er.z)(Pt))return function ht(Pt,Qt){return new gt.y(Le=>{let et=0;return Qt.schedule(function(){et===Pt.length?Le.complete():(Le.next(Pt[et++]),Le.closed||this.schedule())})})}(Pt,Qt);if((0,$t.t)(Pt))return function ct(Pt,Qt){return(0,m.Xf)(Pt).pipe((0,se.R)(Qt),(0,de.Q)(Qt))}(Pt,Qt);if((0,ze.D)(Pt))return Fe(Pt,Qt);if((0,Yt.T)(Pt))return function we(Pt,Qt){return new gt.y(Le=>{let et;return(0,Ie.f)(Le,Qt,()=>{et=Pt[Je.h](),(0,Ie.f)(Le,Qt,()=>{let yt,Pe;try{({value:yt,done:Pe}=et.next())}catch(Se){return void Le.error(Se)}Pe?Le.complete():Le.next(yt)},0,!0)}),()=>(0,Et.m)(et?.return)&&et.return()})}(Pt,Qt);if((0,At.L)(Pt))return function Nt(Pt,Qt){return Fe((0,At.Q)(Pt),Qt)}(Pt,Qt)}throw(0,Dt.z)(Pt)}(Pt,Qt):(0,m.Xf)(Pt)}},8421:(Gn,Rt,Q)=>{Q.d(Rt,{Xf:()=>sn});var m=Q(655),de=Q(1144),se=Q(8239),st=Q(8306),ct=Q(3670),gt=Q(2206),ht=Q(4532),Je=Q(6495),Et=Q(3260),Ie=Q(576),we=Q(7849),Fe=Q(8822);function sn(kt){if(kt instanceof st.y)return kt;if(null!=kt){if((0,ct.c)(kt))return function $t(kt){return new st.y(Ot=>{const Pt=kt[Fe.L]();if((0,Ie.m)(Pt.subscribe))return Pt.subscribe(Ot);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(kt);if((0,de.z)(kt))return function er(kt){return new st.y(Ot=>{for(let Pt=0;Pt<kt.length&&!Ot.closed;Pt++)Ot.next(kt[Pt]);Ot.complete()})}(kt);if((0,se.t)(kt))return function Yt(kt){return new st.y(Ot=>{kt.then(Pt=>{Ot.closed||(Ot.next(Pt),Ot.complete())},Pt=>Ot.error(Pt)).then(null,we.h)})}(kt);if((0,gt.D)(kt))return Dt(kt);if((0,Je.T)(kt))return function ze(kt){return new st.y(Ot=>{for(const Pt of kt)if(Ot.next(Pt),Ot.closed)return;Ot.complete()})}(kt);if((0,Et.L)(kt))return function At(kt){return Dt((0,Et.Q)(kt))}(kt)}throw(0,ht.z)(kt)}function Dt(kt){return new st.y(Ot=>{(function Nt(kt,Ot){var Pt,Qt,Le,et;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Pt=(0,m.KL)(kt);!(Qt=yield Pt.next()).done;)if(Ot.next(Qt.value),Ot.closed)return}catch(yt){Le={error:yt}}finally{try{Qt&&!Qt.done&&(et=Pt.return)&&(yield et.call(Pt))}finally{if(Le)throw Le.error}}Ot.complete()})})(kt,Ot).catch(Pt=>Ot.error(Pt))})}},6451:(Gn,Rt,Q)=>{Q.d(Rt,{T:()=>gt});var m=Q(8189),de=Q(8421),se=Q(515),st=Q(3269),ct=Q(8996);function gt(...ht){const Je=(0,st.yG)(ht),Et=(0,st._6)(ht,1/0),Ie=ht;return Ie.length?1===Ie.length?(0,de.Xf)(Ie[0]):(0,m.J)(Et)((0,ct.D)(Ie,Je)):se.E}},5403:(Gn,Rt,Q)=>{Q.d(Rt,{x:()=>de});var m=Q(930);function de(st,ct,gt,ht,Je){return new se(st,ct,gt,ht,Je)}class se extends m.Lv{constructor(ct,gt,ht,Je,Et,Ie){super(ct),this.onFinalize=Et,this.shouldUnsubscribe=Ie,this._next=gt?function(we){try{gt(we)}catch(Fe){ct.error(Fe)}}:super._next,this._error=Je?function(we){try{Je(we)}catch(Fe){ct.error(Fe)}finally{this.unsubscribe()}}:super._error,this._complete=ht?function(){try{ht()}catch(we){ct.error(we)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ct;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:gt}=this;super.unsubscribe(),!gt&&(null===(ct=this.onFinalize)||void 0===ct||ct.call(this))}}}},4004:(Gn,Rt,Q)=>{Q.d(Rt,{U:()=>se});var m=Q(4482),de=Q(5403);function se(st,ct){return(0,m.e)((gt,ht)=>{let Je=0;gt.subscribe((0,de.x)(ht,Et=>{ht.next(st.call(ct,Et,Je++))}))})}},8189:(Gn,Rt,Q)=>{Q.d(Rt,{J:()=>se});var m=Q(5577),de=Q(4671);function se(st=1/0){return(0,m.z)(de.y,st)}},5577:(Gn,Rt,Q)=>{Q.d(Rt,{z:()=>Je});var m=Q(4004),de=Q(8421),se=Q(4482),st=Q(9672),ct=Q(5403),ht=Q(576);function Je(Et,Ie,we=1/0){return(0,ht.m)(Ie)?Je((Fe,sn)=>(0,m.U)(($t,er)=>Ie(Fe,$t,sn,er))((0,de.Xf)(Et(Fe,sn))),we):("number"==typeof Ie&&(we=Ie),(0,se.e)((Fe,sn)=>function gt(Et,Ie,we,Fe,sn,$t,er,Yt){const ze=[];let Dt=0,At=0,Nt=!1;const kt=()=>{Nt&&!ze.length&&!Dt&&Ie.complete()},Ot=Qt=>Dt<Fe?Pt(Qt):ze.push(Qt),Pt=Qt=>{$t&&Ie.next(Qt),Dt++;let Le=!1;(0,de.Xf)(we(Qt,At++)).subscribe((0,ct.x)(Ie,et=>{sn?.(et),$t?Ot(et):Ie.next(et)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Dt--;ze.length&&Dt<Fe;){const et=ze.shift();er?(0,st.f)(Ie,er,()=>Pt(et)):Pt(et)}kt()}catch(et){Ie.error(et)}}))};return Et.subscribe((0,ct.x)(Ie,Ot,()=>{Nt=!0,kt()})),()=>{Yt?.()}}(Fe,sn,Et,we)))}},5363:(Gn,Rt,Q)=>{Q.d(Rt,{Q:()=>st});var m=Q(9672),de=Q(4482),se=Q(5403);function st(ct,gt=0){return(0,de.e)((ht,Je)=>{ht.subscribe((0,se.x)(Je,Et=>(0,m.f)(Je,ct,()=>Je.next(Et),gt),()=>(0,m.f)(Je,ct,()=>Je.complete(),gt),Et=>(0,m.f)(Je,ct,()=>Je.error(Et),gt)))})}},3099:(Gn,Rt,Q)=>{Q.d(Rt,{B:()=>ct});var m=Q(8421),de=Q(7579),se=Q(930),st=Q(4482);function ct(ht={}){const{connector:Je=(()=>new de.x),resetOnError:Et=!0,resetOnComplete:Ie=!0,resetOnRefCountZero:we=!0}=ht;return Fe=>{let sn,$t,er,Yt=0,ze=!1,Dt=!1;const At=()=>{$t?.unsubscribe(),$t=void 0},Nt=()=>{At(),sn=er=void 0,ze=Dt=!1},kt=()=>{const Ot=sn;Nt(),Ot?.unsubscribe()};return(0,st.e)((Ot,Pt)=>{Yt++,!Dt&&!ze&&At();const Qt=er=er??Je();Pt.add(()=>{Yt--,0===Yt&&!Dt&&!ze&&($t=gt(kt,we))}),Qt.subscribe(Pt),!sn&&Yt>0&&(sn=new se.Hp({next:Le=>Qt.next(Le),error:Le=>{Dt=!0,At(),$t=gt(Nt,Et,Le),Qt.error(Le)},complete:()=>{ze=!0,At(),$t=gt(Nt,Ie),Qt.complete()}}),(0,m.Xf)(Ot).subscribe(sn))})(Fe)}}function gt(ht,Je,...Et){if(!0===Je)return void ht();if(!1===Je)return;const Ie=new se.Hp({next:()=>{Ie.unsubscribe(),ht()}});return Je(...Et).subscribe(Ie)}},9468:(Gn,Rt,Q)=>{Q.d(Rt,{R:()=>de});var m=Q(4482);function de(se,st=0){return(0,m.e)((ct,gt)=>{gt.add(se.schedule(()=>ct.subscribe(gt),st))})}},4408:(Gn,Rt,Q)=>{Q.d(Rt,{o:()=>ct});var m=Q(727);class de extends m.w0{constructor(ht,Je){super()}schedule(ht,Je=0){return this}}const se={setInterval(gt,ht,...Je){const{delegate:Et}=se;return Et?.setInterval?Et.setInterval(gt,ht,...Je):setInterval(gt,ht,...Je)},clearInterval(gt){const{delegate:ht}=se;return(ht?.clearInterval||clearInterval)(gt)},delegate:void 0};var st=Q(8737);class ct extends de{constructor(ht,Je){super(ht,Je),this.scheduler=ht,this.work=Je,this.pending=!1}schedule(ht,Je=0){var Et;if(this.closed)return this;this.state=ht;const Ie=this.id,we=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(we,Ie,Je)),this.pending=!0,this.delay=Je,this.id=null!==(Et=this.id)&&void 0!==Et?Et:this.requestAsyncId(we,this.id,Je),this}requestAsyncId(ht,Je,Et=0){return se.setInterval(ht.flush.bind(ht,this),Et)}recycleAsyncId(ht,Je,Et=0){if(null!=Et&&this.delay===Et&&!1===this.pending)return Je;null!=Je&&se.clearInterval(Je)}execute(ht,Je){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Et=this._execute(ht,Je);if(Et)return Et;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ht,Je){let Ie,Et=!1;try{this.work(ht)}catch(we){Et=!0,Ie=we||new Error("Scheduled action threw falsy error")}if(Et)return this.unsubscribe(),Ie}unsubscribe(){if(!this.closed){const{id:ht,scheduler:Je}=this,{actions:Et}=Je;this.work=this.state=this.scheduler=null,this.pending=!1,(0,st.P)(Et,this),null!=ht&&(this.id=this.recycleAsyncId(Je,ht,null)),this.delay=null,super.unsubscribe()}}}},7565:(Gn,Rt,Q)=>{Q.d(Rt,{v:()=>se});var m=Q(6063);class de{constructor(ct,gt=de.now){this.schedulerActionCtor=ct,this.now=gt}schedule(ct,gt=0,ht){return new this.schedulerActionCtor(this,ct).schedule(ht,gt)}}de.now=m.l.now;class se extends de{constructor(ct,gt=de.now){super(ct,gt),this.actions=[],this._active=!1}flush(ct){const{actions:gt}=this;if(this._active)return void gt.push(ct);let ht;this._active=!0;do{if(ht=ct.execute(ct.state,ct.delay))break}while(ct=gt.shift());if(this._active=!1,ht){for(;ct=gt.shift();)ct.unsubscribe();throw ht}}}},4986:(Gn,Rt,Q)=>{Q.d(Rt,{P:()=>st,z:()=>se});var m=Q(4408);const se=new(Q(7565).v)(m.o),st=se},6063:(Gn,Rt,Q)=>{Q.d(Rt,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(Gn,Rt,Q)=>{Q.d(Rt,{z:()=>m});const m={setTimeout(de,se,...st){const{delegate:ct}=m;return ct?.setTimeout?ct.setTimeout(de,se,...st):setTimeout(de,se,...st)},clearTimeout(de){const{delegate:se}=m;return(se?.clearTimeout||clearTimeout)(de)},delegate:void 0}},2202:(Gn,Rt,Q)=>{Q.d(Rt,{h:()=>de});const de=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Gn,Rt,Q)=>{Q.d(Rt,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Gn,Rt,Q)=>{Q.d(Rt,{_6:()=>gt,jO:()=>st,yG:()=>ct});var m=Q(576),de=Q(3532);function se(ht){return ht[ht.length-1]}function st(ht){return(0,m.m)(se(ht))?ht.pop():void 0}function ct(ht){return(0,de.K)(se(ht))?ht.pop():void 0}function gt(ht,Je){return"number"==typeof se(ht)?ht.pop():Je}},8737:(Gn,Rt,Q)=>{function m(de,se){if(de){const st=de.indexOf(se);0<=st&&de.splice(st,1)}}Q.d(Rt,{P:()=>m})},3888:(Gn,Rt,Q)=>{function m(de){const st=de(ct=>{Error.call(ct),ct.stack=(new Error).stack});return st.prototype=Object.create(Error.prototype),st.prototype.constructor=st,st}Q.d(Rt,{d:()=>m})},2806:(Gn,Rt,Q)=>{Q.d(Rt,{O:()=>st,x:()=>se});var m=Q(2416);let de=null;function se(ct){if(m.v.useDeprecatedSynchronousErrorHandling){const gt=!de;if(gt&&(de={errorThrown:!1,error:null}),ct(),gt){const{errorThrown:ht,error:Je}=de;if(de=null,ht)throw Je}}else ct()}function st(ct){m.v.useDeprecatedSynchronousErrorHandling&&de&&(de.errorThrown=!0,de.error=ct)}},9672:(Gn,Rt,Q)=>{function m(de,se,st,ct=0,gt=!1){const ht=se.schedule(function(){st(),gt?de.add(this.schedule(null,ct)):this.unsubscribe()},ct);if(de.add(ht),!gt)return ht}Q.d(Rt,{f:()=>m})},4671:(Gn,Rt,Q)=>{function m(de){return de}Q.d(Rt,{y:()=>m})},1144:(Gn,Rt,Q)=>{Q.d(Rt,{z:()=>m});const m=de=>de&&"number"==typeof de.length&&"function"!=typeof de},2206:(Gn,Rt,Q)=>{Q.d(Rt,{D:()=>de});var m=Q(576);function de(se){return Symbol.asyncIterator&&(0,m.m)(se?.[Symbol.asyncIterator])}},576:(Gn,Rt,Q)=>{function m(de){return"function"==typeof de}Q.d(Rt,{m:()=>m})},3670:(Gn,Rt,Q)=>{Q.d(Rt,{c:()=>se});var m=Q(8822),de=Q(576);function se(st){return(0,de.m)(st[m.L])}},6495:(Gn,Rt,Q)=>{Q.d(Rt,{T:()=>se});var m=Q(2202),de=Q(576);function se(st){return(0,de.m)(st?.[m.h])}},8239:(Gn,Rt,Q)=>{Q.d(Rt,{t:()=>de});var m=Q(576);function de(se){return(0,m.m)(se?.then)}},3260:(Gn,Rt,Q)=>{Q.d(Rt,{L:()=>st,Q:()=>se});var m=Q(655),de=Q(576);function se(ct){return(0,m.FC)(this,arguments,function*(){const ht=ct.getReader();try{for(;;){const{value:Je,done:Et}=yield(0,m.qq)(ht.read());if(Et)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(Je)}}finally{ht.releaseLock()}})}function st(ct){return(0,de.m)(ct?.getReader)}},3532:(Gn,Rt,Q)=>{Q.d(Rt,{K:()=>de});var m=Q(576);function de(se){return se&&(0,m.m)(se.schedule)}},4482:(Gn,Rt,Q)=>{Q.d(Rt,{e:()=>se});var m=Q(576);function se(st){return ct=>{if(function de(st){return(0,m.m)(st?.lift)}(ct))return ct.lift(function(gt){try{return st(gt,this)}catch(ht){this.error(ht)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Gn,Rt,Q)=>{function m(){}Q.d(Rt,{Z:()=>m})},7849:(Gn,Rt,Q)=>{Q.d(Rt,{h:()=>se});var m=Q(2416),de=Q(3410);function se(st){de.z.setTimeout(()=>{const{onUnhandledError:ct}=m.v;if(!ct)throw st;ct(st)})}},4532:(Gn,Rt,Q)=>{function m(de){return new TypeError(`You provided ${null!==de&&"object"==typeof de?"an invalid object":`'${de}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Q.d(Rt,{z:()=>m})},655:(Gn,Rt,Q)=>{function st(Pe,Se){var nt={};for(var We in Pe)Object.prototype.hasOwnProperty.call(Pe,We)&&Se.indexOf(We)<0&&(nt[We]=Pe[We]);if(null!=Pe&&"function"==typeof Object.getOwnPropertySymbols){var qt=0;for(We=Object.getOwnPropertySymbols(Pe);qt<We.length;qt++)Se.indexOf(We[qt])<0&&Object.prototype.propertyIsEnumerable.call(Pe,We[qt])&&(nt[We[qt]]=Pe[We[qt]])}return nt}function Je(Pe,Se,nt,We){return new(nt||(nt=Promise))(function(Vt,Vn){function Nr(Pn){try{Kn(We.next(Pn))}catch(Xn){Vn(Xn)}}function Tr(Pn){try{Kn(We.throw(Pn))}catch(Xn){Vn(Xn)}}function Kn(Pn){Pn.done?Vt(Pn.value):function qt(Vt){return Vt instanceof nt?Vt:new nt(function(Vn){Vn(Vt)})}(Pn.value).then(Nr,Tr)}Kn((We=We.apply(Pe,Se||[])).next())})}function ze(Pe){return this instanceof ze?(this.v=Pe,this):new ze(Pe)}function Dt(Pe,Se,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qt,We=nt.apply(Pe,Se||[]),Vt=[];return qt={},Vn("next"),Vn("throw"),Vn("return"),qt[Symbol.asyncIterator]=function(){return this},qt;function Vn(Lr){We[Lr]&&(qt[Lr]=function(Di){return new Promise(function(ir,Cn){Vt.push([Lr,Di,ir,Cn])>1||Nr(Lr,Di)})})}function Nr(Lr,Di){try{!function Tr(Lr){Lr.value instanceof ze?Promise.resolve(Lr.value.v).then(Kn,Pn):Xn(Vt[0][2],Lr)}(We[Lr](Di))}catch(ir){Xn(Vt[0][3],ir)}}function Kn(Lr){Nr("next",Lr)}function Pn(Lr){Nr("throw",Lr)}function Xn(Lr,Di){Lr(Di),Vt.shift(),Vt.length&&Nr(Vt[0][0],Vt[0][1])}}function Nt(Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,Se=Pe[Symbol.asyncIterator];return Se?Se.call(Pe):(Pe=function Fe(Pe){var Se="function"==typeof Symbol&&Symbol.iterator,nt=Se&&Pe[Se],We=0;if(nt)return nt.call(Pe);if(Pe&&"number"==typeof Pe.length)return{next:function(){return Pe&&We>=Pe.length&&(Pe=void 0),{value:Pe&&Pe[We++],done:!Pe}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),nt={},We("next"),We("throw"),We("return"),nt[Symbol.asyncIterator]=function(){return this},nt);function We(Vt){nt[Vt]=Pe[Vt]&&function(Vn){return new Promise(function(Nr,Tr){!function qt(Vt,Vn,Nr,Tr){Promise.resolve(Tr).then(function(Kn){Vt({value:Kn,done:Nr})},Vn)}(Nr,Tr,(Vn=Pe[Vt](Vn)).done,Vn.value)})}}}Q.d(Rt,{FC:()=>Dt,KL:()=>Nt,_T:()=>st,mG:()=>Je,qq:()=>ze})},4650:(Gn,Rt,Q)=>{Q.d(Rt,{$8M:()=>cc,AFp:()=>y2,ALo:()=>gv,AaK:()=>Je,CRH:()=>d_,CZH:()=>v_,EJc:()=>MC,F$t:()=>Ps,F4k:()=>rd,FYo:()=>km,FiY:()=>Xl,Gf:()=>_v,GfV:()=>kN,Hsn:()=>Rs,JOm:()=>$c,Jf7:()=>RN,LFG:()=>Xt,Lbi:()=>AP,Lck:()=>XA,NdJ:()=>Ar,OlP:()=>Bi,Oqu:()=>G0,Q6J:()=>qm,QGY:()=>Km,QbO:()=>TP,Qsj:()=>U6,R0b:()=>ga,RDi:()=>Zo,Rgc:()=>ud,SBq:()=>Nm,TTD:()=>Vu,TgZ:()=>ru,Udp:()=>Dw,X6Q:()=>T2,Xpm:()=>it,Y36:()=>rp,YNc:()=>U0,Yjl:()=>ri,Yz7:()=>Cn,ZZ4:()=>B2,_UZ:()=>gp,_c5:()=>GP,_uU:()=>fA,aQg:()=>j2,cJS:()=>ts,cg1:()=>X,dDg:()=>FC,dqk:()=>fn,eFA:()=>I_,ekj:()=>W0,eoX:()=>I2,f3M:()=>pn,g9A:()=>xv,h0i:()=>uu,hGG:()=>XC,hij:()=>Xm,iGM:()=>fC,ifc:()=>Lt,ip1:()=>Iv,kL8:()=>Lw,lG2:()=>Bn,lcZ:()=>r2,lri:()=>w2,oAB:()=>Ee,oxw:()=>eA,q4F:()=>wS,qLn:()=>w0,qOj:()=>O0,qZA:()=>Gm,rWj:()=>fu,sBO:()=>zP,sIi:()=>dp,s_b:()=>Cr,soG:()=>Rp,uIk:()=>pr,vHH:()=>ze,vpe:()=>li,wAp:()=>ar,xp6:()=>BN,zSh:()=>gS,zs3:()=>hh});var m=Q(7579),de=Q(727),se=Q(8306),st=Q(6451),ct=Q(3099);function gt(a){for(let c in a)if(a[c]===gt)return c;throw Error("Could not find renamed property on target object.")}function ht(a,c){for(const u in c)c.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=c[u])}function Je(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Je).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const c=a.toString();if(null==c)return""+c;const u=c.indexOf("\n");return-1===u?c:c.substring(0,u)}function Et(a,c){return null==a||""===a?null===c?"":c:null==c||""===c?a:a+" "+c}const Ie=gt({__forward_ref__:gt});function we(a){return a.__forward_ref__=we,a.toString=function(){return Je(this())},a}function Fe(a){return function sn(a){return"function"==typeof a&&a.hasOwnProperty(Ie)&&a.__forward_ref__===we}(a)?a():a}function $t(a){return a&&!!a.\u0275providers}class ze extends Error{constructor(c,u){super(function Dt(a,c){return`NG0${Math.abs(a)}${c?": "+c.trim():""}`}(c,u)),this.code=c}}function At(a){return"string"==typeof a?a:null==a?"":String(a)}function Qt(a,c){throw new ze(-201,!1)}function Pn(a,c){null==a&&function Xn(a,c,u,f){throw new Error(`ASSERTION ERROR: ${a}`+(null==f?"":` [Expected=> ${u} ${f} ${c} <=Actual]`))}(c,a,null,"!=")}function Cn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function ts(a){return{providers:a.providers||[],imports:a.imports||[]}}function gs(a){return Pi(a,zi)||Pi(a,Ge)}function Pi(a,c){return a.hasOwnProperty(c)?a[c]:null}function Ri(a){return a&&(a.hasOwnProperty(un)||a.hasOwnProperty(Mt))?a[un]:null}const zi=gt({\u0275prov:gt}),un=gt({\u0275inj:gt}),Ge=gt({ngInjectableDef:gt}),Mt=gt({ngInjectorDef:gt});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let Ln;function mr(a){const c=Ln;return Ln=a,c}function Gr(a,c,u){const f=gs(a);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:u&bt.Optional?null:void 0!==c?c:void Qt(Je(a))}const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hr={},oi="__NG_DI_FLAG__",Zi="ngTempTokenPath",ai=/\n/gm,ws="__source";let yr;function Ms(a){const c=yr;return yr=a,c}function Oi(a,c=bt.Default){if(void 0===yr)throw new ze(-203,!1);return null===yr?Gr(a,void 0,c):yr.get(a,c&bt.Optional?null:void 0,c)}function Xt(a,c=bt.Default){return(function lr(){return Ln}()||Oi)(Fe(a),c)}function pn(a,c=bt.Default){return Xt(a,Qn(c))}function Qn(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function or(a){const c=[];for(let u=0;u<a.length;u++){const f=Fe(a[u]);if(Array.isArray(f)){if(0===f.length)throw new ze(900,!1);let p,y=bt.Default;for(let S=0;S<f.length;S++){const M=f[S],R=be(M);"number"==typeof R?-1===R?p=M.token:y|=R:p=M}c.push(Xt(p,y))}else c.push(Xt(f))}return c}function Ur(a,c){return a[oi]=c,a.prototype[oi]=c,a}function be(a){return a[oi]}function ue(a){return{toString:a}.toString()}var G=(()=>((G=G||{})[G.OnPush=0]="OnPush",G[G.Default=1]="Default",G))(),Lt=(()=>{return(a=Lt||(Lt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Lt;var a})();const xn={},an=[],hr=gt({\u0275cmp:gt}),Hn=gt({\u0275dir:gt}),Ei=gt({\u0275pipe:gt}),Hi=gt({\u0275mod:gt}),fr=gt({\u0275fac:gt}),cs=gt({__NG_ELEMENT_ID__:gt});let Re=0;function it(a){return ue(()=>{const u=!0===a.standalone,f={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===G.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||an,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Lt.Emulated,id:"c"+Re++,styles:a.styles||an,_:null,setInput:null,schemas:a.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},y=a.dependencies,S=a.features;return p.inputs=Wt(a.inputs,f),p.outputs=Wt(a.outputs),S&&S.forEach(M=>M(p)),p.directiveDefs=y?()=>("function"==typeof y?y():y).map(Sn).filter(Zn):null,p.pipeDefs=y?()=>("function"==typeof y?y():y).map(ii).filter(Zn):null,p})}function Sn(a){return Un(a)||Dn(a)}function Zn(a){return null!==a}function Ee(a){return ue(()=>({type:a.type,bootstrap:a.bootstrap||an,declarations:a.declarations||an,imports:a.imports||an,exports:a.exports||an,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Wt(a,c){if(null==a)return xn;const u={};for(const f in a)if(a.hasOwnProperty(f)){let p=a[f],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),u[p]=f,c&&(c[p]=y)}return u}const Bn=it;function ri(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function Un(a){return a[hr]||null}function Dn(a){return a[Hn]||null}function ii(a){return a[Ei]||null}function ca(a){return Array.isArray(a)&&"object"==typeof a[1]}function la(a){return Array.isArray(a)&&!0===a[1]}function Bc(a){return 0!=(4&a.flags)}function yf(a){return a.componentOffset>-1}function vf(a){return 1==(1&a.flags)}function Ao(a){return null!==a.template}function ox(a){return 0!=(256&a[2])}function ju(a,c){return a.hasOwnProperty(fr)?a[fr]:null}class ky{constructor(c,u,f){this.previousValue=c,this.currentValue=u,this.firstChange=f}isFirstChange(){return this.firstChange}}function Vu(){return wf}function wf(a){return a.type.prototype.ngOnChanges&&(a.setInput=jg),Ug}function Ug(){const a=zu(this),c=a?.current;if(c){const u=a.previous;if(u===xn)a.previous=c;else for(let f in c)u[f]=c[f];a.current=null,this.ngOnChanges(c)}}function jg(a,c,u,f){const p=this.declaredInputs[u],y=zu(a)||function r1(a,c){return a[Py]=c}(a,{previous:xn,current:null}),S=y.current||(y.current={}),M=y.previous,R=M[p];S[p]=new ky(R&&R.currentValue,c,M===xn),a[f]=c}Vu.ngInherit=!0;const Py="__ngSimpleChanges__";function zu(a){return a[Py]||null}function Gs(a){for(;Array.isArray(a);)a=a[0];return a}function Kl(a,c){return Gs(c[a])}function Co(a,c){return Gs(c[a.index])}function Oy(a,c){return a.data[c]}function ua(a,c){const u=c[a];return ca(u)?u:u[0]}function $g(a){return 64==(64&a[2])}function jc(a,c){return null==c?null:a[c]}function Ef(a){a[18]=0}function Gg(a,c){a[5]+=c;let u=a,f=a[3];for(;null!==f&&(1===c&&1===u[5]||-1===c&&0===u[5]);)f[5]+=c,u=f,f=f[3]}const wr={lFrame:Ex(null),bindingsEnabled:!0};function o1(){return wr.bindingsEnabled}function zt(){return wr.lFrame.lView}function ti(){return wr.lFrame.tView}function Ks(){let a=xf();for(;null!==a&&64===a.type;)a=a.parent;return a}function xf(){return wr.lFrame.currentTNode}function Ko(a,c){const u=wr.lFrame;u.currentTNode=a,u.isParent=c}function Zl(){return wr.lFrame.isParent}function Sf(){wr.lFrame.isParent=!1}function sc(){return wr.lFrame.bindingIndex++}function vx(a,c){const u=wr.lFrame;u.bindingIndex=u.bindingRootIndex=a,Vy(c)}function Vy(a){wr.lFrame.currentDirectiveIndex=a}function zy(){return wr.lFrame.currentQueryIndex}function Hy(a){wr.lFrame.currentQueryIndex=a}function wx(a){const c=a[1];return 2===c.type?c.declTNode:1===c.type?a[6]:null}function d1(a,c,u){if(u&bt.SkipSelf){let p=c,y=a;for(;!(p=p.parent,null!==p||u&bt.Host||(p=wx(y),null===p||(y=y[15],10&p.type))););if(null===p)return!1;c=p,a=y}const f=wr.lFrame=Ix();return f.currentTNode=c,f.lView=a,!0}function h1(a){const c=Ix(),u=a[1];wr.lFrame=c,c.currentTNode=u.firstChild,c.lView=a,c.tView=u,c.contextLView=a,c.bindingIndex=u.bindingStartIndex,c.inI18n=!1}function Ix(){const a=wr.lFrame,c=null===a?null:a.child;return null===c?Ex(a):c}function Ex(a){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=c),c}function Kg(){const a=wr.lFrame;return wr.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Yl=Kg;function Cf(){const a=Kg();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function To(){return wr.lFrame.selectedIndex}function zc(a){wr.lFrame.selectedIndex=a}function xi(){const a=wr.lFrame;return Oy(a.tView,a.selectedIndex)}function Mf(a,c){for(let u=c.directiveStart,f=c.directiveEnd;u<f;u++){const y=a.data[u].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:M,ngAfterViewInit:R,ngAfterViewChecked:B,ngOnDestroy:H}=y;S&&(a.contentHooks||(a.contentHooks=[])).push(-u,S),M&&((a.contentHooks||(a.contentHooks=[])).push(u,M),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,M)),R&&(a.viewHooks||(a.viewHooks=[])).push(-u,R),B&&((a.viewHooks||(a.viewHooks=[])).push(u,B),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,B)),null!=H&&(a.destroyHooks||(a.destroyHooks=[])).push(u,H)}}function Qg(a,c,u){Zd(a,c,3,u)}function yl(a,c,u,f){(3&a[2])===u&&Zd(a,c,u,f)}function Kd(a,c){let u=a[2];(3&u)===c&&(u&=2047,u+=1,a[2]=u)}function Zd(a,c,u,f){const y=f??-1,S=c.length-1;let M=0;for(let R=void 0!==f?65535&a[18]:0;R<S;R++)if("number"==typeof c[R+1]){if(M=c[R],null!=f&&M>=f)break}else c[R]<0&&(a[18]+=65536),(M<y||-1==y)&&(Wy(a,u,c,R),a[18]=(4294901760&a[18])+R+2),R++}function Wy(a,c,u,f){const p=u[f]<0,y=u[f+1],M=a[p?-u[f]:u[f]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===c){a[2]+=2048;try{y.call(M)}finally{}}}else try{y.call(M)}finally{}}class ac{constructor(c,u,f){this.factory=c,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=f}}function Ql(a,c,u){let f=0;for(;f<u.length;){const p=u[f];if("number"==typeof p){if(0!==p)break;f++;const y=u[f++],S=u[f++],M=u[f++];a.setAttribute(c,S,M,y)}else{const y=p,S=u[++f];kf(y)?a.setProperty(c,y,S):a.setAttribute(c,y,S),f++}}return f}function em(a){return 3===a||4===a||6===a}function kf(a){return 64===a.charCodeAt(0)}function vl(a,c){if(null!==c&&0!==c.length)if(null===a||0===a.length)a=c.slice();else{let u=-1;for(let f=0;f<c.length;f++){const p=c[f];"number"==typeof p?u=p:0===u||bl(a,u,p,null,-1===u||2===u?c[++f]:null)}}return a}function bl(a,c,u,f,p){let y=0,S=a.length;if(-1===c)S=-1;else for(;y<a.length;){const M=a[y++];if("number"==typeof M){if(M===c){S=-1;break}if(M>c){S=y-1;break}}}for(;y<a.length;){const M=a[y];if("number"==typeof M)break;if(M===u){if(null===f)return void(null!==p&&(a[y+1]=p));if(f===a[y+1])return void(a[y+2]=p)}y++,null!==f&&y++,null!==p&&y++}-1!==S&&(a.splice(S,0,c),y=S+1),a.splice(y++,0,u),null!==f&&a.splice(y++,0,f),null!==p&&a.splice(y++,0,p)}function Yd(a){return-1!==a}function Qd(a){return 32767&a}function Xd(a,c){let u=function Pf(a){return a>>16}(a),f=c;for(;u>0;)f=f[15],u--;return f}let Jd=!0;function Rf(a){const c=Jd;return Jd=a,c}let m1=0;const Va={};function rm(a,c){const u=y1(a,c);if(-1!==u)return u;const f=c[1];f.firstCreatePass&&(a.injectorIndex=c.length,Of(f.data,a),Of(c,null),Of(f.blueprint,null));const p=eh(a,c),y=a.injectorIndex;if(Yd(p)){const S=Qd(p),M=Xd(p,c),R=M[1].data;for(let B=0;B<8;B++)c[y+B]=M[S+B]|R[S+B]}return c[y+8]=p,y}function Of(a,c){a.push(0,0,0,0,0,0,0,0,c)}function y1(a,c){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===c[a.injectorIndex+8]?-1:a.injectorIndex}function eh(a,c){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,f=null,p=c;for(;null!==p;){if(f=cm(p),null===f)return-1;if(u++,p=p[15],-1!==f.injectorIndex)return f.injectorIndex|u<<16}return-1}function im(a,c,u){!function _1(a,c,u){let f;"string"==typeof u?f=u.charCodeAt(0)||0:u.hasOwnProperty(cs)&&(f=u[cs]),null==f&&(f=u[cs]=m1++);const p=255&f;c.data[a+(p>>5)]|=1<<p}(a,c,u)}function Lf(a,c,u){if(u&bt.Optional||void 0!==a)return a;Qt()}function Gy(a,c,u,f){if(u&bt.Optional&&void 0===f&&(f=null),0==(u&(bt.Self|bt.Host))){const p=a[9],y=mr(void 0);try{return p?p.get(c,f,u&bt.Optional):Gr(c,f,u&bt.Optional)}finally{mr(y)}}return Lf(f,0,u)}function sm(a,c,u,f=bt.Default,p){if(null!==a){if(1024&c[2]){const S=function Tx(a,c,u,f,p){let y=a,S=c;for(;null!==y&&null!==S&&1024&S[2]&&!(256&S[2]);){const M=Wu(y,S,u,f|bt.Self,Va);if(M!==Va)return M;let R=y.parent;if(!R){const B=S[21];if(B){const H=B.get(u,Va,f);if(H!==Va)return H}R=cm(S),S=S[15]}y=R}return p}(a,c,u,f,Va);if(S!==Va)return S}const y=Wu(a,c,u,f,Va);if(y!==Va)return y}return Gy(c,u,f,p)}function Wu(a,c,u,f,p){const y=function om(a){if("string"==typeof a)return a.charCodeAt(0)||0;const c=a.hasOwnProperty(cs)?a[cs]:void 0;return"number"==typeof c?c>=0?255&c:w1:c}(u);if("function"==typeof y){if(!d1(c,a,f))return f&bt.Host?Lf(p,0,f):Gy(c,u,f,p);try{const S=y(f);if(null!=S||f&bt.Optional)return S;Qt()}finally{Yl()}}else if("number"==typeof y){let S=null,M=y1(a,c),R=-1,B=f&bt.Host?c[16][6]:null;for((-1===M||f&bt.SkipSelf)&&(R=-1===M?eh(a,c):c[M+8],-1!==R&&b1(f,!1)?(S=c[1],M=Qd(R),c=Xd(R,c)):M=-1);-1!==M;){const H=c[1];if(v1(y,M,H.data)){const ce=Ky(M,c,u,S,f,B);if(ce!==Va)return ce}R=c[M+8],-1!==R&&b1(f,c[1].data[M+8]===B)&&v1(y,M,c)?(S=H,M=Qd(R),c=Xd(R,c)):M=-1}}return p}function Ky(a,c,u,f,p,y){const S=c[1],M=S.data[a+8],H=Ff(M,S,u,null==f?yf(M)&&Jd:f!=S&&0!=(3&M.type),p&bt.Host&&y===M);return null!==H?th(c,S,H,M):Va}function Ff(a,c,u,f,p){const y=a.providerIndexes,S=c.data,M=1048575&y,R=a.directiveStart,H=y>>20,De=p?M+H:a.directiveEnd;for(let $e=f?M:M+H;$e<De;$e++){const St=S[$e];if($e<R&&u===St||$e>=R&&St.type===u)return $e}if(p){const $e=S[R];if($e&&Ao($e)&&$e.type===u)return R}return null}function th(a,c,u,f){let p=a[u];const y=c.data;if(function Xg(a){return a instanceof ac}(p)){const S=p;S.resolving&&function kt(a,c){const u=c?`. Dependency path: ${c.join(" > ")} > ${a}`:"";throw new ze(-200,`Circular dependency in DI detected for ${a}${u}`)}(function Nt(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():At(a)}(y[u]));const M=Rf(S.canSeeViewProviders);S.resolving=!0;const R=S.injectImpl?mr(S.injectImpl):null;d1(a,f,bt.Default);try{p=a[u]=S.factory(void 0,y,a,f),c.firstCreatePass&&u>=f.directiveStart&&function p1(a,c,u){const{ngOnChanges:f,ngOnInit:p,ngDoCheck:y}=c.type.prototype;if(f){const S=wf(c);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,S),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,S)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,p),y&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,y))}(u,y[u],c)}finally{null!==R&&mr(R),Rf(M),S.resolving=!1,Yl()}}return p}function v1(a,c,u){return!!(u[c+(a>>5)]&1<<a)}function b1(a,c){return!(a&bt.Self||a&bt.Host&&c)}class $u{constructor(c,u){this._tNode=c,this._lView=u}get(c,u,f){return sm(this._tNode,this._lView,c,Qn(f),u)}}function w1(){return new $u(Ks(),zt())}function cm(a){const c=a[1],u=c.type;return 2===u?c.declTNode:1===u?a[6]:null}function cc(a){return function qy(a,c){if("class"===c)return a.classes;if("style"===c)return a.styles;const u=a.attrs;if(u){const f=u.length;let p=0;for(;p<f;){const y=u[p];if(em(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<f&&"string"==typeof u[p];)p++;else{if(y===c)return u[p+1];p+=2}}}return null}(Ks(),a)}const qu="__parameters__";function nh(a,c,u){return ue(()=>{const f=function Bf(a){return function(...u){if(a){const f=a(...u);for(const p in f)this[p]=f[p]}}}(c);function p(...y){if(this instanceof p)return f.apply(this,y),this;const S=new p(...y);return M.annotation=S,M;function M(R,B,H){const ce=R.hasOwnProperty(qu)?R[qu]:Object.defineProperty(R,qu,{value:[]})[qu];for(;ce.length<=H;)ce.push(null);return(ce[H]=ce[H]||[]).push(S),R}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class Bi{constructor(c,u){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Cn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Do(a,c){void 0===c&&(c=a);for(let u=0;u<a.length;u++){let f=a[u];Array.isArray(f)?(c===a&&(c=a.slice(0,u)),Do(f,c)):c!==a&&c.push(f)}return c}function uc(a,c){a.forEach(u=>Array.isArray(u)?uc(u,c):c(u))}function um(a,c,u){c>=a.length?a.push(u):a.splice(c,0,u)}function Hc(a,c){return c>=a.length-1?a.pop():a.splice(c,1)[0]}function dc(a,c){const u=[];for(let f=0;f<a;f++)u.push(c);return u}function da(a,c,u){let f=Wc(a,c);return f>=0?a[1|f]=u:(f=~f,function dm(a,c,u,f){let p=a.length;if(p==c)a.push(u,f);else if(1===p)a.push(f,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>c;)a[p]=a[p-2],p--;a[c]=u,a[c+1]=f}}(a,f,c,u)),f}function hm(a,c){const u=Wc(a,c);if(u>=0)return a[1|u]}function Wc(a,c){return function C1(a,c,u){let f=0,p=a.length>>u;for(;p!==f;){const y=f+(p-f>>1),S=a[y<<u];if(c===S)return y<<u;S>c?p=y:f=y+1}return~(p<<u)}(a,c,1)}const Xl=Ur(nh("Optional"),8),Wf=Ur(nh("SkipSelf"),4);var $c=(()=>(($c=$c||{})[$c.Important=1]="Important",$c[$c.DashCase=2]="DashCase",$c))();const u0=new Map;let Wx=0;const I="__ngContext__";function N(a,c){ca(c)?(a[I]=c[20],function qx(a){u0.set(a[20],a)}(c)):a[I]=c}function Gf(a,c){return undefined(a,c)}function ch(a){const c=a[3];return la(c)?c[3]:c}function wm(a){return Im(a[13])}function p0(a){return Im(a[4])}function Im(a){for(;null!==a&&!la(a);)a=a[4];return a}function Em(a,c,u,f,p){if(null!=f){let y,S=!1;la(f)?y=f:ca(f)&&(S=!0,f=f[0]);const M=Gs(f);0===a&&null!==u?null==p?$M(c,u,M):Kf(c,u,M,p||null,!0):1===a&&null!==u?Kf(c,u,M,p||null,!0):2===a?function tS(a,c,u){const f=V1(a,c);f&&function _6(a,c,u,f){a.removeChild(c,u,f)}(a,f,c,u)}(c,M,S):3===a&&c.destroyNode(M),null!=y&&function YM(a,c,u,f,p){const y=u[7];y!==Gs(u)&&Em(c,a,f,y,p);for(let M=10;M<u.length;M++){const R=u[M];lh(R[1],R,a,c,f,y)}}(c,a,y,u,p)}}function Zx(a,c,u){return a.createElement(c,u)}function VM(a,c){const u=a[9],f=u.indexOf(c),p=c[3];512&c[2]&&(c[2]&=-513,Gg(p,-1)),u.splice(f,1)}function Yx(a,c){if(a.length<=10)return;const u=10+c,f=a[u];if(f){const p=f[17];null!==p&&p!==a&&VM(p,f),c>0&&(a[u-1][4]=f[4]);const y=Hc(a,10+c);!function l6(a,c){lh(a,c,c[11],2,null,null),c[0]=null,c[6]=null}(f[1],f);const S=y[19];null!==S&&S.detachView(y[1]),f[3]=null,f[4]=null,f[2]&=-65}return f}function zM(a,c){if(!(128&c[2])){const u=c[11];u.destroyNode&&lh(a,c,u,3,null,null),function h6(a){let c=a[13];if(!c)return Qx(a[1],a);for(;c;){let u=null;if(ca(c))u=c[13];else{const f=c[10];f&&(u=f)}if(!u){for(;c&&!c[4]&&c!==a;)ca(c)&&Qx(c[1],c),c=c[3];null===c&&(c=a),ca(c)&&Qx(c[1],c),u=c&&c[4]}c=u}}(c)}}function Qx(a,c){if(!(128&c[2])){c[2]&=-65,c[2]|=128,function m6(a,c){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let f=0;f<u.length;f+=2){const p=c[u[f]];if(!(p instanceof ac)){const y=u[f+1];if(Array.isArray(y))for(let S=0;S<y.length;S+=2){const M=p[y[S]],R=y[S+1];try{R.call(M)}finally{}}else try{y.call(p)}finally{}}}}(a,c),function g6(a,c){const u=a.cleanup,f=c[7];let p=-1;if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const S=u[y+3];S>=0?f[p=S]():f[p=-S].unsubscribe(),y+=2}else{const S=f[p=u[y+1]];u[y].call(S)}if(null!==f){for(let y=p+1;y<f.length;y++)(0,f[y])();c[7]=null}}(a,c),1===c[1].type&&c[11].destroy();const u=c[17];if(null!==u&&la(c[3])){u!==c[3]&&VM(u,c);const f=c[19];null!==f&&f.detachView(a)}!function B1(a){u0.delete(a[20])}(c)}}function HM(a,c,u){return function WM(a,c,u){let f=c;for(;null!==f&&40&f.type;)f=(c=f).parent;if(null===f)return u[0];{const{componentOffset:p}=f;if(p>-1){const{encapsulation:y}=a.data[f.directiveStart+p];if(y===Lt.None||y===Lt.Emulated)return null}return Co(f,u)}}(a,c.parent,u)}function Kf(a,c,u,f,p){a.insertBefore(c,u,f,p)}function $M(a,c,u){a.appendChild(c,u)}function qM(a,c,u,f,p){null!==f?Kf(a,c,u,f,p):$M(a,c,u)}function V1(a,c){return a.parentNode(c)}function GM(a,c,u){return Xx(a,c,u)}let H1,Xx=function KM(a,c,u){return 40&a.type?Co(a,u):null};function xm(a,c,u,f){const p=HM(a,f,c),y=c[11],M=GM(f.parent||c[6],f,c);if(null!=p)if(Array.isArray(u))for(let R=0;R<u.length;R++)qM(y,p,u[R],M,!1);else qM(y,p,u,M,!1)}function g0(a,c){if(null!==c){const u=c.type;if(3&u)return Co(c,a);if(4&u)return eS(-1,a[c.index]);if(8&u){const f=c.child;if(null!==f)return g0(a,f);{const p=a[c.index];return la(p)?eS(-1,p):Gs(p)}}if(32&u)return Gf(c,a)()||Gs(a[c.index]);{const f=z1(a,c);return null!==f?Array.isArray(f)?f[0]:g0(ch(a[16]),f):g0(a,c.next)}}return null}function z1(a,c){return null!==c?a[16][6].projection[c.projection]:null}function eS(a,c){const u=10+a+1;if(u<c.length){const f=c[u],p=f[1].firstChild;if(null!==p)return g0(f,p)}return c[7]}function nS(a,c,u,f,p,y,S){for(;null!=u;){const M=f[u.index],R=u.type;if(S&&0===c&&(M&&N(Gs(M),f),u.flags|=2),32!=(32&u.flags))if(8&R)nS(a,c,u.child,f,p,y,!1),Em(c,a,p,M,y);else if(32&R){const B=Gf(u,f);let H;for(;H=B();)Em(c,a,p,H,y);Em(c,a,p,M,y)}else 16&R?rS(a,c,f,u,p,y):Em(c,a,p,M,y);u=S?u.projectionNext:u.next}}function lh(a,c,u,f,p,y){nS(u,f,a.firstChild,c,p,y,!1)}function rS(a,c,u,f,p,y){const S=u[16],R=S[6].projection[f.projection];if(Array.isArray(R))for(let B=0;B<R.length;B++)Em(c,a,p,R[B],y);else nS(a,c,R,S[3],p,y,!0)}function iS(a,c,u){""===u?a.removeAttribute(c,"class"):a.setAttribute(c,"class",u)}function sS(a,c,u){const{mergedAttrs:f,classes:p,styles:y}=u;null!==f&&Ql(a,c,f),null!==p&&iS(a,c,p),null!==y&&function XM(a,c,u){a.setAttribute(c,"style",u)}(a,c,y)}function Zo(a){H1=a}class Sm{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const _N=new Bi("ENVIRONMENT_INITIALIZER"),yN=new Bi("INJECTOR",-1),vN=new Bi("INJECTOR_DEF_TYPES");class bN{get(c,u=Hr){if(u===Hr){const f=new Error(`NullInjectorError: No provider for ${Je(c)}!`);throw f.name="NullInjectorError",f}return u}}function N6(...a){return{\u0275providers:wN(0,a),\u0275fromNgModule:!0}}function wN(a,...c){const u=[],f=new Set;let p;return uc(c,y=>{const S=y;fS(S,u,[],f)&&(p||(p=[]),p.push(S))}),void 0!==p&&IN(p,u),u}function IN(a,c){for(let u=0;u<a.length;u++){const{providers:p}=a[u];Y1(p,y=>{c.push(y)})}}function fS(a,c,u,f){if(!(a=Fe(a)))return!1;let p=null,y=Ri(a);const S=!y&&Un(a);if(y||S){if(S&&!S.standalone)return!1;p=a}else{const R=a.ngModule;if(y=Ri(R),!y)return!1;p=R}const M=f.has(p);if(S){if(M)return!1;if(f.add(p),S.dependencies){const R="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const B of R)fS(B,c,u,f)}}else{if(!y)return!1;{if(null!=y.imports&&!M){let B;f.add(p);try{uc(y.imports,H=>{fS(H,c,u,f)&&(B||(B=[]),B.push(H))})}finally{}void 0!==B&&IN(B,c)}if(!M){const B=ju(p)||(()=>new p);c.push({provide:p,useFactory:B,deps:an},{provide:vN,useValue:p,multi:!0},{provide:_N,useValue:()=>Xt(p),multi:!0})}const R=y.providers;null==R||M||Y1(R,H=>{c.push(H)})}}return p!==a&&void 0!==a.providers}function Y1(a,c){for(let u of a)$t(u)&&(u=u.\u0275providers),Array.isArray(u)?Y1(u,c):c(u)}const k6=gt({provide:String,useValue:gt});function pS(a){return null!==a&&"object"==typeof a&&k6 in a}function Xf(a){return"function"==typeof a}const gS=new Bi("Set Injector scope."),Q1={},mS={};let b0;function Jf(){return void 0===b0&&(b0=new bN),b0}class ep{}class SN extends ep{constructor(c,u,f,p){super(),this.parent=u,this.source=f,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bS(c,S=>this.processProvider(S)),this.records.set(yN,Tm(void 0,this)),p.has("environment")&&this.records.set(ep,Tm(void 0,this));const y=this.records.get(gS);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(vN.multi,an,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();for(const c of this._onDestroyHooks)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(c){this._onDestroyHooks.push(c)}runInContext(c){this.assertNotDestroyed();const u=Ms(this),f=mr(void 0);try{return c()}finally{Ms(u),mr(f)}}get(c,u=Hr,f=bt.Default){this.assertNotDestroyed(),f=Qn(f);const p=Ms(this),y=mr(void 0);try{if(!(f&bt.SkipSelf)){let M=this.records.get(c);if(void 0===M){const R=function vS(a){return"function"==typeof a||"object"==typeof a&&a instanceof Bi}(c)&&gs(c);M=R&&this.injectableDefInScope(R)?Tm(_S(c),Q1):null,this.records.set(c,M)}if(null!=M)return this.hydrate(c,M)}return(f&bt.Self?Jf():this.parent).get(c,u=f&bt.Optional&&u===Hr?null:u)}catch(S){if("NullInjectorError"===S.name){if((S[Zi]=S[Zi]||[]).unshift(Je(c)),p)throw S;return function ge(a,c,u,f){const p=a[Zi];throw c[ws]&&p.unshift(c[ws]),a.message=function Te(a,c,u,f=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=Je(c);if(Array.isArray(c))p=c.map(Je).join(" -> ");else if("object"==typeof c){let y=[];for(let S in c)if(c.hasOwnProperty(S)){let M=c[S];y.push(S+":"+("string"==typeof M?JSON.stringify(M):Je(M)))}p=`{${y.join(", ")}}`}return`${u}${f?"("+f+")":""}[${p}]: ${a.replace(ai,"\n  ")}`}("\n"+a.message,p,u,f),a.ngTokenPath=p,a[Zi]=null,a}(S,c,"R3InjectorError",this.source)}throw S}finally{mr(y),Ms(p)}}resolveInjectorInitializers(){const c=Ms(this),u=mr(void 0);try{const f=this.get(_N.multi,an,bt.Self);for(const p of f)p()}finally{Ms(c),mr(u)}}toString(){const c=[],u=this.records;for(const f of u.keys())c.push(Je(f));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ze(205,!1)}processProvider(c){let u=Xf(c=Fe(c))?c:Fe(c&&c.provide);const f=function CN(a){return pS(a)?Tm(void 0,a.useValue):Tm(function TN(a,c,u){let f;if(Xf(a)){const p=Fe(a);return ju(p)||_S(p)}if(pS(a))f=()=>Fe(a.useValue);else if(function xN(a){return!(!a||!a.useFactory)}(a))f=()=>a.useFactory(...or(a.deps||[]));else if(function EN(a){return!(!a||!a.useExisting)}(a))f=()=>Xt(Fe(a.useExisting));else{const p=Fe(a&&(a.useClass||a.provide));if(!function R6(a){return!!a.deps}(a))return ju(p)||_S(p);f=()=>new p(...or(a.deps))}return f}(a),Q1)}(c);if(Xf(c)||!0!==c.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Tm(void 0,Q1,!0),p.factory=()=>or(p.multi),this.records.set(u,p)),u=c,p.multi.push(c)}this.records.set(u,f)}hydrate(c,u){return u.value===Q1&&(u.value=mS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function yS(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(c){if(!c.providedIn)return!1;const u=Fe(c.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function _S(a){const c=gs(a),u=null!==c?c.factory:ju(a);if(null!==u)return u;if(a instanceof Bi)throw new ze(204,!1);if(a instanceof Function)return function AN(a){const c=a.length;if(c>0)throw dc(c,"?"),new ze(204,!1);const u=function qs(a){const c=a&&(a[zi]||a[Ge]);if(c){const u=function Ki(a){if(a.hasOwnProperty("name"))return a.name;const c=(""+a).match(/^function\s*([^\s(]+)/);return null===c?"":c[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),c}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new ze(204,!1)}function Tm(a,c,u=!1){return{factory:a,value:c,multi:u?[]:void 0}}function bS(a,c){for(const u of a)Array.isArray(u)?bS(u,c):u&&$t(u)?bS(u.\u0275providers,c):c(u)}class O6{}class DN{}class F6{resolveComponentFactory(c){throw function L6(a){const c=Error(`No component factory found for ${Je(a)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=a,c}(c)}}let Dm=(()=>{class a{}return a.NULL=new F6,a})();function B6(){return Mm(Ks(),zt())}function Mm(a,c){return new Nm(Co(a,c))}let Nm=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=B6,a})();function NN(a){return a instanceof Nm?a.nativeElement:a}class km{}let U6=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function j6(){const a=zt(),u=ua(Ks().index,a);return(ca(u)?u:a)[11]}(),a})(),V6=(()=>{class a{}return a.\u0275prov=Cn({token:a,providedIn:"root",factory:()=>null}),a})();class kN{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const wS=new kN("15.0.2"),IS={};function xS(a){return a.ngOriginalError}class w0{constructor(){this._console=console}handleError(c){const u=this._findOriginalError(c);this._console.error("ERROR",c),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(c){let u=c&&xS(c);for(;u&&xS(u);)u=xS(u);return u||null}}function RN(a){return a.ownerDocument.defaultView}function SS(a,c,u){let f=a.length;for(;;){const p=a.indexOf(c,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const y=c.length;if(p+y===f||a.charCodeAt(p+y)<=32)return p}u=p+1}}const AS="ng-template";function X1(a,c,u){let f=0;for(;f<a.length;){let p=a[f++];if(u&&"class"===p){if(p=a[f],-1!==SS(p.toLowerCase(),c,0))return!0}else if(1===p){for(;f<a.length&&"string"==typeof(p=a[f++]);)if(p.toLowerCase()===c)return!0;return!1}}return!1}function J1(a){return 4===a.type&&a.value!==AS}function CS(a,c,u){return c===(4!==a.type||u?a.value:AS)}function Y6(a,c,u){let f=4;const p=a.attrs||[],y=function J6(a){for(let c=0;c<a.length;c++)if(em(a[c]))return c;return a.length}(p);let S=!1;for(let M=0;M<c.length;M++){const R=c[M];if("number"!=typeof R){if(!S)if(4&f){if(f=2|1&f,""!==R&&!CS(a,R,u)||""===R&&1===c.length){if(qc(f))return!1;S=!0}}else{const B=8&f?R:c[++M];if(8&f&&null!==a.attrs){if(!X1(a.attrs,B,u)){if(qc(f))return!1;S=!0}continue}const ce=Q6(8&f?"class":R,p,J1(a),u);if(-1===ce){if(qc(f))return!1;S=!0;continue}if(""!==B){let De;De=ce>y?"":p[ce+1].toLowerCase();const $e=8&f?De:null;if($e&&-1!==SS($e,B,0)||2&f&&B!==De){if(qc(f))return!1;S=!0}}}}else{if(!S&&!qc(f)&&!qc(R))return!1;if(S&&qc(R))continue;S=!1,f=R|1&f}}return qc(f)||S}function qc(a){return 0==(1&a)}function Q6(a,c,u,f){if(null===c)return-1;let p=0;if(f||!u){let y=!1;for(;p<c.length;){const S=c[p];if(S===a)return p;if(3===S||6===S)y=!0;else{if(1===S||2===S){let M=c[++p];for(;"string"==typeof M;)M=c[++p];continue}if(4===S)break;if(0===S){p+=4;continue}}p+=y?1:2}return-1}return function e8(a,c){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const f=a[u];if("number"==typeof f)return-1;if(f===c)return u;u++}return-1}(c,a)}function LN(a,c,u=!1){for(let f=0;f<c.length;f++)if(Y6(a,c[f],u))return!0;return!1}function t8(a,c){e:for(let u=0;u<c.length;u++){const f=c[u];if(a.length===f.length){for(let p=0;p<a.length;p++)if(a[p]!==f[p])continue e;return!0}}return!1}function FN(a,c){return a?":not("+c.trim()+")":c}function n8(a){let c=a[0],u=1,f=2,p="",y=!1;for(;u<a.length;){let S=a[u];if("string"==typeof S)if(2&f){const M=a[++u];p+="["+S+(M.length>0?'="'+M+'"':"")+"]"}else 8&f?p+="."+S:4&f&&(p+=" "+S);else""!==p&&!qc(S)&&(c+=FN(y,p),p=""),f=S,y=y||!qc(f);u++}return""!==p&&(c+=FN(y,p)),c}const kr={};function BN(a){UN(ti(),zt(),To()+a,!1)}function UN(a,c,u,f){if(!f)if(3==(3&c[2])){const y=a.preOrderCheckHooks;null!==y&&Qg(c,y,u)}else{const y=a.preOrderHooks;null!==y&&yl(c,y,0,u)}zc(u)}function ew(a,c=null,u=null,f){const p=tw(a,c,u,f);return p.resolveInjectorInitializers(),p}function tw(a,c=null,u=null,f,p=new Set){const y=[u||an,N6(a)];return f=f||("object"==typeof a?void 0:Je(a)),new SN(y,c||Jf(),f||null,p)}let hh=(()=>{class a{static create(u,f){if(Array.isArray(u))return ew({name:""},f,u,"");{const p=u.name??"";return ew({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=Hr,a.NULL=new bN,a.\u0275prov=Cn({token:a,providedIn:"any",factory:()=>Xt(yN)}),a.__NG_ELEMENT_ID__=-1,a})();function rp(a,c=bt.Default){const u=zt();return null===u?Xt(a,c):sm(Ks(),u,Fe(a),c)}function iw(a,c){const u=a.contentQueries;if(null!==u)for(let f=0;f<u.length;f+=2){const p=u[f],y=u[f+1];if(-1!==y){const S=a.data[y];Hy(p),S.contentQueries(2,c[y],y)}}}function zs(a,c,u,f,p,y,S,M,R,B,H){const ce=c.blueprint.slice();return ce[0]=p,ce[2]=76|f,(null!==H||a&&1024&a[2])&&(ce[2]|=1024),Ef(ce),ce[3]=ce[15]=a,ce[8]=u,ce[10]=S||a&&a[10],ce[11]=M||a&&a[11],ce[12]=R||a&&a[12]||null,ce[9]=B||a&&a[9]||null,ce[6]=y,ce[20]=function $x(){return Wx++}(),ce[21]=H,ce[16]=2==c.type?a[16]:ce,ce}function za(a,c,u,f,p){let y=a.data[c];if(null===y)y=function Qu(a,c,u,f,p){const y=xf(),S=Zl(),R=a.data[c]=function pc(a,c,u,f,p,y){return{type:u,index:f,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?y:y&&y.parent,u,c,f,p);return null===a.firstChild&&(a.firstChild=R),null!==y&&(S?null==y.child&&null!==R.parent&&(y.child=R):null===y.next&&(y.next=R)),R}(a,c,u,f,p),function yx(){return wr.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=u,y.value=f,y.attrs=p;const S=function Gd(){const a=wr.lFrame,c=a.currentTNode;return a.isParent?c:c.parent}();y.injectorIndex=null===S?-1:S.injectorIndex}return Ko(y,!0),y}function El(a,c,u,f){if(0===u)return-1;const p=c.length;for(let y=0;y<u;y++)c.push(f),a.blueprint.push(f),a.data.push(null);return p}function fh(a,c,u){h1(c);try{const f=a.viewQuery;null!==f&&hw(1,f,u);const p=a.template;null!==p&&sw(a,c,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&iw(a,c),a.staticViewQueries&&hw(2,a.viewQuery,u);const y=a.components;null!==y&&function Wi(a,c){for(let u=0;u<c.length;u++)HS(a,c[u])}(c,y)}catch(f){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),f}finally{c[2]&=-5,Cf()}}function Om(a,c,u,f){const p=c[2];if(128!=(128&p)){h1(c);try{Ef(c),function c1(a){return wr.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&sw(a,c,u,2,f);const S=3==(3&p);if(S){const B=a.preOrderCheckHooks;null!==B&&Qg(c,B,null)}else{const B=a.preOrderHooks;null!==B&&yl(c,B,0,null),Kd(c,0)}if(function zS(a){for(let c=wm(a);null!==c;c=p0(c)){if(!c[2])continue;const u=c[9];for(let f=0;f<u.length;f++){const p=u[f],y=p[3];0==(512&p[2])&&Gg(y,1),p[2]|=512}}}(c),function VS(a){for(let c=wm(a);null!==c;c=p0(c))for(let u=10;u<c.length;u++){const f=c[u],p=f[1];$g(f)&&Om(p,f,p.template,f[8])}}(c),null!==a.contentQueries&&iw(a,c),S){const B=a.contentCheckHooks;null!==B&&Qg(c,B)}else{const B=a.contentHooks;null!==B&&yl(c,B,1),Kd(c,1)}!function Ui(a,c){const u=a.hostBindingOpCodes;if(null!==u)try{for(let f=0;f<u.length;f++){const p=u[f];if(p<0)zc(~p);else{const y=p,S=u[++f],M=u[++f];vx(S,y),M(2,c[y])}}}finally{zc(-1)}}(a,c);const M=a.components;null!==M&&function ek(a,c){for(let u=0;u<c.length;u++)M0(a,c[u])}(c,M);const R=a.viewQuery;if(null!==R&&hw(2,R,f),S){const B=a.viewCheckHooks;null!==B&&Qg(c,B)}else{const B=a.viewHooks;null!==B&&yl(c,B,2),Kd(c,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),c[2]&=-41,512&c[2]&&(c[2]&=-513,Gg(c[3],-1))}finally{Cf()}}}function sw(a,c,u,f,p){const y=To(),S=2&f;try{zc(-1),S&&c.length>22&&UN(a,c,22,!1),u(f,p)}finally{zc(y)}}function Lm(a,c,u){if(Bc(c)){const p=c.directiveEnd;for(let y=c.directiveStart;y<p;y++){const S=a.data[y];S.contentQueries&&S.contentQueries(1,u[y],y)}}}function ip(a,c,u){!o1()||(function Sl(a,c,u,f){const p=u.directiveStart,y=u.directiveEnd;a.firstCreatePass||rm(u,c),N(f,c);const S=u.initialInputs;for(let M=p;M<y;M++){const R=a.data[M],B=Ao(R);B&&US(c,u,R);const H=th(c,a,M,u);N(H,c),null!==S&&D0(0,M-p,H,R,0,S),B&&(ua(u.index,c)[8]=H)}}(a,c,u,Co(u,c)),64==(64&u.flags)&&mh(a,c,u))}function E0(a,c,u=Co){const f=c.localNames;if(null!==f){let p=c.index+1;for(let y=0;y<f.length;y+=2){const S=f[y+1],M=-1===S?u(c,a):a[S];a[p++]=M}}}function ow(a){const c=a.tView;return null===c||c.incompleteFirstPass?a.tView=Fm(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):c}function Fm(a,c,u,f,p,y,S,M,R,B){const H=22+f,ce=H+p,De=function Bm(a,c){const u=[];for(let f=0;f<c;f++)u.push(f<a?null:kr);return u}(H,ce),$e="function"==typeof B?B():B;return De[1]={type:a,blueprint:De,template:u,queries:null,viewQuery:M,declTNode:c,data:De.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:R,consts:$e,incompleteFirstPass:!1}}function tu(a,c,u,f){const p=k0(c);null===u?p.push(f):(p.push(u),a.firstCreatePass&&yh(a).push(f,p.length-1))}function xl(a,c,u,f){for(let p in a)if(a.hasOwnProperty(p)){u=null===u?{}:u;const y=a[p];null===f?ph(u,c,p,y):f.hasOwnProperty(p)&&ph(u,c,f[p],y)}return u}function ph(a,c,u,f){a.hasOwnProperty(u)?a[u].push(c,f):a[u]=[c,f]}function aw(a,c){const u=ua(c,a);16&u[2]||(u[2]|=32)}function sp(a,c,u,f){let p=!1;if(o1()){const y=null===f?null:{"":-1},S=function C0(a,c){const u=a.directiveRegistry;let f=null,p=null;if(u)for(let y=0;y<u.length;y++){const S=u[y];if(LN(c,S.selectors,!1))if(f||(f=[]),Ao(S))if(null!==S.findHostDirectiveDefs){const M=[];p=p||new Map,S.findHostDirectiveDefs(S,M,p),f.unshift(...M,S),Um(a,c,M.length)}else f.unshift(S),Um(a,c,0);else p=p||new Map,S.findHostDirectiveDefs?.(S,f,p),f.push(S)}return null===f?null:[f,p]}(a,u);let M,R;null===S?M=R=null:[M,R]=S,null!==M&&(p=!0,op(a,c,u,M,y,R)),y&&function ap(a,c,u){if(c){const f=a.localNames=[];for(let p=0;p<c.length;p+=2){const y=u[c[p+1]];if(null==y)throw new ze(-301,!1);f.push(c[p],y)}}}(u,f,y)}return u.mergedAttrs=vl(u.mergedAttrs,u.attrs),p}function op(a,c,u,f,p,y){for(let B=0;B<f.length;B++)im(rm(u,c),a,f[B].type);!function cw(a,c,u){a.flags|=1,a.directiveStart=c,a.directiveEnd=c+u,a.providerIndexes=c}(u,a.data.length,f.length);for(let B=0;B<f.length;B++){const H=f[B];H.providersResolver&&H.providersResolver(H)}let S=!1,M=!1,R=El(a,c,f.length,null);for(let B=0;B<f.length;B++){const H=f[B];u.mergedAttrs=vl(u.mergedAttrs,H.hostAttrs),BS(a,u,c,R,H),jm(R,H,p),null!==H.contentQueries&&(u.flags|=4),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(u.flags|=64);const ce=H.type.prototype;!S&&(ce.ngOnChanges||ce.ngOnInit||ce.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),S=!0),!M&&(ce.ngOnChanges||ce.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),M=!0),R++}!function LS(a,c,u){const p=c.directiveEnd,y=a.data,S=c.attrs,M=[];let R=null,B=null;for(let H=c.directiveStart;H<p;H++){const ce=y[H],De=u?u.get(ce):null,St=De?De.outputs:null;R=xl(ce.inputs,H,R,De?De.inputs:null),B=xl(ce.outputs,H,B,St);const Jt=null===R||null===S||J1(c)?null:jS(R,H,S);M.push(Jt)}null!==R&&(R.hasOwnProperty("class")&&(c.flags|=8),R.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=M,c.inputs=R,c.outputs=B}(a,u,y)}function mh(a,c,u){const f=u.directiveStart,p=u.directiveEnd,y=u.index,S=function bx(){return wr.lFrame.currentDirectiveIndex}();try{zc(y);for(let M=f;M<p;M++){const R=a.data[M],B=c[M];Vy(M),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&A0(R,B)}}finally{zc(-1),Vy(S)}}function A0(a,c){null!==a.hostBindings&&a.hostBindings(1,c)}function Um(a,c,u){c.componentOffset=u,(a.components||(a.components=[])).push(c.index)}function jm(a,c,u){if(u){if(c.exportAs)for(let f=0;f<c.exportAs.length;f++)u[c.exportAs[f]]=a;Ao(c)&&(u[""]=a)}}function BS(a,c,u,f,p){a.data[f]=p;const y=p.factory||(p.factory=ju(p.type)),S=new ac(y,Ao(p),rp);a.blueprint[f]=S,u[f]=S,function gh(a,c,u,f,p){const y=p.hostBindings;if(y){let S=a.hostBindingOpCodes;null===S&&(S=a.hostBindingOpCodes=[]);const M=~c.index;(function S0(a){let c=a.length;for(;c>0;){const u=a[--c];if("number"==typeof u&&u<0)return u}return 0})(S)!=M&&S.push(M),S.push(u,f,y)}}(a,c,f,El(a,u,p.hostVars,kr),p)}function US(a,c,u){const f=Co(c,a),p=ow(u),y=a[10],S=cp(a,zs(a,p,null,u.onPush?32:16,f,c,y,y.createRenderer(f,u),null,null,null));a[c.index]=S}function Kc(a,c,u,f,p,y){const S=Co(a,c);!function T0(a,c,u,f,p,y,S){if(null==y)a.removeAttribute(c,p,u);else{const M=null==S?At(y):S(y,f||"",p);a.setAttribute(c,p,M,u)}}(c[11],S,y,a.value,u,f,p)}function D0(a,c,u,f,p,y){const S=y[c];if(null!==S){const M=f.setInput;for(let R=0;R<S.length;){const B=S[R++],H=S[R++],ce=S[R++];null!==M?f.setInput(u,ce,B,H):u[H]=ce}}}function jS(a,c,u){let f=null,p=0;for(;p<u.length;){const y=u[p];if(0!==y)if(5!==y){if("number"==typeof y)break;if(a.hasOwnProperty(y)){null===f&&(f=[]);const S=a[y];for(let M=0;M<S.length;M+=2)if(S[M]===c){f.push(y,S[M+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return f}function Vm(a,c,u,f){return[a,!0,!1,c,null,0,f,u,null,null]}function M0(a,c){const u=ua(c,a);if($g(u)){const f=u[1];48&u[2]?Om(f,u,f.template,u[8]):u[5]>0&&lw(u)}}function lw(a){for(let f=wm(a);null!==f;f=p0(f))for(let p=10;p<f.length;p++){const y=f[p];if($g(y))if(512&y[2]){const S=y[1];Om(S,y,S.template,y[8])}else y[5]>0&&lw(y)}const u=a[1].components;if(null!==u)for(let f=0;f<u.length;f++){const p=ua(u[f],a);$g(p)&&p[5]>0&&lw(p)}}function HS(a,c){const u=ua(c,a),f=u[1];(function uw(a,c){for(let u=c.length;u<a.blueprint.length;u++)c.push(a.blueprint[u])})(f,u),fh(f,u,u[8])}function cp(a,c){return a[13]?a[14][4]=c:a[13]=c,a[14]=c,c}function dw(a){for(;a;){a[2]|=32;const c=ch(a);if(ox(a)&&!c)return a;a=c}return null}function N0(a,c,u,f=!0){const p=c[10];p.begin&&p.begin();try{Om(a,c,a.template,u)}catch(S){throw f&&nk(c,S),S}finally{p.end&&p.end()}}function hw(a,c,u){Hy(0),c(a,u)}function k0(a){return a[7]||(a[7]=[])}function yh(a){return a.cleanup||(a.cleanup=[])}function nk(a,c){const u=a[9],f=u?u.get(w0,null):null;f&&f.handleError(c)}function Ha(a,c,u,f,p){for(let y=0;y<u.length;){const S=u[y++],M=u[y++],R=c[S],B=a.data[S];null!==B.setInput?B.setInput(R,p,f,M):R[M]=p}}function Hs(a,c,u){let f=u?a.styles:null,p=u?a.classes:null,y=0;if(null!==c)for(let S=0;S<c.length;S++){const M=c[S];"number"==typeof M?y=M:1==y?p=Et(p,M):2==y&&(f=Et(f,M+": "+c[++S]+";"))}u?a.styles=f:a.stylesWithoutHost=f,u?a.classes=p:a.classesWithoutHost=p}function zm(a,c,u,f,p=!1){for(;null!==u;){const y=c[u.index];if(null!==y&&f.push(Gs(y)),la(y))for(let M=10;M<y.length;M++){const R=y[M],B=R[1].firstChild;null!==B&&zm(R[1],R,B,f)}const S=u.type;if(8&S)zm(a,c,u.child,f);else if(32&S){const M=Gf(u,c);let R;for(;R=M();)f.push(R)}else if(16&S){const M=z1(c,u);if(Array.isArray(M))f.push(...M);else{const R=ch(c[16]);zm(R[1],R,M,f,!0)}}u=p?u.projectionNext:u.next}return f}class lp{constructor(c,u){this._lView=c,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const c=this._lView,u=c[1];return zm(u,c,u.firstChild,[])}get context(){return this._lView[8]}set context(c){this._lView[8]=c}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[3];if(la(c)){const u=c[8],f=u?u.indexOf(this):-1;f>-1&&(Yx(c,f),Hc(u,f))}this._attachedToViewContainer=!1}zM(this._lView[1],this._lView)}onDestroy(c){tu(this._lView[1],this._lView,null,c)}markForCheck(){dw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){N0(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function d6(a,c){lh(a,c,c[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new ze(902,!1);this._appRef=c}}class WS extends lp{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;N0(c[1],c,c[8],!1)}checkNoChanges(){}get context(){return null}}class fw extends Dm{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const u=Un(c);return new P0(u,this.ngModule)}}function pw(a){const c=[];for(let u in a)a.hasOwnProperty(u)&&c.push({propName:a[u],templateName:u});return c}class y8{constructor(c,u){this.injector=c,this.parentInjector=u}get(c,u,f){f=Qn(f);const p=this.injector.get(c,IS,f);return p!==IS||u===IS?p:this.parentInjector.get(c,u,f)}}class P0 extends DN{constructor(c,u){super(),this.componentDef=c,this.ngModule=u,this.componentType=c.type,this.selector=function r8(a){return a.map(n8).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return pw(this.componentDef.inputs)}get outputs(){return pw(this.componentDef.outputs)}create(c,u,f,p){let y=(p=p||this.ngModule)instanceof ep?p:p?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const S=y?new y8(c,y):c,M=S.get(km,null);if(null===M)throw new ze(407,!1);const R=S.get(V6,null),B=M.createRenderer(null,this.componentDef),H=this.componentDef.selectors[0][0]||"div",ce=f?function us(a,c,u){return a.selectRootElement(c,u===Lt.ShadowDom)}(B,f,this.componentDef.encapsulation):Zx(B,H,function $S(a){const c=a.toLowerCase();return"svg"===c?"svg":"math"===c?"math":null}(H)),De=this.componentDef.onPush?288:272,$e=Fm(0,null,null,1,0,null,null,null,null,null),St=zs(null,$e,null,De,null,null,M,B,R,S,null);let Jt,_n;h1(St);try{const Wn=this.componentDef;let ur,Kt=null;Wn.findHostDirectiveDefs?(ur=[],Kt=new Map,Wn.findHostDirectiveDefs(Wn,ur,Kt),ur.push(Wn)):ur=[Wn];const Ir=function R0(a,c){const u=a[1];return a[22]=c,za(u,22,2,"#host",null)}(St,ce),rs=function w8(a,c,u,f,p,y,S,M){const R=p[1];!function I8(a,c,u,f){for(const p of a)c.mergedAttrs=vl(c.mergedAttrs,p.hostAttrs);null!==c.mergedAttrs&&(Hs(c,c.mergedAttrs,!0),null!==u&&sS(f,u,c))}(f,a,c,S);const B=y.createRenderer(c,u),H=zs(p,ow(u),null,u.onPush?32:16,p[a.index],a,y,B,M||null,null,null);return R.firstCreatePass&&Um(R,a,f.length-1),cp(p,H),p[a.index]=H}(Ir,ce,Wn,ur,St,M,B);_n=Oy($e,22),ce&&function Hm(a,c,u,f){if(f)Ql(a,u,["ng-version",wS.full]);else{const{attrs:p,classes:y}=function i8(a){const c=[],u=[];let f=1,p=2;for(;f<a.length;){let y=a[f];if("string"==typeof y)2===p?""!==y&&c.push(y,a[++f]):8===p&&u.push(y);else{if(!qc(p))break;p=y}f++}return{attrs:c,classes:u}}(c.selectors[0]);p&&Ql(a,u,p),y&&y.length>0&&iS(a,u,y.join(" "))}}(B,Wn,ce,f),void 0!==u&&function E8(a,c,u){const f=a.projection=[];for(let p=0;p<c.length;p++){const y=u[p];f.push(null!=y?Array.from(y):null)}}(_n,this.ngContentSelectors,u),Jt=function qS(a,c,u,f,p,y){const S=Ks(),M=p[1],R=Co(S,p);op(M,p,S,u,null,f);for(let H=0;H<u.length;H++)N(th(p,M,S.directiveStart+H,S),p);mh(M,p,S),R&&N(R,p);const B=th(p,M,S.directiveStart+S.componentOffset,S);if(a[8]=p[8]=B,null!==y)for(const H of y)H(B,c);return Lm(M,S,a),B}(rs,Wn,ur,Kt,St,[x8]),fh($e,St,null)}finally{Cf()}return new v8(this.componentType,Jt,Mm(_n,St),St,_n)}}class v8 extends O6{constructor(c,u,f,p,y){super(),this.location=f,this._rootLView=p,this._tNode=y,this.instance=u,this.hostView=this.changeDetectorRef=new WS(p),this.componentType=c}setInput(c,u){const f=this._tNode.inputs;let p;if(null!==f&&(p=f[c])){const y=this._rootLView;Ha(y[1],y,p,c,u),aw(y,this._tNode.index)}}get injector(){return new $u(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function x8(){const a=Ks();Mf(zt()[1],a)}function O0(a){let c=function rk(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const f=[a];for(;c;){let p;if(Ao(a))p=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new ze(903,!1);p=c.\u0275dir}if(p){if(u){f.push(p);const S=a;S.inputs=GS(a.inputs),S.declaredInputs=GS(a.declaredInputs),S.outputs=GS(a.outputs);const M=p.hostBindings;M&&A8(a,M);const R=p.viewQuery,B=p.contentQueries;if(R&&ik(a,R),B&&gw(a,B),ht(a.inputs,p.inputs),ht(a.declaredInputs,p.declaredInputs),ht(a.outputs,p.outputs),Ao(p)&&p.data.animation){const H=a.data;H.animation=(H.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let S=0;S<y.length;S++){const M=y[S];M&&M.ngInherit&&M(a),M===O0&&(u=!1)}}c=Object.getPrototypeOf(c)}!function S8(a){let c=0,u=null;for(let f=a.length-1;f>=0;f--){const p=a[f];p.hostVars=c+=p.hostVars,p.hostAttrs=vl(p.hostAttrs,u=vl(u,p.hostAttrs))}}(f)}function GS(a){return a===xn?{}:a===an?[]:a}function ik(a,c){const u=a.viewQuery;a.viewQuery=u?(f,p)=>{c(f,p),u(f,p)}:c}function gw(a,c){const u=a.contentQueries;a.contentQueries=u?(f,p,y)=>{c(f,p,y),u(f,p,y)}:c}function A8(a,c){const u=a.hostBindings;a.hostBindings=u?(f,p)=>{c(f,p),u(f,p)}:c}let mw=null;function up(){if(!mw){const a=fn.Symbol;if(a&&a.iterator)mw=a.iterator;else{const c=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<c.length;++u){const f=c[u];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(mw=f)}}}return mw}function dp(a){return!!F0(a)&&(Array.isArray(a)||!(a instanceof Map)&&up()in a)}function F0(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function fa(a,c,u){return!Object.is(a[c],u)&&(a[c]=u,!0)}function pr(a,c,u,f){const p=zt();return fa(p,sc(),c)&&(ti(),Kc(xi(),p,a,c,u,f)),pr}function U0(a,c,u,f,p,y,S,M){const R=zt(),B=ti(),H=a+22,ce=B.firstCreatePass?function uk(a,c,u,f,p,y,S,M,R){const B=c.consts,H=za(c,a,4,S||null,jc(B,M));sp(c,u,H,jc(B,R)),Mf(c,H);const ce=H.tViews=Fm(2,H,f,p,y,c.directiveRegistry,c.pipeRegistry,null,c.schemas,B);return null!==c.queries&&(c.queries.template(c,H),ce.queries=c.queries.embeddedTView(H)),H}(H,B,R,c,u,f,p,y,S):B.data[H];Ko(ce,!1);const De=R[11].createComment("");xm(B,R,De,ce),N(De,R),cp(R,R[H]=Vm(De,R,De,ce)),vf(ce)&&ip(B,R,ce),null!=S&&E0(R,ce,M)}function qm(a,c,u){const f=zt();return fa(f,sc(),c)&&function Ta(a,c,u,f,p,y,S,M){const R=Co(c,u);let H,B=c.inputs;!M&&null!=B&&(H=B[f])?(Ha(a,u,H,f,p),yf(c)&&aw(u,c.index)):3&c.type&&(f=function FS(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(f),p=null!=S?S(p,c.value||"",f):p,y.setProperty(R,f,p))}(ti(),xi(),f,a,c,f[11],u,!1),qm}function j0(a,c,u,f,p){const S=p?"class":"style";Ha(a,u,c.inputs[S],S,f)}function ru(a,c,u,f){const p=zt(),y=ti(),S=22+a,M=p[11],R=p[S]=Zx(M,c,function f1(){return wr.lFrame.currentNamespace}()),B=y.firstCreatePass?function pp(a,c,u,f,p,y,S){const M=c.consts,B=za(c,a,2,p,jc(M,y));return sp(c,u,B,jc(M,S)),null!==B.attrs&&Hs(B,B.attrs,!1),null!==B.mergedAttrs&&Hs(B,B.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,B),B}(S,y,p,0,c,u,f):y.data[S];return Ko(B,!0),sS(M,R,B),32!=(32&B.flags)&&xm(y,p,R,B),0===function px(){return wr.lFrame.elementDepthCount}()&&N(R,p),function gx(){wr.lFrame.elementDepthCount++}(),vf(B)&&(ip(y,p,B),Lm(y,B,p)),null!==f&&E0(p,B),ru}function Gm(){let a=Ks();Zl()?Sf():(a=a.parent,Ko(a,!1));const c=a;!function Fy(){wr.lFrame.elementDepthCount--}();const u=ti();return u.firstCreatePass&&(Mf(u,a),Bc(a)&&u.queries.elementEnd(a)),null!=c.classesWithoutHost&&function g1(a){return 0!=(8&a.flags)}(c)&&j0(u,c,zt(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function Jg(a){return 0!=(16&a.flags)}(c)&&j0(u,c,zt(),c.stylesWithoutHost,!1),Gm}function gp(a,c,u,f){return ru(a,c,u,f),Gm(),gp}function Km(a){return!!a&&"function"==typeof a.then}function rd(a){return!!a&&"function"==typeof a.subscribe}const mp=rd;function Ar(a,c,u,f){const p=zt(),y=ti(),S=Ks();return function bw(a,c,u,f,p,y,S){const M=vf(f),B=a.firstCreatePass&&yh(a),H=c[8],ce=k0(c);let De=!0;if(3&f.type||S){const Jt=Co(f,c),_n=S?S(Jt):Jt,Wn=ce.length,ur=S?Ir=>S(Gs(Ir[f.index])):f.index;let Kt=null;if(!S&&M&&(Kt=function Da(a,c,u,f){const p=a.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const S=p[y];if(S===u&&p[y+1]===f){const M=c[7],R=p[y+2];return M.length>R?M[R]:null}"string"==typeof S&&(y+=2)}return null}(a,c,p,f.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=y,Kt.__ngLastListenerFn__=y,De=!1;else{y=JS(f,c,H,y,!1);const Ir=u.listen(_n,p,y);ce.push(y,Ir),B&&B.push(p,ur,Wn,Wn+1)}}else y=JS(f,c,H,y,!1);const $e=f.outputs;let St;if(De&&null!==$e&&(St=$e[p])){const Jt=St.length;if(Jt)for(let _n=0;_n<Jt;_n+=2){const rs=c[St[_n]][St[_n+1]].subscribe(y),Ss=ce.length;ce.push(y,rs),B&&B.push(p,f.index,Ss,-(Ss+1))}}}(y,p,p[11],S,a,c,f),Ar}function Yc(a,c,u,f){try{return!1!==u(f)}catch(p){return nk(a,p),!1}}function JS(a,c,u,f,p){return function y(S){if(S===Function)return f;dw(a.componentOffset>-1?ua(a.index,c):c);let R=Yc(c,0,f,S),B=y.__ngNextListenerFn__;for(;B;)R=Yc(c,0,B,S)&&R,B=B.__ngNextListenerFn__;return p&&!1===R&&(S.preventDefault(),S.returnValue=!1),R}}function eA(a=1){return function xx(a){return(wr.lFrame.contextLView=function Sx(a,c){for(;a>0;)c=c[15],a--;return c}(a,wr.lFrame.contextLView))[8]}(a)}function hk(a,c){let u=null;const f=function X6(a){const c=a.attrs;if(null!=c){const u=c.indexOf(5);if(0==(1&u))return c[u+1]}return null}(a);for(let p=0;p<c.length;p++){const y=c[p];if("*"!==y){if(null===f?LN(a,y,!0):t8(f,y))return p}else u=p}return u}function Ps(a){const c=zt()[16][6];if(!c.projection){const f=c.projection=dc(a?a.length:1,null),p=f.slice();let y=c.child;for(;null!==y;){const S=a?hk(y,a):0;null!==S&&(p[S]?p[S].projectionNext=y:f[S]=y,p[S]=y),y=y.next}}}function Rs(a,c=0,u){const f=zt(),p=ti(),y=za(p,22+a,16,null,u||null);null===y.projection&&(y.projection=c),Sf(),32!=(32&y.flags)&&function Ku(a,c,u){rS(c[11],0,c,u,HM(a,u,c),GM(u.parent||c[6],u,c))}(p,f,y)}function _p(a,c){return a<<17|c<<2}function Oo(a){return a>>17&32767}function $a(a){return 2|a}function mc(a){return(131068&a)>>2}function id(a,c){return-131069&a|c<<2}function vp(a){return 1|a}function Ym(a,c,u,f,p){const y=a[u+1],S=null===c;let M=f?Oo(y):mc(y),R=!1;for(;0!==M&&(!1===R||S);){const H=a[M+1];wh(a[M],c)&&(R=!0,a[M+1]=f?vp(H):$a(H)),M=f?Oo(H):mc(H)}R&&(a[u+1]=f?$a(y):vp(y))}function wh(a,c){return null===a||null==c||(Array.isArray(a)?a[1]:a)===c||!(!Array.isArray(a)||"string"!=typeof c)&&Wc(a,c)>=0}function Dw(a,c,u){return _c(a,c,u,!1),Dw}function W0(a,c){return _c(a,c,null,!0),W0}function _c(a,c,u,f){const p=zt(),y=ti(),S=function Vc(a){const c=wr.lFrame,u=c.bindingIndex;return c.bindingIndex=c.bindingIndex+a,u}(2);y.firstUpdatePass&&function Qm(a,c,u,f){const p=a.data;if(null===p[u+1]){const y=p[To()],S=function Eh(a,c){return c>=a.expandoStartIndex}(a,u);(function Xc(a,c){return 0!=(a.flags&(c?8:16))})(y,f)&&null===c&&!S&&(c=!1),c=function lA(a,c,u,f){const p=function u1(a){const c=wr.lFrame.currentDirectiveIndex;return-1===c?null:a[c]}(a);let y=f?c.residualClasses:c.residualStyles;if(null===p)0===(f?c.classBindings:c.styleBindings)&&(u=wp(u=Mw(null,a,c,u,f),c.attrs,f),y=null);else{const S=c.directiveStylingLast;if(-1===S||a[S]!==p)if(u=Mw(p,a,c,u,f),null===y){let R=function uA(a,c,u){const f=u?c.classBindings:c.styleBindings;if(0!==mc(f))return a[Oo(f)]}(a,c,f);void 0!==R&&Array.isArray(R)&&(R=Mw(null,a,c,R[1],f),R=wp(R,c.attrs,f),function dA(a,c,u,f){a[Oo(u?c.classBindings:c.styleBindings)]=f}(a,c,f,R))}else y=function yk(a,c,u){let f;const p=c.directiveEnd;for(let y=1+c.directiveStylingLast;y<p;y++)f=wp(f,a[y].hostAttrs,u);return wp(f,c.attrs,u)}(a,c,f)}return void 0!==y&&(f?c.residualClasses=y:c.residualStyles=y),u}(p,y,c,f),function bp(a,c,u,f,p,y){let S=y?c.classBindings:c.styleBindings,M=Oo(S),R=mc(S);a[f]=u;let H,B=!1;if(Array.isArray(u)){const ce=u;H=ce[1],(null===H||Wc(ce,H)>0)&&(B=!0)}else H=u;if(p)if(0!==R){const De=Oo(a[M+1]);a[f+1]=_p(De,M),0!==De&&(a[De+1]=id(a[De+1],f)),a[M+1]=function aA(a,c){return 131071&a|c<<17}(a[M+1],f)}else a[f+1]=_p(M,0),0!==M&&(a[M+1]=id(a[M+1],f)),M=f;else a[f+1]=_p(R,0),0===M?M=f:a[R+1]=id(a[R+1],f),R=f;B&&(a[f+1]=$a(a[f+1])),Ym(a,H,f,!0),Ym(a,H,f,!1),function z0(a,c,u,f,p){const y=p?a.residualClasses:a.residualStyles;null!=y&&"string"==typeof c&&Wc(y,c)>=0&&(u[f+1]=vp(u[f+1]))}(c,H,a,f,y),S=_p(M,R),y?c.classBindings=S:c.styleBindings=S}(p,y,c,u,S,f)}}(y,a,S,f),c!==kr&&fa(p,S,c)&&function vc(a,c,u,f,p,y,S,M){if(!(3&c.type))return;const R=a.data,B=R[M+1],H=function yp(a){return 1==(1&a)}(B)?ou(R,c,u,p,mc(B),S):void 0;q0(H)||(q0(y)||function oA(a){return 2==(2&a)}(B)&&(y=ou(R,null,u,p,M,S)),function QM(a,c,u,f,p){if(c)p?a.addClass(u,f):a.removeClass(u,f);else{let y=-1===f.indexOf("-")?void 0:$c.DashCase;null==p?a.removeStyle(u,f,y):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),y|=$c.Important),a.setStyle(u,f,p,y))}}(f,S,Kl(To(),u),p,y))}(y,y.data[To()],p,p[11],a,p[S+1]=function vk(a,c){return null==a||("string"==typeof c?a+=c:"object"==typeof a&&(a=Je(function fc(a){return a instanceof Sm?a.changingThisBreaksApplicationSecurity:a}(a)))),a}(c,u),f,S)}function Mw(a,c,u,f,p){let y=null;const S=u.directiveEnd;let M=u.directiveStylingLast;for(-1===M?M=u.directiveStart:M++;M<S&&(y=c[M],f=wp(f,y.hostAttrs,p),y!==a);)M++;return null!==a&&(u.directiveStylingLast=M),f}function wp(a,c,u){const f=u?1:2;let p=-1;if(null!==c)for(let y=0;y<c.length;y++){const S=c[y];"number"==typeof S?p=S:p===f&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),da(a,S,!!u||c[++y]))}return void 0===a?null:a}function ou(a,c,u,f,p,y){const S=null===c;let M;for(;p>0;){const R=a[p],B=Array.isArray(R),H=B?R[1]:R,ce=null===H;let De=u[p+1];De===kr&&(De=ce?an:void 0);let $e=ce?hm(De,f):H===f?De:void 0;if(B&&!q0($e)&&($e=hm(R,f)),q0($e)&&(M=$e,S))return M;const St=a[p+1];p=S?Oo(St):mc(St)}if(null!==c){let R=y?c.residualClasses:c.residualStyles;null!=R&&(M=hm(R,f))}return M}function q0(a){return void 0!==a}function fA(a,c=""){const u=zt(),f=ti(),p=a+22,y=f.firstCreatePass?za(f,p,1,c,null):f.data[p],S=u[p]=function Kx(a,c){return a.createText(c)}(u[11],c);xm(f,u,S,y),Ko(y,!1)}function G0(a){return Xm("",a,""),G0}function Xm(a,c,u){const f=zt(),p=function vi(a,c,u,f){return fa(a,sc(),u)?c+At(u)+f:kr}(f,a,c,u);return p!==kr&&function ns(a,c,u){const f=Kl(c,a);!function jM(a,c,u){a.setValue(c,u)}(a[11],f,u)}(f,To(),p),Xm}const Ep=void 0;var Ga=["en",[["a","p"],["AM","PM"],Ep],[["AM","PM"],Ep,Ep],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ep,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ep,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ep,"{1} 'at' {0}",Ep],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ow(a){const u=Math.floor(Math.abs(a)),f=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===f?1:5}];let mt={};function X(a){const c=function Mk(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=Fw(c);if(u)return u;const f=c.split("-")[0];if(u=Fw(f),u)return u;if("en"===f)return Ga;throw new ze(701,!1)}function Lw(a){return X(a)[ar.PluralCase]}function Fw(a){return a in mt||(mt[a]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[a]),mt[a]}var ar=(()=>((ar=ar||{})[ar.LocaleId=0]="LocaleId",ar[ar.DayPeriodsFormat=1]="DayPeriodsFormat",ar[ar.DayPeriodsStandalone=2]="DayPeriodsStandalone",ar[ar.DaysFormat=3]="DaysFormat",ar[ar.DaysStandalone=4]="DaysStandalone",ar[ar.MonthsFormat=5]="MonthsFormat",ar[ar.MonthsStandalone=6]="MonthsStandalone",ar[ar.Eras=7]="Eras",ar[ar.FirstDayOfWeek=8]="FirstDayOfWeek",ar[ar.WeekendRange=9]="WeekendRange",ar[ar.DateFormat=10]="DateFormat",ar[ar.TimeFormat=11]="TimeFormat",ar[ar.DateTimeFormat=12]="DateTimeFormat",ar[ar.NumberSymbols=13]="NumberSymbols",ar[ar.NumberFormats=14]="NumberFormats",ar[ar.CurrencyCode=15]="CurrencyCode",ar[ar.CurrencySymbol=16]="CurrencySymbol",ar[ar.CurrencyName=17]="CurrencyName",ar[ar.Currencies=18]="Currencies",ar[ar.Directionality=19]="Directionality",ar[ar.PluralCase=20]="PluralCase",ar[ar.ExtraData=21]="ExtraData",ar))();const Ic="en-US";let sd=Ic;class uu{}class QA{}function XA(a,c){return new mi(a,c??null)}class mi extends uu{constructor(c,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fw(this);const f=function Mi(a,c){const u=a[Hi]||null;if(!u&&!0===c)throw new Error(`Type ${Je(a)} does not have '\u0275mod' property.`);return u}(c);this._bootstrapComponents=function Yu(a){return a instanceof Function?a():a}(f.bootstrap),this._r3Injector=tw(c,u,[{provide:uu,useValue:this},{provide:Dm,useValue:this.componentFactoryResolver}],Je(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class Wr extends QA{constructor(c){super(),this.moduleType=c}create(c){return new mi(this.moduleType,c)}}function xc(a,c,u,f,p,y){const S=c+u;return fa(a,S,p)?function Wa(a,c,u){return a[c]=u}(a,S+1,y?f.call(y,p):f(p)):function ld(a,c){const u=a[c];return u===kr?void 0:u}(a,S+1)}function gv(a,c){const u=ti();let f;const p=a+22;u.firstCreatePass?(f=function lP(a,c){if(c)for(let u=c.length-1;u>=0;u--){const f=c[u];if(a===f.name)return f}}(c,u.pipeRegistry),u.data[p]=f,f.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,f.onDestroy)):f=u.data[p];const y=f.factory||(f.factory=ju(f.type)),S=mr(rp);try{const M=Rf(!1),R=y();return Rf(M),function dk(a,c,u,f){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),c[u]=f}(u,zt(),p,R),R}finally{mr(S)}}function r2(a,c,u){const f=a+22,p=zt(),y=function _l(a,c){return a[c]}(p,f);return function s_(a,c){return a[1].data[c].pure}(p,f)?xc(p,function ao(){const a=wr.lFrame;let c=a.bindingRootIndex;return-1===c&&(c=a.bindingRootIndex=a.tView.bindingStartIndex),c}(),c,y.transform,u,y):y.transform(u)}function i2(a){return c=>{setTimeout(a,void 0,c)}}const li=class dP extends m.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,u,f){let p=c,y=u||(()=>null),S=f;if(c&&"object"==typeof c){const R=c;p=R.next?.bind(R),y=R.error?.bind(R),S=R.complete?.bind(R)}this.__isAsync&&(y=i2(y),p&&(p=i2(p)),S&&(S=i2(S)));const M=super.subscribe({next:p,error:y,complete:S});return c instanceof de.w0&&c.add(M),M}};function hP(){return this._results[up()]()}class s2{constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=up(),f=s2.prototype;f[u]||(f[u]=hP)}get changes(){return this._changes||(this._changes=new li)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,u){return this._results.reduce(c,u)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,u){const f=this;f.dirty=!1;const p=Do(c);(this._changesDetected=!function Qy(a,c,u){if(a.length!==c.length)return!1;for(let f=0;f<a.length;f++){let p=a[f],y=c[f];if(u&&(p=u(p),y=u(y)),y!==p)return!1}return!0}(f._results,p,u))&&(f._results=p,f.length=p.length,f.last=p[this.length-1],f.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ud=(()=>{class a{}return a.__NG_ELEMENT_ID__=du,a})();const o2=ud,Np=class extends o2{constructor(c,u,f){super(),this._declarationLView=c,this._declarationTContainer=u,this.elementRef=f}createEmbeddedView(c,u){const f=this._declarationTContainer.tViews,p=zs(this._declarationLView,f,c,16,null,f.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[19];return null!==S&&(p[19]=S.createEmbeddedView(f)),fh(f,p,c),new lp(p)}};function du(){return dd(Ks(),zt())}function dd(a,c){return 4&a.type?new Np(c,a,Mm(a,c)):null}let Cr=(()=>{class a{}return a.__NG_ELEMENT_ID__=fP,a})();function fP(){return lC(Ks(),zt())}const o_=Cr,cC=class extends o_{constructor(c,u,f){super(),this._lContainer=c,this._hostTNode=u,this._hostLView=f}get element(){return Mm(this._hostTNode,this._hostLView)}get injector(){return new $u(this._hostTNode,this._hostLView)}get parentInjector(){const c=eh(this._hostTNode,this._hostLView);if(Yd(c)){const u=Xd(c,this._hostLView),f=Qd(c);return new $u(u[1].data[f+8],u)}return new $u(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const u=ms(this._lContainer);return null!==u&&u[c]||null}get length(){return this._lContainer.length-10}createEmbeddedView(c,u,f){let p,y;"number"==typeof f?p=f:null!=f&&(p=f.index,y=f.injector);const S=c.createEmbeddedView(u||{},y);return this.insert(S,p),S}createComponent(c,u,f,p,y){const S=c&&!function Gu(a){return"function"==typeof a}(c);let M;if(S)M=u;else{const ce=u||{};M=ce.index,f=ce.injector,p=ce.projectableNodes,y=ce.environmentInjector||ce.ngModuleRef}const R=S?c:new P0(Un(c)),B=f||this.parentInjector;if(!y&&null==R.ngModule){const De=(S?B:this.parentInjector).get(ep,null);De&&(y=De)}const H=R.create(B,p,void 0,y);return this.insert(H.hostView,M),H}insert(c,u){const f=c._lView,p=f[1];if(function qg(a){return la(a[3])}(f)){const H=this.indexOf(c);if(-1!==H)this.detach(H);else{const ce=f[3],De=new cC(ce,ce[6],ce[3]);De.detach(De.indexOf(c))}}const y=this._adjustIndex(u),S=this._lContainer;!function f6(a,c,u,f){const p=10+f,y=u.length;f>0&&(u[p-1][4]=c),f<y-10?(c[4]=u[p],um(u,10+f,c)):(u.push(c),c[4]=null),c[3]=u;const S=c[17];null!==S&&u!==S&&function p6(a,c){const u=a[9];c[16]!==c[3][3][16]&&(a[2]=!0),null===u?a[9]=[c]:u.push(c)}(S,c);const M=c[19];null!==M&&M.insertView(a),c[2]|=64}(p,f,S,y);const M=eS(y,S),R=f[11],B=V1(R,S[7]);return null!==B&&function u6(a,c,u,f,p,y){f[0]=p,f[6]=c,lh(a,f,u,1,p,y)}(p,S[6],R,f,B,M),c.attachToViewContainerRef(),um(a_(S),y,c),c}move(c,u){return this.insert(c,u)}indexOf(c){const u=ms(this._lContainer);return null!==u?u.indexOf(c):-1}remove(c){const u=this._adjustIndex(c,-1),f=Yx(this._lContainer,u);f&&(Hc(a_(this._lContainer),u),zM(f[1],f))}detach(c){const u=this._adjustIndex(c,-1),f=Yx(this._lContainer,u);return f&&null!=Hc(a_(this._lContainer),u)?new lp(f):null}_adjustIndex(c,u=0){return c??this.length+u}};function ms(a){return a[8]}function a_(a){return a[8]||(a[8]=[])}function lC(a,c){let u;const f=c[a.index];if(la(f))u=f;else{let p;if(8&a.type)p=Gs(f);else{const y=c[11];p=y.createComment("");const S=Co(a,c);Kf(y,V1(y,S),p,function y6(a,c){return a.nextSibling(c)}(y,S),!1)}c[a.index]=u=Vm(f,c,p,a),cp(c,u)}return new cC(u,a,c)}class Th{constructor(c){this.queryList=c,this.matches=null}clone(){return new Th(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dh{constructor(c=[]){this.queries=c}createEmbeddedView(c){const u=c.queries;if(null!==u){const f=null!==c.contentQueries?c.contentQueries[0]:u.length,p=[];for(let y=0;y<f;y++){const S=u.getByIndex(y);p.push(this.queries[S.indexInDeclarationView].clone())}return new Dh(p)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let u=0;u<this.queries.length;u++)null!==f_(c,u).matches&&this.queries[u].setDirty()}}class dC{constructor(c,u,f=null){this.predicate=c,this.flags=u,this.read=f}}class l_{constructor(c=[]){this.queries=c}elementStart(c,u){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(c,u)}elementEnd(c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(c)}embeddedTView(c){let u=null;for(let f=0;f<this.length;f++){const p=null!==u?u.length:0,y=this.getByIndex(f).embeddedTView(c,p);y&&(y.indexInDeclarationView=f,null!==u?u.push(y):u=[y])}return null!==u?new l_(u):null}template(c,u){for(let f=0;f<this.queries.length;f++)this.queries[f].template(c,u)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class Mh{constructor(c,u=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(c,u){this.isApplyingToNode(u)&&this.matchTNode(c,u)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,u){this.elementStart(c,u)}embeddedTView(c,u){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,u),new Mh(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let f=c.parent;for(;null!==f&&8&f.type&&f.index!==u;)f=f.parent;return u===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(c,u){const f=this.metadata.predicate;if(Array.isArray(f))for(let p=0;p<f.length;p++){const y=f[p];this.matchTNodeWithReadOption(c,u,pP(u,y)),this.matchTNodeWithReadOption(c,u,Ff(u,c,y,!1,!1))}else f===ud?4&u.type&&this.matchTNodeWithReadOption(c,u,-1):this.matchTNodeWithReadOption(c,u,Ff(u,c,f,!1,!1))}matchTNodeWithReadOption(c,u,f){if(null!==f){const p=this.metadata.read;if(null!==p)if(p===Nm||p===Cr||p===ud&&4&u.type)this.addMatch(u.index,-2);else{const y=Ff(u,c,p,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,f)}}addMatch(c,u){null===this.matches?this.matches=[c,u]:this.matches.push(c,u)}}function pP(a,c){const u=a.localNames;if(null!==u)for(let f=0;f<u.length;f+=2)if(u[f]===c)return u[f+1];return null}function gP(a,c,u,f){return-1===u?function mv(a,c){return 11&a.type?Mm(a,c):4&a.type?dd(a,c):null}(c,a):-2===u?function mP(a,c,u){return u===Nm?Mm(c,a):u===ud?dd(c,a):u===Cr?lC(c,a):void 0}(a,c,f):th(a,a[1],u,c)}function hC(a,c,u,f){const p=c[19].queries[f];if(null===p.matches){const y=a.data,S=u.matches,M=[];for(let R=0;R<S.length;R+=2){const B=S[R];M.push(B<0?null:gP(c,y[B],S[R+1],u.metadata.read))}p.matches=M}return p.matches}function u_(a,c,u,f){const p=a.queries.getByIndex(u),y=p.matches;if(null!==y){const S=hC(a,c,p,u);for(let M=0;M<y.length;M+=2){const R=y[M];if(R>0)f.push(S[M/2]);else{const B=y[M+1],H=c[-R];for(let ce=10;ce<H.length;ce++){const De=H[ce];De[17]===De[3]&&u_(De[1],De,B,f)}if(null!==H[9]){const ce=H[9];for(let De=0;De<ce.length;De++){const $e=ce[De];u_($e[1],$e,B,f)}}}}}return f}function fC(a){const c=zt(),u=ti(),f=zy();Hy(f+1);const p=f_(u,f);if(a.dirty&&function Wg(a){return 4==(4&a[2])}(c)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const y=p.crossesNgTemplate?u_(u,c,f,[]):hC(u,c,p,f);a.reset(y,NN),a.notifyOnChanges()}return!0}return!1}function _v(a,c,u){const f=ti();f.firstCreatePass&&(function h_(a,c,u){null===a.queries&&(a.queries=new l_),a.queries.track(new Mh(c,u))}(f,new dC(a,c,u),-1),2==(2&c)&&(f.staticViewQueries=!0)),function c2(a,c,u){const f=new s2(4==(4&u));tu(a,c,f,f.destroy),null===c[19]&&(c[19]=new Dh),c[19].queries.push(new Th(f))}(f,zt(),c)}function d_(){return function pC(a,c){return a[19].queries[c].queryList}(zt(),zy())}function f_(a,c){return a.queries.getByIndex(c)}function Rh(...a){}const Iv=new Bi("Application Initializer");let v_=(()=>{class a{constructor(u){this.appInits=u,this.resolve=Rh,this.reject=Rh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,p)=>{this.resolve=f,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if(Km(y))u.push(y);else if(mp(y)){const S=new Promise((M,R)=>{y.subscribe({complete:M,error:R})});u.push(S)}}Promise.all(u).then(()=>{f()}).catch(p=>{this.reject(p)}),0===u.length&&f(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Xt(Iv,8))},a.\u0275prov=Cn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const y2=new Bi("AppId",{providedIn:"root",factory:function DC(){return`${Ev()}${Ev()}${Ev()}`}});function Ev(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xv=new Bi("Platform Initializer"),AP=new Bi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),CP=new Bi("appBootstrapListener"),TP=new Bi("AnimationModuleType"),Rp=new Bi("LocaleId",{providedIn:"root",factory:()=>pn(Rp,bt.Optional|bt.SkipSelf)||function Sv(){return typeof $localize<"u"&&$localize.locale||Ic}()}),MC=new Bi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),RC=(()=>Promise.resolve(0))();function Av(a){typeof Zone>"u"?RC.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class ga{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new li(!1),this.onMicrotaskEmpty=new li(!1),this.onStable=new li(!1),this.onError=new li(!1),typeof Zone>"u")throw new ze(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!f&&u,p.shouldCoalesceRunChangeDetection=f,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function OP(){let a=fn.requestAnimationFrame,c=fn.cancelAnimationFrame;if(typeof Zone<"u"&&a&&c){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const f=c[Zone.__symbol__("OriginalDelegate")];f&&(c=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function BP(a){const c=()=>{!function FP(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(fn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,b_(a),a.isCheckStableRunning=!0,v2(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),b_(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,f,p,y,S,M)=>{try{return b2(a),u.invokeTask(p,y,S,M)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||a.shouldCoalesceRunChangeDetection)&&c(),LC(a)}},onInvoke:(u,f,p,y,S,M,R)=>{try{return b2(a),u.invoke(p,y,S,M,R)}finally{a.shouldCoalesceRunChangeDetection&&c(),LC(a)}},onHasTask:(u,f,p,y)=>{u.hasTask(p,y),f===p&&("microTask"==y.change?(a._hasPendingMicrotasks=y.microTask,b_(a),v2(a)):"macroTask"==y.change&&(a.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,f,p,y)=>(u.handleError(p,y),a.runOutsideAngular(()=>a.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ga.isInAngularZone())throw new ze(909,!1)}static assertNotInAngularZone(){if(ga.isInAngularZone())throw new ze(909,!1)}run(c,u,f){return this._inner.run(c,u,f)}runTask(c,u,f,p){const y=this._inner,S=y.scheduleEventTask("NgZoneEvent: "+p,c,OC,Rh,Rh);try{return y.runTask(S,u,f)}finally{y.cancelTask(S)}}runGuarded(c,u,f){return this._inner.runGuarded(c,u,f)}runOutsideAngular(c){return this._outer.run(c)}}const OC={};function v2(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function b_(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function b2(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function LC(a){a._nesting--,v2(a)}class UP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new li,this.onMicrotaskEmpty=new li,this.onStable=new li,this.onError=new li}run(c,u,f){return c.apply(u,f)}runGuarded(c,u,f){return c.apply(u,f)}runOutsideAngular(c){return c()}runTask(c,u,f,p){return c.apply(u,f)}}const w2=new Bi(""),fu=new Bi("");let Op,FC=(()=>{class a{constructor(u,f,p){this._ngZone=u,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Op||(function md(a){Op=a}(p),p.addToWindow(f)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ga.assertNotInAngularZone(),Av(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Av(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(u)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,f,p){let y=-1;f&&f>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==y),u(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:p})}whenStable(u,f,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,f,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,f,p){return[]}}return a.\u0275fac=function(u){return new(u||a)(Xt(ga),Xt(I2),Xt(fu))},a.\u0275prov=Cn({token:a,factory:a.\u0275fac}),a})(),I2=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,f){this._applications.set(u,f)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,f=!0){return Op?.findTestabilityInTree(this,u,f)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Cn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),nl=null;const BC=new Bi("AllowMultipleToken"),E2=new Bi("PlatformDestroyListeners");function I_(a,c,u=[]){const f=`Platform: ${c}`,p=new Bi(f);return(y=[])=>{let S=Lp();if(!S||S.injector.get(BC,!1)){const M=[...u,...y,{provide:p,useValue:!0}];a?a(M):function w_(a){if(nl&&!nl.get(BC,!1))throw new ze(400,!1);nl=a;const c=a.get($C);(function VC(a){const c=a.get(xv,null);c&&c.forEach(u=>u())})(a)}(function HC(a=[],c){return hh.create({name:c,providers:[{provide:gS,useValue:"platform"},{provide:E2,useValue:new Set([()=>nl=null])},...a]})}(M,f))}return function zC(a){const c=Lp();if(!c)throw new ze(401,!1);return c}()}}function Lp(){return nl?.get($C)??null}let $C=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,f){const p=function x2(a,c){let u;return u="noop"===a?new UP:("zone.js"===a?void 0:a)||new ga(c),u}(f?.ngZone,function Lh(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(f)),y=[{provide:ga,useValue:p}];return p.run(()=>{const S=hh.create({providers:y,parent:this.injector,name:u.moduleType.name}),M=u.create(S),R=M.injector.get(w0,null);if(!R)throw new ze(402,!1);return p.runOutsideAngular(()=>{const B=p.onError.subscribe({next:H=>{R.handleError(H)}});M.onDestroy(()=>{Bh(this._modules,M),B.unsubscribe()})}),function S2(a,c,u){try{const f=u();return Km(f)?f.catch(p=>{throw c.runOutsideAngular(()=>a.handleError(p)),p}):f}catch(f){throw c.runOutsideAngular(()=>a.handleError(f)),f}}(R,p,()=>{const B=M.injector.get(v_);return B.runInitializers(),B.donePromise.then(()=>(function Uw(a){Pn(a,"Expected localeId to be defined"),"string"==typeof a&&(sd=a.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Rp,Ic)||Ic),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,f=[]){const p=A2({},f);return function UC(a,c,u){const f=new Wr(u);return Promise.resolve(f)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(u){const f=u.injector.get(Fh);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>f.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new ze(403,!1);u.instance.ngDoBootstrap(f)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ze(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const u=this._injector.get(E2,null);u&&(u.forEach(f=>f()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Xt(hh))},a.\u0275prov=Cn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function A2(a,c){return Array.isArray(c)?c.reduce(A2,a):{...a,...c}}let Fh=(()=>{class a{constructor(u,f,p){this._zone=u,this._injector=f,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new se.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),S=new se.y(M=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{ga.assertNotInAngularZone(),Av(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{ga.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{R.unsubscribe(),B.unsubscribe()}});this.isStable=(0,st.T)(y,S.pipe((0,ct.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,f){const p=u instanceof DN;if(!this._injector.get(v_).done)throw!p&&function mo(a){const c=Un(a)||Dn(a)||ii(a);return null!==c&&c.standalone}(u),new ze(405,false);let S;S=p?u:this._injector.get(Dm).resolveComponentFactory(u),this.componentTypes.push(S.componentType);const M=function jP(a){return a.isBoundToModule}(S)?void 0:this._injector.get(uu),B=S.create(hh.NULL,[],f||S.selector,M),H=B.location.nativeElement,ce=B.injector.get(w2,null);return ce?.registerApplication(H),B.onDestroy(()=>{this.detachView(B.hostView),Bh(this.components,B),ce?.unregisterApplication(H)}),this._loadComponent(B),B}tick(){if(this._runningTick)throw new ze(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const f=u;this._views.push(f),f.attachToAppRef(this)}detachView(u){const f=u;Bh(this._views,f),f.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(CP,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Bh(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ze(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(Xt(ga),Xt(ep),Xt(w0))},a.\u0275prov=Cn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Bh(a,c){const u=a.indexOf(c);u>-1&&a.splice(u,1)}function T2(){return!1}let zP=(()=>{class a{}return a.__NG_ELEMENT_ID__=D2,a})();function D2(a){return function M2(a,c,u){if(yf(a)&&!u){const f=ua(a.index,c);return new lp(f,f)}return 47&a.type?new lp(c[16],c):null}(Ks(),zt(),16==(16&a))}class E_{constructor(){}supports(c){return dp(c)}create(c){return new $P(c)}}const ZC=(a,c)=>c;class $P{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||ZC}forEachItem(c){let u;for(u=this._itHead;null!==u;u=u._next)c(u)}forEachOperation(c){let u=this._itHead,f=this._removalsHead,p=0,y=null;for(;u||f;){const S=!f||u&&u.currentIndex<YC(f,p,y)?u:f,M=YC(S,p,y),R=S.currentIndex;if(S===f)p--,f=f._nextRemoved;else if(u=u._next,null==S.previousIndex)p++;else{y||(y=[]);const B=M-p,H=R-p;if(B!=H){for(let De=0;De<B;De++){const $e=De<y.length?y[De]:y[De]=0,St=$e+De;H<=St&&St<B&&(y[De]=$e+1)}y[S.previousIndex]=H-B}}M!==R&&c(S,M,R)}}forEachPreviousItem(c){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachMovedItem(c){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}forEachIdentityChange(c){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)c(u)}diff(c){if(null==c&&(c=[]),!dp(c))throw new ze(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let p,y,S,u=this._itHead,f=!1;if(Array.isArray(c)){this.length=c.length;for(let M=0;M<this.length;M++)y=c[M],S=this._trackByFn(M,y),null!==u&&Object.is(u.trackById,S)?(f&&(u=this._verifyReinsertion(u,y,S,M)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,S,M),f=!0),u=u._next}else p=0,function YS(a,c){if(Array.isArray(a))for(let u=0;u<a.length;u++)c(a[u]);else{const u=a[up()]();let f;for(;!(f=u.next()).done;)c(f.value)}}(c,M=>{S=this._trackByFn(p,M),null!==u&&Object.is(u.trackById,S)?(f&&(u=this._verifyReinsertion(u,M,S,p)),Object.is(u.item,M)||this._addIdentityChange(u,M)):(u=this._mismatch(u,M,S,p),f=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,u,f,p){let y;return null===c?y=this._itTail:(y=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._reinsertAfter(c,y,p)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(f,p))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._moveAfter(c,y,p)):c=this._addAfter(new x_(u,f),y,p),c}_verifyReinsertion(c,u,f,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==y?c=this._reinsertAfter(y,c._prev,p):c.currentIndex!=p&&(c.currentIndex=p,this._addToMoves(c,p)),c}_truncate(c){for(;null!==c;){const u=c._next;this._addToRemovals(this._unlink(c)),c=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,u,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const p=c._prevRemoved,y=c._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(c,u,f),this._addToMoves(c,f),c}_moveAfter(c,u,f){return this._unlink(c),this._insertAfter(c,u,f),this._addToMoves(c,f),c}_addAfter(c,u,f){return this._insertAfter(c,u,f),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,u,f){const p=null===u?this._itHead:u._next;return c._next=p,c._prev=u,null===p?this._itTail=c:p._prev=c,null===u?this._itHead=c:u._next=c,null===this._linkedRecords&&(this._linkedRecords=new jp),this._linkedRecords.put(c),c.currentIndex=f,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const u=c._prev,f=c._next;return null===u?this._itHead=f:u._next=f,null===f?this._itTail=u:f._prev=u,c}_addToMoves(c,u){return c.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jp),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,u){return c.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class x_{constructor(c,u){this.item=c,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ml{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,u){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===u||u<=f.currentIndex)&&Object.is(f.trackById,c))return f;return null}remove(c){const u=c._prevDup,f=c._nextDup;return null===u?this._head=f:u._nextDup=f,null===f?this._tail=u:f._prevDup=u,null===this._head}}class jp{constructor(){this.map=new Map}put(c){const u=c.trackById;let f=this.map.get(u);f||(f=new Ml,this.map.set(u,f)),f.add(c)}get(c,u){const p=this.map.get(c);return p?p.get(c,u):null}remove(c){const u=c.trackById;return this.map.get(u).remove(c)&&this.map.delete(u),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YC(a,c,u){const f=a.previousIndex;if(null===f)return f;let p=0;return u&&f<u.length&&(p=u[f]),f+c+p}class L2{constructor(){}supports(c){return c instanceof Map||F0(c)}create(){return new F2}}class F2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let u;for(u=this._mapHead;null!==u;u=u._next)c(u)}forEachPreviousItem(c){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)c(u)}forEachChangedItem(c){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}diff(c){if(c){if(!(c instanceof Map||F0(c)))throw new ze(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(c,(f,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,f),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(p,f);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let f=u;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,u){if(c){const f=c._prev;return u._next=c,u._prev=f,c._prev=u,f&&(f._next=u),c===this._mapHead&&(this._mapHead=u),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(c,u){if(this._records.has(c)){const p=this._records.get(c);this._maybeAddToChanges(p,u);const y=p._prev,S=p._next;return y&&(y._next=S),S&&(S._prev=y),p._next=null,p._prev=null,p}const f=new S_(c);return this._records.set(c,f),f.currentValue=u,this._addToAdditions(f),f}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,u){Object.is(u,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=u,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,u){c instanceof Map?c.forEach(u):Object.keys(c).forEach(f=>u(c[f],f))}}class S_{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Vp(){return new B2([new E_])}let B2=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(null!=f){const p=f.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||Vp()),deps:[[a,new Wf,new Xl]]}}find(u){const f=this.factories.find(p=>p.supports(u));if(null!=f)return f;throw new ze(901,!1)}}return a.\u0275prov=Cn({token:a,providedIn:"root",factory:Vp}),a})();function U2(){return new j2([new L2])}let j2=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(f){const p=f.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||U2()),deps:[[a,new Wf,new Xl]]}}find(u){const f=this.factories.find(p=>p.supports(u));if(f)return f;throw new ze(901,!1)}}return a.\u0275prov=Cn({token:a,providedIn:"root",factory:U2}),a})();const GP=I_(null,"core",[]);let XC=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Xt(Fh))},a.\u0275mod=Ee({type:a}),a.\u0275inj=ts({}),a})()},3942:(Gn,Rt,Q)=>{Q.d(Rt,{Z:()=>er});var m=Q(2090),de=Q(4859),se=Q(9681),st=Q(1877);class ct{constructor(ze,Dt){this._delegate=ze,this.firebase=Dt,(0,se._addComponent)(ze,new de.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,se.deleteApp)(this._delegate)))}_getService(ze,Dt=se._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const Nt=this._delegate.container.getProvider(ze);return!Nt.isInitialized()&&"EXPLICIT"===(null===(At=Nt.getComponent())||void 0===At?void 0:At.instantiationMode)&&Nt.initialize(),Nt.getImmediate({identifier:Dt})}_removeServiceInstance(ze,Dt=se._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Dt)}_addComponent(ze){(0,se._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,se._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ht=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ie=function Et(){const Yt=function Je(Yt){const ze={},Dt={__esModule:!0,initializeApp:function kt(Le,et={}){const yt=se.initializeApp(Le,et);if((0,m.r3)(ze,yt.name))return ze[yt.name];const Pe=new Yt(yt,Dt);return ze[yt.name]=Pe,Pe},app:Nt,registerVersion:se.registerVersion,setLogLevel:se.setLogLevel,onLog:se.onLog,apps:null,SDK_VERSION:se.SDK_VERSION,INTERNAL:{registerComponent:function Pt(Le){const et=Le.name,yt=et.replace("-compat","");if(se._registerComponent(Le)&&"PUBLIC"===Le.type){const Pe=(Se=Nt())=>{if("function"!=typeof Se[yt])throw ht.create("invalid-app-argument",{appName:et});return Se[yt]()};void 0!==Le.serviceProps&&(0,m.ZB)(Pe,Le.serviceProps),Dt[yt]=Pe,Yt.prototype[yt]=function(...Se){return this._getService.bind(this,et).apply(this,Le.multipleInstances?Se:[])}}return"PUBLIC"===Le.type?Dt[yt]:null},removeApp:function At(Le){delete ze[Le]},useAsService:function Qt(Le,et){return"serverAuth"===et?null:et},modularAPIs:se}};function Nt(Le){if(!(0,m.r3)(ze,Le=Le||se._DEFAULT_ENTRY_NAME))throw ht.create("no-app",{appName:Le});return ze[Le]}return Dt.default=Dt,Object.defineProperty(Dt,"apps",{get:function Ot(){return Object.keys(ze).map(Le=>ze[Le])}}),Nt.App=Yt,Dt}(ct);return Yt.INTERNAL=Object.assign(Object.assign({},Yt.INTERNAL),{createFirebaseNamespace:Et,extendNamespace:function ze(Dt){(0,m.ZB)(Yt,Dt)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Yt}(),we=new st.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){we.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Yt=self.firebase.SDK_VERSION;Yt&&Yt.indexOf("LITE")>=0&&we.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const er=Ie;!function $t(Yt){(0,se.registerVersion)("@firebase/app-compat","0.2.0",Yt)}()},9681:(Gn,Rt,Q)=>{Q.r(Rt),Q.d(Rt,{FirebaseError:()=>st.ZR,SDK_VERSION:()=>qs,_DEFAULT_ENTRY_NAME:()=>Tr,_addComponent:()=>Lr,_addOrOverwriteComponent:()=>Di,_apps:()=>Pn,_clearComponents:()=>ts,_components:()=>Xn,_getProvider:()=>Cn,_registerComponent:()=>ir,_removeServiceInstance:()=>es,deleteApp:()=>un,getApp:()=>Ri,getApps:()=>zi,initializeApp:()=>Ki,onLog:()=>bt,registerVersion:()=>Mt,setLogLevel:()=>Ln});var m=Q(5861),de=Q(4859),se=Q(1877),st=Q(2090),ct=Q(8766);class gt{constructor(wt){this.container=wt}getPlatformInfoString(){return this.container.getProviders().map(pn=>{if(function ht(Xt){return"VERSION"===Xt.getComponent()?.type}(pn)){const Qn=pn.getImmediate();return`${Qn.library}/${Qn.version}`}return null}).filter(pn=>pn).join(" ")}}const Je="@firebase/app",Ie=new se.Yd("@firebase/app"),Tr="[DEFAULT]",Kn={[Je]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,Xn=new Map;function Lr(Xt,wt){try{Xt.container.addComponent(wt)}catch(pn){Ie.debug(`Component ${wt.name} failed to register with FirebaseApp ${Xt.name}`,pn)}}function Di(Xt,wt){Xt.container.addOrOverwriteComponent(wt)}function ir(Xt){const wt=Xt.name;if(Xn.has(wt))return Ie.debug(`There were multiple attempts to register component ${wt}.`),!1;Xn.set(wt,Xt);for(const pn of Pn.values())Lr(pn,Xt);return!0}function Cn(Xt,wt){const pn=Xt.container.getProvider("heartbeat").getImmediate({optional:!0});return pn&&pn.triggerHeartbeat(),Xt.container.getProvider(wt)}function es(Xt,wt,pn=Tr){Cn(Xt,wt).clearInstance(pn)}function ts(){Xn.clear()}const _i=new st.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pi{constructor(wt,pn,Qn){this._isDeleted=!1,this._options=Object.assign({},wt),this._config=Object.assign({},pn),this._name=pn.name,this._automaticDataCollectionEnabled=pn.automaticDataCollectionEnabled,this._container=Qn,this.container.addComponent(new de.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(wt){this.checkDestroyed(),this._automaticDataCollectionEnabled=wt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(wt){this._isDeleted=wt}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}const qs="9.15.0";function Ki(Xt,wt={}){let pn=Xt;"object"!=typeof wt&&(wt={name:wt});const Qn=Object.assign({name:Tr,automaticDataCollectionEnabled:!1},wt),or=Qn.name;if("string"!=typeof or||!or)throw _i.create("bad-app-name",{appName:String(or)});if(pn||(pn=(0,st.aH)()),!pn)throw _i.create("no-options");const Ur=Pn.get(or);if(Ur){if((0,st.vZ)(pn,Ur.options)&&(0,st.vZ)(Qn,Ur.config))return Ur;throw _i.create("duplicate-app",{appName:or})}const be=new de.H0(or);for(const Te of Xn.values())be.addComponent(Te);const ge=new Pi(pn,Qn,be);return Pn.set(or,ge),ge}function Ri(Xt=Tr){const wt=Pn.get(Xt);if(!wt&&Xt===Tr)return Ki();if(!wt)throw _i.create("no-app",{appName:Xt});return wt}function zi(){return Array.from(Pn.values())}function un(Xt){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,m.Z)(function*(Xt){const wt=Xt.name;Pn.has(wt)&&(Pn.delete(wt),yield Promise.all(Xt.container.getProviders().map(pn=>pn.delete())),Xt.isDeleted=!0)})).apply(this,arguments)}function Mt(Xt,wt,pn){var Qn;let or=null!==(Qn=Kn[Xt])&&void 0!==Qn?Qn:Xt;pn&&(or+=`-${pn}`);const Ur=or.match(/\s|\//),be=wt.match(/\s|\//);if(Ur||be){const ge=[`Unable to register library "${or}" with version "${wt}":`];return Ur&&ge.push(`library name "${or}" contains illegal characters (whitespace or "/")`),Ur&&be&&ge.push("and"),be&&ge.push(`version name "${wt}" contains illegal characters (whitespace or "/")`),void Ie.warn(ge.join(" "))}ir(new de.wA(`${or}-version`,()=>({library:or,version:wt}),"VERSION"))}function bt(Xt,wt){if(null!==Xt&&"function"!=typeof Xt)throw _i.create("invalid-log-argument");(0,se.Am)(Xt,wt)}function Ln(Xt){(0,se.Ub)(Xt)}const Gr="firebase-heartbeat-store";let ni=null;function fn(){return ni||(ni=(0,ct.X3)("firebase-heartbeat-database",1,{upgrade:(Xt,wt)=>{0===wt&&Xt.createObjectStore(Gr)}}).catch(Xt=>{throw _i.create("idb-open",{originalErrorMessage:Xt.message})})),ni}function Fn(){return(Fn=(0,m.Z)(function*(Xt){try{return(yield fn()).transaction(Gr).objectStore(Gr).get(oi(Xt))}catch(wt){if(wt instanceof st.ZR)Ie.warn(wt.message);else{const pn=_i.create("idb-get",{originalErrorMessage:wt?.message});Ie.warn(pn.message)}}})).apply(this,arguments)}function Fr(Xt,wt){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,m.Z)(function*(Xt,wt){try{const Qn=(yield fn()).transaction(Gr,"readwrite");return yield Qn.objectStore(Gr).put(wt,oi(Xt)),Qn.done}catch(pn){if(pn instanceof st.ZR)Ie.warn(pn.message);else{const Qn=_i.create("idb-set",{originalErrorMessage:pn?.message});Ie.warn(Qn.message)}}})).apply(this,arguments)}function oi(Xt){return`${Xt.name}!${Xt.options.appId}`}class ai{constructor(wt){this.container=wt,this._heartbeatsCache=null;const pn=this.container.getProvider("app").getImmediate();this._storage=new yr(pn),this._heartbeatsCachePromise=this._storage.read().then(Qn=>(this._heartbeatsCache=Qn,Qn))}triggerHeartbeat(){var wt=this;return(0,m.Z)(function*(){const Qn=wt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),or=Yn();if(null===wt._heartbeatsCache&&(wt._heartbeatsCache=yield wt._heartbeatsCachePromise),wt._heartbeatsCache.lastSentHeartbeatDate!==or&&!wt._heartbeatsCache.heartbeats.some(Ur=>Ur.date===or))return wt._heartbeatsCache.heartbeats.push({date:or,agent:Qn}),wt._heartbeatsCache.heartbeats=wt._heartbeatsCache.heartbeats.filter(Ur=>{const be=new Date(Ur.date).valueOf();return Date.now()-be<=2592e6}),wt._storage.overwrite(wt._heartbeatsCache)})()}getHeartbeatsHeader(){var wt=this;return(0,m.Z)(function*(){if(null===wt._heartbeatsCache&&(yield wt._heartbeatsCachePromise),null===wt._heartbeatsCache||0===wt._heartbeatsCache.heartbeats.length)return"";const pn=Yn(),{heartbeatsToSend:Qn,unsentEntries:or}=function ws(Xt,wt=1024){const pn=[];let Qn=Xt.slice();for(const or of Xt){const Ur=pn.find(be=>be.agent===or.agent);if(Ur){if(Ur.dates.push(or.date),Ms(pn)>wt){Ur.dates.pop();break}}else if(pn.push({agent:or.agent,dates:[or.date]}),Ms(pn)>wt){pn.pop();break}Qn=Qn.slice(1)}return{heartbeatsToSend:pn,unsentEntries:Qn}}(wt._heartbeatsCache.heartbeats),Ur=(0,st.L)(JSON.stringify({version:2,heartbeats:Qn}));return wt._heartbeatsCache.lastSentHeartbeatDate=pn,or.length>0?(wt._heartbeatsCache.heartbeats=or,yield wt._storage.overwrite(wt._heartbeatsCache)):(wt._heartbeatsCache.heartbeats=[],wt._storage.overwrite(wt._heartbeatsCache)),Ur})()}}function Yn(){return(new Date).toISOString().substring(0,10)}class yr{constructor(wt){this.app=wt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,st.hl)()&&(0,st.eu)().then(()=>!0).catch(()=>!1)})()}read(){var wt=this;return(0,m.Z)(function*(){return(yield wt._canUseIndexedDBPromise)&&(yield function rn(Xt){return Fn.apply(this,arguments)}(wt.app))||{heartbeats:[]}})()}overwrite(wt){var pn=this;return(0,m.Z)(function*(){var Qn;if(yield pn._canUseIndexedDBPromise){const Ur=yield pn.read();return Fr(pn.app,{lastSentHeartbeatDate:null!==(Qn=wt.lastSentHeartbeatDate)&&void 0!==Qn?Qn:Ur.lastSentHeartbeatDate,heartbeats:wt.heartbeats})}})()}add(wt){var pn=this;return(0,m.Z)(function*(){var Qn;if(yield pn._canUseIndexedDBPromise){const Ur=yield pn.read();return Fr(pn.app,{lastSentHeartbeatDate:null!==(Qn=wt.lastSentHeartbeatDate)&&void 0!==Qn?Qn:Ur.lastSentHeartbeatDate,heartbeats:[...Ur.heartbeats,...wt.heartbeats]})}})()}}function Ms(Xt){return(0,st.L)(JSON.stringify({version:2,heartbeats:Xt})).length}!function Oi(Xt){ir(new de.wA("platform-logger",wt=>new gt(wt),"PRIVATE")),ir(new de.wA("heartbeat",wt=>new ai(wt),"PRIVATE")),Mt(Je,"0.9.0",Xt),Mt(Je,"0.9.0","esm2017"),Mt("fire-js","")}("")},4859:(Gn,Rt,Q)=>{Q.d(Rt,{H0:()=>Je,wA:()=>se,zt:()=>ct});var m=Q(5861),de=Q(2090);class se{constructor(Ie,we,Fe){this.name=Ie,this.instanceFactory=we,this.type=Fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ie){return this.instantiationMode=Ie,this}setMultipleInstances(Ie){return this.multipleInstances=Ie,this}setServiceProps(Ie){return this.serviceProps=Ie,this}setInstanceCreatedCallback(Ie){return this.onInstanceCreated=Ie,this}}const st="[DEFAULT]";class ct{constructor(Ie,we){this.name=Ie,this.container=we,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ie){const we=this.normalizeInstanceIdentifier(Ie);if(!this.instancesDeferred.has(we)){const Fe=new de.BH;if(this.instancesDeferred.set(we,Fe),this.isInitialized(we)||this.shouldAutoInitialize())try{const sn=this.getOrInitializeService({instanceIdentifier:we});sn&&Fe.resolve(sn)}catch{}}return this.instancesDeferred.get(we).promise}getImmediate(Ie){var we;const Fe=this.normalizeInstanceIdentifier(Ie?.identifier),sn=null!==(we=Ie?.optional)&&void 0!==we&&we;if(!this.isInitialized(Fe)&&!this.shouldAutoInitialize()){if(sn)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Fe})}catch($t){if(sn)return null;throw $t}}getComponent(){return this.component}setComponent(Ie){if(Ie.name!==this.name)throw Error(`Mismatching Component ${Ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ie,this.shouldAutoInitialize()){if(function ht(Et){return"EAGER"===Et.instantiationMode}(Ie))try{this.getOrInitializeService({instanceIdentifier:st})}catch{}for(const[we,Fe]of this.instancesDeferred.entries()){const sn=this.normalizeInstanceIdentifier(we);try{const $t=this.getOrInitializeService({instanceIdentifier:sn});Fe.resolve($t)}catch{}}}}clearInstance(Ie=st){this.instancesDeferred.delete(Ie),this.instancesOptions.delete(Ie),this.instances.delete(Ie)}delete(){var Ie=this;return(0,m.Z)(function*(){const we=Array.from(Ie.instances.values());yield Promise.all([...we.filter(Fe=>"INTERNAL"in Fe).map(Fe=>Fe.INTERNAL.delete()),...we.filter(Fe=>"_delete"in Fe).map(Fe=>Fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ie=st){return this.instances.has(Ie)}getOptions(Ie=st){return this.instancesOptions.get(Ie)||{}}initialize(Ie={}){const{options:we={}}=Ie,Fe=this.normalizeInstanceIdentifier(Ie.instanceIdentifier);if(this.isInitialized(Fe))throw Error(`${this.name}(${Fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const sn=this.getOrInitializeService({instanceIdentifier:Fe,options:we});for(const[$t,er]of this.instancesDeferred.entries())Fe===this.normalizeInstanceIdentifier($t)&&er.resolve(sn);return sn}onInit(Ie,we){var Fe;const sn=this.normalizeInstanceIdentifier(we),$t=null!==(Fe=this.onInitCallbacks.get(sn))&&void 0!==Fe?Fe:new Set;$t.add(Ie),this.onInitCallbacks.set(sn,$t);const er=this.instances.get(sn);return er&&Ie(er,sn),()=>{$t.delete(Ie)}}invokeOnInitCallbacks(Ie,we){const Fe=this.onInitCallbacks.get(we);if(Fe)for(const sn of Fe)try{sn(Ie,we)}catch{}}getOrInitializeService({instanceIdentifier:Ie,options:we={}}){let Fe=this.instances.get(Ie);if(!Fe&&this.component&&(Fe=this.component.instanceFactory(this.container,{instanceIdentifier:(Et=Ie,Et===st?void 0:Et),options:we}),this.instances.set(Ie,Fe),this.instancesOptions.set(Ie,we),this.invokeOnInitCallbacks(Fe,Ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ie,Fe)}catch{}var Et;return Fe||null}normalizeInstanceIdentifier(Ie=st){return this.component?this.component.multipleInstances?Ie:st:Ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Je{constructor(Ie){this.name=Ie,this.providers=new Map}addComponent(Ie){const we=this.getProvider(Ie.name);if(we.isComponentSet())throw new Error(`Component ${Ie.name} has already been registered with ${this.name}`);we.setComponent(Ie)}addOrOverwriteComponent(Ie){this.getProvider(Ie.name).isComponentSet()&&this.providers.delete(Ie.name),this.addComponent(Ie)}getProvider(Ie){if(this.providers.has(Ie))return this.providers.get(Ie);const we=new ct(Ie,this);return this.providers.set(Ie,we),we}getProviders(){return Array.from(this.providers.values())}}},2833:(Gn,Rt,Q)=>{var m=Q(5861),de=Q(9681),se=Q(4859),st=Q(2090),ct=Q(8766);const gt="@firebase/installations",Et="w:0.6.0",Ie="FIS_v2",Yt=new st.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(Ee){return Ee instanceof st.ZR&&Ee.code.includes("request-failed")}function Dt({projectId:Ee}){return`https://firebaseinstallations.googleapis.com/v1/projects/${Ee}/installations`}function At(Ee){return{token:Ee.token,requestStatus:2,expiresIn:et(Ee.expiresIn),creationTime:Date.now()}}function Nt(Ee,rt){return kt.apply(this,arguments)}function kt(){return(kt=(0,m.Z)(function*(Ee,rt){const Bn=(yield rt.json()).error;return Yt.create("request-failed",{requestName:Ee,serverCode:Bn.code,serverMessage:Bn.message,serverStatus:Bn.status})})).apply(this,arguments)}function Ot({apiKey:Ee}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Ee})}function Pt(Ee,{refreshToken:rt}){const Wt=Ot(Ee);return Wt.append("Authorization",function yt(Ee){return`${Ie} ${Ee}`}(rt)),Wt}function Qt(Ee){return Le.apply(this,arguments)}function Le(){return(Le=(0,m.Z)(function*(Ee){const rt=yield Ee();return rt.status>=500&&rt.status<600?Ee():rt})).apply(this,arguments)}function et(Ee){return Number(Ee.replace("s","000"))}function Pe(Ee,rt){return Se.apply(this,arguments)}function Se(){return(Se=(0,m.Z)(function*({appConfig:Ee,heartbeatServiceProvider:rt},{fid:Wt}){const Bn=Dt(Ee),ri=Ot(Ee),Un=rt.getImmediate({optional:!0});if(Un){const Mi=yield Un.getHeartbeatsHeader();Mi&&ri.append("x-firebase-client",Mi)}const ii={method:"POST",headers:ri,body:JSON.stringify({fid:Wt,authVersion:Ie,appId:Ee.appId,sdkVersion:Et})},mo=yield Qt(()=>fetch(Bn,ii));if(mo.ok){const Mi=yield mo.json();return{fid:Mi.fid||Wt,registrationStatus:2,refreshToken:Mi.refreshToken,authToken:At(Mi.authToken)}}throw yield Nt("Create Installation",mo)})).apply(this,arguments)}function nt(Ee){return new Promise(rt=>{setTimeout(rt,Ee)})}const qt=/^[cdef][\w-]{21}$/;function Vn(){try{const Ee=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Ee),Ee[0]=112+Ee[0]%16;const Wt=function Nr(Ee){return function We(Ee){return btoa(String.fromCharCode(...Ee)).replace(/\+/g,"-").replace(/\//g,"_")}(Ee).substr(0,22)}(Ee);return qt.test(Wt)?Wt:""}catch{return""}}function Tr(Ee){return`${Ee.appName}!${Ee.appId}`}const Kn=new Map;function Pn(Ee,rt){const Wt=Tr(Ee);Di(Wt,rt),function ir(Ee,rt){const Wt=function es(){return!Cn&&"BroadcastChannel"in self&&(Cn=new BroadcastChannel("[Firebase] FID Change"),Cn.onmessage=Ee=>{Di(Ee.data.key,Ee.data.fid)}),Cn}();Wt&&Wt.postMessage({key:Ee,fid:rt}),function ts(){0===Kn.size&&Cn&&(Cn.close(),Cn=null)}()}(Wt,rt)}function Di(Ee,rt){const Wt=Kn.get(Ee);if(Wt)for(const Bn of Wt)Bn(rt)}let Cn=null;const Pi="firebase-installations-store";let qs=null;function Ki(){return qs||(qs=(0,ct.X3)("firebase-installations-database",1,{upgrade:(Ee,rt)=>{0===rt&&Ee.createObjectStore(Pi)}})),qs}function Ri(Ee,rt){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(Ee,rt){const Wt=Tr(Ee),ri=(yield Ki()).transaction(Pi,"readwrite"),Un=ri.objectStore(Pi),Dn=yield Un.get(Wt);return yield Un.put(rt,Wt),yield ri.done,(!Dn||Dn.fid!==rt.fid)&&Pn(Ee,rt.fid),rt})).apply(this,arguments)}function un(Ee){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,m.Z)(function*(Ee){const rt=Tr(Ee),Bn=(yield Ki()).transaction(Pi,"readwrite");yield Bn.objectStore(Pi).delete(rt),yield Bn.done})).apply(this,arguments)}function Mt(Ee,rt){return bt.apply(this,arguments)}function bt(){return(bt=(0,m.Z)(function*(Ee,rt){const Wt=Tr(Ee),ri=(yield Ki()).transaction(Pi,"readwrite"),Un=ri.objectStore(Pi),Dn=yield Un.get(Wt),ii=rt(Dn);return void 0===ii?yield Un.delete(Wt):yield Un.put(ii,Wt),yield ri.done,ii&&(!Dn||Dn.fid!==ii.fid)&&Pn(Ee,ii.fid),ii})).apply(this,arguments)}function Ln(Ee){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(Ee){let rt;const Wt=yield Mt(Ee.appConfig,Bn=>{const ri=mr(Bn),Un=Gr(Ee,ri);return rt=Un.registrationPromise,Un.installationEntry});return""===Wt.fid?{installationEntry:yield rt}:{installationEntry:Wt,registrationPromise:rt}})).apply(this,arguments)}function mr(Ee){return Hr(Ee||{fid:Vn(),registrationStatus:0})}function Gr(Ee,rt){if(0===rt.registrationStatus){if(!navigator.onLine)return{installationEntry:rt,registrationPromise:Promise.reject(Yt.create("app-offline"))};const Wt={fid:rt.fid,registrationStatus:1,registrationTime:Date.now()},Bn=function ni(Ee,rt){return fn.apply(this,arguments)}(Ee,Wt);return{installationEntry:Wt,registrationPromise:Bn}}return 1===rt.registrationStatus?{installationEntry:rt,registrationPromise:rn(Ee)}:{installationEntry:rt}}function fn(){return(fn=(0,m.Z)(function*(Ee,rt){try{const Wt=yield Pe(Ee,rt);return Ri(Ee.appConfig,Wt)}catch(Wt){throw ze(Wt)&&409===Wt.customData.serverCode?yield un(Ee.appConfig):yield Ri(Ee.appConfig,{fid:rt.fid,registrationStatus:0}),Wt}})).apply(this,arguments)}function rn(Ee){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,m.Z)(function*(Ee){let rt=yield Fr(Ee.appConfig);for(;1===rt.registrationStatus;)yield nt(100),rt=yield Fr(Ee.appConfig);if(0===rt.registrationStatus){const{installationEntry:Wt,registrationPromise:Bn}=yield Ln(Ee);return Bn||Wt}return rt})).apply(this,arguments)}function Fr(Ee){return Mt(Ee,rt=>{if(!rt)throw Yt.create("installation-not-found");return Hr(rt)})}function Hr(Ee){return function oi(Ee){return 1===Ee.registrationStatus&&Ee.registrationTime+1e4<Date.now()}(Ee)?{fid:Ee.fid,registrationStatus:0}:Ee}function Zi(Ee,rt){return Br.apply(this,arguments)}function Br(){return(Br=(0,m.Z)(function*({appConfig:Ee,heartbeatServiceProvider:rt},Wt){const Bn=ai(Ee,Wt),ri=Pt(Ee,Wt),Un=rt.getImmediate({optional:!0});if(Un){const Mi=yield Un.getHeartbeatsHeader();Mi&&ri.append("x-firebase-client",Mi)}const ii={method:"POST",headers:ri,body:JSON.stringify({installation:{sdkVersion:Et,appId:Ee.appId}})},mo=yield Qt(()=>fetch(Bn,ii));if(mo.ok)return At(yield mo.json());throw yield Nt("Generate Auth Token",mo)})).apply(this,arguments)}function ai(Ee,{fid:rt}){return`${Dt(Ee)}/${rt}/authTokens:generate`}function Yn(Ee){return ws.apply(this,arguments)}function ws(){return(ws=(0,m.Z)(function*(Ee,rt=!1){let Wt;const Bn=yield Mt(Ee.appConfig,Un=>{if(!pn(Un))throw Yt.create("not-registered");const Dn=Un.authToken;if(!rt&&Qn(Dn))return Un;if(1===Dn.requestStatus)return Wt=yr(Ee,rt),Un;{if(!navigator.onLine)throw Yt.create("app-offline");const ii=Ur(Un);return Wt=Xt(Ee,ii),ii}});return Wt?yield Wt:Bn.authToken})).apply(this,arguments)}function yr(Ee,rt){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,m.Z)(function*(Ee,rt){let Wt=yield Oi(Ee.appConfig);for(;1===Wt.authToken.requestStatus;)yield nt(100),Wt=yield Oi(Ee.appConfig);const Bn=Wt.authToken;return 0===Bn.requestStatus?Yn(Ee,rt):Bn})).apply(this,arguments)}function Oi(Ee){return Mt(Ee,rt=>{if(!pn(rt))throw Yt.create("not-registered");return function be(Ee){return 1===Ee.requestStatus&&Ee.requestTime+1e4<Date.now()}(rt.authToken)?Object.assign(Object.assign({},rt),{authToken:{requestStatus:0}}):rt})}function Xt(Ee,rt){return wt.apply(this,arguments)}function wt(){return(wt=(0,m.Z)(function*(Ee,rt){try{const Wt=yield Zi(Ee,rt),Bn=Object.assign(Object.assign({},rt),{authToken:Wt});return yield Ri(Ee.appConfig,Bn),Wt}catch(Wt){if(!ze(Wt)||401!==Wt.customData.serverCode&&404!==Wt.customData.serverCode){const Bn=Object.assign(Object.assign({},rt),{authToken:{requestStatus:0}});yield Ri(Ee.appConfig,Bn)}else yield un(Ee.appConfig);throw Wt}})).apply(this,arguments)}function pn(Ee){return void 0!==Ee&&2===Ee.registrationStatus}function Qn(Ee){return 2===Ee.requestStatus&&!function or(Ee){const rt=Date.now();return rt<Ee.creationTime||Ee.creationTime+Ee.expiresIn<rt+36e5}(Ee)}function Ur(Ee){const rt={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Ee),{authToken:rt})}function Te(){return(Te=(0,m.Z)(function*(Ee){const rt=Ee,{installationEntry:Wt,registrationPromise:Bn}=yield Ln(rt);return Bn?Bn.catch(console.error):Yn(rt).catch(console.error),Wt.fid})).apply(this,arguments)}function G(){return(G=(0,m.Z)(function*(Ee,rt=!1){const Wt=Ee;return yield le(Wt),(yield Yn(Wt,rt)).token})).apply(this,arguments)}function le(Ee){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(function*(Ee){const{registrationPromise:rt}=yield Ln(Ee);rt&&(yield rt)})).apply(this,arguments)}function cs(Ee){return Yt.create("missing-app-config-values",{valueName:Ee})}const Re="installations",gn=Ee=>{const rt=Ee.getProvider("app").getImmediate(),Wt=function fr(Ee){if(!Ee||!Ee.options)throw cs("App Configuration");if(!Ee.name)throw cs("App Name");const rt=["projectId","apiKey","appId"];for(const Wt of rt)if(!Ee.options[Wt])throw cs(Wt);return{appName:Ee.name,projectId:Ee.options.projectId,apiKey:Ee.options.apiKey,appId:Ee.options.appId}}(rt);return{app:rt,appConfig:Wt,heartbeatServiceProvider:(0,de._getProvider)(rt,"heartbeat"),_delete:()=>Promise.resolve()}},Sn=Ee=>{const rt=Ee.getProvider("app").getImmediate(),Wt=(0,de._getProvider)(rt,Re).getImmediate();return{getId:()=>function ge(Ee){return Te.apply(this,arguments)}(Wt),getToken:ri=>function ue(Ee){return G.apply(this,arguments)}(Wt,ri)}};(function Zn(){(0,de._registerComponent)(new se.wA(Re,gn,"PUBLIC")),(0,de._registerComponent)(new se.wA("installations-internal",Sn,"PRIVATE"))})(),(0,de.registerVersion)(gt,"0.6.0"),(0,de.registerVersion)(gt,"0.6.0","esm2017")},1877:(Gn,Rt,Q)=>{Q.d(Rt,{Am:()=>Et,Ub:()=>Je,Yd:()=>ht,in:()=>de});const m=[];var de=(()=>{return(Ie=de||(de={}))[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",de;var Ie})();const se={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},st=de.INFO,ct={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},gt=(Ie,we,...Fe)=>{if(we<Ie.logLevel)return;const sn=(new Date).toISOString(),$t=ct[we];if(!$t)throw new Error(`Attempted to log a message with an invalid logType (value: ${we})`);console[$t](`[${sn}]  ${Ie.name}:`,...Fe)};class ht{constructor(we){this.name=we,this._logLevel=st,this._logHandler=gt,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(we){if(!(we in de))throw new TypeError(`Invalid value "${we}" assigned to \`logLevel\``);this._logLevel=we}setLogLevel(we){this._logLevel="string"==typeof we?se[we]:we}get logHandler(){return this._logHandler}set logHandler(we){if("function"!=typeof we)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=we}get userLogHandler(){return this._userLogHandler}set userLogHandler(we){this._userLogHandler=we}debug(...we){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...we),this._logHandler(this,de.DEBUG,...we)}log(...we){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...we),this._logHandler(this,de.VERBOSE,...we)}info(...we){this._userLogHandler&&this._userLogHandler(this,de.INFO,...we),this._logHandler(this,de.INFO,...we)}warn(...we){this._userLogHandler&&this._userLogHandler(this,de.WARN,...we),this._logHandler(this,de.WARN,...we)}error(...we){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...we),this._logHandler(this,de.ERROR,...we)}}function Je(Ie){m.forEach(we=>{we.setLogLevel(Ie)})}function Et(Ie,we){for(const Fe of m){let sn=null;we&&we.level&&(sn=se[we.level]),Fe.userLogHandler=null===Ie?null:($t,er,...Yt)=>{const ze=Yt.map(Dt=>{if(null==Dt)return null;if("string"==typeof Dt)return Dt;if("number"==typeof Dt||"boolean"==typeof Dt)return Dt.toString();if(Dt instanceof Error)return Dt.message;try{return JSON.stringify(Dt)}catch{return null}}).filter(Dt=>Dt).join(" ");er>=(sn??$t.logLevel)&&Ie({level:de[er].toLowerCase(),message:ze,args:Yt,type:$t.name})}}}},259:(Gn,Rt,Q)=>{Q.d(Rt,{C6:()=>m.getApps,KN:()=>m.registerVersion,Mq:()=>m.getApp,ZF:()=>m.initializeApp});var m=Q(9681);(0,m.registerVersion)("firebase","9.15.0","app")},9260:(Gn,Rt,Q)=>{Q.d(Rt,{Z:()=>m.Z});var m=Q(3942);m.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(Gn,Rt,Q)=>{Q.r(Rt);var m=Q(5861),de=Q(3942),se=Q(552),st=Q(2090),ht=(Q(9681),Q(1877),Q(4859));function Je(){return window}function we(){return(we=(0,m.Z)(function*(ue,G,le){var Ke;const{BuildInfo:Lt}=Je();(0,se.ap)(G.sessionId,"AuthEvent did not contain a session ID");const xn=yield Dt(G.sessionId),an={};return(0,se.aq)()?an.ibi=Lt.packageName:(0,se.ar)()?an.apn=Lt.packageName:(0,se.as)(ue,"operation-not-supported-in-this-environment"),Lt.displayName&&(an.appDisplayName=Lt.displayName),an.sessionId=xn,(0,se.at)(ue,le,G.type,void 0,null!==(Ke=G.eventId)&&void 0!==Ke?Ke:void 0,an)})).apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(ue){const{BuildInfo:G}=Je(),le={};(0,se.aq)()?le.iosBundleId=G.packageName:(0,se.ar)()?le.androidPackageName=G.packageName:(0,se.as)(ue,"operation-not-supported-in-this-environment"),yield(0,se.au)(ue,le)})).apply(this,arguments)}function Yt(){return(Yt=(0,m.Z)(function*(ue,G,le){const{cordova:Ke}=Je();let Lt=()=>{};try{yield new Promise((xn,an)=>{let hr=null;function Hn(){var fr;xn();const cs=null===(fr=Ke.plugins.browsertab)||void 0===fr?void 0:fr.close;"function"==typeof cs&&cs(),"function"==typeof le?.close&&le.close()}function Ei(){hr||(hr=window.setTimeout(()=>{an((0,se.aw)(ue,"redirect-cancelled-by-user"))},2e3))}function Hi(){"visible"===document?.visibilityState&&Ei()}G.addPassiveListener(Hn),document.addEventListener("resume",Ei,!1),(0,se.ar)()&&document.addEventListener("visibilitychange",Hi,!1),Lt=()=>{G.removePassiveListener(Hn),document.removeEventListener("resume",Ei,!1),document.removeEventListener("visibilitychange",Hi,!1),hr&&window.clearTimeout(hr)}})}finally{Lt()}})).apply(this,arguments)}function Dt(ue){return At.apply(this,arguments)}function At(){return(At=(0,m.Z)(function*(ue){const G=Nt(ue),le=yield crypto.subtle.digest("SHA-256",G);return Array.from(new Uint8Array(le)).map(Lt=>Lt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Nt(ue){if((0,se.ap)(/[0-9a-zA-Z]+/.test(ue),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ue);const G=new ArrayBuffer(ue.length),le=new Uint8Array(G);for(let Ke=0;Ke<ue.length;Ke++)le[Ke]=ue.charCodeAt(Ke);return le}class Ot extends se.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(G=>{this.resolveInialized=G})}addPassiveListener(G){this.passiveListeners.add(G)}removePassiveListener(G){this.passiveListeners.delete(G)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(G){return this.resolveInialized(),this.passiveListeners.forEach(le=>le(G)),super.onEvent(G)}initialized(){var G=this;return(0,m.Z)(function*(){yield G.initPromise})()}}function Le(ue){return et.apply(this,arguments)}function et(){return(et=(0,m.Z)(function*(ue){const G=yield Se()._get(nt(ue));return G&&(yield Se()._remove(nt(ue))),G})).apply(this,arguments)}function Pe(){const ue=[],G="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let le=0;le<20;le++){const Ke=Math.floor(Math.random()*G.length);ue.push(G.charAt(Ke))}return ue.join("")}function Se(){return(0,se.az)(se.b)}function nt(ue){return(0,se.aA)("authEvent",ue.config.apiKey,ue.name)}function Vt(ue){if(!ue?.includes("?"))return{};const[G,...le]=ue.split("?");return(0,st.zd)(le.join("?"))}const Tr=class Nr{constructor(){this._redirectPersistence=se.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=se.aB,this._overrideRedirectResult=se.aC}_initialize(G){var le=this;return(0,m.Z)(function*(){const Ke=G._key();let Lt=le.eventManagers.get(Ke);return Lt||(Lt=new Ot(G),le.eventManagers.set(Ke,Lt),le.attachCallbackListeners(G,Lt)),Lt})()}_openPopup(G){(0,se.as)(G,"operation-not-supported-in-this-environment")}_openRedirect(G,le,Ke,Lt){var xn=this;return(0,m.Z)(function*(){!function ze(ue){var G,le,Ke,Lt,xn,an,hr,Hn,Ei,Hi;const fr=Je();(0,se.ax)("function"==typeof(null===(G=fr?.universalLinks)||void 0===G?void 0:G.subscribe),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,se.ax)(typeof(null===(le=fr?.BuildInfo)||void 0===le?void 0:le.packageName)<"u",ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,se.ax)("function"==typeof(null===(xn=null===(Lt=null===(Ke=fr?.cordova)||void 0===Ke?void 0:Ke.plugins)||void 0===Lt?void 0:Lt.browsertab)||void 0===xn?void 0:xn.openUrl),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,se.ax)("function"==typeof(null===(Hn=null===(hr=null===(an=fr?.cordova)||void 0===an?void 0:an.plugins)||void 0===hr?void 0:hr.browsertab)||void 0===Hn?void 0:Hn.isAvailable),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,se.ax)("function"==typeof(null===(Hi=null===(Ei=fr?.cordova)||void 0===Ei?void 0:Ei.InAppBrowser)||void 0===Hi?void 0:Hi.open),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(G);const an=yield xn._initialize(G);yield an.initialized(),an.resetRedirect(),(0,se.aD)(),yield xn._originValidation(G);const hr=function Pt(ue,G,le=null){return{type:G,eventId:le,urlResponse:null,sessionId:Pe(),postBody:null,tenantId:ue.tenantId,error:(0,se.aw)(ue,"no-auth-event")}}(G,Ke,Lt);yield function Qt(ue,G){return Se()._set(nt(ue),G)}(G,hr);const Hn=yield function Ie(ue,G,le){return we.apply(this,arguments)}(G,hr,le),Ei=yield function $t(ue){const{cordova:G}=Je();return new Promise(le=>{G.plugins.browsertab.isAvailable(Ke=>{let Lt=null;Ke?G.plugins.browsertab.openUrl(ue):Lt=G.InAppBrowser.open(ue,(0,se.av)()?"_blank":"_system","location=yes"),le(Lt)})})}(Hn);return function er(ue,G,le){return Yt.apply(this,arguments)}(G,an,Ei)})()}_isIframeWebStorageSupported(G,le){throw new Error("Method not implemented.")}_originValidation(G){const le=G._key();return this.originValidationPromises[le]||(this.originValidationPromises[le]=function Fe(ue){return sn.apply(this,arguments)}(G)),this.originValidationPromises[le]}attachCallbackListeners(G,le){const{universalLinks:Ke,handleOpenURL:Lt,BuildInfo:xn}=Je(),an=setTimeout((0,m.Z)(function*(){yield Le(G),le.onEvent(Kn())}),500),hr=function(){var Hi=(0,m.Z)(function*(fr){clearTimeout(an);const cs=yield Le(G);let Re=null;cs&&fr?.url&&(Re=function yt(ue,G){var le,Ke;const Lt=function qt(ue){const G=Vt(ue),le=G.link?decodeURIComponent(G.link):void 0,Ke=Vt(le).link,Lt=G.deep_link_id?decodeURIComponent(G.deep_link_id):void 0;return Vt(Lt).link||Lt||Ke||le||ue}(G);if(Lt.includes("/__/auth/callback")){const xn=Vt(Lt),an=xn.firebaseError?function We(ue){try{return JSON.parse(ue)}catch{return null}}(decodeURIComponent(xn.firebaseError)):null,hr=null===(Ke=null===(le=an?.code)||void 0===le?void 0:le.split("auth/"))||void 0===Ke?void 0:Ke[1],Hn=hr?(0,se.aw)(hr):null;return Hn?{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,error:Hn,urlResponse:null,sessionId:null,postBody:null}:{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,sessionId:ue.sessionId,urlResponse:Lt,postBody:null}}return null}(cs,fr.url)),le.onEvent(Re||Kn())});return function(cs){return Hi.apply(this,arguments)}}();typeof Ke<"u"&&"function"==typeof Ke.subscribe&&Ke.subscribe(null,hr);const Hn=Lt,Ei=`${xn.packageName.toLowerCase()}://`;Je().handleOpenURL=function(){var Hi=(0,m.Z)(function*(fr){if(fr.toLowerCase().startsWith(Ei)&&hr({url:fr}),"function"==typeof Hn)try{Hn(fr)}catch(cs){console.error(cs)}});return function(fr){return Hi.apply(this,arguments)}}()}};function Kn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,se.aw)("no-auth-event")}}function ir(){var ue;return(null===(ue=self?.location)||void 0===ue?void 0:ue.protocol)||null}function es(ue=(0,st.z$)()){return!("file:"!==ir()&&"ionic:"!==ir()&&"capacitor:"!==ir()||!ue.toLowerCase().match(/iphone|ipad|ipod|android/))}function qs(){try{const ue=self.localStorage,G=se.aI();if(ue)return ue.setItem(G,"1"),ue.removeItem(G),!function Pi(ue=(0,st.z$)()){return function gs(){return(0,st.w1)()&&11===document?.documentMode}()||function _i(ue=(0,st.z$)()){return/Edge\/\d+/.test(ue)}(ue)}()||(0,st.hl)()}catch{return Ki()&&(0,st.hl)()}return!1}function Ki(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ri(){return(function Cn(){return"http:"===ir()||"https:"===ir()}()||(0,st.ru)()||es())&&!function ts(){return(0,st.b$)()||(0,st.UG)()}()&&qs()&&!Ki()}function zi(){return es()&&typeof document<"u"}function Ge(){return(Ge=(0,m.Z)(function*(){return!!zi()&&new Promise(ue=>{const G=setTimeout(()=>{ue(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(G),ue(!0)})})})).apply(this,arguments)}const bt={LOCAL:"local",NONE:"none",SESSION:"session"},Ln=se.ax,lr="persistence";function Gr(ue){return ni.apply(this,arguments)}function ni(){return(ni=(0,m.Z)(function*(ue){yield ue._initializationPromise;const G=rn(),le=se.aA(lr,ue.config.apiKey,ue.name);G&&G.setItem(le,ue._getPersistence())})).apply(this,arguments)}function rn(){var ue;try{return(null===(ue=function Mt(){return typeof window<"u"?window:null}())||void 0===ue?void 0:ue.sessionStorage)||null}catch{return null}}const Fn=se.ax;class Fr{constructor(){this.browserResolver=se.az(se.k),this.cordovaResolver=se.az(Tr),this.underlyingResolver=null,this._redirectPersistence=se.a,this._completeRedirectFn=se.aB,this._overrideRedirectResult=se.aC}_initialize(G){var le=this;return(0,m.Z)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._initialize(G)})()}_openPopup(G,le,Ke,Lt){var xn=this;return(0,m.Z)(function*(){return yield xn.selectUnderlyingResolver(),xn.assertedUnderlyingResolver._openPopup(G,le,Ke,Lt)})()}_openRedirect(G,le,Ke,Lt){var xn=this;return(0,m.Z)(function*(){return yield xn.selectUnderlyingResolver(),xn.assertedUnderlyingResolver._openRedirect(G,le,Ke,Lt)})()}_isIframeWebStorageSupported(G,le){this.assertedUnderlyingResolver._isIframeWebStorageSupported(G,le)}_originValidation(G){return this.assertedUnderlyingResolver._originValidation(G)}get _shouldInitProactively(){return zi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var G=this;return(0,m.Z)(function*(){if(G.underlyingResolver)return;const le=yield function un(){return Ge.apply(this,arguments)}();G.underlyingResolver=le?G.cordovaResolver:G.browserResolver})()}}function Hr(ue){return ue.unwrap()}function Zi(ue){return ai(ue)}function ai(ue){const{_tokenResponse:G}=ue instanceof st.ZR?ue.customData:ue;if(!G)return null;if(!(ue instanceof st.ZR)&&"temporaryProof"in G&&"phoneNumber"in G)return se.P.credentialFromResult(ue);const le=G.providerId;if(!le||le===se.o.PASSWORD)return null;let Ke;switch(le){case se.o.GOOGLE:Ke=se.Q;break;case se.o.FACEBOOK:Ke=se.N;break;case se.o.GITHUB:Ke=se.T;break;case se.o.TWITTER:Ke=se.W;break;default:const{oauthIdToken:Lt,oauthAccessToken:xn,oauthTokenSecret:an,pendingToken:hr,nonce:Hn}=G;return xn||an||Lt||hr?hr?le.startsWith("saml.")?se.aL._create(le,hr):se.J._fromParams({providerId:le,signInMethod:le,pendingToken:hr,idToken:Lt,accessToken:xn}):new se.U(le).credential({idToken:Lt,accessToken:xn,rawNonce:Hn}):null}return ue instanceof st.ZR?Ke.credentialFromError(ue):Ke.credentialFromResult(ue)}function Yn(ue,G){return G.catch(le=>{throw le instanceof st.ZR&&function Br(ue,G){var le;const Ke=null===(le=G.customData)||void 0===le?void 0:le._tokenResponse;if("auth/multi-factor-auth-required"===G?.code)G.resolver=new Ms(ue,se.an(ue,G));else if(Ke){const Lt=ai(G),xn=G;Lt&&(xn.credential=Lt,xn.tenantId=Ke.tenantId||void 0,xn.email=Ke.email||void 0,xn.phoneNumber=Ke.phoneNumber||void 0)}}(ue,le),le}).then(le=>{const Lt=le.user;return{operationType:le.operationType,credential:Zi(le),additionalUserInfo:se.al(le),user:Oi.getOrCreate(Lt)}})}function ws(ue,G){return yr.apply(this,arguments)}function yr(){return(yr=(0,m.Z)(function*(ue,G){const le=yield G;return{verificationId:le.verificationId,confirm:Ke=>Yn(ue,le.confirm(Ke))}})).apply(this,arguments)}class Ms{constructor(G,le){this.resolver=le,this.auth=function oi(ue){return ue.wrapped()}(G)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(G){return Yn(Hr(this.auth),this.resolver.resolveSignIn(G))}}class Oi{constructor(G){this._delegate=G,this.multiFactor=se.ao(G)}static getOrCreate(G){return Oi.USER_MAP.has(G)||Oi.USER_MAP.set(G,new Oi(G)),Oi.USER_MAP.get(G)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(G){return this._delegate.getIdTokenResult(G)}getIdToken(G){return this._delegate.getIdToken(G)}linkAndRetrieveDataWithCredential(G){return this.linkWithCredential(G)}linkWithCredential(G){var le=this;return(0,m.Z)(function*(){return Yn(le.auth,se.Z(le._delegate,G))})()}linkWithPhoneNumber(G,le){var Ke=this;return(0,m.Z)(function*(){return ws(Ke.auth,se.l(Ke._delegate,G,le))})()}linkWithPopup(G){var le=this;return(0,m.Z)(function*(){return Yn(le.auth,se.d(le._delegate,G,Fr))})()}linkWithRedirect(G){var le=this;return(0,m.Z)(function*(){return yield Gr(se.aE(le.auth)),se.g(le._delegate,G,Fr)})()}reauthenticateAndRetrieveDataWithCredential(G){return this.reauthenticateWithCredential(G)}reauthenticateWithCredential(G){var le=this;return(0,m.Z)(function*(){return Yn(le.auth,se._(le._delegate,G))})()}reauthenticateWithPhoneNumber(G,le){return ws(this.auth,se.r(this._delegate,G,le))}reauthenticateWithPopup(G){return Yn(this.auth,se.e(this._delegate,G,Fr))}reauthenticateWithRedirect(G){var le=this;return(0,m.Z)(function*(){return yield Gr(se.aE(le.auth)),se.h(le._delegate,G,Fr)})()}sendEmailVerification(G){return se.ab(this._delegate,G)}unlink(G){var le=this;return(0,m.Z)(function*(){return yield se.ak(le._delegate,G),le})()}updateEmail(G){return se.ag(this._delegate,G)}updatePassword(G){return se.ah(this._delegate,G)}updatePhoneNumber(G){return se.u(this._delegate,G)}updateProfile(G){return se.af(this._delegate,G)}verifyBeforeUpdateEmail(G,le){return se.ac(this._delegate,G,le)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oi.USER_MAP=new WeakMap;const Xt=se.ax;let wt=(()=>{class ue{constructor(le,Ke){if(this.app=le,Ke.isInitialized())return this._delegate=Ke.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Lt}=le.options;Xt(Lt,"invalid-api-key",{appName:le.name}),Xt(Lt,"invalid-api-key",{appName:le.name});const xn=typeof window<"u"?Fr:void 0;this._delegate=Ke.initialize({options:{persistence:Qn(Lt,le.name),popupRedirectResolver:xn}}),this._delegate._updateErrorMap(se.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(le){this._delegate.languageCode=le}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(le){this._delegate.tenantId=le}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(le,Ke){se.G(this._delegate,le,Ke)}applyActionCode(le){return se.a2(this._delegate,le)}checkActionCode(le){return se.a3(this._delegate,le)}confirmPasswordReset(le,Ke){return se.a1(this._delegate,le,Ke)}createUserWithEmailAndPassword(le,Ke){var Lt=this;return(0,m.Z)(function*(){return Yn(Lt._delegate,se.a5(Lt._delegate,le,Ke))})()}fetchProvidersForEmail(le){return this.fetchSignInMethodsForEmail(le)}fetchSignInMethodsForEmail(le){return se.aa(this._delegate,le)}isSignInWithEmailLink(le){return se.a8(this._delegate,le)}getRedirectResult(){var le=this;return(0,m.Z)(function*(){Xt(Ri(),le._delegate,"operation-not-supported-in-this-environment");const Ke=yield se.j(le._delegate,Fr);return Ke?Yn(le._delegate,Promise.resolve(Ke)):{credential:null,user:null}})()}addFrameworkForLogging(le){!function Pn(ue,G){(0,se.aE)(ue)._logFramework(G)}(this._delegate,le)}onAuthStateChanged(le,Ke,Lt){const{next:xn,error:an,complete:hr}=pn(le,Ke,Lt);return this._delegate.onAuthStateChanged(xn,an,hr)}onIdTokenChanged(le,Ke,Lt){const{next:xn,error:an,complete:hr}=pn(le,Ke,Lt);return this._delegate.onIdTokenChanged(xn,an,hr)}sendSignInLinkToEmail(le,Ke){return se.a7(this._delegate,le,Ke)}sendPasswordResetEmail(le,Ke){return se.a0(this._delegate,le,Ke||void 0)}setPersistence(le){var Ke=this;return(0,m.Z)(function*(){let Lt;switch(function mr(ue,G){Ln(Object.values(bt).includes(G),ue,"invalid-persistence-type"),(0,st.b$)()?Ln(G!==bt.SESSION,ue,"unsupported-persistence-type"):(0,st.UG)()?Ln(G===bt.NONE,ue,"unsupported-persistence-type"):Ki()?Ln(G===bt.NONE||G===bt.LOCAL&&(0,st.hl)(),ue,"unsupported-persistence-type"):Ln(G===bt.NONE||qs(),ue,"unsupported-persistence-type")}(Ke._delegate,le),le){case bt.SESSION:Lt=se.a;break;case bt.LOCAL:Lt=(yield se.az(se.i)._isAvailable())?se.i:se.b;break;case bt.NONE:Lt=se.L;break;default:return se.as("argument-error",{appName:Ke._delegate.name})}return Ke._delegate.setPersistence(Lt)})()}signInAndRetrieveDataWithCredential(le){return this.signInWithCredential(le)}signInAnonymously(){return Yn(this._delegate,se.X(this._delegate))}signInWithCredential(le){return Yn(this._delegate,se.Y(this._delegate,le))}signInWithCustomToken(le){return Yn(this._delegate,se.$(this._delegate,le))}signInWithEmailAndPassword(le,Ke){return Yn(this._delegate,se.a6(this._delegate,le,Ke))}signInWithEmailLink(le,Ke){return Yn(this._delegate,se.a9(this._delegate,le,Ke))}signInWithPhoneNumber(le,Ke){return ws(this._delegate,se.s(this._delegate,le,Ke))}signInWithPopup(le){var Ke=this;return(0,m.Z)(function*(){return Xt(Ri(),Ke._delegate,"operation-not-supported-in-this-environment"),Yn(Ke._delegate,se.c(Ke._delegate,le,Fr))})()}signInWithRedirect(le){var Ke=this;return(0,m.Z)(function*(){return Xt(Ri(),Ke._delegate,"operation-not-supported-in-this-environment"),yield Gr(Ke._delegate),se.f(Ke._delegate,le,Fr)})()}updateCurrentUser(le){return this._delegate.updateCurrentUser(le)}verifyPasswordResetCode(le){return se.a4(this._delegate,le)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ue.Persistence=bt,ue})();function pn(ue,G,le){let Ke=ue;"function"!=typeof ue&&({next:Ke,error:G,complete:le}=ue);const Lt=Ke;return{next:an=>Lt(an&&Oi.getOrCreate(an)),error:G,complete:le}}function Qn(ue,G){const le=function fn(ue,G){const le=rn();if(!le)return[];const Ke=se.aA(lr,ue,G);switch(le.getItem(Ke)){case bt.NONE:return[se.L];case bt.LOCAL:return[se.i,se.a];case bt.SESSION:return[se.a];default:return[]}}(ue,G);if(typeof self<"u"&&!le.includes(se.i)&&le.push(se.i),typeof window<"u")for(const Ke of[se.b,se.a])le.includes(Ke)||le.push(Ke);return le.includes(se.L)||le.push(se.L),le}class or{constructor(){this.providerId="phone",this._delegate=new se.P(Hr(de.Z.auth()))}static credential(G,le){return se.P.credential(G,le)}verifyPhoneNumber(G,le){return this._delegate.verifyPhoneNumber(G,le)}unwrap(){return this._delegate}}or.PHONE_SIGN_IN_METHOD=se.P.PHONE_SIGN_IN_METHOD,or.PROVIDER_ID=se.P.PROVIDER_ID;const Ur=se.ax;class be{constructor(G,le,Ke=de.Z.app()){var Lt;Ur(null===(Lt=Ke.options)||void 0===Lt?void 0:Lt.apiKey,"invalid-api-key",{appName:Ke.name}),this._delegate=new se.R(G,le,Ke.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Te(ue){ue.INTERNAL.registerComponent(new ht.wA("auth-compat",G=>{const le=G.getProvider("app-compat").getImmediate(),Ke=G.getProvider("auth");return new wt(le,Ke)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:se.A.EMAIL_SIGNIN,PASSWORD_RESET:se.A.PASSWORD_RESET,RECOVER_EMAIL:se.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:se.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:se.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:se.A.VERIFY_EMAIL}},EmailAuthProvider:se.M,FacebookAuthProvider:se.N,GithubAuthProvider:se.T,GoogleAuthProvider:se.Q,OAuthProvider:se.U,SAMLAuthProvider:se.V,PhoneAuthProvider:or,PhoneMultiFactorGenerator:se.m,RecaptchaVerifier:be,TwitterAuthProvider:se.W,Auth:wt,AuthCredential:se.H,Error:st.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ue.registerVersion("@firebase/auth-compat","0.3.0")}(de.Z)},751:(Gn,Rt,Q)=>{Q.d(Rt,{KL:()=>Hn,Gb:()=>Ke});var m=Q(5861),se=(Q(2833),Q(4859)),st=Q(8766),ct=Q(2090),gt=Q(9681);const ht="/firebase-messaging-sw.js",Je="/firebase-cloud-messaging-push-scope",Et="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",we="google.c.a.c_id",Fe="google.c.a.c_l",sn="google.c.a.ts",$t="google.c.a.e";var Yt=(()=>{return(Re=Yt||(Yt={})).PUSH_RECEIVED="push-received",Re.NOTIFICATION_CLICKED="notification-clicked",Yt;var Re})();function ze(Re){const it=new Uint8Array(Re);return btoa(String.fromCharCode(...it)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dt(Re){const gn=(Re+"=".repeat((4-Re.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Sn=atob(gn),Zn=new Uint8Array(Sn.length);for(let Ee=0;Ee<Sn.length;++Ee)Zn[Ee]=Sn.charCodeAt(Ee);return Zn}const At="fcm_token_details_db",kt="fcm_token_object_Store";function Ot(Re){return Pt.apply(this,arguments)}function Pt(){return Pt=(0,m.Z)(function*(Re){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ee=>Ee.name).includes(At))return null;let it=null;return(yield(0,st.X3)(At,5,{upgrade:(Sn=(0,m.Z)(function*(Zn,Ee,rt,Wt){var Bn;if(Ee<2||!Zn.objectStoreNames.contains(kt))return;const ri=Wt.objectStore(kt),Un=yield ri.index("fcmSenderId").get(Re);if(yield ri.clear(),Un)if(2===Ee){const Dn=Un;if(!Dn.auth||!Dn.p256dh||!Dn.endpoint)return;it={token:Dn.fcmToken,createTime:null!==(Bn=Dn.createTime)&&void 0!==Bn?Bn:Date.now(),subscriptionOptions:{auth:Dn.auth,p256dh:Dn.p256dh,endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:"string"==typeof Dn.vapidKey?Dn.vapidKey:ze(Dn.vapidKey)}}}else if(3===Ee){const Dn=Un;it={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:ze(Dn.auth),p256dh:ze(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:ze(Dn.vapidKey)}}}else if(4===Ee){const Dn=Un;it={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:ze(Dn.auth),p256dh:ze(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:ze(Dn.vapidKey)}}}}),function(Ee,rt,Wt,Bn){return Sn.apply(this,arguments)})})).close(),yield(0,st.Lj)(At),yield(0,st.Lj)("fcm_vapid_details_db"),yield(0,st.Lj)("undefined"),Qt(it)?it:null;var Sn}),Pt.apply(this,arguments)}function Qt(Re){if(!Re||!Re.subscriptionOptions)return!1;const{subscriptionOptions:it}=Re;return"number"==typeof Re.createTime&&Re.createTime>0&&"string"==typeof Re.token&&Re.token.length>0&&"string"==typeof it.auth&&it.auth.length>0&&"string"==typeof it.p256dh&&it.p256dh.length>0&&"string"==typeof it.endpoint&&it.endpoint.length>0&&"string"==typeof it.swScope&&it.swScope.length>0&&"string"==typeof it.vapidKey&&it.vapidKey.length>0}const yt="firebase-messaging-store";let Pe=null;function Se(){return Pe||(Pe=(0,st.X3)("firebase-messaging-database",1,{upgrade:(Re,it)=>{0===it&&Re.createObjectStore(yt)}})),Pe}function nt(Re){return We.apply(this,arguments)}function We(){return(We=(0,m.Z)(function*(Re){const it=Tr(Re),Sn=yield(yield Se()).transaction(yt).objectStore(yt).get(it);if(Sn)return Sn;{const Zn=yield Ot(Re.appConfig.senderId);if(Zn)return yield qt(Re,Zn),Zn}})).apply(this,arguments)}function qt(Re,it){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,m.Z)(function*(Re,it){const gn=Tr(Re),Zn=(yield Se()).transaction(yt,"readwrite");return yield Zn.objectStore(yt).put(it,gn),yield Zn.done,it})).apply(this,arguments)}function Vn(Re){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,m.Z)(function*(Re){const it=Tr(Re),Sn=(yield Se()).transaction(yt,"readwrite");yield Sn.objectStore(yt).delete(it),yield Sn.done})).apply(this,arguments)}function Tr({appConfig:Re}){return Re.appId}const Pn=new ct.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xn(Re,it){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,m.Z)(function*(Re,it){const gn=yield gs(Re),Sn=Pi(it),Zn={method:"POST",headers:gn,body:JSON.stringify(Sn)};let Ee;try{Ee=yield(yield fetch(ts(Re.appConfig),Zn)).json()}catch(rt){throw Pn.create("token-subscribe-failed",{errorInfo:rt?.toString()})}if(Ee.error)throw Pn.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Pn.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Di(Re,it){return ir.apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(Re,it){const gn=yield gs(Re),Sn=Pi(it.subscriptionOptions),Zn={method:"PATCH",headers:gn,body:JSON.stringify(Sn)};let Ee;try{Ee=yield(yield fetch(`${ts(Re.appConfig)}/${it.token}`,Zn)).json()}catch(rt){throw Pn.create("token-update-failed",{errorInfo:rt?.toString()})}if(Ee.error)throw Pn.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Pn.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function Cn(Re,it){return es.apply(this,arguments)}function es(){return(es=(0,m.Z)(function*(Re,it){const Sn={method:"DELETE",headers:yield gs(Re)};try{const Ee=yield(yield fetch(`${ts(Re.appConfig)}/${it}`,Sn)).json();if(Ee.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(Zn){throw Pn.create("token-unsubscribe-failed",{errorInfo:Zn?.toString()})}})).apply(this,arguments)}function ts({projectId:Re}){return`https://fcmregistrations.googleapis.com/v1/projects/${Re}/registrations`}function gs(Re){return _i.apply(this,arguments)}function _i(){return(_i=(0,m.Z)(function*({appConfig:Re,installations:it}){const gn=yield it.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Re.apiKey,"x-goog-firebase-installations-auth":`FIS ${gn}`})})).apply(this,arguments)}function Pi({p256dh:Re,auth:it,endpoint:gn,vapidKey:Sn}){const Zn={web:{endpoint:gn,auth:it,p256dh:Re}};return Sn!==Et&&(Zn.web.applicationPubKey=Sn),Zn}const qs=6048e5;function Ki(Re){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(Re){const it=yield lr(Re.swRegistration,Re.vapidKey),gn={vapidKey:Re.vapidKey,swScope:Re.swRegistration.scope,endpoint:it.endpoint,auth:ze(it.getKey("auth")),p256dh:ze(it.getKey("p256dh"))},Sn=yield nt(Re.firebaseDependencies);if(Sn){if(Gr(Sn.subscriptionOptions,gn))return Date.now()>=Sn.createTime+qs?Ge(Re,{token:Sn.token,createTime:Date.now(),subscriptionOptions:gn}):Sn.token;try{yield Cn(Re.firebaseDependencies,Sn.token)}catch(Zn){console.warn(Zn)}return bt(Re.firebaseDependencies,gn)}return bt(Re.firebaseDependencies,gn)})).apply(this,arguments)}function zi(Re){return un.apply(this,arguments)}function un(){return(un=(0,m.Z)(function*(Re){const it=yield nt(Re.firebaseDependencies);it&&(yield Cn(Re.firebaseDependencies,it.token),yield Vn(Re.firebaseDependencies));const gn=yield Re.swRegistration.pushManager.getSubscription();return!gn||gn.unsubscribe()})).apply(this,arguments)}function Ge(Re,it){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,m.Z)(function*(Re,it){try{const gn=yield Di(Re.firebaseDependencies,it),Sn=Object.assign(Object.assign({},it),{token:gn,createTime:Date.now()});return yield qt(Re.firebaseDependencies,Sn),gn}catch(gn){throw yield zi(Re),gn}})).apply(this,arguments)}function bt(Re,it){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,m.Z)(function*(Re,it){const Sn={token:yield Xn(Re,it),createTime:Date.now(),subscriptionOptions:it};return yield qt(Re,Sn),Sn.token})).apply(this,arguments)}function lr(Re,it){return mr.apply(this,arguments)}function mr(){return(mr=(0,m.Z)(function*(Re,it){return(yield Re.pushManager.getSubscription())||Re.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dt(it)})})).apply(this,arguments)}function Gr(Re,it){return it.vapidKey===Re.vapidKey&&it.endpoint===Re.endpoint&&it.auth===Re.auth&&it.p256dh===Re.p256dh}function ni(Re){const it={from:Re.from,collapseKey:Re.collapse_key,messageId:Re.fcmMessageId};return function fn(Re,it){if(!it.notification)return;Re.notification={};const gn=it.notification.title;gn&&(Re.notification.title=gn);const Sn=it.notification.body;Sn&&(Re.notification.body=Sn);const Zn=it.notification.image;Zn&&(Re.notification.image=Zn);const Ee=it.notification.icon;Ee&&(Re.notification.icon=Ee)}(it,Re),function rn(Re,it){!it.data||(Re.data=it.data)}(it,Re),function Fn(Re,it){var gn,Sn,Zn,Ee,rt;if(!(it.fcmOptions||null!==(gn=it.notification)&&void 0!==gn&&gn.click_action))return;Re.fcmOptions={};const Wt=null!==(Zn=null===(Sn=it.fcmOptions)||void 0===Sn?void 0:Sn.link)&&void 0!==Zn?Zn:null===(Ee=it.notification)||void 0===Ee?void 0:Ee.click_action;Wt&&(Re.fcmOptions.link=Wt);const Bn=null===(rt=it.fcmOptions)||void 0===rt?void 0:rt.analytics_label;Bn&&(Re.fcmOptions.analyticsLabel=Bn)}(it,Re),it}function Fr(Re){return"object"==typeof Re&&!!Re&&we in Re}function Hr(Re,it){const gn=[];for(let Sn=0;Sn<Re.length;Sn++)gn.push(Re.charAt(Sn)),Sn<it.length&&gn.push(it.charAt(Sn));return gn.join("")}function Zi(Re){return Pn.create("missing-app-config-values",{valueName:Re})}Hr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Hr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Br{constructor(it,gn,Sn){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Zn=function oi(Re){if(!Re||!Re.options)throw Zi("App Configuration Object");if(!Re.name)throw Zi("App Name");const it=["projectId","apiKey","appId","messagingSenderId"],{options:gn}=Re;for(const Sn of it)if(!gn[Sn])throw Zi(Sn);return{appName:Re.name,projectId:gn.projectId,apiKey:gn.apiKey,appId:gn.appId,senderId:gn.messagingSenderId}}(it);this.firebaseDependencies={app:it,appConfig:Zn,installations:gn,analyticsProvider:Sn}}_delete(){return Promise.resolve()}}function ai(Re){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(Re){try{Re.swRegistration=yield navigator.serviceWorker.register(ht,{scope:Je}),Re.swRegistration.update().catch(()=>{})}catch(it){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:it?.message})}})).apply(this,arguments)}function ws(Re,it){return yr.apply(this,arguments)}function yr(){return(yr=(0,m.Z)(function*(Re,it){if(!it&&!Re.swRegistration&&(yield ai(Re)),it||!Re.swRegistration){if(!(it instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");Re.swRegistration=it}})).apply(this,arguments)}function Ms(Re,it){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,m.Z)(function*(Re,it){it?Re.vapidKey=it:Re.vapidKey||(Re.vapidKey=Et)})).apply(this,arguments)}function wt(){return(wt=(0,m.Z)(function*(Re,it){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield Ms(Re,it?.vapidKey),yield ws(Re,it?.serviceWorkerRegistration),Ki(Re)})).apply(this,arguments)}function pn(Re,it,gn){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,m.Z)(function*(Re,it,gn){const Sn=or(it);(yield Re.firebaseDependencies.analyticsProvider.get()).logEvent(Sn,{message_id:gn[we],message_name:gn[Fe],message_time:gn[sn],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function or(Re){switch(Re){case Yt.NOTIFICATION_CLICKED:return"notification_open";case Yt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function be(){return(be=(0,m.Z)(function*(Re,it){const gn=it.data;if(!gn.isFirebaseMessaging)return;Re.onMessageHandler&&gn.messageType===Yt.PUSH_RECEIVED&&("function"==typeof Re.onMessageHandler?Re.onMessageHandler(ni(gn)):Re.onMessageHandler.next(ni(gn)));const Sn=gn.data;Fr(Sn)&&"1"===Sn[$t]&&(yield pn(Re,gn.messageType,Sn))})).apply(this,arguments)}const ge="@firebase/messaging",ue=Re=>{const it=new Br(Re.getProvider("app").getImmediate(),Re.getProvider("installations-internal").getImmediate(),Re.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",gn=>function Ur(Re,it){return be.apply(this,arguments)}(it,gn)),it},G=Re=>{const it=Re.getProvider("messaging").getImmediate();return{getToken:Sn=>function Xt(Re,it){return wt.apply(this,arguments)}(it,Sn)}};function Ke(){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*(){try{yield(0,ct.eu)()}catch{return!1}return typeof window<"u"&&(0,ct.hl)()&&(0,ct.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function Hn(Re=(0,gt.getApp)()){return Ke().then(it=>{if(!it)throw Pn.create("unsupported-browser")},it=>{throw Pn.create("indexed-db-unsupported")}),(0,gt._getProvider)((0,ct.m9)(Re),"messaging").getImmediate()}!function le(){(0,gt._registerComponent)(new se.wA("messaging",ue,"PUBLIC")),(0,gt._registerComponent)(new se.wA("messaging-internal",G,"PRIVATE")),(0,gt.registerVersion)(ge,"0.12.0"),(0,gt.registerVersion)(ge,"0.12.0","esm2017")}()},4880:(Gn,Rt,Q)=>{Q.d(Rt,{sN:()=>At,Gb:()=>Ri});var m=Q(5861),de=Q(9681),se=Q(2090),st=Q(4859),ct=Q(1877);Q(2833);const ht="@firebase/remote-config",Ie="remote-config",Fe=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function At(un=(0,de.getApp)()){return un=(0,se.m9)(un),(0,de._getProvider)(un,Ie).getImmediate()}class qt{constructor(Ge,Mt,bt,Ln){this.client=Ge,this.storage=Mt,this.storageCache=bt,this.logger=Ln}isCachedDataFresh(Ge,Mt){if(!Mt)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const bt=Date.now()-Mt,Ln=bt<=Ge;return this.logger.debug(`Config fetch cache check. Cache age millis: ${bt}. Cache max age millis (minimumFetchIntervalMillis setting): ${Ge}. Is cache hit: ${Ln}.`),Ln}fetch(Ge){var Mt=this;return(0,m.Z)(function*(){const[bt,Ln]=yield Promise.all([Mt.storage.getLastSuccessfulFetchTimestampMillis(),Mt.storage.getLastSuccessfulFetchResponse()]);if(Ln&&Mt.isCachedDataFresh(Ge.cacheMaxAgeMillis,bt))return Ln;Ge.eTag=Ln&&Ln.eTag;const lr=yield Mt.client.fetch(Ge),mr=[Mt.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===lr.status&&mr.push(Mt.storage.setLastSuccessfulFetchResponse(lr)),yield Promise.all(mr),lr})()}}function Vt(un=navigator){return un.languages&&un.languages[0]||un.language}class Vn{constructor(Ge,Mt,bt,Ln,lr,mr){this.firebaseInstallations=Ge,this.sdkVersion=Mt,this.namespace=bt,this.projectId=Ln,this.apiKey=lr,this.appId=mr}fetch(Ge){var Mt=this;return(0,m.Z)(function*(){const[bt,Ln]=yield Promise.all([Mt.firebaseInstallations.getId(),Mt.firebaseInstallations.getToken()]),mr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Mt.projectId}/namespaces/${Mt.namespace}:fetch?key=${Mt.apiKey}`,Gr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Ge.eTag||"*"},ni={sdk_version:Mt.sdkVersion,app_instance_id:bt,app_instance_id_token:Ln,app_id:Mt.appId,language_code:Vt()},fn={method:"POST",headers:Gr,body:JSON.stringify(ni)},rn=fetch(mr,fn),Fn=new Promise((ai,Yn)=>{Ge.signal.addEventListener(()=>{const ws=new Error("The operation was aborted.");ws.name="AbortError",Yn(ws)})});let Fr;try{yield Promise.race([rn,Fn]),Fr=yield rn}catch(ai){let Yn="fetch-client-network";throw"AbortError"===ai?.name&&(Yn="fetch-timeout"),Fe.create(Yn,{originalErrorMessage:ai?.message})}let Hr=Fr.status;const oi=Fr.headers.get("ETag")||void 0;let Zi,Br;if(200===Fr.status){let ai;try{ai=yield Fr.json()}catch(Yn){throw Fe.create("fetch-client-parse",{originalErrorMessage:Yn?.message})}Zi=ai.entries,Br=ai.state}if("INSTANCE_STATE_UNSPECIFIED"===Br?Hr=500:"NO_CHANGE"===Br?Hr=304:("NO_TEMPLATE"===Br||"EMPTY_CONFIG"===Br)&&(Zi={}),304!==Hr&&200!==Hr)throw Fe.create("fetch-status",{httpStatus:Hr});return{status:Hr,eTag:oi,config:Zi}})()}}class Kn{constructor(Ge,Mt){this.client=Ge,this.storage=Mt}fetch(Ge){var Mt=this;return(0,m.Z)(function*(){const bt=(yield Mt.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Mt.attemptFetch(Ge,bt)})()}attemptFetch(Ge,{throttleEndTimeMillis:Mt,backoffCount:bt}){var Ln=this;return(0,m.Z)(function*(){yield function Nr(un,Ge){return new Promise((Mt,bt)=>{const Ln=Math.max(Ge-Date.now(),0),lr=setTimeout(Mt,Ln);un.addEventListener(()=>{clearTimeout(lr),bt(Fe.create("fetch-throttle",{throttleEndTimeMillis:Ge}))})})}(Ge.signal,Mt);try{const lr=yield Ln.client.fetch(Ge);return yield Ln.storage.deleteThrottleMetadata(),lr}catch(lr){if(!function Tr(un){if(!(un instanceof se.ZR&&un.customData))return!1;const Ge=Number(un.customData.httpStatus);return 429===Ge||500===Ge||503===Ge||504===Ge}(lr))throw lr;const mr={throttleEndTimeMillis:Date.now()+(0,se.$s)(bt),backoffCount:bt+1};return yield Ln.storage.setThrottleMetadata(mr),Ln.attemptFetch(Ge,mr)}})()}}class Lr{constructor(Ge,Mt,bt,Ln,lr){this.app=Ge,this._client=Mt,this._storageCache=bt,this._storage=Ln,this._logger=lr,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Di(un,Ge){const Mt=un.target.error||void 0;return Fe.create(Ge,{originalErrorMessage:Mt&&Mt?.message})}const ir="app_namespace_store";class gs{constructor(Ge,Mt,bt,Ln=function ts(){return new Promise((un,Ge)=>{try{const Mt=indexedDB.open("firebase_remote_config",1);Mt.onerror=bt=>{Ge(Di(bt,"storage-open"))},Mt.onsuccess=bt=>{un(bt.target.result)},Mt.onupgradeneeded=bt=>{0===bt.oldVersion&&bt.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(Mt){Ge(Fe.create("storage-open",{originalErrorMessage:Mt?.message}))}})}()){this.appId=Ge,this.appName=Mt,this.namespace=bt,this.openDbPromise=Ln}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Ge){return this.set("last_fetch_status",Ge)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Ge){return this.set("last_successful_fetch_timestamp_millis",Ge)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Ge){return this.set("last_successful_fetch_response",Ge)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Ge){return this.set("active_config",Ge)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Ge){return this.set("active_config_etag",Ge)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Ge){return this.set("throttle_metadata",Ge)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Ge){var Mt=this;return(0,m.Z)(function*(){const bt=yield Mt.openDbPromise;return new Promise((Ln,lr)=>{const Gr=bt.transaction([ir],"readonly").objectStore(ir),ni=Mt.createCompositeKey(Ge);try{const fn=Gr.get(ni);fn.onerror=rn=>{lr(Di(rn,"storage-get"))},fn.onsuccess=rn=>{const Fn=rn.target.result;Ln(Fn?Fn.value:void 0)}}catch(fn){lr(Fe.create("storage-get",{originalErrorMessage:fn?.message}))}})})()}set(Ge,Mt){var bt=this;return(0,m.Z)(function*(){const Ln=yield bt.openDbPromise;return new Promise((lr,mr)=>{const ni=Ln.transaction([ir],"readwrite").objectStore(ir),fn=bt.createCompositeKey(Ge);try{const rn=ni.put({compositeKey:fn,value:Mt});rn.onerror=Fn=>{mr(Di(Fn,"storage-set"))},rn.onsuccess=()=>{lr()}}catch(rn){mr(Fe.create("storage-set",{originalErrorMessage:rn?.message}))}})})()}delete(Ge){var Mt=this;return(0,m.Z)(function*(){const bt=yield Mt.openDbPromise;return new Promise((Ln,lr)=>{const Gr=bt.transaction([ir],"readwrite").objectStore(ir),ni=Mt.createCompositeKey(Ge);try{const fn=Gr.delete(ni);fn.onerror=rn=>{lr(Di(rn,"storage-delete"))},fn.onsuccess=()=>{Ln()}}catch(fn){lr(Fe.create("storage-delete",{originalErrorMessage:fn?.message}))}})})()}createCompositeKey(Ge){return[this.appId,this.appName,this.namespace,Ge].join()}}class _i{constructor(Ge){this.storage=Ge}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Ge=this;return(0,m.Z)(function*(){const Mt=Ge.storage.getLastFetchStatus(),bt=Ge.storage.getLastSuccessfulFetchTimestampMillis(),Ln=Ge.storage.getActiveConfig(),lr=yield Mt;lr&&(Ge.lastFetchStatus=lr);const mr=yield bt;mr&&(Ge.lastSuccessfulFetchTimestampMillis=mr);const Gr=yield Ln;Gr&&(Ge.activeConfig=Gr)})()}setLastFetchStatus(Ge){return this.lastFetchStatus=Ge,this.storage.setLastFetchStatus(Ge)}setLastSuccessfulFetchTimestampMillis(Ge){return this.lastSuccessfulFetchTimestampMillis=Ge,this.storage.setLastSuccessfulFetchTimestampMillis(Ge)}setActiveConfig(Ge){return this.activeConfig=Ge,this.storage.setActiveConfig(Ge)}}function Ri(){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Pi(){(0,de._registerComponent)(new st.wA(Ie,function un(Ge,{instanceIdentifier:Mt}){const bt=Ge.getProvider("app").getImmediate(),Ln=Ge.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fe.create("registration-window");if(!(0,se.hl)())throw Fe.create("indexed-db-unavailable");const{projectId:lr,apiKey:mr,appId:Gr}=bt.options;if(!lr)throw Fe.create("registration-project-id");if(!mr)throw Fe.create("registration-api-key");if(!Gr)throw Fe.create("registration-app-id");const ni=new gs(Gr,bt.name,Mt=Mt||"firebase"),fn=new _i(ni),rn=new ct.Yd(ht);rn.logLevel=ct.in.ERROR;const Fn=new Vn(Ln,de.SDK_VERSION,Mt,lr,mr,Gr),Fr=new Kn(Fn,ni),Hr=new qt(Fr,ni,fn,rn),oi=new Lr(bt,Hr,fn,ni,rn);return function Ot(un){const Ge=(0,se.m9)(un);Ge._initializePromise||(Ge._initializePromise=Ge._storageCache.loadFromStorage().then(()=>{Ge._isInitializationComplete=!0}))}(oi),oi},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(ht,"0.4.0"),(0,de.registerVersion)(ht,"0.4.0","esm2017")}()},8766:(Gn,Rt,Q)=>{Q.d(Rt,{Lj:()=>kt,X3:()=>Nt});var m=Q(5861);let se,st;const ht=new WeakMap,Je=new WeakMap,Et=new WeakMap,Ie=new WeakMap,we=new WeakMap;let $t={get(et,yt,Pe){if(et instanceof IDBTransaction){if("done"===yt)return Je.get(et);if("objectStoreNames"===yt)return et.objectStoreNames||Et.get(et);if("store"===yt)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return Dt(et[yt])},set:(et,yt,Pe)=>(et[yt]=Pe,!0),has:(et,yt)=>et instanceof IDBTransaction&&("done"===yt||"store"===yt)||yt in et};function ze(et){return"function"==typeof et?function Yt(et){return et!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function gt(){return st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(et)?function(...yt){return et.apply(At(this),yt),Dt(ht.get(this))}:function(...yt){return Dt(et.apply(At(this),yt))}:function(yt,...Pe){const Se=et.call(At(this),yt,...Pe);return Et.set(Se,yt.sort?yt.sort():[yt]),Dt(Se)}}(et):(et instanceof IDBTransaction&&function sn(et){if(Je.has(et))return;const yt=new Promise((Pe,Se)=>{const nt=()=>{et.removeEventListener("complete",We),et.removeEventListener("error",qt),et.removeEventListener("abort",qt)},We=()=>{Pe(),nt()},qt=()=>{Se(et.error||new DOMException("AbortError","AbortError")),nt()};et.addEventListener("complete",We),et.addEventListener("error",qt),et.addEventListener("abort",qt)});Je.set(et,yt)}(et),((et,yt)=>yt.some(Pe=>et instanceof Pe))(et,function ct(){return se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(et,$t):et)}function Dt(et){if(et instanceof IDBRequest)return function Fe(et){const yt=new Promise((Pe,Se)=>{const nt=()=>{et.removeEventListener("success",We),et.removeEventListener("error",qt)},We=()=>{Pe(Dt(et.result)),nt()},qt=()=>{Se(et.error),nt()};et.addEventListener("success",We),et.addEventListener("error",qt)});return yt.then(Pe=>{Pe instanceof IDBCursor&&ht.set(Pe,et)}).catch(()=>{}),we.set(yt,et),yt}(et);if(Ie.has(et))return Ie.get(et);const yt=ze(et);return yt!==et&&(Ie.set(et,yt),we.set(yt,et)),yt}const At=et=>we.get(et);function Nt(et,yt,{blocked:Pe,upgrade:Se,blocking:nt,terminated:We}={}){const qt=indexedDB.open(et,yt),Vt=Dt(qt);return Se&&qt.addEventListener("upgradeneeded",Vn=>{Se(Dt(qt.result),Vn.oldVersion,Vn.newVersion,Dt(qt.transaction))}),Pe&&qt.addEventListener("blocked",()=>Pe()),Vt.then(Vn=>{We&&Vn.addEventListener("close",()=>We()),nt&&Vn.addEventListener("versionchange",()=>nt())}).catch(()=>{}),Vt}function kt(et,{blocked:yt}={}){const Pe=indexedDB.deleteDatabase(et);return yt&&Pe.addEventListener("blocked",()=>yt()),Dt(Pe).then(()=>{})}const Ot=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],Qt=new Map;function Le(et,yt){if(!(et instanceof IDBDatabase)||yt in et||"string"!=typeof yt)return;if(Qt.get(yt))return Qt.get(yt);const Pe=yt.replace(/FromIndex$/,""),Se=yt!==Pe,nt=Pt.includes(Pe);if(!(Pe in(Se?IDBIndex:IDBObjectStore).prototype)||!nt&&!Ot.includes(Pe))return;const We=function(){var qt=(0,m.Z)(function*(Vt,...Vn){const Nr=this.transaction(Vt,nt?"readwrite":"readonly");let Tr=Nr.store;return Se&&(Tr=Tr.index(Vn.shift())),(yield Promise.all([Tr[Pe](...Vn),nt&&Nr.done]))[0]});return function(Vn){return qt.apply(this,arguments)}}();return Qt.set(yt,We),We}!function er(et){$t=et($t)}(et=>({...et,get:(yt,Pe,Se)=>Le(yt,Pe)||et.get(yt,Pe,Se),has:(yt,Pe)=>!!Le(yt,Pe)||et.has(yt,Pe)}))},5861:(Gn,Rt,Q)=>{function m(se,st,ct,gt,ht,Je,Et){try{var Ie=se[Je](Et),we=Ie.value}catch(Fe){return void ct(Fe)}Ie.done?st(we):Promise.resolve(we).then(gt,ht)}function de(se){return function(){var st=this,ct=arguments;return new Promise(function(gt,ht){var Je=se.apply(st,ct);function Et(we){m(Je,gt,ht,Et,Ie,"next",we)}function Ie(we){m(Je,gt,ht,Et,Ie,"throw",we)}Et(void 0)})}}Q.d(Rt,{Z:()=>de})}},Gn=>{Gn(Gn.s=286)}]);